<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê∑ üçõ üòâ Space is not as simple as it sounds. ‚õ¥Ô∏è üôçüèΩ üë©üèº‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone! As you already know, we at SE are engaged in text recognition (and not only) on different documents. Today we would like to talk about...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Space is not as simple as it sounds.</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smartengines/blog/501886/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello everyone! As you already know, we at SE are engaged in text recognition (and not only) on different documents. Today we would like to talk about another problem when recognizing text on complex backgrounds - about recognizing spaces. In general, we will talk about the name on bank cards, but first, an example with a ‚Äúghost‚Äù of the letter. As you can see, here, to the right of D, the distortions and background formed a fairly clear . Moreover, if you show this cell separately from everything else, the person (or neural network) will surely say that there is a letter.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/ho/rh/kshorhuhdresxo82etwfeop48r4.png" width="100%"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see in the picture, we are working on the original image with complex backgrounds, so our spaces are very diverse. </font><font style="vertical-align: inherit;">They come in patterns, logos, and sometimes text. </font><font style="vertical-align: inherit;">For example, VISA or MAESTRO on cards. </font><font style="vertical-align: inherit;">And we are interested in just such ‚Äúcomplex spaces‚Äù, and not just white rectangles. </font><font style="vertical-align: inherit;">And in our systems we consider precisely separately cut rectangles of symbols [1].</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And what is the difficulty?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A space is a symbol without special signs. </font><font style="vertical-align: inherit;">On complex backgrounds, such as in an image, a separately cut space can be difficult to distinguish even for a person.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ci/lm/py/cilmpyhfrtsmzgsqpve-lu7nuee.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the other hand, in essence, a space is different from other characters. </font><font style="vertical-align: inherit;">If ABIA is recognized in the name instead of ASIA, then there is a chance to fix it with post-processing. </font><font style="vertical-align: inherit;">But, if A IA arises there, it is unlikely that something will help.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methods not used by us</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Often spaces are filtered using statistics calculated from the image. </font><font style="vertical-align: inherit;">For example, consider the average absolute value of the gradient in the picture or the variance of the intensities of the pixels and divide the pictures into spaces and letters by the threshold value. </font><font style="vertical-align: inherit;">However, as can be seen from the graphs, such methods are not suitable for gray images with complex backgrounds. </font><font style="vertical-align: inherit;">And due to the explicit correlation of values, even a combination of these methods will not work.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0h/ex/kp/0hexkpogxaemkyw8nhv4cmtipsi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everyone‚Äôs favorite binarization will not help here either. </font><font style="vertical-align: inherit;">For example, in this picture:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3e/ul/mt/3eulmtd6rgxo3v2pt5gzpv1ithy.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, how can recognition be improved?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since a person needs an environment of a space in order to see him, it is logical for the network to show at least two neighboring characters. </font><font style="vertical-align: inherit;">We do not want to increase the input of the recognition network, which, in general, works well (and recognizes many gaps). </font><font style="vertical-align: inherit;">So we will get another network - simpler. </font><font style="vertical-align: inherit;">The new network will predict what is in the picture: two spaces, two letters, a space and a letter, or a letter and a space. </font><font style="vertical-align: inherit;">Accordingly, such a network is used in conjunction with a recognition network. </font><font style="vertical-align: inherit;">The image shows the architectures used: on the left is the architecture of the recognizing network, on the right is the architecture of the proposed network. </font><font style="vertical-align: inherit;">The recognition network operates on a picture with one character, and the new one works on a double-width picture containing two adjacent characters.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cw/lz/ns/cwlznsllpu9_hhfim166xkcq8x8.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A test?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For testing, we had 4320 lines with names containing 130,149 characters, of which 68,246 spaces. </font><font style="vertical-align: inherit;">For starters, we have two methods. </font><font style="vertical-align: inherit;">The basic method: we cut a string into characters and recognize each character individually. </font><font style="vertical-align: inherit;">New method: we also cut a string of characters, find all the spaces with a new network, and recognize the remaining characters as normal. </font><font style="vertical-align: inherit;">The table shows that the quality of recognition of spaces, as well as the overall quality, is growing, but the quality of recognition of letters is slightly sagging.</font></font><br>
<br>
<div class="scrollable-table"><table border="1">
<tbody>
<tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spaces</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Letters</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base method</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">93.6%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">99.8%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">96.5%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New method</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">94.3%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">99.6%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">96.8%</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, our core network also recognizes spaces (albeit worse than we would like). </font><font style="vertical-align: inherit;">And we can try to take advantage of this. </font><font style="vertical-align: inherit;">Let's look at the errors of both methods. </font><font style="vertical-align: inherit;">And also - on the quality of the new method based on basic errors and vice versa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the base method:</font></font><br>
<br>
<div class="scrollable-table"><table border="1">
<tbody>
<tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spaces</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Characters</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic Method Errors</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4392</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">141</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4533</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recognized by the new method</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">44.7%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">29.8%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">44.3%</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the new method:</font></font><br>
<br>
<div class="scrollable-table"><table border="1">
<tbody>
<tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spaces</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Characters</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic Method Errors</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3893</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">241</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4134</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recognized by the new method</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">37.6%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.9%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38.9%</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the last three tables it can be seen that to improve the system it is worth using a balanced combination of network ratings. </font><font style="vertical-align: inherit;">At the same time, character-by-character quality is interesting, but line-by-line is more interesting.</font></font><br>
<br>
<div class="scrollable-table"><table border="1">
<tbody>
<tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quality</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base method</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">96.39%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With a new network</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">96.46%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combination of methods</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">97.07%</font></font></td>
</tr>
</tbody>
</table></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Space - a big problem on the way to 100% quality of recognition of documents =) On the example of spaces it is clearly seen how important it is to look not only at individual characters, but also at their combinations. </font><font style="vertical-align: inherit;">However, do not immediately grab hold of heavy artillery and learn giant networks that process entire strings. </font><font style="vertical-align: inherit;">Sometimes just another small network is enough. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This post was made using materials from a report from the European Conference on Modeling ECMS 2015 (Bulgaria, Varna): Sheshkus, A. &amp; Arlazarov, VL (2015). </font><font style="vertical-align: inherit;">Space symbol detection on complex background using visual context.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List of sources used</font></font></b>
                        <div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. YS Chernyshova, AV Sheshkus and VV Arlazarov, ‚ÄúTwo-step CNN framework for text line recognition in camera-captured images,‚Äù IEEE Access, vol. </font><font style="vertical-align: inherit;">8, pp. </font><font style="vertical-align: inherit;">32587-32600, 2020, DOI: 10.1109 / ACCESS.2020.2974051.</font></font><br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501872/index.html">Place of study in cybernetic systems</a></li>
<li><a href="../en501874/index.html">Modern Front End Architectures (Part 2)</a></li>
<li><a href="../en501880/index.html">About the translation of "beginnings" and "beginnings" without begin, start and first</a></li>
<li><a href="../en501882/index.html">How we use computer vision algorithms: video processing in a mobile browser using OpenCV.js</a></li>
<li><a href="../en501884/index.html">How electronic medical information archives will help diagnose diseases more effectively</a></li>
<li><a href="../en501888/index.html">How to reduce the risks associated with ransomware ransomware</a></li>
<li><a href="../en501890/index.html">React Native - save photos and videos to the device gallery</a></li>
<li><a href="../en501892/index.html">Not My Left Leg: An Analysis of the Brain Structure of People with Xenomelia</a></li>
<li><a href="../en501894/index.html">RosCom Freedom invites to Privacy Day and Pandemic Hackathon</a></li>
<li><a href="../en501900/index.html">Is TDD effective?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>