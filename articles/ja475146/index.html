<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📚 🌽 🖼️ 1回のデータ復旧試行の苦痛または長い歴史 👶🏿 🛣️ 🚗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="庭では2019年でした。容量が9.1 GBのQUANTUM FIREBALL Plus KAドライブが私たちの研究室に届きましたが、これは私たちの時代にはあまり一般的ではありません。ドライブの所有者によると、この障害は2004年に電源装置の障害が原因で発生し、ハードドライブやその他のPCコンポーネン...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>1回のデータ復旧試行の苦痛または長い歴史</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475146/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">庭では2019年でした。容量が9.1 GBのQUANTUM FIREBALL Plus KAドライブが私たちの研究室に届きましたが、これは私たちの時代にはあまり一般的ではありません。ドライブの所有者によると、この障害は2004年に電源装置の障害が原因で発生し、ハードドライブやその他のPCコンポーネントが故障したとのことです。次に、ドライブを修復し、失敗したデータを復元しようとするさまざまなサービスのウォークスルーがありました。安いと約束したところ、問題は解決しなかったところ、高すぎてクライアントがデータを復元したくなかったところ、ドライブは多くのサービスセンターを通過しました。彼は何度か失われましたが、所有者がドライブにさまざまなステッカーから情報を記録するために事前に注意を払ったという事実のおかげで、彼は何とか達成することができましたそのため、一部のサービスセンターから返却されたのは彼のハードドライブです。回路は見過ごされず、元のコントローラーボードには複数のはんだトレースがあり、SMD要素の欠如も視覚的に感じられました（これを見ると、このドライブの問題の中で最も少ないと言えます）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ju/oa/mq/juoamqzpbrmmmvhxyc8-re0-j2m.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">1 HDD Quantum Fireball Plus KA 9.1GB</font></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私がしなければならなかった最初のことは、動作しているコントローラボードを備えたこのドライブのそのような古代の双子の兄弟のドナーアーカイブを検索することでした。</font><font style="vertical-align: inherit;">このクエストが完了すると、詳細な診断対策を実施できるようになりました。</font><font style="vertical-align: inherit;">モーターの巻線に短絡がないか確認し、短絡がないことを確認した後、ドライブ（ドナーからドライブ）に患者からボードを取り付けます。</font><font style="vertical-align: inherit;">シャフトが回転し、ファームウェアのロードによるキャリブレーションテストに合格し、インターフェイスからのコマンドに応答する準備ができていることをドライブがレジスターに記録するまでの通常の音を元に戻します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-h/57/vy/-h57vy6onwk8kkvcivdtq33ycie.png"></div> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">2 DRD DSCインジケータは、コマンドを受け入れる準備ができていることを示します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファームウェアモジュールのすべてのコピーを予約します。</font><font style="vertical-align: inherit;">ファームウェアモジュールの整合性をチェックします。</font><font style="vertical-align: inherit;">モジュールの読み取りには問題はありませんが、レポートを分析すると、奇妙な点があることがわかります。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/do/vc/c3/dovcc3pxy7yje_t9trkxk3twfd4.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">3.ゾーンテーブル。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゾーン分散テーブルに注目すると、シリンダー数が13845であることがわかります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jj/7a/bk/jj7abkkhaeb-43dxtov1u5ihdnw.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">4 Pリスト（一次リスト-製造サイクル中に導入された欠陥のリスト）。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
欠陥が少なすぎることとそのローカリゼーションに注目しています。</font><font style="vertical-align: inherit;">工場の欠陥隠蔽ログモジュール（60h）を見て、それが空であり、エントリが含まれていないことがわかりました。</font><font style="vertical-align: inherit;">これに基づいて、以前のサービスセンターの一部では、ドライブのサービスエリアでのいくつかの操作が行われた可能性があり、他の誰かのモジュールが誤ってまたは意図的に記録されたか、元の欠陥のリストがクリアされたと想定できます。</font><font style="vertical-align: inherit;">この仮定を検証するために、「セクターごとのコピーを作成する」オプションと「仮想トランスレーターを作成する」オプションを有効にして、Data Extractorでタスクを作成します。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3l/jd/hl/3ljdhluum6cv3dmilqwbsltk1lk.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">5タスクパラメータ。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクを作成した後、ゼロセクター（LBA 0）のパーティションテーブルのエントリを確認します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/jv/mt/gtjvmttab56tlxbz501caz8cpgk.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 6マスターブートレコードとパーティションテーブル。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
オフセット0x1BEには、単一のレコード（16バイト）があります。パーティション上のファイルシステムのタイプはNTFS、0x3F（63）セクターの先頭へのオフセット、パーティションのサイズは0x011309A3（18,024,867）セクターです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セクターエディターで、LBA 63を開きます。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/yk/fq/kwykfq8od37sp8g22wtvijdpx1m.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 7 NTFSブートセクターNTFSブートセクター</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の情報によると、ボリュームで受け入れられるセクターサイズは512バイト（ワード0x0200（512）はオフセット0x0Bに書き込まれます）、クラスター内のセクター数は8（バイト0x08はオフセット0x0Dに書き込まれます） 、クラスターサイズは512x8 = 4096バイトで、最初のMFTレコードはディスクの先頭から6,291,519セクターのオフセットにあります（オフセット0x30で、4倍のワード0x00 00 00 00 00 00 0C 00 00（786 432）は最初のMFTクラスターの番号です。 ：クラスター番号*クラスター内のセクター数+パーティションの開始前のオフセット786 432 * 8 + 63 = 6,291,519）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セクター6 291 519に進みます。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l7/yp/uy/l7ypuym-p2gflba2d5m49belsp8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">8</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
しかし、このセクターに含まれるデータは、MFTレコードとは完全に異なります。</font><font style="vertical-align: inherit;">これは、不正な欠陥リストが原因で不正なブロードキャストが発生する可能性があることを示していますが、この事実を証明するものではありません。</font><font style="vertical-align: inherit;">さらに検証するために、6,291,519セクターに対して両方向に10,000セクターでディスクを読み取ります。</font><font style="vertical-align: inherit;">そして、readで正規表現を検索します。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gx/sc/py/gxscpyil_-qwpvt8dtsjuoqkwda.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">9最初のMFTレコード</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
セクター6,291,551で、最初のMFTレコードを見つけます。</font><font style="vertical-align: inherit;">その位置は計算されたものと32セクター異なり、16個のレコード（0〜15）のグループが継続的に続きます。</font><font style="vertical-align: inherit;">シフトテーブルで、セクター6 291 519の位置を入力して、32セクターずつ前進します。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jc/vy/hb/jcvyhbxvibt7si5xcibgz-ysrbg.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">10</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
レコード番号16の位置はオフセット12 551 431でなければなりませんが、MFTを記録する代わりにゼロが見つかります。</font><font style="vertical-align: inherit;">周辺でも同様の検索を行います。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jd/dn/ni/jddnniazvuj5p8foynm9m_zpzjy.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">11レコードMFT 0x00000011（17）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
MFTの大きなフラグメントが検出され、17セクターのシフトで、レコード番号17から始まり、長さは53,646レコードです。</font><font style="vertical-align: inherit;">ポジション12 155 431の場合、シフトテーブルに+17セクターのシフトを入れます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空間におけるMFTフラグメントの位置を決定したので、これはランダムな障害のように見えず、誤ったオフセットによるMFTフラグメントの記録ではないと結論付けることができます。</font><font style="vertical-align: inherit;">不適切なトランスレータのバージョンは確認済みと見なすことができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
せん断点をさらに特定するために、可能な最大変位を設定します。これを行うために、最終的なNTFSパーティションマーカー（ブートセクターのコピー）のシフト量を決定します。図7のオフセット0x28では、4番目のワードは0x00 00 00 00 00 01 13 09 A2（18,024,866）セクターのパーティションサイズ値です。ディスクの最初からパーティション自体のオフセットをその長さに追加してみましょう。最終的なNTFSマーカーのオフセットを取得します18 024 866 + 63 = 18 024929。予想どおり、必要なブートセクターのコピーはありませんでした。付近を検索すると、MFTの最後のフラグメントと比較して+12セクターの増加するシフトで検出されました。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3f/lu/ha/3fluhair61nbqs6efqtncj0oily.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 12 NTFSブートセクター</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
のコピーこのセクションには関係がないため、オフセット18 041 006にあるブートセクターの別のコピーは</font><i><font style="vertical-align: inherit;">無視</font></i><font style="vertical-align: inherit;">してください。以前のイベントに基づいて、セクション内には、データを分割するブロードキャストで「浮上」した61のセクターが散在していることが確認されました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドライブ全体の読み取りを実行すると、34の未読セクターが発生します。残念ながら、それらすべてがPリストから削除された欠陥であることを確実に保証することは不可能ですが、場合によっては、ファイルではなくセクターに対して正確なシフトポイントを確実に決定できるため、それらの位置を考慮に入れてさらに分析することをお勧めします。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sx/k9/sl/sxk9sldygcuoslhlrbi1bzuu8po.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">13ディスク読み取り統計。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のタスクは、シフトのおおよその場所を確立することです（シフトが発生したファイルに正確）。</font><font style="vertical-align: inherit;">これを行うには、すべてのMFTレコードをスキャンして、ファイルの場所（ファイルのフラグメント）のチェーンを構築します。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/6n/-m/bi/6n-mbihfu_ej_y_ekagijttj7we.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">14ファイルまたはそのフラグメントの場所のチェーン。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ファイル間を移動する際に、予想されるファイルヘッダーの代わりに他のデータが存在する時点を探しており、目的のヘッダーが特定の正のシフトで検出されます。</font><font style="vertical-align: inherit;">そして、シフトポイントが洗練されたので、表に記入します。</font><font style="vertical-align: inherit;">ファイルがいっぱいになった結果、ファイルの99％以上が損傷を受けることはありません。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/on/ep/01/onep01nw4zpvpu_n3mfwruibbl8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 15ユーザーファイルのリスト（このスクリーンショットの公開についてクライアントから同意を得ています）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
個々のファイルでポイントシフトを確立するために、追加の作業を行うことができます。ファイル構造がわかっている場合は、それに関連しないデータの散在を見つけます。しかし、このタスクでは経済的に実現可能ではありませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS私は、このディスクを以前に手にした同僚にもアピールしたいと思います。デバイスのファームウェアで作業するときは注意してください。変更する前にサービスデータを予約してください。また、作業のパフォーマンスについてクライアントに同意できない場合は、意図的に問題を悪化させないでください。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次の投稿：ハードドライブの自己診断とデータ復旧</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前の投稿：マッチの保存またはSeagate ST3000NC002-1DY166グレーティングHDDからのデータの回復</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja475134/index.html">ハイテク詐欺の別の方法</a></li>
<li><a href="../ja475138/index.html">Raspberry Piを有益に使用する5つの方法 二部</a></li>
<li><a href="../ja475140/index.html">トップ物理学者が弱い量子測定を疑似科学と考える理由</a></li>
<li><a href="../ja475142/index.html">睡眠、リラクゼーション、音楽：プロのアスリートがどのように疲労を克服し、それに対して何ができるか</a></li>
<li><a href="../ja475144/index.html">Laravelをコンポーネントに分割する</a></li>
<li><a href="../ja475152/index.html">偽善のグーグル。PageSpeed Insights</a></li>
<li><a href="../ja475154/index.html">IPEYEクラウド監視サービスによる社内タイムラプス</a></li>
<li><a href="../ja475158/index.html">Playme P570モノレビュー：要点</a></li>
<li><a href="../ja475162/index.html">Xマクロを最新のC ++コードで使用する</a></li>
<li><a href="../ja475164/index.html">議論：インターネットはオープンソースに依存しています-批評家はどんな議論を持っていますか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>