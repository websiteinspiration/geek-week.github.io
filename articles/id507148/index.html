<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘²ğŸ½ ğŸŒï¸ ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ¼ Kirim tautan ajaib menggunakan Node.js â° ğŸ’µ ğŸ¤¾ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebuah terjemahan dari artikel itu dipersiapkan menjelang peluncuran Pengembang Node.js saja .
 
 
 Metode memasukkan aplikasi yang paling populer ada...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kirim tautan ajaib menggunakan Node.js</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/507148/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebuah terjemahan dari artikel itu dipersiapkan menjelang peluncuran </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengembang Node.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saja </font><font style="vertical-align: inherit;">.</font></font></b></i><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Metode memasukkan aplikasi yang paling populer adalah memberikan nama pengguna dan kata sandi, tetapi pengguna dapat menemukan kelemahan tertentu dalam hal ini. </font><font style="vertical-align: inherit;">Meskipun ada banyak pengelola kata sandi, menggunakannya membutuhkan waktu. </font><font style="vertical-align: inherit;">Tidak banyak, tapi tetap saja. </font><font style="vertical-align: inherit;">Beberapa aplikasi mempromosikan kebijakan kata sandi yang rumit dan mengecewakan, sehingga membuat kata sandi baru bisa sulit. </font><font style="vertical-align: inherit;">Sistem tanpa kata sandi dapat menjadi alternatif yang baik untuk otentikasi konvensional dengan login dan kata sandi. </font><font style="vertical-align: inherit;">Ini digunakan oleh Slack dan FramerX, dan sepertinya mengirim tautan ajaib ke pengguna untuk mengaktifkan otentikasi seperti itu dalam aplikasi. </font><font style="vertical-align: inherit;">Sistem tanpa kata sandi berfungsi sebagai berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengguna mengunjungi aplikasi, di mana ada formulir untuk memasukkan alamat email;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengguna memasukkan alamat email dan menekan tombol konfirmasi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan ajaib untuk memasuki sistem dikirim ke email pengguna;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengguna mengklik tautan dan diarahkan ke aplikasi di mana ia telah masuk.</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, tautan ajaib tidak lagi valid. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah ini kita akan melihat beberapa poin kunci untuk menerapkan otorisasi tanpa kata sandi di Node.js.</font></font><a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita buat </font><font style="vertical-align: inherit;">aplikasi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ekspres</font></font></a><font style="vertical-align: inherit;"></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pertama, kita perlu membuat aplikasi ekspres sederhana dan menambahkan beberapa titik akhir. </font><font style="vertical-align: inherit;">Kode di bawah ini bertanggung jawab untuk menyiapkan server ekspres dengan pembantu untuk mem- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parsing permintaan masuk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">masuk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan menambahkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Kita perlu membuat dua direktori yang akan kita tambahkan penanganannya nanti. </font><font style="vertical-align: inherit;">Itu akan </font></font><code>/login</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>/account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Penangan pertama akan bertanggung jawab untuk mengirimkan tautan ajaib ke pengguna, dan yang kedua - untuk otentikasi mereka. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qt/3e/po/qt3epo1etknmhkp3rpijaekmexs.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server.ts</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasikan nodemailer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menggunakan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nodemailer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk mengirim email, tetapi Anda harus mengonfigurasinya terlebih dahulu. </font><font style="vertical-align: inherit;">Kami membutuhkan beberapa komponen: alamat email, kata sandi email, host server SMTP, dan port server SMTP. </font><font style="vertical-align: inherit;">Kami juga akan membutuhkan templat surat, yang akan kami kirimkan kepada pengguna dengan tautan ajaib. </font><font style="vertical-align: inherit;">Templat bisa berupa string atau halaman HTML.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vo/dc/r0/vodcr0nsmdbrvqdxnazj02mg1ew.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembuatan Token</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Untuk ini, kita akan menggunakan paket </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jsonwebtoken</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang secara keseluruhan akan melakukan segalanya untuk kita. </font><font style="vertical-align: inherit;">Token kami akan terdiri dari dua properti: alamat email dan waktu kedaluwarsa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e0/x4/bm/e0x4bm02olp4xkoxn-vstcoxqkw.png"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">token.ts</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengiriman email</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita perlu menambahkan pengendali login, di mana kita pertama-tama akan memverifikasi bahwa permintaan tersebut berisi alamat email pengguna, kemudian menghasilkan token baru untuk pengguna khusus ini dan, akhirnya, menggunakan mekanisme yang dijelaskan dalam kode di atas untuk mengirim email.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/pf/yq/s8pfyqtbzuffdnumv4axfrl8tbc.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otentikasi pengguna</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika pengguna masuk ke sistem, kami perlu mengesahkan permintaannya ke server kami. </font><font style="vertical-align: inherit;">Untuk melakukan ini, lakukan hal berikut:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Periksa apakah ada header otorisasi dalam permintaan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verifikasi bahwa header otorisasi adalah </font></font><code>bearer token</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobalah untuk memecahkan kode token ini;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pastikan token memiliki semua bidang yang diperlukan. </font><font style="vertical-align: inherit;">Dalam kasus kami: </font></font><code>email</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>expiration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bandingkan tanggal dan waktu dari kedaluwarsa dengan yang saat ini untuk memverifikasi bahwa token belum kedaluwarsa.</font></font></li>
<li>, ,     ,   , .</li>
</ol><br>
<br>
<img src="https://habrastorage.org/webt/dl/d5/r-/dld5r-jbbmywnwgbdkcapab7cdc.png"><br>
<br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut pengaturan dasar untuk login tanpa kata sandi di atas aliran otorisasi normal. Keuntungan terbesar yang saya lihat dalam pendekatan ini adalah jika pengguna dapat masuk ke suatu produk lebih cepat dan lebih mudah, pengalaman mereka dalam menggunakan produk akan meningkat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sisi lain, bahkan jika masuk ke sistem bisa lebih mudah daripada dengan login / kata sandi biasa, maka kembali ke sistem bisa lebih sulit. Setiap kali pengguna masuk, ia harus menunggu email, memeriksa kotak masuknya dan mengklik tautannya. Proses ini juga dapat menjadi tidak menyenangkan, jadi jika sesi memiliki periode waktu singkat atau diharapkan pengguna akan sering masuk ke sistem, maka otorisasi tanpa kata sandi mungkin bukan pilihan terbaik.</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   .</a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id507116/index.html">"Udalenka". Catatan dari pengembang kantor kemarin. Bagian 2</a></li>
<li><a href="../id507124/index.html">PDB bukan hanya bulu yang berharga</a></li>
<li><a href="../id507132/index.html">Vladimir Kitov: "Tidak mungkin untuk memahami bagaimana para ilmuwan perintis meramalkan komputerisasi universal pada 1950-an!"</a></li>
<li><a href="../id507138/index.html">Geologi Abad 21 sebagai Ilmu Data Bumi</a></li>
<li><a href="../id507146/index.html">Jendela multi-warna: konstruktor virtual, CRTP, dan template rumit</a></li>
<li><a href="../id507150/index.html">Kami menggambar gambar interferensi dalam JavaScript</a></li>
<li><a href="../ja451092/index.html">ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ŒRemember Everyoneã€ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢å®Ÿè£…ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã«ã—ãŸçµŒé¨“</a></li>
<li><a href="../ja451098/index.html">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚µãƒ³ãƒ—ãƒ«ã®å…¥æ‰‹å…ˆï¼š9ã¤ã®ãƒ†ãƒ¼ãƒåˆ¥ãƒªã‚½ãƒ¼ã‚¹ã®é¸æŠ</a></li>
<li><a href="../ja451104/index.html">è¨˜äº‹ã‚’èª­ã‚€ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼æ‹¡å¼µæ©Ÿèƒ½ï¼šMicrosoft Azureã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸéŸ³å£°</a></li>
<li><a href="../ja451110/index.html">è­¦å ±éŸ³</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>