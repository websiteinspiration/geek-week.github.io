<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😒 ◼️ 🏺 Cara memindai seluruh Internet 🧒🏽 👩‍❤️‍💋‍👨 🍫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seluruh rentang alamat IPv4 adalah 4 miliar alamat IP. Ini sepertinya jumlah yang besar, tetapi seluruh Internet IPv4 dapat sepenuhnya dipindai untuk ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cara memindai seluruh Internet</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/499750/"><img src="https://habrastorage.org/webt/el/co/px/elcopxpoohabrp6fvgfwqu5rdgu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seluruh rentang alamat IPv4 adalah 4 miliar alamat IP. Ini sepertinya jumlah yang besar, tetapi seluruh Internet IPv4 dapat sepenuhnya dipindai untuk satu port TCP </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam 40 menit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , misalnya, untuk menemukan semua server web di dunia atau semua port SSH yang terbuka. Dalam hal ini, satu server dan saluran gigabit sudah cukup. Ini berguna untuk penelitian, misalnya, jika Anda mengumpulkan statistik tentang teknologi yang digunakan di dunia, atau memperkirakan persentase layanan rentan yang terbuka ke luar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zmap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(jangan bingung dengan nmap) memungkinkan Anda untuk memindai rentang jaringan yang sangat besar jauh lebih cepat daripada pemindai apa pun karena arsitektur khusus. </font><font style="vertical-align: inherit;">Pada artikel ini, kita akan melihat contoh bagaimana mengkompilasi daftar semua server web di dunia menggunakan zmap. </font><font style="vertical-align: inherit;">Memiliki daftar host dengan port HTTP terbuka, Anda sudah dapat menggunakan pemindai yang lebih cerdas, memberikannya daftar target yang akurat.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa itu nmap buruk?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memindai subnet kecil, Nmap biasanya digunakan - multitool open source yang populer dengan banyak roti Pentester di dalamnya. Ini sangat cocok untuk memindai rentang kecil dan host selektif. Nmap memiliki mesin sendiri untuk menulis skrip khusus dalam lua (Nmap Script Engine) dan banyak skrip siap pakai yang keren. Tetapi nmap tidak cocok untuk memindai jaringan besar, seperti jutaan atau bahkan miliaran alamat. Tugas semacam itu akan memakan waktu beberapa hari atau bahkan berminggu-minggu. Faktanya adalah bahwa nmap menggunakan subsistem jaringan dari sistem operasi dan soket penuh dibuka untuk setiap permintaan. Anda tidak dapat melakukannya tanpa itu untuk koneksi TCP penuh ketika Anda perlu mengobrol dengan layanan, misalnya, membuat permintaan GET ke server web. Tapi ini sangat mengurangi kinerja ketika pemindaian SYN cepat diperlukan,di mana tugasnya hanya untuk mengetahui apakah port terbuka.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zmap dan Masscan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Scanner asinkron Zmap dan Masscan lebih cocok untuk kita: keduanya bekerja lebih cepat, menggunakan driver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PF_RING</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (soket yang secara signifikan mempercepat penangkapan paket) dan mengacak alamat untuk menghindari DoS yang mematikan. </font><font style="vertical-align: inherit;">Tidak seperti Nmap, mereka tidak menggunakan sistem TCP / IP: yang pertama menghasilkan frame Ethernet telanjang, yang kedua menggunakan tumpukan TCP yang ditulis sendiri.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masscan dianggap sebagai pemindai Internet tercepat yang dapat melewati seluruh rentang IPv4 dalam enam menit, tetapi hanya dengan beberapa adapter fisik yang terhubung secara paralel, lalu lintas keluar dengan paket SYN dihasilkan dari satu, dan jawaban datang ke yang lain. Dalam kondisi koneksi tunggal, Zmap yang dimodifikasi hampir satu setengah kali lebih cepat. Catatan-catatan ini, tentu saja, ditempatkan di atas besi pada saluran 10 Gbit / s, dan akan sulit dan mahal untuk mengulanginya sendiri. Pada koneksi gigabit yang jauh lebih terjangkau, Zmap juga bekerja lebih cepat daripada Masscan karena penggunaan sumber daya saluran dan CPU yang lebih efisien dan dapat diselesaikan dalam waktu sekitar 45-50 menit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/fz/jb/gefzjbxxkce6p47gclddui5o-1e.png"><br>
<font color="999999"><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alur kerja yang disederhanakan dari Zmap dan Masscan. Generator traffic keluar dan prosesor respons yang masuk bekerja secara terpisah</font></font></sup></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tanpa membahas detail teknis, Zmap dan Masscan menggunakan dua entitas: generator lalu lintas keluar yang berisi permintaan SYN dan prosesor respons masuk yang terpisah. </font><font style="vertical-align: inherit;">Kinerja di sini hanya dibatasi oleh lebar saluran dan kinerja antarmuka jaringan, yaitu batas PPS (paket per detik). </font><font style="vertical-align: inherit;">Oleh karena itu, proses pemindaian dapat dibagi menjadi beberapa antarmuka atau bahkan beberapa host fisik, jika dimungkinkan untuk mengganti Source IP dengan alamat dari packet handler yang masuk.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pindai Persiapan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harus diingat bahwa pemindai memuat sistem dan khususnya antarmuka jaringan, memanfaatkan seluruh saluran yang tersedia. Jika Anda mulai memindai tanpa memperingatkan tuan rumah, itu akan terlihat seperti DDoS dan Anda kemungkinan besar akan terputus dari jaringan dengan sangat cepat. Anda juga harus siap bahwa pemindaian seluruh Internet akan memancing respons - mereka akan mulai mengeluh tentang Anda. Artinya, tuan rumah akan menerima banyak surat otomatis yang mengeluh "Anda memindai kami." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi sebelum memulai proyek Anda, sebaiknya siapkan:</font></font><br>
<br>
<ul>
<li><b>    </b> —             ( -     ). ,          .        .</li>
<li><b> PTR-</b> —        ,      .   ,   ,  . ,   PTR   IP-,     , - :<br>
 <code>scanner-for-educational-project.ivan-ivanov.com</code></li>
<li><b>   User-Agent</b> —       - HTTP-,     User-Agent,      .       ,   .</li>
<li><b>  </b> —      ,       .     . </li>
</ul><br>
<h2>NAT,   </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penting untuk dipahami bahwa zmap menghasilkan jutaan permintaan TCP pada saat yang sama. </font><font style="vertical-align: inherit;">Jika router dengan NAT, firewall dengan pelacakan koneksi, perlindungan DDoS, atau sistem lain dengan firewall stateful mencoba melacak koneksi diinstal antara Internet dan server pemindaian, itu akan rusak karena tidak dapat mencerna begitu banyak koneksi. </font><font style="vertical-align: inherit;">Oleh karena itu, Anda tidak dapat menjalankan zmap saat berada di NAT, misalnya, di belakang router WiFi rumah.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mencoba Zmap</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instal Zmap ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instruksi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tes pada sesuatu yang sederhana, lihat server web tetangga dari habr.com:</font></font><br>
<br>
<pre><code class="bash hljs">$ zmap -p 80 178.248.237.0/24 -B 100M -o habr.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pilihan:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-p 80</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - TCP port 80, artinya, kami hanya mencari server HTTP</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">178.248.237.0/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah kisaran target alamat. </font><font style="vertical-align: inherit;">Jika Anda tidak menentukannya, seluruh Internet akan dipindai.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-B 100M</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - lebar saluran maksimum yang digunakan oleh zmap. </font><font style="vertical-align: inherit;">Jika opsi ini tidak ditentukan, seluruh saluran yang tersedia akan dibuang.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-o habr.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tulis hasilnya ke file teks. </font><font style="vertical-align: inherit;">Ini akan mendapatkan alamat yang menjawab permintaan, yaitu, di mana ada server HTTP</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/at/ip/r7/atipr7puts2n4o9n0ravsjti4s0.png"><br>
<font color="999999"><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memindai 254 alamat dengan zmap memerlukan beberapa detik</font></font></sup></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format output Zmap</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, zmap hanya menambahkan alamat yang ditemukan ke file teks, memisahkannya dengan jeda baris. </font><font style="vertical-align: inherit;">Tetapi juga dapat menulis hasil dalam format json dan xml. </font><font style="vertical-align: inherit;">Opsi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--output-fields</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memungkinkan Anda untuk menentukan bidang tambahan yang akan ditambahkan ke output. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita coba misalnya format output yang lebih maju di json, yang menunjukkan port tempat permintaan respons dan TTL paket datang:</font></font><br>
<br>
<pre><code class="bash hljs">$ zmap -p80  --output-module=json --output-fields=ttl,sport,dport,saddr 178.248.237.68 -o habr.com.json<font></font>
<font></font>
<span class="hljs-comment">#  </span><font></font>
$ cat habr.com.json<font></font>
{ <span class="hljs-string">"ttl"</span>: 58, <span class="hljs-string">"sport"</span>: 80, <span class="hljs-string">"dport"</span>: 51309, <span class="hljs-string">"saddr"</span>: <span class="hljs-string">"178.248.237.68"</span> }
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pindai seluruh Internet!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mencoba menjalankan pemindaian pada VPS, dan setelah beberapa menit saya dilarang dengan persyaratan untuk memeriksa server untuk virus. </font><font style="vertical-align: inherit;">Ini cukup logis, karena pemindaian seperti itu tampak seperti DDoS dari host. </font><font style="vertical-align: inherit;">Tetapi setelah membahas tugas saya dengan dukungan, saya ditawari untuk mengambil server khusus dan memindai di situ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginilah pemindaian pada antarmuka 200Mbit / s, waktu yang diperkirakan sekitar enam jam: </font></font><br>
<img src="https://habrastorage.org/webt/-d/no/k2/-dnok2gjfb79j9svvcocytliin8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan dengan saluran 100 Mbit / s, seluruh Internet dapat dipindai semalam.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang harus dilakukan selanjutnya?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita dapat mengetahui berapa banyak alamat dunia yang mendengarkan pada port 80 dan mengumpulkan daftar mereka. </font><font style="vertical-align: inherit;">Itu dapat dikirim ke pemindai L7 untuk menganalisis lapisan aplikasi untuk kerentanan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, dapatkan Judul HTML dari semua server web di dunia menggunakan nmap. </font><font style="vertical-align: inherit;">Untuk input nmap, kami mentransfer file yang diterima dari zmap dalam format yang biasa:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ nmap -sV -p 80 -v -n  --script http-title  -iL habr.txt<font></font>
</code></pre><br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id499728/index.html">Pekerjaan di Google. Dari Ukraina ke Lembah Silikon</a></li>
<li><a href="../id499736/index.html">Apa yang diajarkan di Magister Rekayasa Perangkat Lunak di St. Petersburg HSE</a></li>
<li><a href="../id499740/index.html">"Kebocoran" dari basis spesialis Habr Karir</a></li>
<li><a href="../id499742/index.html">Jenis Penolakan Layanan: Bagaimana Kemajuan DDoS</a></li>
<li><a href="../id499744/index.html">Cloud Security Alarm Security Hub</a></li>
<li><a href="../id499752/index.html">Kapan semua orang akan naik mobil listrik?</a></li>
<li><a href="../id499754/index.html">Jalan-jalan kota beku dalam mode darurat: saatnya untuk menghidupkan kembali kota dari perancang</a></li>
<li><a href="../id499756/index.html">Berapa detik yang harus dimuat situs web pada tahun 2020, apa itu "cepat", dan di mana mirror dalam elevator?</a></li>
<li><a href="../id499758/index.html">Pola arsitektur yang nyaman</a></li>
<li><a href="../id499762/index.html">Tingkatkan keterampilan Anda di DevSecOps: 5 webinar dengan teori dan praktik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>