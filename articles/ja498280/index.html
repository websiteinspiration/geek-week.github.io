<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☦️ 🙍 🏽 フェニックス属のドードー鳥の物語。ドードー大崩壊IS 🍗 🔖 🤜🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="毎年4月21日、2018年のDodoの大崩壊の歴史を思い出します。過去は残酷ですが公平な教師です。それを思い出し、レッスンを繰り返し、蓄積された知識を新しい世代に伝え、私たちがなった人たちに感謝の気持ちで接することは価値があります。カットの下では、それがどうだったかについてのストーリーを伝え、結論を...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>フェニックス属のドードー鳥の物語。ドードー大崩壊IS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/498280/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">毎年4月21日、2018年のDodoの大崩壊の歴史を思い出します。</font><font style="vertical-align: inherit;">過去は残酷ですが公平な教師です。</font><font style="vertical-align: inherit;">それを思い出し、レッスンを繰り返し、蓄積された知識を新しい世代に伝え、私たちがなった人たちに感謝の気持ちで接することは価値があります。</font><font style="vertical-align: inherit;">カットの下では、それがどうだったかについてのストーリーを伝え、結論を共有したいと思います。</font><font style="vertical-align: inherit;">そんな状況を敵に望むことすらできない。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sy/r0/jj/syr0jjrgnwuubuusucjvag6ot-o.png"><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大秋の歴史</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1日目。数百万ルーブルの費用が発生した事故</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2018年4月21日土曜日、Dodo ISシステムが落ちました。ひどく落ちた。数時間の間、お客様はサイトからもモバイルアプリケーションからも注文できませんでした。コールセンターへの通話が増え、留守番電話の自動音声で「4時間後に折り返しご連絡いたします」とのこと。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ek/ha/ac/ekhaac2m8owflsjdblpfmnksux8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その日、私たちはドードーISの最も深刻な転倒の1つを経験しました。最悪なのは、1億ルーブルの予算で最初の連邦テレビ広告キャンペーンを開始する前日のことです。 Dodo Pizzaにとって素晴らしいイベントでした。 ITチームはキャンペーンにも十分に備えていました。導入を自動化および簡略化しました。TeamCityの1つのボタンを使用して、12か国にモノリスを導入できました。私たちは可能なすべてのことをしなかったので、失敗しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
広告キャンペーンは素晴らしかった。 1分あたり100〜150件の注文を受けました。それは朗報でした。悪いニュース：Dodo ISはそのような負荷に耐えることができず、亡くなりました。垂直スケーリングの制限に達し、注文を処理できなくなりました。システムは約3時間不安定で、定期的に回復しましたが、すぐに再び落ちました。 1分間のダウンタイムにより、数万ルーブルの費用がかかりました。怒っている顧客からの尊敬の喪失は数えられません。開発チームは全員を失望させました：顧客、パートナー、ピザ屋の人々、そしてコールセンター。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nu/te/kw/nutekwrugivxr0ns__zlnzxo74a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状況を正すために、袖をまくって座るしかない。日曜日（4月22日）以降、ハードモードで作業したため、ミスをする権利はありませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、そのような状況で自分自身を見つける方法と、後でそれから抜け出す方法についての経験の要約です。</font><font style="vertical-align: inherit;">友よ、私たちの過ちを犯さないでください。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドミノ効果を開始した2つの失敗</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてがどのように始まったのか、どこで失敗したのかから始める価値があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/qh/yy/_hqhyy80kusheiqap3xwfchwjvk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2018年4月21日土曜日の午後5時頃、データベースのロックの数が増加し始めていることに気付きました。これは問題の前兆です。</font><font style="vertical-align: inherit;">これらのロックがどこから発生しているのか理解しているので、解決する準備ができたRunbookがありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Runbookが2回失敗した後、すべてが失敗しました。</font><font style="vertical-align: inherit;">数分間、基地は通常に戻り、その後再びロックが詰まり始めました。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残念ながら、マスターデータベースのrollback_on_timeoutには600秒ありました。これが、すべてのロックが蓄積されていた理由です。</font><font style="vertical-align: inherit;">これは、このストーリーの最初の重要なファイルです。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単な設定ですべてを節約できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、システムをさまざまな方法で復活させる試みがありましたが、どれも成功しませんでした。</font><font style="vertical-align: inherit;">モバイルアプリケーションと新しいサイトで注文を受け取る方法に違いがあることに気づくまで。</font><font style="vertical-align: inherit;">それらを順番に切り詰めることで、古い受注スキームのどこに穴があるのか​​を理解することができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注文受付システムはずっと前に書かれました。</font><font style="vertical-align: inherit;">当時はすでに処理されていて、新しいサイトdodopizza.ruで公開されていました。</font><font style="vertical-align: inherit;">モバイルアプリケーションでは使用されませんでした。</font><font style="vertical-align: inherit;">当初、新しい順序付けスキームを作成する理由は、純粋にビジネスルールに関連しており、パフォーマンスの問題は議題にさえありませんでした。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは2番目に重要なファイルです。システムの限界を知りませんでした。</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2日目：事故撲滅 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チームの反応は非常に明白でした。サービスステーションがSlackに投稿し、翌日全員が来ました。4月22日の午前8時30分に作業が始まりました。誰も説得したり、休日に来るように頼んだりする必要はありませんでした。誰もがすべてを理解しました。テスト、クエリの最適化、インフラストラクチャにおいて、彼の手で頭でサポート、支援する必要のあるもの。家族全員で来た人もいます！ ITに関係のない近隣のチームのスタッフが食べ物を持ってオフィスにやってきて、万が一に備えてコールセンターが追加の力をもたらしました。すべてのチームが1つの目標に団結-上昇する！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4u/sv/nt/4usvntb_mitqlbh7sya9rltxoqq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4月22日日曜日の注文の新たな受付が主な目標でした。注文のピークは土曜日に匹敵すると理解しました。最も厳しい締め切りがありました。17時になると、新しい注文が次々と落ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この日は、21日目の前夜にシステムを立ち上げて何が起こっているのかを理解していた「落ちないようにする」という計画に従って行動しました。</font><font style="vertical-align: inherit;">計画は条件付きで2つの部分に分けられました。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モバイルアプリケーションでの新しい注文によるスキームの実装。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注文作成プロセスの最適化。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらを実装することで、Dodo ISが落ちないことが確実になります。 </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕事と仕事の最前線を決める</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モバイルアプリケーションでの新しい注文によるスキームの実装が最優先事項でした。スキーム全体の正確な数はありませんでしたが、データベースへのクエリの数と質によっては、生産性が向上することを専門的に理解しています。 15人のチームが毎日このタスクに取り組みました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には新しい注文スキームの導入ですが、04.21の秋の前に開始しました。しかし、取引は完了しませんでした。まだアクティブなバグがあり、タスクはセミアクティブ状態でハングしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チームは回帰を部分に分けました：2つのモバイルプラットフォームからの回帰とピザ屋の管理。テストピッツェリアを準備するために手動で多くの時間を費やしましたが、明確な分離は手動回帰の並列化に役立ちました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかの変更が導入されるとすぐに、それは運用前環境にすぐに展開され、即座にテストされました。チームはいつもお互いに連絡を取り合っており、彼らは本当にたまり場のある広い部屋に座っていました。ニジニノヴゴロドとスィクティフカルの男たちも常に連絡を取っていました。プラグがあった場合、彼はすぐに決めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、新しい機能を徐々に導入します：1ピッツェリア、5ピッツェリア、10ピッツェリア、20ピッツェリアなど、徐々にネットワーク全体に適用します。その時、私たちはもっと断固として行動する必要がありました。時間がありませんでした-午後5時に新しいピークが始まりました。それを逃さずにはいられなかった。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
15:00頃に、更新はネットワークの半分にロールアウトされました（これは約200のピザ屋です）。 15:30に、すべてが正常に機能していることを確認し、ネットワーク全体をオンにしました。機能の切り替え、迅速な展開、部分に分割された回帰、および修正されたAPIは、これらすべてを行うのに役立ちました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チームの他のメンバーは、オーダーを作成するときにさまざまな最適化オプションを扱いました。新しいスキームはまったく新しいものではなく、レガシー部分を使用していました。住所の保存、プロモーションコードの適用、注文番号の生成-これらのパーツは今も昔も一般的でした。それらの最適化は、SQLクエリ自体を書き換えるか、コードからそれらを取り除くか、または呼び出しを最適化するために削減されました。何かが非同期モードになりました。結局のところ、何かが1回ではなく数回呼び出されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インフラストラクチャチームは、負荷を超えないように、コンポーネントの一部を個別のインスタンスに割り当てることを約束しました。</font><font style="vertical-align: inherit;">私たちの主な問題のコンポーネントは、レガシーベースに行くレガシーファサードでした。</font><font style="vertical-align: inherit;">インスタンスの分割を含むすべての作業は彼に捧げられました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセスを整理する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
午前中、私たちはその日の唯一の同期を持っていて、チームに割り込んで仕事に行きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初はそれほど多くのタスクがなかったため、最初は変更とタスクのログ全体をSlackに直接保存しました。しかし、その数は増えていたので、すぐにTrelloに移動しました。 SlackとTrelloの間に構成された統合により、パズルのステータス変更が通知されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、生産変更ログ全体を確認することが重要でした。電子バージョンはTrelloにあり、バックアップバージョンはインフラストラクチャボードにカードの形でありました。何か問題が発生した場合に備えて、ロールバックする変更をすばやく見つける必要がありました。完全なリグレッションは新しい順序のスキームのみであり、残りの変更はより忠実にテストされました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクは本番のスピードで本番環境に飛んでいきました。合計で、システムをその日に15回更新しました。スタッフはチームごとに1つずつテストスタンドを配置しました。開発、クイックチェック、運用環境への展開。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メインのCTOプロセスに加えて、Sasha Andronovは常に「どうやって支援するのか」という質問でチームに出くわしました。これは努力を再分配するのに役立ち、誰かが助けを求めることを考えなかったという事実で時間を失うことはありませんでした。半手動の開発管理、気を散らすことの最小化と限界までの作業。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その日以降、できることは何でもやったような気持ちで出かける必要がありました。そしてさらに。そして、やった！ 15:30に、注文を受け付ける新しいスキームがネットワーク全体のモバイルアプリケーションに展開されました。ハッカソンモード、1日に1つのプロダクションあたり20展開未満！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4月22日の夕方は穏やかで澄んでいた。</font><font style="vertical-align: inherit;">システムが悪い可能性があるということも、単一のヒントでもありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
午後10時頃に再び集まり、毎週の行動計画の概要を説明しました。</font><font style="vertical-align: inherit;">制限、パフォーマンステスト、非同期順序など。</font><font style="vertical-align: inherit;">長い一日だったし、何週間も先だった。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再生</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4月23日の週は地獄でした。</font><font style="vertical-align: inherit;">その後、私たちは自分たちのベスト200％を達成し、できる限りのことをしたと自分に言い聞かせました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dodo ISを保存する必要があり、医学的なアナロジーを適用することにしました。</font><font style="vertical-align: inherit;">一般に、これはメタファーを使用する最初の実際のケースです（元のXPの場合と同様）。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蘇生-死にかけている患者を救う必要があるとき。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">治療-症状があるが、患者はまだ生存している場合。</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/1a/jm/_r/1ajm_re5g-xgtcik_ykvtdlewmu.jpeg"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蘇生</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
蘇生の最初の段階は、いくつかのパラメーターに従って障害が発生した場合にシステムを復元するための標準のRunbookです。</font><font style="vertical-align: inherit;">1つは落ちた-私たちはそれをやっている、1つは落ちた-私たちはそれをやっています。</font><font style="vertical-align: inherit;">クラッシュが発生した場合、目的のRunbookがすぐに見つかります。それらはすべてGitHubにあり、問題によって構成されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
蘇生の第二段階は注文の制限です。</font><font style="vertical-align: inherit;">私たち自身のピザ屋からこの慣行を採用しました。</font><font style="vertical-align: inherit;">ピッツェリアで大量の注文が出され、すぐに調理できないことを理解したとき、彼らは5分間停車します。注文明細をクリアするだけです。</font><font style="vertical-align: inherit;">Dodo ISについても同様のスキームを作成しました。</font><font style="vertical-align: inherit;">それがひどくなった場合は、一般的な制限をオンにして、お客様に5分と伝え、ご注文をお受けすることを決定しました。</font><font style="vertical-align: inherit;">万が一に備えてこの対策を開発しましたが、結果として使用することはありませんでした。</font><font style="vertical-align: inherit;">役に立たない。</font><font style="vertical-align: inherit;">そしていい。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">処理</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
治療を始めるには診断が必要なので、パフォーマンステストに力を入れました。チームの一部は、ステージでの模擬テストに焦点を合わせたGoReplayを使用して、本番環境から実際の負荷プロファイルを収集しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
模擬テストは実際の負荷プロファイルを反映していませんでしたが、改善の余地があり、システムにいくつかの弱点がありました。たとえば、その少し前に、MySQLコネクタをOracle </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から新しい</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コネクタに移動してい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ました</font></a><font style="vertical-align: inherit;">。コネクタのバージョンでは、セッションのプーリングにバグがあり、サーバーが単にCPUの上限に達してリクエストの処理を停止したという事実につながりました。これをステージテストで再現し、考え出され、静かに製品化されました。そのようなケースは十数件ありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らは問題の原因を診断して特定するので、点ごとに修正されます。</font><font style="vertical-align: inherit;">さらに、注文の非同期受信が理想的な方法であることも理解しました。</font><font style="vertical-align: inherit;">モバイルアプリケーションでの導入に取り組み始めました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地獄の週：プロセス組織</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
40人のチームが1つの大きな目標であるシステムの安定化に取り組みました。すべてのチームが協力しました。何をすべきか分からないのですか？他のチームを助けます。特定の目標に焦点を当てることで、スプレーされないようにしたり、私たちにとって不必要だったナンセンスに従事したりできなくなりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/3e/ik/zu3eikvdviql0uyvqabv3w18axi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1日3回、従来のスクラムのように、一般的なスタンドアップである同期がありました。 40人のため。 3週間に2回だけ（ほぼ90回の同期）、30分は満たされませんでした。最長の同期は57分続きました。通常は20〜30分かかりましたが。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同期の目標：ヘルプが必要な場所と、これらまたはこれらのタスクを本番環境にいつ導入するかを理解する。彼らはプロジェクトチームに団結し、インフラストラクチャの助けが必要な場合は、その場に人がやってきて、すべての問題が迅速に解決され、議論が減ったことが問題でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
夕方には、彼らをサポートするために、私たちのR＆Dラボは開発者のために夕食を準備しました。クレイジーピザのレシピ、手羽先、ジャガイモ！それは非現実的なクールでした！そのようなサポートは、男たちをできるだけ動機づけました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/pz/3f/mspz3f9matohgpx7z9sk9bf8pzu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなノンストップモードでの作業は、非常に困難でした。 4月25日水曜日の午後5時頃、開発者の1人であるOleg Blokhinが、土曜日に立ち止まることなく考えていたCTOに連絡しました。彼の目には非人道的な疲労がありました：「私は家に帰りました、もうそれを取ることができません。」彼はよく眠り、翌日は元気でした。だから、あなたは多くの男の一般的な状態を説明することができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の土曜日、4月28日（それはロシアのすべての人にとって作業土曜日でした）は穏やかでした。</font><font style="vertical-align: inherit;">私たちは何も変えることができず、システムを監視していました。彼らはペースから少し休憩しました。</font><font style="vertical-align: inherit;">すべてが静かに行った。</font><font style="vertical-align: inherit;">負荷はそれほど大きくありませんでしたが、巨大でした。</font><font style="vertical-align: inherit;">彼らは問題なく生き残った、そしてこれは我々が正しい道を進んでいるという自信を与えた。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
秋の2週目と3週目はすでに穏やかな状態にあり、地獄のようなペースは夕方遅くまで続きましたが、戒厳令の一般的なプロセスは残りました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翌日X：強度テスト</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
翌日Xは5月9日でした！</font><font style="vertical-align: inherit;">誰かが家に座ってシステムの状態を監視していました。</font><font style="vertical-align: inherit;">散歩に出かけた私たちの人々は、何か問題が発生した場合に完全に武装するためにノートパソコンを持っていきました。</font><font style="vertical-align: inherit;">サービスステーションのサーシャアンドロノフは、問題が発生した場合にすべてを直接確認するために、ピッツェリアの1つに夜のピークに近づきました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その日、私たちはロシアで91500件の注文を受けました（その時点で、ドードーの歴史における2番目の結果です）。</font><font style="vertical-align: inherit;">問題のほんの少しのヒントすらありませんでした。</font><font style="vertical-align: inherit;">5月9日、私たちは正しい方向に進んでいることを確認しました！</font><font style="vertical-align: inherit;">安定性、パフォーマンス、品質に重点を置きます。</font><font style="vertical-align: inherit;">プロセスの再構築はさらに私たちを待っていましたが、これはまったく別の話です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レトログレートフォールと6つのプラクティス</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
危機的な状況では、静かな時間に移行できる、また移行すべき優れた実践方法が開発されます。集中、チーム間のヘルプ、完全な退行を待たずに本番環境への迅速な導入。レトロから始めて、プロセスフレームワークを開発しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/md/ty/wpmdtygdhvy93ufctatnfmxypms.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の2日間は、慣行についての議論で終わりました。 「2時に振り返ってみる」という目標は設定しませんでした。そのような状況の後、私たちは時間をかけて自分のアイデアと私たちの新しいプロセスを詳細に検討する準備ができていました。みんな参加しました。何らかの形で修復作業に携わったすべての人。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qf/52/qu/qf52qu_y6lojoqjjcxw3lrronny.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、もっと詳しくお話ししたい6つの重要な実践がありました。</font></font><br>
<br>
<ol>
<li><b>Top N .</b>   ,  .      Product Owners ,  ,     ,         .    .      ,   .        ,  ,  ,   .   ,         .   N         –  Lead Time    . </li>
<li><b> .</b>    .     -,      ,        .         ,        ,  ,     .   . </li>
<li><b> .</b>    ,   «    »    . ,        . ,     ,     .  ,         -   .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">       Dodo IS.</a>         .</li>
<li><b> Pull Request.</b>      ,     Pull Request,      -   .    .   ,   ,   ,   ,  -   .            , . ,  .  15          .</li>
<li><b>Performance- —  .</b>  performance-     .   ,   . Performance-    .   baseline   ,    PR   .       ,   . </li>
<li><b>Performance     .</b>     —      .  , , -,  , ,       .         .        ,    . </li>
</ol><br>
<br>
<h2></h2><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">1.    </b>
                        <div class="spoiler_text"><h4><b>21.04.2018 –    Dodo IS.     ? </b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a> (Site Reliability Engineering)</b></u>:      .  ,    . <br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a> (Site Reliability Engineering, Product Owner   Dodo IS)</b></u>:      . ,    ,   . <br>
<br>
     auth’,       .         .      ,        . <br>
<br>
   ,    ()   :<br>
<br>
<img src="https://habrastorage.org/webt/_h/qh/yy/_hqhyy80kusheiqap3xwfchwjvk.jpeg"><br>
<br>
        .     ,    . <br>
<br>
      .       ,      .       .     -.  ,         ,      . -  ,  ,    .     ,        -,    ,    . <br>
<br>
         .           redis,      .    .      - ,   .       .<br>
<br>
     Dodo IS   .        .      ,     . ,        , , ,   .     ,      —     . <br>
<br>
     .                « ».  «  ,   »    . <br>
<br>
<h4><b> -   ?</b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
   –    .       .         . ,             .      .   .<br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
     .     ,       .   (  ), -       .   .<br>
<br>
       .  :<br>
<br>
<ol>
<li>      .</li>
<li>     .</li>
<li>       ,     . </li>
</ol><br>
<h4><b>      ?</b></h4><br>
<br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
,        ,  ,      .<br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
 ,            ,    .     ,     .<br>
<br>
<h4><b>    ?               ?</b></h4><br>
<br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:  ,      –  . <br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
<ol>
<li> —     . -     -   . <br>
<br>
          ,       .  2018       ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PerformanceLab</a>,      .</li>
<li>     ,          .      Less-. </li>
<li>         .   2018         -,     .      ,    .    - 2018   .</li>
<li>  async  . ,   21.04.2018     .    ,     .     async. </li>
<li> . ,    SaveOrder  async-await.   ,     .      :          ,       LF,         20   .       ,       .  ,         .    !<br>
<br>
    ,   ,           ,     . <br>
<br>
         ,    ,  .          — -.       . </li>
<li>     .         ,   (, ).      ,        .  «»    .   nginx   ,    -  ,       . <br>
<br>
    : innodb_lock_wait_timeout = 5; innodb_rollback_on_timeout = ON.         .   ,     ,       ,    ,       . </li>
</ol><br>
<h4><b>   ,       ?</b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
<ol>
<li>   ,   ,     ,   .   ,     .</li>
<li>    ,     .</li>
<li>      ,   ,    ,    .         –    .</li>
</ol><br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
<ol>
<li>   .</li>
<li>    .        , ,    -.          .</li>
<li>    .   ,   -    ,    .</li>
</ol><br>
<h4><b>   ,       ?</b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
  «»   ,   «». ,      ,     .    . <br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="80"> <u><b> </b></u>:<br>
<br>
  ,      .   , ,     .     .<br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">2. ,        (Dodo IS Architect)</b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/ge/pg/qm/gepgqmcioq9qqndtdk9dbz8njjo.png" align="left" width="60">              — ,     .       ,      —             . <br>
<br>
        ,        ,           . ,         (, ,    )        .<br>
<br>
        IT-.       Dodo IS,         .              …<br>
<br>
 X ,  .      . Dodo IS  ,         ,   ,        .      ,  , ,    .    .     146%,     .     ,    Dodo IS  ?<br>
<br>
    ,  .    ,    ,         .                  ,       .       ,      !<br>
<br>
     ,   .   « »: 11-  ,  ,  2 .  «»       .  3-4     ,          .          ,     .   .<br>
<br>
  , ,            .         . Dodo IS     ,   « ».     ! (    ). <br>
<br>
     ,     Dodo IS      ,      .   Dodo IS .       « », ,    .             (   ),         loadtest,   ,   .<br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja498268/index.html">Microsoft Excel Formulasの無料Mosbirge API</a></li>
<li><a href="../ja498270/index.html">経済危機とパンデミックの間に雇用されているITプロフェッショナルは？</a></li>
<li><a href="../ja498272/index.html">OWASP SAMMで安全な開発標準を実装する時間と労力を節約</a></li>
<li><a href="../ja498276/index.html">RuCodeオンラインスポーツプログラミングチャンピオンシップ</a></li>
<li><a href="../ja498278/index.html">出版社ピーター。春のセール</a></li>
<li><a href="../ja498282/index.html">[手順] Googleサイトプラットフォームでアカウントとサイトを作成する</a></li>
<li><a href="../ja498284/index.html">英語学習を最適化する方法</a></li>
<li><a href="../ja498288/index.html">あなたの街には地下鉄バスが必要です</a></li>
<li><a href="../ja498290/index.html">手続き型水文学：川と湖の動的シミュレーション</a></li>
<li><a href="../ja498292/index.html">PostgreSQLで大量にお金を節約する</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>