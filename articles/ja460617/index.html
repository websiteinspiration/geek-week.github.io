<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎨 🌝 😰 RTOSに関する真実。記事＃30。Nucleus SEの初期化と起動手順 📤 🍔 📶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="どのオペレーティングシステムにも特定の起動メカニズムがあります。このメカニズムの動作原理はシステムごとに異なります。通常、彼らはシステムが起動する（Eng。Boot）と言います。これは「ブートストラップ」の略で、「フェンスを乗り越え、靴のストラップで自分を引っ張る」という表現を指します。メモリが空で...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>RTOSに関する真実。記事＃30。Nucleus SEの初期化と起動手順</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460617/"><img src="https://habrastorage.org/webt/nr/me/cz/nrmeczn3tg-kdwyme6qgmd7ily4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのオペレーティングシステムにも特定の起動メカニズムがあります。このメカニズムの動作原理はシステムごとに異なります。通常、彼らはシステムが起動する（Eng。Boot）と言います。これは「ブートストラップ」の略で、「フェンスを乗り越え、靴のストラップで自分を引っ張る」という表現を指します。メモリが空でいっぱいの状態からシステムがどのように独立して遷移するか（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者注：絶対に正確であれば、ゴミ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）プログラムの安定した実行に。</font><font style="vertical-align: inherit;">従来、プログラムの小さな部分がメモリにロードされ、ROMに格納できます。</font><font style="vertical-align: inherit;">以前は、コンピュータの前面にあるスイッチを使用して入力できました。</font><font style="vertical-align: inherit;">このブートローダーは、オペレーティングシステムを既にロードしているより複雑なブートプログラムを読み取ります。</font><font style="vertical-align: inherit;">今日、デスクトップコンピュータは次のように起動します。BIOSコードが起動元のデバイス（ハードドライブ、CD-ROM、USBスティック）を探し、オペレーティングシステムが起動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
組み込みシステム用のOSも同様の方法で初期化できます。</font><font style="vertical-align: inherit;">そして実際には、デスクトップオペレーティングシステムに基づいて開発された組み込みオペレーティングシステムが読み込まれます。</font><font style="vertical-align: inherit;">しかし、ほとんどの「クラシック」RTOSでは、はるかに単純な（したがって高速な）メソッドが使用されます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オペレーティングシステムはソフトウェアの一部です。このソフトウェアがすでにメモリ内にある場合（たとえば、ROMの何らかの形で）、リセット後のCPUコマンドのシーケンスがOS初期化コードの実行で終了することを確認するだけで済みます。これが、Nucleus SEを含むほとんどのRTOSの動作方法です（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者注：</font><font style="vertical-align: inherit;">これは</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTOS MAXに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も適用さ</font><font style="vertical-align: inherit;">れます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの組み込みソフトウェア開発ツールには、CPUリセットを処理するために必要なスタートアップコードが含まれ、</font><b><font style="vertical-align: inherit;">main（）</font></b><font style="vertical-align: inherit;">関数のエントリポイントに制御を転送します</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Nucleus SEの再頒布可能コードは、できるだけ移植可能でなければならないため、このプロセスを処理しません。</font><font style="vertical-align: inherit;">代わりに、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数が含まれています。この関数</font><font style="vertical-align: inherit;">は、CPUを制御し、OSを初期化して起動します。</font><font style="vertical-align: inherit;">この機能については、以下で詳しく説明します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズの以前の記事：</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #29.   Nucleus SE</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #28.  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #27.  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #26. :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #25.   :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #24. :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #23. :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #22.  :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #21.  :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #20. :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #19. :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #18.   :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #17.   :    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #16. </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #15.  :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #14.  :    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #13.       API</a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #12.     </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #11. :     API</a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #10. :     </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #9. : </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #8. Nucleus SE:    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #7. Nucleus SE: </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #6.   </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #5.     </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #4. ,    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #3.   </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #2. :     <br>
 #1. : . </a> <br>
</div></div> <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリの初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus SEコード内のすべての静的変数の宣言は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレフィックスで始まり</font><font style="vertical-align: inherit;">、それらをどこに配置するかを示します。これら2つの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#define</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクティブは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_types.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルで定義されており</font><font style="vertical-align: inherit;">、使用する開発ツールセット（コンパイラーとリンカー）の詳細を考慮して構成する必要があります。通常、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のタイプは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">constである</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要があり</font><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者の注：私の経験で</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は常に十分ではないため、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的なconstの</font></font></b></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">方が適してい</font></i><i><b><font style="vertical-align: inherit;">ます</font></b></i><font style="vertical-align: inherit;">）、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は空の値です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数は</font><font style="vertical-align: inherit;">静的に初期化されます。これは論理的です。</font><b><font style="vertical-align: inherit;">RAM</font></b><font style="vertical-align: inherit;">変数</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的に初期化されていません（これは、ROMからRAMに自動的にコピーするように構成されている特定のツールボックスでのみ機能するため）。</font><font style="vertical-align: inherit;">明示的な初期化コードはアプリケーションに含まれており、以下で詳しく説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus SEは「一定の」データをRAMに保存しません。RAMは通常、小規模なシステムでは不足しています。</font><font style="vertical-align: inherit;">カーネルオブジェクトを記述するために複雑なデータ構造を使用する代わりに、必要に応じてROMまたはRAMに簡単に配置できるテーブルのセット（配列）が使用されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数メイン（）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font><font style="vertical-align: inherit;">Nucleus SEの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の完全なコードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">void main(void)<font></font>
{<font></font>
       NUSE_Init();        /* initialize kernel data */<font></font>
       /* user initialization code here */<font></font>
       NUSE_Scheduler();   /* start tasks */<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
操作のシーケンスは非常に単純です。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数が</font><b><font style="vertical-align: inherit;">呼び出され</font></b><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">すべてのNucleus SEデータ構造を初期化します。詳細については、以下で説明します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、ユーザーは、タスクスケジューラが起動する前に実行されるアプリケーション初期化コードを挿入できます。</font><font style="vertical-align: inherit;">このコードで実現できることの詳細については、この記事の後半を参照してください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、Nucleus SEスケジューラー（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Scheduler（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">が起動し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これについても、この記事の後半で詳しく説明します。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init（）関数</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数は、すべてのNucleus SEカーネル変数とデータ構造を初期化します。 </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下は完全な関数コードです。</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">void NUSE_Init(void)<font></font>
{<font></font>
       U8 index;<font></font>
       /* global data */<font></font>
       NUSE_Task_Active = 0;<font></font>
       NUSE_Task_State = NUSE_STARTUP_CONTEXT;<font></font>
       #if NUSE_SYSTEM_TIME_SUPPORT<font></font>
           NUSE_Tick_Clock = 0;<font></font>
       #endif<font></font>
       #if NUSE_SCHEDULER_TYPE == NUSE_TIME_SLICE_SCHEDULER<font></font>
           NUSE_Time_Slice_Ticks = NUSE_TIME_SLICE_TICKS;<font></font>
       #endif<font></font>
       /* tasks */<font></font>
       #if ((NUSE_SCHEDULER_TYPE != NUSE_RUN_TO_COMPLETION_SCHEDULER)<font></font>
            || NUSE_SIGNAL_SUPPORT || NUSE_TASK_SLEEP<font></font>
            || NUSE_SUSPEND_ENABLE || NUSE_SCHEDULE_COUNT_SUPPORT)<font></font>
           for (index=0; index&lt;NUSE_TASK_NUMBER; index++)<font></font>
           {<font></font>
                      NUSE_Init_Task(index);<font></font>
           }<font></font>
       #endif<font></font>
       /* partition pools */<font></font>
       #if NUSE_PARTITION_POOL_NUMBER != 0<font></font>
           for (index=0; index&lt;NUSE_PARTITION_POOL_NUMBER; index++)<font></font>
           {<font></font>
                  NUSE_Init_Partition_Pool(index);<font></font>
           }<font></font>
       #endif<font></font>
       /* mailboxes */<font></font>
       #if NUSE_MAILBOX_NUMBER != 0<font></font>
           for (index=0; index&lt;NUSE_MAILBOX_NUMBER; index++)<font></font>
           {<font></font>
                  NUSE_Init_Mailbox(index);<font></font>
           }<font></font>
       #endif<font></font>
       /* queues */<font></font>
       #if NUSE_QUEUE_NUMBER != 0<font></font>
           for (index=0; index&lt;NUSE_QUEUE_NUMBER; index++)<font></font>
           {<font></font>
                  NUSE_Init_Queue(index);<font></font>
           }<font></font>
       #endif<font></font>
       /* pipes */<font></font>
       #if NUSE_PIPE_NUMBER != 0<font></font>
           for (index=0; index&lt;NUSE_PIPE_NUMBER; index++)<font></font>
           {<font></font>
                  NUSE_Init_Pipe(index);<font></font>
           }<font></font>
       #endif<font></font>
       /* semaphores */<font></font>
       #if NUSE_SEMAPHORE_NUMBER != 0<font></font>
           for (index=0; index&lt;NUSE_SEMAPHORE_NUMBER; index++)<font></font>
           {<font></font>
                  NUSE_Init_Semaphore(index);<font></font>
           }<font></font>
       #endif<font></font>
       /* event groups */<font></font>
       #if NUSE_EVENT_GROUP_NUMBER != 0<font></font>
           for (index=0; index&lt;NUSE_EVENT_GROUP_NUMBER; index++)<font></font>
           {<font></font>
                  NUSE_Init_Event_Group(index);<font></font>
           }<font></font>
       #endif<font></font>
       /* timers */<font></font>
       #if NUSE_TIMER_NUMBER != 0<font></font>
           for (index=0; index&lt;NUSE_TIMER_NUMBER; index++)<font></font>
           {<font></font>
                  NUSE_Init_Timer(index);<font></font>
           }<font></font>
       #endif<font></font>
}<font></font>
</code></pre> <br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、グローバル変数が初期化されます。</font></font><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Active-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクティブなタスクのインデックス。ゼロに初期化されます。</font><font style="vertical-align: inherit;">後でこれによりスケジューラが変更される場合があります。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_State-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_STARTUP_CONTEXT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で初期化され、後続のアプリケーション初期化コードのAPIの機能を制限します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システム時間サポートがアクティブ化</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">され</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ている場合</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">NUSE_Tick_Clockは</font></b><font style="vertical-align: inherit;">ゼロに</font><b><font style="vertical-align: inherit;">設定さ</font></b><font style="vertical-align: inherit;">れます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムスライススケジューラがアクティブ化されている場合、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Time_Slice_Ticksには</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成された値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TIME_SLICE_TICKS </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">が</font></b><font style="vertical-align: inherit;">割り当てられます</font><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、関数を呼び出してカーネルオブジェクトを初期化します。</font></font><br>
<br>
<ul>
<li><b>NUSE_Init_Task()</b>       .   ,     Run to Completion,  ,        (           , ,    ).</li>
<li><b>NUSE_Init_Partition_Pool()</b>       .   ,     .</li>
<li><b>NUSE_Init_Mailbox()</b>       .   ,     .</li>
<li><b>NUSE_Init_Queue()</b>      .   ,    .</li>
<li><b>NUSE_Init_Pipe()</b>      .   ,    .</li>
<li><b>NUSE_Init_Semaphore()</b>      .   ,    .</li>
<li><b>NUSE_Init_Event_Group()</b>       .   ,     .</li>
<li><b>NUSE_Init_Timer()</b>      .   ,    . </li>
</ul><br>
<h3> </h3><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下は、NUSE_Init_Task（）関数の完全なコードです。</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">void NUSE_Init_Task(NUSE_TASK task)<font></font>
{<font></font>
       #if NUSE_SCHEDULER_TYPE != NUSE_RUN_TO_COMPLETION_SCHEDULER<font></font>
           NUSE_Task_Context[task][15] =                 /* SR */<font></font>
               NUSE_STATUS_REGISTER;<font></font>
           NUSE_Task_Context[task][16] =                 /* PC */<font></font>
               NUSE_Task_Start_Address[task];<font></font>
           NUSE_Task_Context[task][17] =                 /* SP */<font></font>
               (U32 *)NUSE_Task_Stack_Base[task] +<font></font>
               NUSE_Task_Stack_Size[task];<font></font>
       #endif<font></font>
       #if NUSE_SIGNAL_SUPPORT || NUSE_INCLUDE_EVERYTHING<font></font>
           NUSE_Task_Signal_Flags[task] = 0;<font></font>
       #endif<font></font>
       #if NUSE_TASK_SLEEP || NUSE_INCLUDE_EVERYTHING<font></font>
           NUSE_Task_Timeout_Counter[task] = 0;<font></font>
       #endif<font></font>
       #if NUSE_SUSPEND_ENABLE || NUSE_INCLUDE_EVERYTHING<font></font>
           #if NUSE_INITIAL_TASK_STATE_SUPPORT ||<font></font>
               NUSE_INCLUDE_EVERYTHING<font></font>
               NUSE_Task_Status[task] =<font></font>
                  NUSE_Task_Initial_State[task];<font></font>
           #else<font></font>
               NUSE_Task_Status[task] = NUSE_READY;<font></font>
           #endif<font></font>
       #endif<font></font>
       #if NUSE_SCHEDULE_COUNT_SUPPORT || NUSE_INCLUDE_EVERYTHING<font></font>
           NUSE_Task_Schedule_Count[task] = 0;<font></font>
       #endif<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Run to Completionスケジューラーが構成されていない場合、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Context [task] []タスク</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のコンテキストブロック</font><b><font style="vertical-align: inherit;">が</font></b><font style="vertical-align: inherit;">初期化されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ほとんどの要素は、タスクを開始するときに中間値を持つはずの一般的なマシンレジスタを表すため、値が割り当てられていません。</font><font style="vertical-align: inherit;">Nucleus SEの実装の例（Freescale ColdFire）（ただし、他のプロセッサの場合もメカニズムは同様です）では、最後の3つのエントリが明示的に設定されています。</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Context [タスク] [15]に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">ステータスレジスタ</font><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ステータスレジスタ）</font><font style="vertical-align: inherit;">が含まれ</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#define NUSE_STATUS_REGISTER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクティブの値が</font><font style="vertical-align: inherit;">含まれてい</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><b>NUSE_Task_Context[task][16]</b>    (<b>PC</b>, program counter)        : <b>NUSE_Task_Start_Address[task]</b>.</li>
<li><b>NUSE_Task_Context[task][17]</b>    (<b>SP</b>, stack pointer)   ,       (<b>NUSE_Task_Stack_Base[task]</b>)     (<b>NUSE_Task_Stack_Size[task]</b>).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シグナルサポートがアクティブ化されている場合、タスクシグナルフラグ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Signal_Flags [task]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクの一時停止がアクティブ化されている場合（つまり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Sleep（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> APIサービスの呼び出し</font><font style="vertical-align: inherit;">）、タスクのタイムアウトカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Timeout_Counter [task]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクの中断状態がアクティブ化されると、タスクのステータス（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Status [task]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が初期化されます。この初期値は</font><font style="vertical-align: inherit;">、タスクの初期状態のサポートがアクティブ化</font><font style="vertical-align: inherit;">されている場合、ユーザーが（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Initial_State [task]で</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">設定します</font><font style="vertical-align: inherit;">。それ以外の場合、状態は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_READYに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">割り当てられ</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計画カウンターがアクティブ化されている場合、タスクカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Schedule_Count [task]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パーティションプールの初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Partition_Pool（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の完全なコードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">void NUSE_Init_Partition_Pool(NUSE_PARTITION_POOL pool)<font></font>
{<font></font>
      NUSE_Partition_Pool_Partition_Used[pool] = 0;<font></font>
      #if NUSE_BLOCKING_ENABLE<font></font>
         NUSE_Partition_Pool_Blocking_Count[pool] = 0;<font></font>
      #endif<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「使用済み」パーティションプールカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Partition_Pool__Partition_Used [pool]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクロックがアクティブ化されている場合、パーティションプールのブロックされたタスクのカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Partition_Pool_Blocking_Count [pool]）は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロに</font><b><font style="vertical-align: inherit;">設定さ</font></b><font style="vertical-align: inherit;">れます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メールボックスの初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、完全な</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Mailbox（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">void NUSE_Init_Mailbox(NUSE_MAILBOX mailbox)<font></font>
{<font></font>
      NUSE_Mailbox_Data[mailbox] = 0;<font></font>
      NUSE_Mailbox_Status[mailbox] = 0;<font></font>
      #if NUSE_BLOCKING_ENABLE<font></font>
         NUSE_Mailbox_Blocking_Count[mailbox] = 0;<font></font>
      #endif<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メールボックスデータストア（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Mailbox_Data [mailbox]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定され、状態（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Mailbox_Status [mailbox]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は「未使用」（つまり、ゼロ）になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクのロックが有効になっている場合、ブロックされたメールボックスタスクのカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Mailbox_Blocking_Count [mailbox]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キューの初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Queue（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の完全なコードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">void NUSE_Init_Queue(NUSE_QUEUE queue)<font></font>
{<font></font>
      NUSE_Queue_Head[queue] = 0;<font></font>
      NUSE_Queue_Tail[queue] = 0;<font></font>
      NUSE_Queue_Items[queue] = 0;<font></font>
      #if NUSE_BLOCKING_ENABLE<font></font>
         NUSE_Queue_Blocking_Count[queue] = 0;<font></font>
      #endif<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キューの先頭と末尾へのポインター（実際には、これらは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Queue_Head [queue</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Queue_Tail [queue]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のインデックス</font><b><font style="vertical-align: inherit;">です</font></b><font style="vertical-align: inherit;">）には、キューのデータ領域の先頭を示す値が割り当てられます（つまり、ゼロの値をとります）。</font><font style="vertical-align: inherit;">キューのカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Queue_Items [queue]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）もゼロに設定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクのロックがアクティブ化されている場合、ブロックされたキューのタスクカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Queue_Blocking_Count [queue]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャネルの初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Pipe（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の完全なコードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">void NUSE_Init_Pipe(NUSE_PIPE pipe)<font></font>
{<font></font>
      NUSE_Pipe_Head[pipe] = 0;<font></font>
      NUSE_Pipe_Tail[pipe] = 0;<font></font>
      NUSE_Pipe_Items[pipe] = 0;<font></font>
      #if NUSE_BLOCKING_ENABLE<font></font>
         NUSE_Pipe_Blocking_Count[pipe] = 0;<font></font>
      #endif<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャネルの先頭と末尾へのポインター（実際には、これらは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Pipe_Head [pipe]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Pipe_Tail [pipe]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のインデックス</font><b><font style="vertical-align: inherit;">です</font></b><font style="vertical-align: inherit;">）には、チャネルデータ領域の先頭を示す値が割り当てられます（つまり、ゼロの値をとります）。</font><font style="vertical-align: inherit;">チャネル</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カウンター</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><b><font style="vertical-align: inherit;">NUSE_Pipe_Items [pipe]</font></b><font style="vertical-align: inherit;">）もゼロに設定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクロックがアクティブ化されている場合、チャネルのブロックされたタスクカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Pipe_Blocking_Count [パイプ]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セマフォの初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Semaphore（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の完全なコードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">void NUSE_Init_Semaphore(NUSE_SEMAPHORE semaphore)<font></font>
{<font></font>
      NUSE_Semaphore_Counter[semaphore] =<font></font>
         NUSE_Semaphore_Initial_Value[semaphore];<font></font>
      #if NUSE_BLOCKING_ENABLE<font></font>
         NUSE_Semaphore_Blocking_Count[semaphore] = 0;<font></font>
      #endif<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セマフォカウンタ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Semaphore_Counterは[セマフォ]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）ユーザによる値のセット（で初期化される</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Semaphore_Initial_Value [セマフォ]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクのロックがアクティブ化されている場合、ロックされたセマフォタスクカウンタ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Semaphore_Blocking_Count [semaphore]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イベントグループの初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Event_Group（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の完全なコードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">void NUSE_Init_Event_Group(NUSE_EVENT_GROUP group)<font></font>
{<font></font>
      NUSE_Event_Group_Data[group] = 0;<font></font>
      #if NUSE_BLOCKING_ENABLE<font></font>
         NUSE_Event_Group_Blocking_Count[group] = 0;<font></font>
      #endif<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
イベントグループのフラグがリセットされます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Event_Group_Data [group]には</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> null値</font><b><font style="vertical-align: inherit;">が</font></b><font style="vertical-align: inherit;">割り当てられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクのロックがアクティブ化されている場合、イベントフラググループ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Event_Group_Blocking_Count [group]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">のブロックされたタスクのカウンターは</font><font style="vertical-align: inherit;">ゼロに設定されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーを初期化する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Timer（）の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全なコード</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="plaintext hljs">void NUSE_Init_Timer(NUSE_TIMER timer)<font></font>
{<font></font>
      NUSE_Timer_Status[timer] = FALSE;<font></font>
      NUSE_Timer_Value[timer] = NUSE_Timer_Initial_Time[timer];<font></font>
      NUSE_Timer_Expirations_Counter[timer] = 0;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイマーのステータス（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Status [timer]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は「未使用」に設定されます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FALSE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カウントダウン値（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Value [タイマー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]）は、ユーザ（によって設定された値で初期化され</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Initial_Time [タイマー]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完了カウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Expirations_Counter [timer]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）はゼロに設定されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションコードの初期化</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus SEデータ構造が初期化された後、タスクを開始する前に、アプリケーションの初期化を担当するコードを実行することが可能になります。</font><font style="vertical-align: inherit;">この機能は、次のタスクに役立つ場合があります。</font></font><br>
<br>
<ul>
<li>   .               .</li>
<li>  . ,               ,     «»     .       #define, ,     ,        (  ID ).</li>
<li> .         .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、これらの目標の多くはNucleus SEの初期化前に達成できますが、ここでのアプリケーションコードの場所の利点は、カーネルサービス（API呼び出し）を使用できるようになったことです。</font><font style="vertical-align: inherit;">たとえば、キュ​​ーまたはメールボックスには、タスクの開始時に処理する必要があるデータが事前に入力されている場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
API呼び出しには制限があります。通常、スケジューラーのアクティブ化につながるすべてのアクション（例えば、タスクの一時停止/ブロック）は禁止されています。</font><font style="vertical-align: inherit;">グローバル変数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Stateは、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この制限</font><font style="vertical-align: inherit;">を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示す</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ために</font><b><font style="vertical-align: inherit;">NUSE_STARTUP_CONTEXT</font></b><font style="vertical-align: inherit;">に設定され</font><b><font style="vertical-align: inherit;">て</font></b><font style="vertical-align: inherit;">い</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケジューラを起動</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
初期化が完了した後は、スケジューラを実行して、アプリケーションコード（タスク）の実行を開始するだけです。</font><font style="vertical-align: inherit;">スケジューラーの構成とさまざまなタイプのスケジューラーの動作については、以前の記事（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃9</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">で詳しく説明されている</font><font style="vertical-align: inherit;">ため、ここでは簡単な要約のみが必要です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主な手順は次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グローバル変数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Task_Stateの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TASK_CONTEXTを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">割り当て</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行する最初のタスクのインデックスを選択します。</font><font style="vertical-align: inherit;">最初のタスクのサポートがアクティブ化されている場合は、最初に終了したタスクの検索が実行され、それ以外の場合はゼロ値が使用されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケジューラーは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-NUSE_Scheduler（）と呼ばれ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後のステップで正確に何が起こるかは、どのスケジューラーが選択されているかによって異なります。 Run to Completionスケジューラを使用すると、計画サイクルが開始され、タスクが順次呼び出されます。他のスケジューラーを使用する場合、最初のタスクのコンテキストがロードされ、制御がタスクに移されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の記事では、診断とエラーチェックについて説明します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">著者について：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Colin Wallsはエレクトロニクス業界で30年以上働いており、彼のほとんどの時間をファームウェアに費やしています。現在は、Mentor Embedded（Mentor Graphicsの一部門）のファームウェアエンジニアです。 Colin Wallsは、会議やセミナー、数多くの技術記事の執筆者、ファームウェアに関する2冊の本でしばしば講演しています。イギリス在住。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">コリンの</font></a><font style="vertical-align: inherit;">プロフェッショナル</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブログ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、電子メール：colin_walls@mentor.com。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja460603/index.html">V2G。電気自動車は電力の生産と消費のバランスをとるのに役立ちます</a></li>
<li><a href="../ja460605/index.html">自動写真スタジオ、パート1</a></li>
<li><a href="../ja460607/index.html">Androidのハッキングツールを備えた攻撃的なセキュリティアプリストア</a></li>
<li><a href="../ja460611/index.html">フェイルオーバー：完璧主義は私たちを台無しにし...怠惰</a></li>
<li><a href="../ja460615/index.html">インダストリアルニンジャの後、Positive Hack Days 9でPLCがハッキングされた方法</a></li>
<li><a href="../ja460621/index.html">Tic Tac Toe、パート4：HTTPを使用したFlaskバックエンドとのやり取り</a></li>
<li><a href="../ja460623/index.html">ジュリアン・アサンジの拷問について</a></li>
<li><a href="../ja460625/index.html">私はTelegramのJavaScript開発者のための競争で1位にならなかったので</a></li>
<li><a href="../ja460627/index.html">vGPU-使用は無視できません</a></li>
<li><a href="../ja460629/index.html">2人の鉱夫が同じ世界を持っている確率</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>