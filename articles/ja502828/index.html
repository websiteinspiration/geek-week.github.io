<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋🏼 🤭 🚵🏼 kubectlをより効率的に使用する方法：詳細ガイド 👩🏼‍🔬 🤸🏾 🛐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kubernetesを使用している場合、おそらくkubectlは最もよく使用するユーティリティの1つです。また、特定のツールの操作に多くの時間を費やすたびに、そのツールをよく研究し、効果的に使用する方法を学ぶ必要があります。Mail.ru Kubernetes aaS
 
 チームが Daniel ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>kubectlをより効率的に使用する方法：詳細ガイド</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/502828/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/640/d1b/00c/640d1b00ce5514ac4c4cfc205c4d8b81.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesを使用している場合、おそらくkubectlは最もよく使用するユーティリティの1つです。</font><font style="vertical-align: inherit;">また、特定のツールの操作に多くの時間を費やすたびに、そのツールをよく研究し、効果的に使用する方法を学ぶ必要があります。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Mail.ru Kubernetes aaS</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
チーム</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Daniel Weibelの記事</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">を</font></a><font style="vertical-align: inherit;">翻訳しました。この記事に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">は</font></a><font style="vertical-align: inherit;">、kubectlを効果的に使用するためのヒントとコツが記載されています。</font><font style="vertical-align: inherit;">また、Kubernetesの動作をよりよく理解するのにも役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
著者によると、この記事の目的は、Kubernetesでの日々の作業をより効率的にするだけでなく、より楽しくすることです！</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はじめに：kubectlとは</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubectlをより効果的に使用する方法を学ぶ前に、それが何であり、どのように機能するかについての基本的な理解を得る必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーの観点から見ると、kubectlはKubernetes操作を実行できるコントロールパネルです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
技術的な観点から見ると、kubectlはKubernetes APIクライアントです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes APIはHTTP REST APIです。このAPIは、完全に制御される実際のKubernetesユーザーインターフェイスです。つまり、すべてのKubernetes操作はAPIエンドポイントとして表され、そのエンドポイントへのHTTPリクエストによって完了することができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、kubectlの主なタスクは、Kubernetes APIにHTTPリクエストを送信することです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hh/mi/yp/hhmiyp4_6n7mvo7nh0bnc_90qbm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesは完全にリソース指向のシステムです。つまり、リソースの内部状態が維持され、すべてのKubernetesオペレーションはCRUDオペレーションです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのリソースを管理することで、Kubernetesを完全に制御できます。Kubernetesは、リソースの現在の状態に基づいて何をすべきかを判断します。このため、Kubernetes APIへのリンクは、関連する操作を含むリソースタイプのリストとして編成されています。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例を見てみましょう</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ReplicaSetリソースを作成するとします。これを行うには、ファイルでReplicaSetを名前</font></font><code>replicaset.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">記述し</font><font style="vertical-align: inherit;">、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl create -f replicaset.yaml</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、ReplicaSetリソースが作成されます。しかし、裏で何が起こるのでしょうか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesには、レプリカセットを作成する操作があります。他の操作と同様に、APIエンドポイントとして提供されます。この操作の特定のAPIエンドポイントは次のようになります。</font></font><br>
<br>
<pre><code class="bash hljs">POST /apis/apps/v1/namespaces/{namespace}/replicasets</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのKubernetesオペレーションのAPIエンドポイントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、APIリファレンス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上記のエンドポイント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を含む</font><font style="vertical-align: inherit;">）にあります。エンドポイントへの実際のリクエストを行うには、まずAPIリファレンスにリストされているエンドポイントパスにAPIサーバーのURLを追加する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、上記のコマンドを実行すると、kubectlはHTTP POSTリクエストを上記のAPIエンドポイントに送信します。ファイルで指定したReplicaSet定義</font></font><code>replicaset.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、リクエストの本文で渡され</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、Kubernetesクラスターとやり取りするすべてのチームに対してkubectlが機能する方法です。これらすべての場合において、kubectlは対応するKubernetes APIエンドポイントにHTTPリクエストを送信するだけです。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"></font><code>curl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes APIにHTTPリクエストを手動で送信する</font><font style="vertical-align: inherit;">などのユーティリティを使用して、Kubernetesを完全に制御できることに注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Kubectlは、Kubernetes APIを簡単に使用できるようにします。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらは、kubectlとは何か、およびそれがどのように機能するかの基本です。</font><font style="vertical-align: inherit;">ただし、すべてのkubectlユーザーが知っておくべきKubernetes APIについてはまだいくつかあります。</font><font style="vertical-align: inherit;">簡単にKubernetesの内面に飛び込みましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesのインナーワールド</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesは、クラスターノードで個別のプロセスとして実行される独立したコンポーネントのセットで構成されています。</font><font style="vertical-align: inherit;">一部のコンポーネントはメインノードで動作し、その他のコンポーネントは作業ノードで動作し、各コンポーネントは特別なタスクを実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メインノードの最も重要なコンポーネントは次のとおりです。</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレージ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -リソース定義を</font><strong><font style="vertical-align: inherit;">保存し</font></strong><font style="vertical-align: inherit;">ます（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常、これはetcdです</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIサーバー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -APIを提供し、ストレージを管理します。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Manager-リソースのステータスが仕様を満たしていることを確認します。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケジューラー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -作業ノードでポッドをスケジュールします。</font></font></li>
</ol> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これがワーキングノードの最も重要なコンポーネントの一つです：</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubelet-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業ノードでのコンテナーの起動を制御します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのコンポーネントがどのように連携するかを理解するには、例を検討してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなただけやったと仮定</font></font><code>kubectl create -f replicaset.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectlがにHTTP POSTリクエストを行った後、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらにreplicaSetのAPIのエンドポイント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（さらにreplicaSetリソースの定義を渡します）。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスターでは何が起こりますか？</font></font></strong><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行後、</font></font><code>kubectl create -f replicaset.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIサーバーはReplicaSetリソースの定義をリポジトリに保存します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3z/tx/af/3ztxafbfmcbwj8pcty3gslptxic.jpeg"></div></li>
<li>   ReplicaSet   ,   ,     ReplicaSet:<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gd/ug/rs/gdugrsdrkzbdaairpblxcwylagu.jpeg"></div></li>
<li> ReplicaSet       ReplicaSet (       ReplicaSet)     :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/51/tr/jc/51trjc7dkkmoeqxnjexpg-iuvpe.jpeg"></div></li>
<li> ,  ,         :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dy/rj/qb/dyrjqbtqiqwp22gwwbsnv1xzfue.jpeg"></div></li>
<li>                :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ck/bf/g2/ckbfg2dnuntwquz9xlqxzss8vzc.jpeg"></div></li>
<li>  ,   ,  Kubelet,   ,   :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bk/sq/i4/bksqi4cusb_iew64qo1gpvd8j6g.jpeg"></div></li>
<li>Kubelet           ,  Docker,     :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_i/f1/47/_if147qrhr9v3yl6cpoax5aymya.jpeg"></div></li>
</ol><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下は、この説明のテキストバージョンです。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ReplicaSet作成エンドポイントへのAPIリクエストは、APIサーバーによって処理されます。 APIサーバーはリクエストを認証し、ReplicaSetリソース定義をリポジトリに保存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このイベントは、コントローラーマネージャーのサブプロセスであるReplicaSetコントローラーを起動します。 ReplicaSetコントローラは、リポジトリ内のReplicaSetリソースの作成、更新、削除を監視し、これが発生するとイベント通知を受け取ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レプリカセットコントローラーのタスクは、レプリカセットの複製ハースの数が正しいことを確認することです。この例では、ハースはまだ存在しないため、ReplicaSetコントローラーはこれらのハース定義を（ReplicaSet定義のハーステンプレートに従って）作成し、リポジトリに保存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい炉床を作成すると、作業ノード用にまだ計画されていない炉床の定義を追跡するスケジューラーが起動します。</font><font style="vertical-align: inherit;">スケジューラは、各ハースに適切な作業ノードを選択し、ストア内のハース定義を更新します。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この時点まで、ワークロードコードはクラスター内のどこでも実行されていません。</font><font style="vertical-align: inherit;">これまでに行われたの</font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メインノードのリポジトリでのリソースの作成と更新だけです。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最新のイベントはKubeletを起動します。Kubeletは、作業ノードに予定されている炉を監視します。</font><font style="vertical-align: inherit;">ReplicaSetポッドがインストールされている作業ノードのKubeletは、Dockerなどのコンテナーランタイムに、必要なコンテナーイメージをロードして起動するように指示する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この時点で、ついに、ReplicaSetアプリケーションが実行されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes APIの役割</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前の例で見たように、Kubernetesコンポーネント（APIサーバーとリポジトリを除く）は、リポジトリ内のリソースの変更を監視し、リポジトリ内のリソースに関する情報を変更します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、これらのコンポーネントはリポジトリと直接対話するのではなく、Kubernetes APIを介してのみ対話します。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次の例を検討してください</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReplicaSetコントローラーは、ReplicaSets API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンドポイント</font><font style="vertical-align: inherit;">とパラメーター</font></font><code>watch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して、ReplicaSetリソースの変更を監視します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReplicaSetコントローラーは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポッド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">作成</font></a><font style="vertical-align: inherit;"> APIエンドポイント</font><font style="vertical-align: inherit;">を使用してポッドを作成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケジューラーは、API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッチのポッド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンドポイント</font><font style="vertical-align: inherit;">（以下で変更）を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">、選択した作業ノードに関する情報で炉を更新します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、これはkubectlがアクセスするのと同じAPIです。</font><font style="vertical-align: inherit;">内部コンポーネントと外部ユーザーに同じAPIを使用することは、Kubernetes設計の基本的な概念です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、Kubernetesの仕組みを要約できます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレージはステートフル、つまりKubernetesリソースです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIサーバーは、Kubernetes APIとしてストレージインターフェースを提供します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のすべてのKubernetesコンポーネントとユーザーは、APIを介してKubernetesの状態（リソース）を読み取り、監視、操作します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの概念を理解することは、kubectlをよりよく理解し、それを最大限に活用するのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、kubectlの操作のパフォーマンスを向上させるのに役立つ、いくつかの具体的なヒントとテクニックを見てみましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.コマンドの追加による入力の高速化</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubectlでの作業のパフォーマンスを改善するための最も役立つが見過ごされがちなトリックの1つは、コマンドの追加です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドを追加すると、kubectlコマンドの個々の部分をTabキーで自動的に入力できます。</font><font style="vertical-align: inherit;">これは、リソース名などの複雑なものを含め、サブコマンド、オプション、および引数で機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubectlアドオンの仕組みをご覧ください。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d35/1de/af0/d351deaf0457f4d25817dfbd3906e0f4.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンド補完は、BashおよびZshコマンドシェルで機能します。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式マニュアルに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はオートコンプリートの設定に関する詳細な</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">説明</font></a><font style="vertical-align: inherit;">が含まれていますが、以下に簡単な抜粋を示します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド追加のしくみ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンド補完は、補完スクリプトで機能するシェル関数です。</font><font style="vertical-align: inherit;">アドオンスクリプトは、特定のコマンドのアドオン動作を定義するシェルスクリプトです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubectlは、次のコマンドを使用して、BashおよびZshのアドオンスクリプトを自動的に生成して表示します。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl completion bash</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または：</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl completion zsh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論的には、kubectlがコマンドを補完できるように、これらのコマンドの出力を適切なコマンドシェルに接続するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、接続方法はBash（LinuxとMacOSの違いを含む）とZshでは異なります。</font><font style="vertical-align: inherit;">以下では、これらすべてのオプションについて検討します。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux Bash</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bashのアドオンスクリプトはbash-completionパッケージに依存しているため、最初にインストールする必要があります。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo apt-get install bash-completion</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または：</font></font><br>
<br>
<pre><code class="bash hljs">$ yum install bash-completion</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコマンドを使用して、パッケージが正常にインストールされたことをテストできます。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">type</span> _init_completion</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェル関数コードが出力されれば、bash-completionは正しくインストールされています。</font><font style="vertical-align: inherit;">コマンドが「見つかりません」エラーをスローした場合は、ファイルに次の行を追加します</font></font><code>~ / .bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">source</span> /usr/share/bash-completion/bash_completion</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この行をファイルに追加するかどう</font></font><code>~ / .bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">かは</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">bash-completionのインストールに使用したパッケージマネージャーによって異なり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">APTの場合、これはYUMの場合は必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
bash-completionをインストールしたら、kubectlアドオンスクリプトがすべてのシェルセッションに含まれるようにすべてを構成する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行う1つの方法は、次の行をファイルに追加することです</font></font><code>~ / .bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">source</span> &lt;(kubectl completion bash)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の方法は、kubectlアドオンスクリプトをディレクトリに追加</font></font><code>/etc/bash_completion.d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">することです（存在しない場合は作成します）。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl completion bash &gt;/etc/bash_completion.d/kubectl</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディレクトリ内のすべてのアドオンスクリプトは、</font></font><code>/etc/bash_completion.d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bash-completionに自動的に含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのオプションも同様に適用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェルを再起動すると、kubectlのオートコンプリートが機能します。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MacOSのBash</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MacOSでは、設定は少しトリッキーです。実際のところ、MacOSにはデフォルトでBashバージョン3.2があり、kubectl自動補完スクリプトには4.1以上のバージョンのBashが必要であり、Bash 3.2では機能しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MacOSで古いバージョンのBashを使用すると、ライセンスの問題が発生します。 Bashバージョン4はGPLv3でライセンスされていますが、Appleはサポートしていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MacOSでkubectlのオートコンプリートを構成するには、より新しいバージョンのBashをインストールする必要があります。更新されたBashをデフォルトのシェルとしてインストールすることもできます。これにより、将来の多くの問題が解消されます。詳細については、「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MacOSでのBashの更新</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」の記事を参照してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
先に進む前に、最新バージョンのBashを使用していることを確認してください（出力を確認してください</font></font><code>bash --version</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bashのオートコンプリートスクリプトは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bash-completion</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">依存し</font><font style="vertical-align: inherit;">ているため、最初にインストールする必要があります。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Homebrewで</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
bash-completionをインストールできます</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">$ brew install bash-completion@2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで</font></font><code>@2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はbash-completionバージョン2を表します。自動補完kubectlにはbash-completion v2が必要であり、bash-completion v2には少なくとも4.1のbashバージョンが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドの出力には</font></font><code>brew-install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ファイルに追加する必要がある内容を示す警告セクションが含まれています</font></font><code>~/.bash_profile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">export</span> BASH_COMPLETION_COMPAT_DIR=/usr/<span class="hljs-built_in">local</span>/etc/bash_completion.d<font></font>
[[ -r <span class="hljs-string">"/usr/local/etc/profile.d/bash_completion.sh"</span> ]] &amp;&amp; . 
<span class="hljs-string">"/usr/local/etc/profile.d/bash_completion.sh"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これらの行をにではなくに追加することをお勧め</font></font><code>~/.bash_profile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font></font><code>~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">この場合、オートコンプリートはメインだけでなく、子コマンドシェルでも使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェルを再起動した後、次のコマンドを使用してインストールを確認できます。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">type</span> _init_completion</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力にシェル関数が表示される場合は、すべてが正しく構成されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、すべてのセッションでkubectlのオートコンプリートを有効にする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つの方法は、次の行を自分の行に追加することです</font></font><code>~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">source</span> &lt;(kubectl completion bash)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の方法は、オートコンプリートスクリプトをフォルダーに追加することです</font></font><code>/usr/local/etc/bash_completion.d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl completion bash<font></font>
&gt;/usr/<span class="hljs-built_in">local</span>/etc/bash_completion.d/kubectl</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法は、Homebrewを使用してbash-completionをインストールした場合にのみ機能します。</font><font style="vertical-align: inherit;">この場合、bash-completionはすべてのスクリプトをこのディレクトリからロードします。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Homebrewを使用してkubectlを</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
インストールした場合</font><font style="vertical-align: inherit;">、自動補完スクリプトは</font><font style="vertical-align: inherit;">インストール中に</font><font style="vertical-align: inherit;">自動的にフォルダー</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">配置されるため、前の手順を実行する必要はありません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この場合、bash-completionをインストールするとすぐに、kubectl auto-completionが機能し始めます。</font><font style="vertical-align: inherit;">
その結果、これらのオプションはすべて同等です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>/usr/local/etc/bash_completion.d</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zsh</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zshのオートコンプリートスクリプトは、依存関係を必要としません。</font><font style="vertical-align: inherit;">必要なのは、シェルをロードするときにそれらを有効にすることだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、</font></font><code>~/.zshrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルに</font><font style="vertical-align: inherit;">行を追加し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">source</span> &lt;(kubectl completion zsh)</code></pre><br><font style="vertical-align: inherit;"></font><code>not found: compdef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェルの再起動後に</font><font style="vertical-align: inherit;">
エラーが発生し</font><font style="vertical-align: inherit;">た</font><font style="vertical-align: inherit;">場合は</font><font style="vertical-align: inherit;">、組み込み関数を有効にする必要があります</font></font><code>compdef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これを有効にするには、ファイルの先頭に</font></font><code>~/.zshrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次</font><font style="vertical-align: inherit;">を追加します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">autoload</span> -Uz compinit<font></font>
compinit</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.リソース仕様のクイックビュー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YAMLリソース定義を作成するときは、これらのリソースのフィールドとその意味を知る必要があります。</font><font style="vertical-align: inherit;">この情報を見つける場所の1つは、すべてのリソースの完全な仕様を含むAPIリファレンスにあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、何かを探す必要があるたびにWebブラウザに切り替えるのは不便です。</font><font style="vertical-align: inherit;">したがって、kubectlには、</font></font><code>kubectl explain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端末内のすべてのリソースの仕様を表示</font><font style="vertical-align: inherit;">するコマンド</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">用意さ</font><font style="vertical-align: inherit;">れています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドの形式は次のとおりです。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl explain resource[.field]...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドは、要求されたリソースまたはフィールドの仕様を表示します。</font><font style="vertical-align: inherit;">表示される情報は、APIマニュアルに含まれているものと同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトで</font></font><code>kubectl explain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、フィールドのネストの最初のレベルのみが表示されます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ここで</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
それがどのように見えるかを見て</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションを追加すると、ツリー全体を表示できます</font></font><code>--recursive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl explain deployment.spec --recursive</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なリソースが正確にわからない場合は、次のコマンドでそれらをすべて表示できます。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl api-resources</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドは、</font></font><code>deployments</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わりに</font><font style="vertical-align: inherit;">、リソース名を複数形で表示します</font></font><code>deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、それ</font></font><code>deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を含むリソース</font><font style="vertical-align: inherit;">の短縮名（など）も表示されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらの違いを心配する必要はありません。</font><font style="vertical-align: inherit;">これらのバリアント名はすべて、kubectlと同等です。</font><font style="vertical-align: inherit;">つまり、これらのいずれもに使用できます</font></font><code>kubectl explain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコマンドはすべて同等です。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl explain deployments.spec
<span class="hljs-comment"># </span><font></font>
$ kubectl explain deployment.spec<font></font>
<span class="hljs-comment">#         </span>
$ kubectl explain deploy.spec</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.カスタム列出力フォーマットを使用する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドのデフォルトの出力形式は</font></font><code>kubectl get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のとおり</font><font style="vertical-align: inherit;">です</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl get pods<font></font>
NAME                     READY    STATUS    RESTARTS  AGE<font></font>
engine-544b6b6467-22qr6   1/1     Running     0       78d<font></font>
engine-544b6b6467-lw5t8   1/1     Running     0       78d<font></font>
engine-544b6b6467-tvgmg   1/1     Running     0       78d<font></font>
web-ui-6db964458-8pdw4    1/1     Running     0       78d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この形式は便利ですが、含まれる情報の量は限られています。</font><font style="vertical-align: inherit;">完全なリソース定義形式と比較すると、ここにはいくつかのフィールドのみが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、カスタム列出力フォーマットを使用できます。</font><font style="vertical-align: inherit;">出力するデータを決定できます。</font><font style="vertical-align: inherit;">別の列に任意のリソースフィールドを表示できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カスタム形式の使用は、オプションを使用して決定されます。</font></font><br>
<br>
<pre><code class="bash hljs">-o custom-columns=&lt;header&gt;:&lt;jsonpath&gt;[,&lt;header&gt;:&lt;jsonpath&gt;]...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各出力列をペアとして定義できます</font></font><code>&lt;header&gt;:&lt;jsonpath&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>&lt;header&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は列の名前で、</font></font><code>&lt;jsonpath&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はリソースフィールドを定義する式です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単な例を見てみましょう：</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl get pods -o custom-columns=<span class="hljs-string">'NAME:metadata.name'</span><font></font>
<font></font>
NAME<font></font>
engine-544b6b6467-22qr6<font></font>
engine-544b6b6467-lw5t8<font></font>
engine-544b6b6467-tvgmg<font></font>
web-ui-6db964458-8pdw4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力には、炉の名前を含む1つの列が含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションの式は、フィールドから炉の名前を選択します</font></font><code>metadata.name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、囲炉裏の名前が囲炉裏</font></font><code>metadata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のリソース記述の</font><font style="vertical-align: inherit;">フィールドの子フィールド名で定義されているため</font><font style="vertical-align: inherit;">です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIマニュアルで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細を読む</font><font style="vertical-align: inherit;">か、コマンドを入力でき</font></font><code>kubectl explain pod.metadata.name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、たとえば各サブが機能するノードを示すなど、出力に列を追加するとします。これを行うには、適切な列仕様をカスタム列オプションに追加するだけです。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl get pods \<font></font>
  -o custom-columns=<span class="hljs-string">'NAME:metadata.name,NODE:spec.nodeName'</span><font></font>
<font></font>
NAME                       NODE<font></font>
engine-544b6b6467-22qr6    ip-10-0-80-67.ec2.internal<font></font>
engine-544b6b6467-lw5t8    ip-10-0-36-80.ec2.internal<font></font>
engine-544b6b6467-tvgmg    ip-10-0-118-34.ec2.internal<font></font>
web-ui-6db964458-8pdw4     ip-10-0-118-34.ec2.internal</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
式はノードの名前を選択します。ノード</font></font><code>spec.nodeName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がサブに割り当てられると、その名前がサブの</font></font><code>spec.nodeName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース指定</font><font style="vertical-align: inherit;">フィールドに書き込まれ</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">詳細については、出力をご覧ください</font></font><code>kubectl explain pod.spec.nodeName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesリソースフィールドでは大文字と小文字が区別されることに注意してください。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
任意のリソースフィールドを列として表示できます。</font><font style="vertical-align: inherit;">リソース仕様を参照して、好きなフィールドで試してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、最初に、フィールド選択式を詳しく見てみましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSONPath式</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リソースフィールドを選択するための式は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSONPathに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基づいてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSONPathは、JSONドキュメントからデータをフェッチするための言語です。</font><font style="vertical-align: inherit;">単一のフィールドを選択することが、JSONPathを使用する最も単純なケースです。</font><font style="vertical-align: inherit;">セレクターやフィルターなど、</font><font style="vertical-align: inherit;">はるかに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くの機能があります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubectl Explainは、限られた数のJSONPath機能をサポートしています。</font><font style="vertical-align: inherit;">機能とその使用例を以下に示します。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#    </span>
$ kubectl get pods -o custom-columns=<span class="hljs-string">'DATA:spec.containers[*].image'</span>
<span class="hljs-comment">#    </span>
$ kubectl get pods -o custom-columns=<span class="hljs-string">'DATA:spec.containers[0].image'</span>
<span class="hljs-comment">#   ,   </span>
$ kubectl get pods -o custom-columns=<span class="hljs-string">'DATA:spec.containers[?(@.image!="nginx")].image'</span>
<span class="hljs-comment">#      ,    </span>
$ kubectl get pods -o custom-columns=<span class="hljs-string">'DATA:metadata.*'</span>
<span class="hljs-comment">#      ,     </span>
$ kubectl get pods -o custom-columns=<span class="hljs-string">'DATA:..image'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に重要なのは演算子[]です。</font><font style="vertical-align: inherit;">Kubernetesリソースフィールドの多くはリストであり、この演算子を使用すると、これらのリストからアイテムを選択できます。</font><font style="vertical-align: inherit;">リスト内のすべてのアイテムを選択するために、[*]のようなワイルドカードとともによく使用されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応用例</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力に任意のフィールドまたはリソースフィールドの組み合わせを表示できるため、カスタム列出力形式を使用する可能性は無限です。</font><font style="vertical-align: inherit;">ここにいくつかのサンプルアプリケーションがありますが、それらを自分で調べて、便利なアプリケーションを見つけてください。</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">囲炉裏コンテナ画像の表示：</font></font></strong><br>
<br>
<pre><code class="bash hljs">$ kubectl get pods \<font></font>
  -o custom-columns=<span class="hljs-string">'NAME:metadata.name,IMAGES:spec.containers[*].image'</span><font></font>
<font></font>
NAME                        IMAGES<font></font>
engine-544b6b6467-22qr6     rabbitmq:3.7.8-management,nginx<font></font>
engine-544b6b6467-lw5t8     rabbitmq:3.7.8-management,nginx<font></font>
engine-544b6b6467-tvgmg     rabbitmq:3.7.8-management,nginx<font></font>
web-ui-6db964458-8pdw4      wordpress</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドは、各ポッドのコンテナーイメージの名前を表示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
underには複数のコンテナを含めることができます。その場合、画像の名前はコンマで区切られて同じ行に表示されます。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ノードの可用性のゾーンの表示：</font></font></strong><br>
<br>
<pre><code class="bash hljs">$ kubectl get nodes \<font></font>
  -o <font></font>
custom-columns=<span class="hljs-string">'NAME:metadata.name,ZONE:metadata.labels.failure-domain\.beta\.kubernetes\.io/zone'</span><font></font>
<font></font>
NAME                          ZONE<font></font>
ip-10-0-118-34.ec2.internal   us-east-1b<font></font>
ip-10-0-36-80.ec2.internal    us-east-1a<font></font>
ip-10-0-80-67.ec2.internal    us-east-1b</code></pre><br>
  ,       .       .<br>
<br>
<i>  —   ,     .</i><br>
<br>
         — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>failure-domain.beta.kubernetes.io/zone</code></a>.      ,            .<br>
<br>
      Kubernetes,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> API</a>.     (    ),        YAML  JSON:<br>
<br>
<pre><code class="bash hljs">$ kubectl get nodes -o yaml
<span class="hljs-comment"># </span>
$ kubectl get nodes -o json</code></pre><br>
      ,      .</li>
</ol><br>
<h2>4.       </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubectlがKubernetes APIにリクエストを行うと、その前にkubeconfigファイルを読み取って、接続に必要なすべてのパラメーターを取得します。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトでは、kubeconfigファイルはthis </font></font><code>~/.kube/config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。通常、このファイルは特別なコマンドによって作成または更新されます。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
複数のクラスターを操作する場合、kubeconfigファイルには、これらすべてのクラスターの接続設定が含まれています。使用しているクラスターをkubectlコマンドに通知する方法が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスター内では、いくつかの名前空間を作成できます-物理クラスター内の一種の仮想クラスター。 Kubectlは、kubeconfigファイルからも使用するネームスペースを決定します。そのため、どの名前空間を使用するかをkubectlコマンドに指示する方法も必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この章では、それがどのように機能するか、および効果的な作業を達成する方法について説明します。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KUBECONFIG環境変数にいくつかのkubeconfigファイルがリストされている場合があることに注意してください。</font><font style="vertical-align: inherit;">この場合、これらのファイルはすべて、実行時に1つの共通構成に結合されます。</font><font style="vertical-align: inherit;">パラメータを指定してkubectlを実行することにより、デフォルトのkubeconfigファイルを変更することもできます</font></font><code>--kubeconfig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式ドキュメントを</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照してください</font><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubeconfigファイル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubeconfigファイルが正確に何を含んでいるか見てみましょう：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/km/wu/f1/kmwuf1n123rltcqqx7yfsn-lkam.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、kubeconfigファイルには一連のコンテキストが含まれています。</font><font style="vertical-align: inherit;">コンテキストは3つの要素で構成されています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスター-クラスターサーバーAPIのURL。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー-クラスター内のユーザー認証資格情報。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前空間は、クラスターに参加するときに使用される名前空間です。</font></font></li>
</ul><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際には、kubeconfigファイルでクラスターごとに1つのコンテキストを使用することがよくあります。</font><font style="vertical-align: inherit;">ただし、ユーザーまたは名前空間によって異なる、クラスターごとにいくつかのコンテキストがある場合があります。</font><font style="vertical-align: inherit;">ただし、複数のコンテキストを持つこの構成は一般的ではないため、通常、クラスターとコンテキストの間には1対1のマッピングがあります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
常に、コンテキストの1つが最新です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7u/iv/k-/7uivk-wset48-krwshiohvurgcu.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubectlが構成ファイルを読み取るとき、現在のコンテキストからの情報が常に取得されます。</font><font style="vertical-align: inherit;">上記の例では、kubectlはHareクラスターに接続します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、別のクラスターに切り替えるには、kubeconfigファイルの現在のコンテキストを変更する必要があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/k6/1e/wy/k61ewygran0p0remm_nd3r3inac.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これでkubectlがFoxクラスターに接続します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じクラスター内の別の名前空間に切り替えるには、現在のコンテキストの名前空間要素の値を変更する必要があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/j9/rl/cp/j9rlcpmzxwvykuhsks4lmwcvol4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例では、kubectlはFoxクラスターのProd名前空間を使用します（Test名前空間は以前に設定されています）。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注kubectlもオプションを提供することを</font></font><code>--cluster</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>--user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>--namespace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>--context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのいくつかの現在のコンテキストの要素と、彼は関係なく、kubeconfigファイルにインストールされているものの、上書きすることができます。</font><font style="vertical-align: inherit;">見てください</font></font><code>kubectl options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論的には、kubeconfigファイルのパラメーターを手動で変更できます。</font><font style="vertical-align: inherit;">しかし、それは不便です。</font><font style="vertical-align: inherit;">これらの操作を簡単にするために、自動モードでパラメーターを変更できるさまざまなユーティリティがあります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectxを使用する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスターと名前空間を切り替えるための非常に人気のあるユーティリティ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーティリティはコマンド</font></font><code>kubectx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">提供し</font></font><code>kubens</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、現在のコンテキストと名前空間をそれぞれ変更</font><font style="vertical-align: inherit;">します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すでに述べたように、現在のコンテキストを変更するとは、クラスターごとにコンテキストが1つしかない場合にクラスターを変更することを意味します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのコマンドの実行例を次に示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/142/43f/e39/14243fe39ed3246312afcba799bcb194.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的に、これらのコマンドは、上記のようにkubeconfigファイルを編集するだけです。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Github</font></a><font style="vertical-align: inherit;">の指示に従って</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールし</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます。</font></a><font style="vertical-align: inherit;">
どちらのチームも、コンテキスト名と名前空間のオートコンプリートをサポートしているため、完全に入力する必要がありません。</font><font style="vertical-align: inherit;">オートコンプリートを設定する手順については、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">こちらをご覧ください</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
もう1つの便利な機能</font><font style="vertical-align: inherit;">は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">インタラクティブモードです</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、</font><font style="vertical-align: inherit;">別にインストールする必要がある</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">fzf</font></a><font style="vertical-align: inherit;">ユーティリティと連動して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">機能し</font></a><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">fzfをインストールすると、でインタラクティブモードが自動的に使用可能になり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">インタラクティブモードでは、fzfが提供するインタラクティブな無料検索インターフェースを使用して、コンテキストと名前空間を選択できます。</font></font><code>kubectx</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>kubectx</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>kubectx</code><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェルエイリアスの使用</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のコンテキストと名前空間を変更するための個別のツールは必要ありません。kubectlにはこのためのコマンドも用意されているためです。</font><font style="vertical-align: inherit;">したがって、このコマンド</font></font><code>kubectl config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はkubeconfigファイルを編集するためのサブ</font><font style="vertical-align: inherit;">コマンドを</font><font style="vertical-align: inherit;">提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらの一部を次に示します。</font></font><br>
<br>
<ul>
<li><code>kubectl config get-contexts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：すべてのコンテキストを表示します。</font></font></li>
<li><code>kubectl config current-context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：現在のコンテキストを取得します。</font></font></li>
<li><code>kubectl config use-context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：現在のコンテキストを変更します。</font></font></li>
<li><code>kubectl config set-context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：コンテキストアイテムを変更します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これらのコマンドは長いため、直接使用するのはあまり便利ではありません。</font><font style="vertical-align: inherit;">実行が簡単なシェルエイリアスを作成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのコマンドに基づいて、kubectxと同様の機能を提供する一連のエイリアスを作成しました。</font><font style="vertical-align: inherit;">ここでそれらの効果を見ることができます：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/670/b39/74d/670b3974d32d448015d243b5ec3b8c9f.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エイリアスはfzfを使用してインタラクティブな無料検索インターフェースを提供することに注意してください（kubectxインタラクティブモードの場合と同様）。</font><font style="vertical-align: inherit;">つまり、</font><font style="vertical-align: inherit;">これらのエイリアスを使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">するには、fzf</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;">インストールする</font></i></a><font style="vertical-align: inherit;">必要があり</font><font style="vertical-align: inherit;">ます。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エイリアス自体の定義は次のとおりです。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#   </span>
<span class="hljs-built_in">alias</span> krc=<span class="hljs-string">'kubectl config current-context'</span>
<span class="hljs-comment">#   </span>
<span class="hljs-built_in">alias</span> klc=<span class="hljs-string">'kubectl config get-contexts -o name | sed "s/^/  /;\|^  $(krc)$|s/ /*/"'</span>
<span class="hljs-comment">#   </span>
<span class="hljs-built_in">alias</span> kcc=<span class="hljs-string">'kubectl config use-context "$(klc | fzf -e | sed "s/^..//")"'</span><font></font>
<font></font>
<span class="hljs-comment">#    </span>
<span class="hljs-built_in">alias</span> krn=<span class="hljs-string">'kubectl config get-contexts --no-headers "$(krc)" | awk "{print \$5}" | sed "s/^$/default/"'</span>
<span class="hljs-comment">#    </span>
<span class="hljs-built_in">alias</span> kln=<span class="hljs-string">'kubectl get -o name ns | sed "s|^.*/|  |;\|^  $(krn)$|s/ /*/"'</span>
<span class="hljs-comment">#    </span>
<span class="hljs-built_in">alias</span> kcn=<span class="hljs-string">'kubectl config set-context --current --namespace "$(kln | fzf -e | sed "s/^..//")"'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのエイリアスをインストールするには、上記の定義をファイルに追加する</font></font><code>~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か</font></font><code>~/.zshrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、シェルをリロードする</font><font style="vertical-align: inherit;">必要が</font><font style="vertical-align: inherit;">あります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグインを使用する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubectlを使用すると、メインコマンドと同じように実行されるプラグインをロードできます。</font><font style="vertical-align: inherit;">たとえば、kubectl-fooプラグインをインストールし、コマンドを実行して実行でき</font></font><code>kubectl foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法でコンテキストと名前空間を変更すると便利です。たとえば、実行</font></font><code>kubectl ctx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してコンテキスト</font></font><code>kubectl ns</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を変更し、名前空間を変更します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行う2つのプラグインを作成しました。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl-ctx</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl-ns</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラグインは、前のセクションのエイリアスに基づいて機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下がその仕組みです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb9/a2f/aae/fb9a2faae4414057df3462e1adc8f433.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグインはfzfを使用してインタラクティブな無料検索インターフェースを提供することに注意してください（kubectxインタラクティブモードと同様）。</font><font style="vertical-align: inherit;">つまり、</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">これらのエイリアスを使用</font></i></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">するには、fzf</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font></i><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;">インストールする</font></i></a><i><font style="vertical-align: inherit;">必要があり</font></i><i><font style="vertical-align: inherit;">ます。</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラグインをインストールするには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl-ctx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl-ns</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という名前のシェルスクリプトを</font><font style="vertical-align: inherit;">PATH変数の任意のディレクトリに</font><font style="vertical-align: inherit;">ロードし、</font><font style="vertical-align: inherit;">たとえばを使用して実行可能にする必要があります</font></font><code>chmod +x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その直後、あなたは使用することができる</font></font><code>kubectl ctx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>kubectl ns</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.自動エイリアスによる入力の削減</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェルエイリアスは、入力を高速化する良い方法です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl-aliases</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトに</font><font style="vertical-align: inherit;">は、基本的なkubectlコマンドの約800の略語が含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
800のエイリアスを覚える方法を疑問に思うかもしれませんか？</font><font style="vertical-align: inherit;">ただし、以下に示す簡単なスキームに従って作成されているため、すべてを覚えておく必要はありません。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jr/sz/ad/jrszad7msxn7henkbosaefadlx4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例えば： </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kgpooyaml- </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ubectl </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">po</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ds </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oyaml</font></font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ksysgsvcw- </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ubectl -n kube- </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sys</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tem </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">svc w</font></font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ksysrmcm- </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ubectl -n kube- </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sys</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tem </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rm cm</font></font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kgdepallsl - </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ubectl </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ら</font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEP</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> loyment </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全てSL</font></font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のように、エイリアスはコンポーネントで構成され、各コンポーネントはkubectlコマンドの特定の要素を表します。各エイリアスには、基本的なコマンド、操作、およびリソース用の1つのコンポーネントと、パラメーター用のいくつかのコンポーネントを含めることができます。上記の図に従って、これらのコンポーネントを左から右に「埋める」だけです。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在の詳細図は</font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubにあります</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そこで</font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、エイリアスの完全なリストを</font></font></i></a><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">見つけることもでき</font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;">ます</font></i></a></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
たとえば、エイリアスkgpooyamlallはteamと同等</font></font><code>kubectl get pods -o yaml --all-namespaces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションの相対的な順序は重要ではありません。このコマンドはcommandと</font></font><code>kgpooyamlall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じ</font></font><code>kgpoalloyaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのコンポーネントをエイリアスとして使用することはできません。たとえば</font></font><code>k</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>kg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>klo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>ksys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>kgpo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用することもできます。</font><font style="vertical-align: inherit;">さらに、コマンドラインで、エイリアスと通常のコマンドまたはオプションを組み合わせることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に例を示します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わりに、</font></font><code>kubectl proxy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と書くことができます</font></font><code>k proxy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わりに</font></font><code>kubectl get roles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書き込む</font><font style="vertical-align: inherit;">こと</font><font style="vertical-align: inherit;">ができます</font></font><code>kg roles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（現在、Rolesリソースのエイリアスはありません）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の炉のデータを取得するには、コマンドを使用できます</font></font><code>kgpo my-pod — kubectl get pod my-pod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部のエイリアスはコマンドラインで引数を必要とすることに注意してください。</font><font style="vertical-align: inherit;">たとえば、エイリアス</font></font><code>kgpol </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はを意味し</font></font><code>kubectl get pods -l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">オプションに</font></font><code>-l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は引数が必要です-ラベルの指定。</font><font style="vertical-align: inherit;">エイリアスを使用すると、のようになります</font></font><code>kgpol app=ui</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部のエイリアスには引数が必要なため、エイリアスa、f、lは最後に使用する必要があります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、このスキームを習得するとすぐに、実行したいコマンドから直感的にエイリアスを導き出し、入力にかかる時間を大幅に節約できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取り付け</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubectl-aliasesをインストールするに</font><font style="vertical-align: inherit;">は、GitHubから</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.kubectl_aliases</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルをダウンロード</font><font style="vertical-align: inherit;">して、ファイルに含めるか、次のようにする</font></font><code>~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要</font><font style="vertical-align: inherit;">があります</font></font><code>~/.zshrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">source</span> ~/.kubectl_aliases</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動補完</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前述したように、コマンドラインのエイリアスに単語を追加することがよくあります。</font><font style="vertical-align: inherit;">例えば：</font></font><br>
<br>
<pre><code class="bash hljs">$ kgpooyaml <span class="hljs-built_in">test</span>-pod-d4b77b989</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubectlのオートコンプリートを使用している場合は、リソース名などにオートコンプリートを使用した可能性があります。</font><font style="vertical-align: inherit;">しかし、これはエイリアスが使用されているときに実行できますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは非常に重要な質問です。オートコンプリートが機能しない場合、エイリアスの利点の一部が失われるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
答えは、使用しているシェルによって異なります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zshの場合、エイリアスのオートコンプリートはそのまま使用できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bashの場合、残念ながら、オートコンプリートを機能させるにはいくつかの手順が必要です。</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bashでエイリアスの自動補完を有効にする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bashの問題は、（たとえばTabを押すと）エイリアスを補完しようとすることであり、エイリアスが参照するコマンドではありません（たとえば、Zshが行うように）。</font><font style="vertical-align: inherit;">800個のエイリアスすべてにアドオンスクリプトがないため、オートコンプリートは機能しません。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">コンプリートエイリアス</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
プロジェクト</font><font style="vertical-align: inherit;">は、この問題の一般的な解決策を提供します。</font><font style="vertical-align: inherit;">エイリアスのアドオンメカニズムに接続し、内部的にエイリアスをチームに補完し、アドオンチームのアドオンオプションを返します。</font><font style="vertical-align: inherit;">つまり、エイリアスのアドオンは、チーム全体とまったく同じように動作します。</font><font style="vertical-align: inherit;">
次に、最初にcomplete-aliasをインストールする方法を説明し、次にすべてのkubectlエイリアスに対してアドオンを有効にするように構成する方法を説明します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complete-aliasをインストールする</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、complete-aliasは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bash-completionに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存してい</font><font style="vertical-align: inherit;">ます。したがって、complete-aliasをインストールする前に、bash-completionがインストールされていることを確認する必要があります。 LinuxおよびMacOSのインストール手順は以前に提供されています。</font></font><br>
<br>
<i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MacOSユーザーへの重要な注意</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：kubectlオートコンプリートスクリプトと同様に、complete-aliasは、MacOSでデフォルトで使用されるBash 3.2では機能しません。特に、complete-alias </font></font><code>brew install bash-completion@2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、少なくともBash 4.1を必要とする</font><font style="vertical-align: inherit;">bash-completion v2（</font><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">依存してい</font><font style="vertical-align: inherit;">ます。つまり、MacOSで完全なエイリアスを使用するには、新しいバージョンのBashをインストールする必要があります。</font></font></i><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">GitHubリポジトリ</font></a><font style="vertical-align: inherit;">から</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">bash_completion.sh</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
スクリプトをダウンロード</font><font style="vertical-align: inherit;">して、ファイルに含める必要があります</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>~/.bashrc</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">source</span> ~/bash_completion.sh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェルを再起動すると、complete-aliasが完全にインストールされます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectlエイリアスの自動補完を有効にする</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
技術的には、complete-aliasはシェル関数を提供します</font></font><code>_complete_alias</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この関数はエイリアスをチェックし、aliasコマンドのパディングヒントを返します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数を特定のエイリアスに関連付けるには、組み込みのBash </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メカニズム</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font></font><code>_complete_alias</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、エイリアスを補完するように関数を</font><font style="vertical-align: inherit;">設定</font><font style="vertical-align: inherit;">する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例として、kubectlコマンドのエイリアスkを取り上げます。</font></font><code>_complete_alias</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このエイリアスのアドオンを関数として</font><font style="vertical-align: inherit;">設定</font><font style="vertical-align: inherit;">するには、次のコマンドを実行する必要があります。</font></font><br>
<br>
<pre><code class="bash hljs">$ complete -F _complete_alias k</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この結果、エイリアスkをオートコンプリートすると、エイリアス</font></font><code>_complete_alias</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がチェックされ、コマンドのパディングヒントが返さ</font><font style="vertical-align: inherit;">れる関数が呼び出さ</font><font style="vertical-align: inherit;">れます</font></font><code>kubectl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の例として、次のこと</font></font><code>kg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を意味</font><font style="vertical-align: inherit;">するエイリアスを</font><font style="vertical-align: inherit;">考えて</font><font style="vertical-align: inherit;">みましょう</font></font><code>kubectl get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ complete -F _complete_alias kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前の例と同じように、kgをオートコンプリートすると、で得られるのと同じサプリメントのヒントが得られ</font></font><code>kubectl get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この方法で、システムのすべてのエイリアスにcomplete-aliasを使用できることに注意してください。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、すべてのkubectlエイリアスの自動補完を有効にするには、エイリアスごとに上記のコマンドを実行する必要があります。</font><font style="vertical-align: inherit;">次のスニペットは、kubectl-aliasesをに設定した場合にそれを実行します</font></font><code>~/.kubectl-aliases</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> _a <span class="hljs-keyword">in</span> $(sed <span class="hljs-string">'/^alias /!d;s/^alias //;s/=.*$//'</span> ~/.kubectl_aliases); 
<span class="hljs-keyword">do</span>
  complete -F _complete_alias <span class="hljs-string">"<span class="hljs-variable">$_a</span>"</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードをyours </font></font><code>~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">配置し</font><font style="vertical-align: inherit;">、シェルをリロードすると、800のエイリアスすべてに対してkubectlのオートコンプリートが使用可能になります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.プラグインによるkubectlの拡張 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以降では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、バージョン1.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、kubectlはサポート</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグイン機構</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、追加のコマンドを使用してその機能を拡張することができます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;">Gitプラグイン</font></i></a></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メカニズムに</font></font></i></a><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">精通している場合</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、kubectlプラグインは同じ原理で構築されています。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この章では、プラグインのインストール方法、プラグインの検索場所、独自のプラグインの作成方法について説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグインのインストール</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubectlプラグインは、ビュー名を持つ単純な実行可能ファイルとして配布されます</font></font><code>kubectl-x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">プレフィックス</font></font><code>kubectl-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要で、その後にプラグインを呼び出すことができる新しいkubectlサブコマンドが続きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、helloプラグインは、という名前のファイルとして配布されます</font></font><code>kubectl-hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラグインをインストールするには、ファイル</font></font><code>kubectl-x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をPATH変数の任意のディレクトリに</font><font style="vertical-align: inherit;">コピーして、</font><font style="vertical-align: inherit;">たとえばを使用して実行可能に</font><font style="vertical-align: inherit;">する必要があり</font><font style="vertical-align: inherit;">ます</font></font><code>chmod +x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その直後に、でプラグインを呼び出すことができます</font></font><code>kubectl x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコマンドを使用して、システムに現在インストールされているすべてのプラグインを一覧表示できます。</font></font><br>
<br>
<pre><code class="bash hljs">$ kubectl plugin list</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドは、同じ名前のプラグインが複数ある場合、または実行できないプラグインファイルがある場合にも警告を表示します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krewでプラグインを見つけてインストールする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubectlプラグインは、ソフトウェアパッケージのように共有または再利用できます。</font><font style="vertical-align: inherit;">しかし、他の人が共有しているプラ​​グインはどこにありますか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krewプロジェクトの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目的は、kubectlプラグインを共有、検索、インストール、および管理するための統合ソリューションを提供することです。</font><font style="vertical-align: inherit;">プロジェクトはそれ自体を「kubectlプラグインのパッケージマネージャー」と呼んでいます（Krewは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brewに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">似ています</font><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Krewは、選択してインストールできるkubectlプラグインのリストです。</font><font style="vertical-align: inherit;">同時に、Krewはkubectlのプラグインでもあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、Krewのインストールは、他のkubectlプラグインのインストールと基本的に同じように機能します。</font><font style="vertical-align: inherit;">詳細な手順について</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、GitHubページをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も重要なクルーチーム：</font></font><br>
<br>
<pre><code class="xml hljs">#    <font></font>
$ kubectl krew search [<span class="hljs-tag">&lt;<span class="hljs-name">query</span>&gt;</span>]<font></font>
#    <font></font>
$ kubectl krew info <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><font></font>
#  <font></font>
$ kubectl krew install <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><font></font>
#      <font></font>
$ kubectl krew upgrade<font></font>
#   ,   Krew<font></font>
$ kubectl krew list<font></font>
#  <font></font>
$ kubectl krew remove <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Krewを使用してプラグインをインストールしても、上記の標準的な方法でプラグインをインストールすることに干渉しないことに注意してください。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このコマンド</font></font><code>kubectl krew list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Krewを使用してインストールされたプラグインのみを表示しますが、コマンド</font></font><code>kubectl plugin list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はすべてのプラグイン、つまりKrewを使用してインストールされたプラグインと他の方法でインストールされたプラグインを一覧</font><font style="vertical-align: inherit;">表示する</font><font style="vertical-align: inherit;">ことに注意してください</font><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の場所でプラグインを検索</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Krewは若いプロジェクトですが、現時点で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストに含ま</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れている</font><font style="vertical-align: inherit;">プラグイン</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">約30個だけです。</font><font style="vertical-align: inherit;">必要なものが見つからない場合は、GitHubなどの他の場所でプラグインを見つけることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GitHub </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl-plugins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セクションを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ご覧</font></a><font style="vertical-align: inherit;">になることをお勧めし</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そこには、一見に値する数十の利用可能なプラグインがあります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">独自のプラグインを作成する</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグインは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
自分で</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">作成</font></a><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">-簡単です。上記のように、必要なことを実行する実行可能ファイルを作成し、フォームに名前を付けて</font></font><code>kubectl-x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストールする</font><font style="vertical-align: inherit;">必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルは、bashスクリプト、pythonスクリプト、またはコンパイル済みのgoアプリケーションにすることができます-関係ありません。唯一の条件は、オペレーティングシステムで直接実行できることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今すぐサンプルプラグインを作成しましょう。前のセクションでは、kubectlコマンドを使用して、各ポッドのコンテナを一覧表示しました。このコマンドは、たとえばを使用して呼び出すことができるプラグインに簡単に変換できます</font></font><code>kubectl img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次の内容の</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルを作成します</font></font><code>kubectl-img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
kubectl get pods -o custom-columns=<span class="hljs-string">'NAME:metadata.name,IMAGES:spec.containers[*].image'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルを実行可能にし</font></font><code>chmod +x kubectl-img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て、PATHの任意のディレクトリに移動します。</font><font style="vertical-align: inherit;">その直後にプラグインを使用できます</font></font><code>kubectl img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに述べたように、kubectlプラグインは任意のプログラミング言語またはスクリプトで記述できます。</font><font style="vertical-align: inherit;">シェルスクリプトを使用する場合、プラグインからkubectlを簡単に呼び出すことができるという利点があります。</font><font style="vertical-align: inherit;">ただし、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesクライアントライブラリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、</font></a><font style="vertical-align: inherit;">実際のプログラミング言語でより複雑なプラグインを作成でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Goを使用する場合は、</font><font style="vertical-align: inherit;">kubectlプラグインの記述専用に存在する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cli-runtimeライブラリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も使用でき</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグインを共有する方法</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラグインが他の人に役立つと思われる場合は、GitHubで自由に共有してください。</font><font style="vertical-align: inherit;">それらを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl-plugins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テーマに必ず追加してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラグインを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krewリストに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加するように要求することもできます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これを行う方法の説明は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、GitHubリポジトリにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チームの完成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラグインは現在、オートコンプリートをサポートしていません。</font><font style="vertical-align: inherit;">つまり、プラグインの完全な名前と引数の完全な名前を入力する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GitHub kubectlレポジトリにこの関数の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンリクエスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">したがって、この機能は将来実現される可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸運を ！！！</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このトピックについて他に読むもの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    Kubernetes     </a>. </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Kubernetes       </a>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Kubernetes  </a>.</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja502812/index.html">もっと楽しく。私は真剣です</a></li>
<li><a href="../ja502814/index.html">Starlette + Vue.jsを使用したユーザー認証</a></li>
<li><a href="../ja502816/index.html">セマンティックテクノロジーの神話</a></li>
<li><a href="../ja502818/index.html">Yメッセンジャー：ブロックチェーン上の分散型メッセンジャー*</a></li>
<li><a href="../ja502826/index.html">3D Creaform MetraSCAN 3Dスキャナーの概要</a></li>
<li><a href="../ja502830/index.html">オンラインハッカソン「新しい現実」VirusHack。いかがでしたか</a></li>
<li><a href="../ja502832/index.html">オンラインで利用可能なISTQB認定：個人的な経験</a></li>
<li><a href="../ja502834/index.html">6か月以上でDevOpsエンジニアになる方法 パート5.デプロイメント</a></li>
<li><a href="../ja502836/index.html">Unityエディターアドベンチャー：シリアル化されたマトリョーシカ</a></li>
<li><a href="../ja502838/index.html">ITとデジタルの専門職の違いは何ですか：デジタルの変革と専門家の意見</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>