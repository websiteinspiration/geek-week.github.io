<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⬅️ 🤦🏻 🛌🏼 Localisateurs relatifs dans le sélénium 4 👨🏽‍🏫 🔖 🥀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut, Khabrovsk. En prévision du début du cours Java QA Engineer, nous avons préparé une traduction de matériel intéressant pour vous.
 
 
 
 
 Local...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Localisateurs relatifs dans le sélénium 4</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492032/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salut, Khabrovsk. </font><font style="vertical-align: inherit;">En prévision du début du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cours Java QA Engineer, nous avons</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> préparé une traduction de matériel intéressant pour vous.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/ts/69/cz/ts69cziwlt5_b1sw5qybrnblkpu.png"><br>
<hr><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Localisateurs relatifs</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le sélénium 4 nous a apporté des localisateurs relatifs - des localisateurs relatifs (initialement appelés localisateurs amis). </font><font style="vertical-align: inherit;">Cette fonctionnalité a été ajoutée pour vous aider à trouver des éléments à côté d'autres éléments. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Options disponibles:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">above ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : l'élément de recherche est au-dessus de l'élément spécifié</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en dessous ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : l'élément recherché est en dessous de l'élément spécifié</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toLeftOf ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : l'élément de recherche est situé à gauche de l'élément spécifié</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toRightOf ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : l'élément de recherche est situé à droite de l'élément spécifié</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">near ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : l'élément que vous recherchez ne se trouve pas à plus de 50 pixels de l'élément spécifié. </font><font style="vertical-align: inherit;">Il existe également une méthode surchargée pour spécifier la distance.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes ces méthodes sont surchargées pour accepter By ou WebElement.</font></font><a name="habracut"></a><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de localisateurs relatifs</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette application de librairie à titre d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exemple </font><font style="vertical-align: inherit;">, nous voulons vérifier que le livre à gauche d'Advanced Selenium en Java est Java For Testers. </font><font style="vertical-align: inherit;">Les localisateurs relatifs nous permettent de le faire. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hq/gw/1h/hqgw1hdgs8mkmwyf8slmbekjjle.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici le fragment DOM pour les livres </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/wv/up/pa/wvuppagcvbv8mgmozgkvx7hh97a.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Advanced Selenium in Java" représentés dans le DOM par l'identifiant pid6, et "Java For Testers" par pid5. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une méthode </font></font><code>WebDriver::findElement</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut prendre une méthode </font></font><code>withTagName()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui renvoie un objet </font></font><code>RelativeLocator.RelativeBy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(un descendant de By).</font></font><br>
<br>
<pre><code class="java hljs">driver.findElement(withTagName(<span class="hljs-string">"li"</span>)</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, je peux déjà spécifier des localisateurs relatifs. </font><font style="vertical-align: inherit;">Je sais que «Java For Testers» se trouve à gauche de «Advanced Selenium in Java» (pid6) et se trouve sous «Test Automation in the Real World» (pid1). </font><font style="vertical-align: inherit;">Donc, je peux souligner des deux:</font></font><br>
 <br>
<pre><code class="java hljs">driver.findElement(withTagName(<span class="hljs-string">"li"</span>)<font></font>
                .toLeftOf(By.id(<span class="hljs-string">"pid6"</span>))<font></font>
                .below(By.id(<span class="hljs-string">"pid1"</span>)));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et je reçois Java For Testers (pid5).</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test_book5_is_left_of_book6_and_below_book1</span><span class="hljs-params">()</span></span>{<font></font>
    String id = driver.findElement(withTagName(<span class="hljs-string">"li"</span>)<font></font>
            .toLeftOf(By.id(<span class="hljs-string">"pid6"</span>))<font></font>
            .below(By.id(<span class="hljs-string">"pid1"</span>)))<font></font>
            .getAttribute(<span class="hljs-string">"id"</span>);<font></font>
 <font></font>
    assertEquals(id, <span class="hljs-string">"pid5"</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons utiliser </font></font><code>above()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font><font style="vertical-align: inherit;">méthodes </font></font><code>toRightOf()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour trouver des expériences d'automatisation de test (pid2):</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test_book2_is_above_book6_and_right_of_book1</span><span class="hljs-params">()</span></span>{<font></font>
    String id = driver.findElement(withTagName(<span class="hljs-string">"li"</span>)<font></font>
                    .above(By.id(<span class="hljs-string">"pid6"</span>))<font></font>
                    .toRightOf(By.id(<span class="hljs-string">"pid1"</span>)))<font></font>
            .getAttribute(<span class="hljs-string">"id"</span>);<font></font>
 <font></font>
    assertEquals(id, <span class="hljs-string">"pid2"</span>);<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment ça fonctionne?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas pu trouver «Java For Testers» uniquement en appelant </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toLeftOf (By.id («pid6»))</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Seul, il renverra l'automatisation des tests dans le monde réel (pid1). En effet, il </font></font><code>driver.findElement()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recherche à partir de la racine du DOM et le premier élément à </font></font><code>&lt;</code><code>li&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gauche de Advanced Selenium en Java est Test Automation in the Real World. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selenium utilise la fonction JavaScript </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>getBoundingClientRect()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour rechercher des éléments relatifs. Cette fonction renvoie les propriétés des éléments, telles que droite, gauche, bas et haut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En regardant les propriétés de ces trois livres, nous voyons que Test Automation in the Real World (pid1) et Java For Testers (pid5) ont tous deux la même position sur l'axe des x. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/tl/oy/eo/tloyeopmiic5fwsloycrsj1hc6y.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, ils sont tous les deux à gauche de Java For Testers, avec Test Automation in the Real World (pid1) étant le premier trouvé.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre point à garder à l'esprit concerne les modifications apportées aux fenêtres d'application. </font><font style="vertical-align: inherit;">Si j'ai exécuté les tests mentionnés ci-dessus sur mon application dans la vue mobile, alors naturellement ils auraient échoué car les livres ne sont plus à gauche / à droite des autres livres: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zt/9z/gh/zt9zghhksf5genixz2chlsfqvlg.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
j'ai également rencontré un problème avec des localisateurs sympathiques lorsque j'ai essayé d'utiliser les dans cette application </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToDo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/cg/7m/td/cg7mtde7dyk-c23g2coitiepgfm.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai essayé d'utiliser la méthode </font></font><code>toLeftOf()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour trouver le commutateur d'entrée à côté de l'élément «goodbye world». </font><font style="vertical-align: inherit;">Visuellement, ce commutateur d'entrée est situé à gauche de l'étiquette «au revoir». </font><font style="vertical-align: inherit;">Voici ce div dans le DOM:</font></font><br>
<br>
<pre><code class="java hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"view"</span> data-reactid=<span class="hljs-string">".0.1.2.$645c3b67-884e-4e4f-aecd-8f9367e670f8.0"</span>&gt;<font></font>
    &lt;input <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"toggle"</span> type=<span class="hljs-string">"checkbox"</span> data-reactid=<span class="hljs-string">".0.1.2.$645c3b67-884e-4e4f-aecd-8f9367e670f8.0.0"</span>&gt;<font></font>
    &lt;label data-reactid=<span class="hljs-string">".0.1.2.$645c3b67-884e-4e4f-aecd-8f9367e670f8.0.1"</span>&gt;goodbye world&lt;/label&gt;<font></font>
    &lt;button <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"destroy"</span> data-reactid=<span class="hljs-string">".0.1.2.$645c3b67-884e-4e4f-aecd-8f9367e670f8.0.2"</span>&gt;&lt;/button&gt;<font></font>
&lt;/div&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le code que j'ai utilisé pour trouver l'élément d'entrée à gauche de l'étiquette:</font></font><br>
<br>
<pre><code class="java hljs">driver.findElement(withTagName(<span class="hljs-string">"input"</span>)<font></font>
      .toLeftOf(By.xpath(<span class="hljs-string">"//label[text()='goodbye world']"</span>)))<font></font>
      .click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, je suis tombé sur une exception: </font><font style="vertical-align: inherit;">
il semble que bien que celui-ci </font><font style="vertical-align: inherit;">soit à gauche du </font><font style="vertical-align: inherit;">visuel, il ne l'est pas en réalité. </font><font style="vertical-align: inherit;">J'ai appelé une fonction </font><font style="vertical-align: inherit;">pour ces deux éléments, et ils se chevauchent en fait. </font><font style="vertical-align: inherit;">Notez qu'ils ont tous les deux la position x 838, donc techniquement </font><font style="vertical-align: inherit;">pas à gauche de </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Et quand je sélectionne l'élément </font><font style="vertical-align: inherit;">, je vois maintenant qu'il chevauche vraiment l'élément </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
&lt;img src = " </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">habrastorage.org/webt/hj/aa/46/hjaa46ps-of5_hhlplqaldclc7s.png</font></a><font style="vertical-align: inherit;"> " /</font></font><br>
<br>
<b><code>org.openqa.selenium.NoSuchElementException: Cannot locate an element using [unknown locator]</code></b><br>
 <br><font style="vertical-align: inherit;"></font><code>&lt;</code><code>input&gt;</code><font style="vertical-align: inherit;"></font><code>&lt;</code><code>label&gt;</code><font style="vertical-align: inherit;"></font><code>getBoundingClientRect()</code><font style="vertical-align: inherit;"></font><code>&lt;</code><code>input&gt;</code><font style="vertical-align: inherit;"></font><code>&lt;</code><code>label&gt;</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/eg/ug/4cegugvy5non8ax2miawd5a3trg.png"><br>
 <br><font style="vertical-align: inherit;"></font><code>&lt;</code><code>label&gt;</code><font style="vertical-align: inherit;"></font><code>&lt;</code><code>input&gt;</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : il s'agit d'une version alpha de Selenium WebDriver. </font><font style="vertical-align: inherit;">J'ai parlé avec le chef de projet Selenium Simon Stewart et j'ai découvert que la mise en œuvre peut changer en fonction des commentaires.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font><font style="vertical-align: inherit;">Rendez-vous </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le parcours</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492012/index.html">Les ustensiles de stabilisation Gyenno compensent jusqu'à 80% des tremblements</a></li>
<li><a href="../fr492016/index.html">ABP et tout, tout, tout: saisie automatique des réserves dans le centre de données</a></li>
<li><a href="../fr492018/index.html">Dépassement de vitesse: risques et vulnérabilités dans le domaine des systèmes de transport intelligents</a></li>
<li><a href="../fr492022/index.html">Implémentation d'effets en dessinant des sommets</a></li>
<li><a href="../fr492028/index.html">Piratage de la vie pour entrer rapidement dans le moteur de recherche Zero-click</a></li>
<li><a href="../fr492034/index.html">Utopie appeler une voiture via une application mobile coincée dans le trafic</a></li>
<li><a href="../fr492036/index.html">Comment vendre un produit backend au sein d'une entreprise</a></li>
<li><a href="../fr492038/index.html">Mitap des communautés PHP en mars qui se connectent ou migrent</a></li>
<li><a href="../fr492040/index.html">10 grands référentiels Github que chaque développeur Web devrait connaître</a></li>
<li><a href="../fr492042/index.html">Comment le coronavirus affecte les services de livraison</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>