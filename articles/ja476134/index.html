<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛳️ 👱🏿 😞 MONQ-ロシア出身の監視とAIOps ☝🏾 🛣️ 🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="で私たちのブログ、私たちは、監視と監査のための外国ソリューションについて多くのことを話しました、そして今では国内開発のための時間です。MONQは、一般的な監視システム、リソースサービスモデル、データ分析、高いAIポテンシャル、および特別なライセンスモデル用のコネクタを備えた包括的なシステムです。私た...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MONQ-ロシア出身の監視とAIOps</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/galssoftware/blog/476134/"><img src="https://habrastorage.org/webt/va/9x/jt/va9xjtr2w9jx8ywx7jumx6z5eum.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのブログ、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは、監視と監査のための外国ソリューションについて多くのことを話しました、そして今では国内開発のための時間です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MONQ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、一般的な監視システム、リソースサービスモデル、データ分析、高いAIポテンシャル、および特別なライセンスモデル用のコネクタを備えた包括的なシステムです。</font><font style="vertical-align: inherit;">私たちは見るディストリビューションを与えられ、それが内部でどのようにそこにあるか、そしてすべてがベンダーが言うようにナノテクノロジーであるかどうかを共有することに決めました（結局、プロジェクトはSkolkovoの居住者です）。</font><font style="vertical-align: inherit;">テストの名誉は私に落ちました、そして私はインストール、システムの能力とライセンスについて少しお話しします。</font><font style="vertical-align: inherit;">猫をお願いします。</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2018年、ガートナーは人工知能（AI）をITサポートに適用する方法を説明する新しい用語を導入しました。 「AIOps（IT運用のための人工知能）は、ITサービスが時間と労力を節約して、作業がますます複雑になる環境でさまざまな問題を特定することを約束します。」ガートナーは、AIを使用して問題を自動的に特定し、解決することを提案しています。 2019年、これはおとぎ話のようで、完全に自動化されたITサポートの実際の事例はまだ見たことがありません。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">MONQデジタルラボ</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
からMONQプラットフォームを入手しました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。開発者自身がそれをAIOpsソリューションとして位置付けています。しかし、私はそれを包括的監視、イベント管理、および起動自動化スクリプトのシステムと呼びます。それにはまだ多くの知性がありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当直では、100を超えるさまざまなシステム、サーバー、サービス、サービスをサポートしています。私のカジュアルな監視ツールは、ZabbixとPrometheusです。パフォーマンス監視タスクのほとんどをカバーしています。監視ループ内のいくつかのシステムが応答を停止することがあり、サーバーを再起動することで処理されます（他に方法はなく、だれも曲線コードを書き直すことはありません）。監視システムが2つの独立したソースから問題を特定し、サーバー自体を再起動するケースを実装しようと常に思っていました。このようなタスクでは、RPA（Robotic Process Automation）と呼ばれるようになったため、通常、スクリプトサブシステムを備えたアンブレラシステムが使用されます。無料のシステムは知りませんが、商用のシステムは鋳鉄製の橋のようなものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日は一緒にMONQをインストールし、ZabbixとPrometheusをそれに接続し、アラートを設定し、サーバー再起動スクリプトを記述します。</font><font style="vertical-align: inherit;">そのため、明日は1台のマシンを別のマシンで処理し、クロワッサンでコーヒーを飲むプロセスをたまにしか見ないで、ゆっくりとテーブルに足を投げることができます。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソリューションアーキテクチャ</font></font></h1><br>
<img src="https://habrastorage.org/webt/dg/2e/vo/dg2evox7yqw8abp1qrnsahiu8w0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャMONQ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
システムは、kubernetesクラスターのdockerコンテナーにデプロイされます。</font><font style="vertical-align: inherit;">マイクロサービスセットは機能ブロックに結合されます。</font><font style="vertical-align: inherit;">ユーザーからのすべてのデータ、技術情報、イベント、さまざまな有用なタグによるエンリッチメント後のログが、ClickHouseのデータレイクに飛ばされ、計算と分析のプロセスが行われます。</font><font style="vertical-align: inherit;">パターン、重要なイベントが検出され、複合トリガーが形成され、アラートやインシデントから複雑なユーザースクリプトまで、重要なイベントに対してさまざまな重要なプロセスを起動できます。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開梱</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Youtubeには何かを開梱するビデオがたくさんあります。</font><font style="vertical-align: inherit;">次に、同じことを試みますが、物理的製品ではなく、テキスト画像形式で、ディストリビューションを使用します。</font><font style="vertical-align: inherit;">開始するには、準備-kubernetesクラスターをインストールします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
kubernetesクラスタの設定については、たとえば</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">構成機能について説明します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corednsはクラスターDNSとして使用されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nginx-ingress-controller;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスター内のrbac許可。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">共有ストレージ（pv / pvc）が使用されます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各プロジェクトについて、ベンダーはハードウェアの技術要件を提供します。</font><font style="vertical-align: inherit;">インストールの最小構成は4サーバーです。</font><font style="vertical-align: inherit;">これは、1つの監視システムとの統合を条件として、パイロットを実施するのに十分です。</font><font style="vertical-align: inherit;">私の目的のために、システムの機能をチェックすると、このオプションも機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戦闘状況では、言われたように、システムは負荷と必要なフォールトトレランスに応じて顧客のニーズに合わせて拡張されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最低限のシステムの構成：</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバ</font></font></b></td>
<td align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPUコア</font></font></b></td>
<td align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリGB</font></font></b></td>
<td align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレージ、GB</font></font></b></td>
</tr>
<tr>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesマスター</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">五十</font></font></td>
</tr>
<tr>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubernetesワーカー1</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></td>
</tr>
<tr>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubernetesワーカー2</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></td>
</tr>
<tr>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DBサーバー</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">300</font></font></td>
</tr>
<tr>
<td align="right"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計</font></font></b></td>
<td align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">十三</font></font></b></td>
<td align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></b></td>
<td align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">550</font></font></b></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラットフォームの準備ができたら、ベンダーのansibleプレイブックを起動して、基本的なインフラストラクチャをインストールし、システムを起動します。</font><font style="vertical-align: inherit;">Playbookは次のことを行います。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーに必要なパッケージをインストールします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesを起動します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースサーバーにアプリケーションをインストールして構成します。</font><font style="vertical-align: inherit;">その中には、Clickhouse、RabbitMQ、PostgreSQL、ArangoDB、RedisなどすべてがDockerコンテナに入っています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロサービス構成の集中ストレージ用にConsulをインストールします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムのDBMSおよびインフラストラクチャ部分にエンドポイント、サービス入力エンティティを追加します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">認証データを含むテーブルを生成します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マイクロサービスアプリケーションを手動で開始しないようにするために、ベンダーは、マイクロサービスを追加および更新し、DBMSおよびサービス間の承認を構成する組み込みのマイクロサービスレジストリを準備しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムの起動は、次のアクションに要約されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムインストーラーは、事前に準備された構成ファイルを使用して起動されます（これには、kubernetes、DBMSおよびConsulの承認データ、システムのドメイン名が含まれます）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストーラーがマイクロサービスレジストリを開始します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レジストリを使用して、マイクロサービスが1つずつ開始されます。レジストリは、領事、エンティティのデプロイ、サービス、kubernetesへの入口でマイクロサービスの構成を生成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">起動時に、各マイクロサービスは独自のデータベースのスキーマを読み込みます。</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が起動したインストーラーの結果は下の写真のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ik/-q/bp/ik-qbpypyhdcahvselnvfgjr1ps.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesダッシュボード：インストーラーの結果</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
インストールプロセスが完了すると、MONQは、インストーラー構成ファイルで指定したドメイン名で使用できるようになります。</font><font style="vertical-align: inherit;">そして、彼はここにいます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w0/fv/sg/w0fvsgaitaan23lu2ccv5jyqdqg.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MONQログインインターフェイス</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタマイズ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムの初期設定では、完全な制御権を持つユーザーがすでに存在しています。</font><font style="vertical-align: inherit;">その下でログインして、MONQが何を実行できるかを確認します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムでのユーザーの作成とワークグループのセットアップ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムには2つのユーザー認証方法があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Active Directory</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内蔵。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
初めての知り合いには、組み込みの承認が適しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n6/vy/1t/n6vy1tfd_gljlktewrexw3ehawo.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プリセットシステムユーザー</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
オブジェクトとシステムリソース（統合、構成ユニット（KE）、合成トリガー、スクリプトなど）</font><i><font style="vertical-align: inherit;">へのアクセス</font></i><font style="vertical-align: inherit;">権は、ワーキンググループ（WG）のレベルで発行されます。</font><font style="vertical-align: inherit;">どのWGもオブジェクトの所有者になるか、読み取りまたは書き込みの権限を持つことができます。</font><font style="vertical-align: inherit;">いくつかのアクセスレベルがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有者レベルの権限を持つWGのメンバーは、オブジェクトに対して任意のアクションを実行できます（このレベルの権限を持つWG、オブジェクトは1つしか持つことができません）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記録する権利を持つWGはオブジェクトを管理できますが、オブジェクトを削除して他のWGに権限を与えることはできません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読む権利を持つWGは、オブジェクトに関する情報を表示できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトへのアクセス権がないWGは、その存在をまったく認識していません。</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、システムはWP "スペースの管理者"として作成され、ユーザーを解決しました。</font><font style="vertical-align: inherit;">このWGは、このエンティティで作成されるすべてのオブジェクトに対する完全な権限を持っています。</font><font style="vertical-align: inherit;">システムも確認したい同僚のために、追加のスーパー管理者WPを作成しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g4/7a/nz/g47anzas6oass1-fs0lvfavalbi.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワーキンググループ、役割、参加</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
者特定のユーザー</font><i><font style="vertical-align: inherit;">の</font></i><font style="vertical-align: inherit;">権限は、役割の形でWG内で構成されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCMセットアップ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リソースサービスモデルについてです。これは、合意されたレベルでサービスを提供するKEリソースとKEの構成および関係を記述する論理サービスモデルです。 PCMは、オブジェクト、エンティティ、およびそれらの間の関係に関する情報を格納するために必要です。 MONQのPCMは、KEとそれらの関係に関する情報を含むネットワークグラフです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主な違い、そして私の意見では、システムにPCMを実装することの利点は、ビジネスサービスに重点を置いていることです。これは、サービスまたはサービスの基礎となるインフラストラクチャシステムに焦点を当てずに、エンドユーザーが使用するサービスの完全な構造を示すのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストのために、簡略化したPCM「ユーザーの個人アカウント」を作成しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9w/yr/im/9wyrimhv2at48eolxbtzm-1db5i.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCM「ユーザーの個人アカウント」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モニタリングの設定後、それがどのように変化するかを示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PCMの構成：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報システム（IS）SRVe3_VM15が実行されている仮想マシン。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STR：Nginx_LK、PHP-fpm_LK、MySQL_LK;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのサービス（IS）-LK（個人アカウント）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPモジュール：承認、検索、ドキュメント管理、支払い。</font><font style="vertical-align: inherit;">実際にはもっとたくさんありますが、これまでのところこれらを作成しただけです。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合設定</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MONQは、さまざまなタイプのシステムの接続を提供します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視システム（Zabbix、Prometheus、SCOMなど）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ログ収集システム（Splunk、Logstashなど）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動テスト発射システム（Jenkins、Gitlab CIなど）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスデスク、タスクトラッカー（Microfocus SM、Jira、Redmine、Naumenなど）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視システムZabbix、Prometheusを接続しました。</font><font style="vertical-align: inherit;">これらのコネクタは、統合セクションで構成されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/fn/g2/rlfng29nh25cozjtssc-knmy3s8.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視システムとの統合</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メトリックとイベントは、ZabbixとPrometheusからMONQに送られます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">総合モニタリングの接続（自動機能テスト）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MONQでは、アプリケーションの機能テストを構成することもできます。</font><font style="vertical-align: inherit;">私の例では、これは個人アカウントです。</font><font style="vertical-align: inherit;">Jenkinsの自動テストのビルドをいくつか接続しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/uc/dc/zkucdcbctqye4y8lf3xukibxc4w.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能監視モジュール「FMONプロジェクト」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
MONQの機能監視は、独自の「機能テスト」画面を持つ独立したモジュールです。</font><font style="vertical-align: inherit;">そして、これは私のテストの1つの実装に関するレポートの例です：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xg/n9/lh/xgn9lhinium8-ktryrf7woswr10.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FMONプロジェクト「ユーザー認証」、失敗したアセンブリ</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視とアラートを構成する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準テンプレートを使用して（各統合用の合成トリガー用のいくつかの既製のテンプレートをそのまま使用できます）、ZabbixとPrometheusのプライマリイベント用の合成トリガーを作成しました。ここでの合成トリガーは、プラットフォーム内で作成されたトリガーであり、さまざまなソースからのプライマリデータを処理します。次に、結果のトリガーをPCM要素（KE）にリンクしました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vs/uh/ih/vsuhihafbtzkm4xuxxsu1g6pmkc.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セクション「合成トリガー」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
そして、これはテンプレートによって作成された合成トリガーがどのように見えるかです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/hc/nq/uihcnq1mifnchgcowzw_f7fn8tc.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prometheusのテンプレートを使用して作成された合成トリガーの例例の</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
「マイスクリプト」セクションには、サーバーを再起動するスクリプトがすでにあります。スクリプト自体はLuaで記述されており、変更できます。これに基づいて、サービスを再起動するための独自のスクリプトを作成しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1u/p4/2u/1up42uim2fhft8kwvs0wrahiifs.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーでサービスをリロードするためのスクリプト</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メールクライアントとの通常の統合に加えて、すぐにさまざまなインスタントメッセンジャーへの通知の送信を構成できます。</font><font style="vertical-align: inherit;">この場合、たとえば電報での管理者チャットなど、特別なグループに書き込むチャットボットを設定できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インスタントメッセンジャーとの統合を使用するには、Microsoft Azureクラウドへのオープンアクセスが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上級ユーザーは、Luaで独自の通知プラグインを作成できます。</font><font style="vertical-align: inherit;">以下は、SMS通知を送信するためのスクリプトの例です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iv/ng/1m/ivng1ml1twb-eozevaagfzhjabm.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MONQプラットフォーム用のSMS送信プラグイン</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">視覚化のモニタリング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チューニング後、私のPCMは少し変更され、さらに3つのシステムが一般的な監視用に配置されました。その状態によって、IS「個人ユーザーアカウント」のパフォーマンスが決まります。また、いくつかのサービスを追加しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1_/-8/pv/1_-8pv39yw2v47qk_ruiajawj8o.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トリガーが関連付けられたPCM「ユーザーの個人アカウント」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
監視中のオブジェクトの状態に関する一般情報は、カスタムウィジェットの形式でメインビューに表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/va/9x/jt/va9xjtr2w9jx8ywx7jumx6z5eum.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IS「ユーザーの個人アカウント」のメインビュー</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
スクリーンショットを撮った時点で、データベース内の多数のクエリに問題があり、IS「ユーザーの個人アカウント」のページの応答が増加しました。システムはこれを画面に通知し、SMSを送信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
運用監視では、現在のイベントのリスト（アクティブなイベントと15分前に閉じたイベント）が1つのウィジェットのみの「操作画面」が使用されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ao/z5/e6/aoz5e6fjsuo5r3dwrn21hxhpvgc.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレゼンテーション「操作画面」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
テストのために、MySQLを使用して仮想マシンのCPUに高負荷を生成しました。システムはイベントをキャッチし、事前に準備されたスクリプトを使用してアクションを起動し、mysqldサービスを再起動しました。 15分経過してもイベントがまだアクティブな場合は、再起動が行われます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/25/ec/qi25ecsep-g4pokpjceelnz3zvs.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスが適切に再起動し、すべてが正常であるという通知を受け取りました。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
時間内のすべてのイベントは、「タイムライン」セクションで表示できます。 ITSMシステムがまだ接続されている場合は、KEに従って計画されている作業が表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jd/j6/wn/jdj6wn211j-rdgam9ag8etpyd_c.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「タイムライン」ビューでのイベントの</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
監視監視のためにインストールされたシステムの可用性に関する情報は、「SLAレポート」ビューで表示できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/jw/dp/xqjwdpfxafbb1agxkkd-5g9yxta.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISの「ユーザーの個人アカウント」に関するSLAレポート</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
わかりやすくするために、優先度3と4のイベントを除外して2週間のレポートを生成しました。もちろん、テストイベントもテストしました。</font><font style="vertical-align: inherit;">レポートを信じれば、システムは正常に動作します。</font><font style="vertical-align: inherit;">レポートはPDFおよびXLSにエクスポートされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画面には、ユーザーが事前設定したフィルターに関する情報が表示されます。</font><font style="vertical-align: inherit;">画面上のイベントにタグを付けて、クイック検索やフィルタリングを行うことができます。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライセンシング</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事の終わりには、機能していませんが、MONQの重要な利点を保存しました。これはライセンスです。外部アンブレラ監視ソリューションの大部分は、イベントまたはメトリックが処理されるデバイスの数（通常、エンドポイントごと、OSインスタンスごとなどと呼ばれます）によってライセンスされます。最終的な監視オブジェクトからデータを収集するか、別の監視システムが収集するかに関係なく。メトリックの収集が商用システムを使用して実行される場合、同じものに対する二重支払いは避けられません。 MONQは、外部システムに使用されるコネクタの数によってライセンスされます。つまり、情報を収集する場所から2つのシステムを使用している場合、これらは2つの使用済みコネクタまたは2つのライセンスです。したがって、「徴収手数料」の観点から、MONQを使用しても何も変わりません。これらのシステムとの統合のコストのみを支払います。これには、大きな利点と可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が言われたように、システムの開発の計画は常に導入されている多くの改善です。</font><font style="vertical-align: inherit;">今後6か月の注目すべきイノベーションには、ダッシュボードコンストラクター、合成トリガーを作成するためのマスター、SLAを計算する際の詳細の向上（オブジェクトのアクセシビリティに影響を与える要因と度合いが表示されます）、および外部のパブリックAPIがあります。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">調査結果</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は、開発会社の人たちが簡単に連絡を取り、話し、情報を共有することが好きで、システムが好きでした。</font><font style="vertical-align: inherit;">それでも機能は多くなく、AIOpsの点でSplunkやAppDynamicsと直接比較することは困難ですが、言うまでもなく、このシステムは市場のリーダーとガートナーの象限の中で当然の位置を占めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムを自分で評価したり、プレゼンテーションを受け取ったり、デモを見たり、包括的ソリューションを長い間探していて、パイロットプロジェクトの準備ができている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ウェブサイトの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">フィードバックフォーム</font></a><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">リクエストを残してください</font><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476114/index.html">Pythonがないとどうなりますか？機械学習向けのJuliaと一般</a></li>
<li><a href="../ja476118/index.html">ゲームのインターフェイスデザイン、Dark Souls 3からHavelリングを描く</a></li>
<li><a href="../ja476122/index.html">宇宙を「聞く」：暗黒物質から彗星チュリュモフまで-Gerasimenko</a></li>
<li><a href="../ja476126/index.html">サーバーのパフォーマンスをテストする方法：いくつかのオープンソースベンチマークの選択</a></li>
<li><a href="../ja476128/index.html">jug.msk.ruミーティングでのKotlinとIntelliJ IDEAのプラグインについてIvan OsipovとYuri Artamonov</a></li>
<li><a href="../ja476138/index.html">天文学者は、通信衛星SpaceX、OneWeb、その他の企業が天文学の未来を脅かしていると信じています</a></li>
<li><a href="../ja476140/index.html">7000語は知っているが耳で理解できない場合、リスニングを改善するにはどうすればよいですか？</a></li>
<li><a href="../ja476142/index.html">Javaでフローを制御するために例外の使用を避ける理由</a></li>
<li><a href="../ja476144/index.html">シークレットサンタをプレイするボットの例を使用して、ボットのチャットを作成する必要性と不要な方法</a></li>
<li><a href="../ja476146/index.html">データセンターを拡張する方法。Yandexレポート</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>