<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸš€ ğŸ¥ƒ ğŸ›€ğŸ½ ãƒ•ãƒ©ãƒƒã‚¿ãƒ¼ã€‚éåŒæœŸæ€§ã¨ä¸¦åˆ—æ€§ ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ½ â¯ï¸ âš“ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã‚“ã«ã¡ã¯ã€ãƒãƒ–ãƒ«ï¼ï¼ˆç‰¹ã«ï¼‰ã®éåŒæœŸæ€§ã¨ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰åŒ–ã«é–¢ã™ã‚‹Didier Boelens ã®è¨˜äº‹ã€ŒFutures- Isolates -Event Loopã€ã®ç¿»è¨³ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚DartFlutter
 

TLDR: , . Event Loop, Future async/await (, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ãƒ•ãƒ©ãƒƒã‚¿ãƒ¼ã€‚éåŒæœŸæ€§ã¨ä¸¦åˆ—æ€§</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497278/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚“ã«ã¡ã¯ã€ãƒãƒ–ãƒ«ï¼</font><font style="vertical-align: inherit;">ï¼ˆ</font><font style="vertical-align: inherit;">ç‰¹ã«ï¼‰ã®</font><font style="vertical-align: inherit;">éåŒæœŸæ€§ã¨ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰åŒ–ã«é–¢ã™ã‚‹Didier Boelens </font><font style="vertical-align: inherit;">ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¨˜äº‹ã€ŒFutures-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Isolates </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">-Event Loopã€</font></a><font style="vertical-align: inherit;">ã®ç¿»è¨³ã‚’</font><font style="vertical-align: inherit;">ç´¹ä»‹ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><code>Dart</code><font style="vertical-align: inherit;"></font><code>Flutter</code><font style="vertical-align: inherit;"></font></p><br>
<pre><code class="plaintext hljs">TLDR:  ,        .       Event Loop, Future  async/await (,  JavaScript),   otlin,  ,       . ,        .</code></pre><a name="habracut"></a> <br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦ã€ç”¨èªã®ç¿»è¨³ã«ã¤ã„ã¦ã€‚</font><font style="vertical-align: inherit;">è©±ã—è¨€è‘‰ã§</font></font><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ã€…</font></font></del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç§ã¯ã€Œã‚¹ãƒˆãƒªãƒ¼ãƒ ã€ã€ã€Œãƒˆãƒ¬ãƒ¼ãƒ‰ã€ã€ã€Œãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã€ãªã©ã¨è¨€ã„ã¾ã™ãŒã€å°åˆ·ã•ã‚ŒãŸã“ã‚Œã‚‰ã®ç”¨èªã¯å¥‡å¦™ã§ä¸å™¨ç”¨ã«è¦‹ãˆã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒæ™‚ã«ã€</font></font><code>Stream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ã‚ã‚Š</font></font><code>Thread</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯å¸¸ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ç§ã®å¥½ã¿ã§ã¯ã€åŒã˜Isolateã¯ãƒ­ã‚·ã‚¢èªã§ã¯æ­£å¸¸ã«èã“ãˆã‚‹ã®ã§ã€ã©ã“ã‹ã§ã‚­ãƒªãƒ«æ–‡å­—ã®ã‚¹ãƒšãƒ«ã‚’ä½¿ç”¨ã—ã€ã©ã“ã‹ã§ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚¹ãƒšãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã¡ã“ã¡ã«è§’ã‹ã£ã“ã§ãƒ­ã‚·ã‚¢èªã®å˜èªã®å¾Œã«å½¼ã‚‰ã®è‹±èªã®ã‚ªãƒªã‚¸ãƒŠãƒ«ã€æ™‚ã«ã¯ãã®é€†ã‚‚ã‚ã‚‹ã€‚</font></font></p><br>
<h1 id="vvedenie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰æ›¸ã</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€è¿‘ã€ç§ã¯å¤šãã®å ´åˆã®æ¦‚å¿µã«é–¢é€£ã™ã‚‹è³ªå•ã‚’å–å¾—</font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>Isolate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚³ãƒ¼ãƒ‰ã®ä¸¦åˆ—å®Ÿè¡Œã‚’ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ä¸€éƒ¨ã®é–‹ç™ºè€…ã¯ã€ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œé †åºã‚’ç†è§£ã™ã‚‹ã®ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§ã¯ãã®æ©Ÿä¼šã‚’ã¤ã‹ã¿ã€ã“ã‚Œã‚‰ã®å•é¡Œã«ã¤ã„ã¦è¨˜äº‹ã‚’æ›¸ãã“ã¨ã«ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">åŒæ™‚ã«ã€ä¸»ã«</font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŠã‚ˆã³</font><font style="vertical-align: inherit;">ã®æ¦‚å¿µã«é–¢é€£ã™ã‚‹æ··ä¹±ã‚’å–ã‚Šé™¤ã“ã†ã¨ã—ã¾ã™</font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></p><br>
<h1 id="dart---odnopotochnyy-yazyk"><code>Dart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰è¨€èª</font></font></h1><br>
<p>   ,  <code>Dart</code> â€”   <code>Flutter</code>  <code>Dart</code>.</p><br>
<blockquote><code>Dart</code>       . .  ,          .</blockquote><p> ,      (  ),          ,   .</p><br>
<pre><code class="plaintext hljs">void myBigLoop(){<font></font>
    for (int i = 0; i &lt; 1000000; i++){<font></font>
        _doSomethingSynchronously();<font></font>
    }<font></font>
}</code></pre><br>
<p>  ,  <code>myBigLoop()</code>       .  ,     - ,   <code></code>   ,   .</p><br>
<h1 id="model-vypolneniya-v-dart">   <code>Dart</code></h1><br>
<p> <code>Dart</code>,     ,  <code>Event Loop</code>.</p><br>
<p>   <code>Flutter</code>- (  <code>Dart</code>-),      â€” <code>Thread</code>,    â€” <code></code> (<code>Isolate</code>).   ,      .</p><br>
<p>   ,     :</p><br>
<ol>
<li>   (<code>Queues</code>)   <code>MicroTask</code> ()<br>
 <code>Event</code> (),   <code>FIFO</code> (.: first in first out, .. ,<br>
 ,   ),</li>
<li>  <code>main()</code> ,    </li>
<li> <code>Event Loop</code> ( )</li>
</ol><br>
<p>       ,  <br>
   <code>Event Loop</code>     <br>
,      : <code>MicroTask</code>  <code>Event</code>.</p><br>
<p><code>Event Loop</code>   "" ,  <br>
  "".  ,     <br>
<code>Dart</code>-,      ""   :</p><br>
<pre><code class="plaintext hljs">void eventLoop(){<font></font>
    while (microTaskQueue.isNotEmpty){<font></font>
        fetchFirstMicroTaskFromQueue();<font></font>
        executeThisMicroTask();<font></font>
        return;<font></font>
    }<font></font>
<font></font>
    if (eventQueue.isNotEmpty){<font></font>
        fetchFirstEventFromQueue();<font></font>
        executeThisEventRelatedCode();<font></font>
    }<font></font>
}</code></pre><br>
<p> ,  <code>MicroTask</code>     <code>Event</code>.       ?</p><br>
<h1 id="ochered-microtask"> MicroTask</h1><br>
<p>  <code> </code> ,     <code></code>,    -   ,     <code>Event Loop</code>.</p><br>
<p>   <code> </code>        .       - ,     - :</p><br>
<pre><code class="plaintext hljs">MyResource myResource;<font></font>
<font></font>
    ...<font></font>
<font></font>
    void closeAndRelease() {<font></font>
        scheduleMicroTask(_dispose);<font></font>
        _close();<font></font>
    }<font></font>
<font></font>
    void _close(){<font></font>
        // ,     <font></font>
        //   <font></font>
        ...<font></font>
    }<font></font>
<font></font>
    void _dispose(){<font></font>
        // ,    <font></font>
        //   ,  _close()<font></font>
        // <font></font>
    }</code></pre><br>
<p>-,   ,     .  ,     <code></code>  <code>scheduleMicroTask()</code>   7 .    <code>Event</code>.</p><br>
<h1 id="ochered-event"> Event</h1><br>
<p>   ,    :</p><br>
<ul>
<li> ,  <br>
<ul>
<li> /</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li>...</li>
</ul></li>
<li><code>Future</code></li>
</ul><br>
<p>,      ,      <code>Event</code>.</p><br>
<p>  ,   <code>MicroTask</code> , <code>Event Loop</code>      <code>Event</code>   .</p><br>
<p>,  <code>Futures</code>      <code>Event</code>.</p><br>
<h1 id="futures">Futures</h1><br>
<p><code>Future</code>   ,   <code></code>   (   ) -  .</p><br>
<p> ,     <code>Future</code>:</p><br>
<ul>
<li>      ,  <code>Dart</code></li>
<li>,       <code>Future</code>, <br>
   <code>Event</code></li>
<li>  <code>Future</code>   <code> </code> (incomplete)</li>
<li>     ,   (   <code>Future</code>)</li>
</ul><br>
<p>,    <code>Future</code>      <code>Event</code>,<br>
  <code>Event Loop</code>    .</p><br>
<p>   (   )    <code>then()</code><br>
 <code>catchError()</code>  <code>Future</code>.</p><br>
<p> ,   :</p><br>
<pre><code class="plaintext hljs">void main(){<font></font>
    print('Before the Future');<font></font>
    Future((){<font></font>
        print('Running the Future');<font></font>
    }).then((_){<font></font>
        print('Future is complete');<font></font>
    });<font></font>
    print('After the Future');<font></font>
}</code></pre><br>
<p> ,      :</p><br>
<pre><code class="plaintext hljs">Before the Future<font></font>
After the Future<font></font>
Running the Future<font></font>
Future is complete</code></pre><br>
<p>    :</p><br>
<ol>
<li><code>print('Before the Future')</code></li>
<li> <code>(){print('Running the Future');}</code>   <code>Event</code></li>
<li><code>print('After the Future')</code></li>
<li><code>Event Loop</code>     2</li>
<li>  ,     <code>then()</code></li>
</ol><br>
<p>  :</p><br>
<blockquote> <code>Future</code>   <code></code>,    ,  <code>Event Loop</code></blockquote><br>
<h1 id="asinhronnye-metody-async">  (async)</h1><br>
<p>       <code>async</code>,  <code>Dart</code>  , :</p><br>
<ul>
<li>   â€”  <code>Future</code></li>
<li>     ,       <code>await</code>,     </li>
<li>        <code>Future</code>,     <code>await</code>  </li>
</ul><br>
<p>   ,  <code>await</code>      ,   [    Future],    .<br>
     <code>Event Loop</code>...</p><br>
<p>    ,    <br>
,     </p><br>
<pre><code class="plaintext hljs">void main() async {<font></font>
  methodA();<font></font>
  await methodB();<font></font>
  await methodC('main');<font></font>
  methodD();<font></font>
}<font></font>
<font></font>
methodA(){<font></font>
  print('A');<font></font>
}<font></font>
<font></font>
methodB() async {<font></font>
  print('B start');<font></font>
  await methodC('B');<font></font>
  print('B end');<font></font>
}<font></font>
<font></font>
methodC(String from) async {<font></font>
  print('C start from $from');<font></font>
<font></font>
  Future((){                // &lt;==     -  <font></font>
    print('C running Future from $from');<font></font>
  }).then((_){<font></font>
    print('C end of Future from $from');<font></font>
  });<font></font>
<font></font>
  print('C end from $from');  <font></font>
}<font></font>
<font></font>
methodD(){<font></font>
  print('D');<font></font>
}</code></pre><br>
<p>   :</p><br>
<pre><code class="plaintext hljs">A<font></font>
B start<font></font>
C start from B<font></font>
C end from B<font></font>
B end<font></font>
C start from main<font></font>
C end from main<font></font>
D<font></font>
C running Future from B<font></font>
C end of Future from B<font></font>
C running Future from main<font></font>
C end of Future from main</code></pre><br>
<p>  ,  <code>methodC()</code>                . ,  ,            .</p><br>
<p>   ,  <code>methodD()</code>      ,     : </p><br>
<pre><code class="plaintext hljs">void main() async {<font></font>
  methodA();<font></font>
  await methodB();<font></font>
  await methodC('main');<font></font>
  methodD();  <font></font>
}<font></font>
<font></font>
methodA(){<font></font>
  print('A');<font></font>
}<font></font>
<font></font>
methodB() async {<font></font>
  print('B start');<font></font>
  await methodC('B');<font></font>
  print('B end');<font></font>
}<font></font>
<font></font>
methodC(String from) async {<font></font>
  print('C start from $from');<font></font>
<font></font>
  await Future((){                  // &lt;==  <font></font>
    print('C running Future from $from');<font></font>
  }).then((_){<font></font>
    print('C end of Future from $from');<font></font>
  });<font></font>
  print('C end from $from');  <font></font>
}<font></font>
<font></font>
methodD(){<font></font>
  print('D');<font></font>
}</code></pre><br>
<p>  :</p><br>
<pre><code class="plaintext hljs">A<font></font>
B start<font></font>
C start from B<font></font>
C running Future from B<font></font>
C end of Future from B<font></font>
C end from B<font></font>
B end<font></font>
C start from main<font></font>
C running Future from main<font></font>
C end of Future from main<font></font>
C end from main<font></font>
D</code></pre><br>
<p>,      <code>await</code>  <code>Future</code>  <code>methodC()</code>   .</p><br>
<p>   :</p><br>
<blockquote><code></code>    <code></code>,    ,  <code>Event Loop</code></blockquote><p>  .    .     <code>method1</code>  â€” <code>method2</code>?    ?</p><br>
<pre><code class="plaintext hljs">void method1(){<font></font>
  List&lt;String&gt; myArray = &lt;String&gt;['a','b','c'];<font></font>
  print('before loop');<font></font>
  myArray.forEach((String value) async {<font></font>
    await delayedPrint(value);<font></font>
  });  <font></font>
  print('end of loop');<font></font>
}<font></font>
<font></font>
void method2() async {<font></font>
  List&lt;String&gt; myArray = &lt;String&gt;['a','b','c'];<font></font>
  print('before loop');<font></font>
  for(int i=0; i&lt;myArray.length; i++) {<font></font>
    await delayedPrint(myArray[i]);<font></font>
  }<font></font>
  print('end of loop');<font></font>
}<font></font>
<font></font>
Future&lt;void&gt; delayedPrint(String value) async {<font></font>
  await Future.delayed(Duration(seconds: 1));<font></font>
  print('delayedPrint: $value');<font></font>
}</code></pre><br>
<p>:   .</p><br>
<p>  ,  <code>method1</code>   <code>forEach()</code>   .      ,   <code>async</code> (   <code>Future</code>).      <code>await</code>,        <code>Event</code>.   ,   : <code>print('end of loop')</code>.   <code>Event Loop</code>  3 .</p><br>
<p>  <code>method2</code>,          (   )  â€”   .</p><br>
<p> ,      ,     <br>
 <code>Event Loop</code>...</p><br>
<h1 id="mnogopotochnost"></h1><br>
<p>,          <code>Flutter</code>?     ?</p><br>
<p>,   <code>Isolate</code> ().</p><br>
<h1 id="chto-takoe-izolyat">  </h1><br>
<p>   ,  <code>Isolate</code>  <code>Dart</code>   <code>Thread</code> (). </p><br>
<p>        <code>Thread</code>.</p><br>
<blockquote><code></code>  <code>Flutter</code>   .    <code></code>   .</blockquote><br>
<h1 id="kazhdomu-izolyatu-polozhen-otdelnyy-event-loop"> <code></code>   <code>Event Loop</code>.</h1><br>
<p>      (<code>MicroTask</code>  <code>Event</code>).</p><br>
<p>   <code></code>    <code></code>.</p><br>
<p>         <code>Dart</code>.</p><br>
<h1 id="kak-zapustit-izolyat">  <code></code></h1><br>
<p>    ,     .</p><br>
<h2 id="1-nizkourovnevoe-reshenie">1.  </h2><br>
<p>      ()      API,  <code>Dart</code>.</p><br>
<h3 id="11-shag-1-sozdanie-i-rukopozhatie">1.1.  1:   </h3><br>
<p>   , <code></code>       ,  ,      ""  ""      <code></code>.</p><br>
<p> <code></code>  ,  ,     <code></code>.    <code>SendPort</code> (  ,      ,      /,     ).</p><br>
<p>, ""  " "     ,    "".        :</p><br>
<pre><code class="plaintext hljs">//<font></font>
//   <font></font>
//     <font></font>
//    <font></font>
//<font></font>
SendPort newIsolateSendPort;<font></font>
<font></font>
//<font></font>
//   <font></font>
//<font></font>
Isolate newIsolate;<font></font>
<font></font>
//<font></font>
// ,    <font></font>
//   <font></font>
//<font></font>
void callerCreateIsolate() async {<font></font>
    //<font></font>
    //   ReceivePort  <font></font>
    // SendPort  <font></font>
    //<font></font>
    ReceivePort receivePort = ReceivePort();<font></font>
<font></font>
    //<font></font>
    //   <font></font>
    //<font></font>
    newIsolate = await Isolate.spawn(<font></font>
        callbackFunction,<font></font>
        receivePort.sendPort,<font></font>
    );<font></font>
<font></font>
    //<font></font>
    //     ""<font></font>
    //<font></font>
    newIsolateSendPort = await receivePort.first;<font></font>
}<font></font>
<font></font>
//<font></font>
//    <font></font>
//<font></font>
static void callbackFunction(SendPort callerSendPort){<font></font>
    //<font></font>
    //   SendPort   <font></font>
    //  ""<font></font>
    //<font></font>
    ReceivePort newIsolateReceivePort = ReceivePort();<font></font>
<font></font>
    //<font></font>
    //  ""   SendPort  <font></font>
    //<font></font>
    callerSendPort.send(newIsolateReceivePort.sendPort);<font></font>
<font></font>
    //<font></font>
    //  <font></font>
    //<font></font>
}</code></pre><br>
<blockquote> :            </blockquote><br>
<h3 id="12-shag-2-otpravka-soobscheniya-izolyatu">1.2.  2:   <code></code></h3><br>
<p>,        <code></code>,     : </p><br>
<pre><code class="plaintext hljs">//<font></font>
// ,     <font></font>
//   <font></font>
// <font></font>
//     ""<font></font>
//   String (   )<font></font>
//<font></font>
Future&lt;String&gt; sendReceive(String messageToBeSent) async {<font></font>
    //<font></font>
    //     <font></font>
    //<font></font>
    ReceivePort port = ReceivePort();<font></font>
<font></font>
    //<font></font>
    //   ,  <font></font>
    //  ,   <font></font>
    //   <font></font>
    //<font></font>
    newIsolateSendPort.send(<font></font>
        CrossIsolatesMessage&lt;String&gt;(<font></font>
            sender: port.sendPort,<font></font>
            message: messageToBeSent,<font></font>
        )<font></font>
    );<font></font>
<font></font>
    //<font></font>
    //     <font></font>
    //<font></font>
    return port.first;<font></font>
}<font></font>
<font></font>
//<font></font>
// Callback-    <font></font>
//<font></font>
static void callbackFunction(SendPort callerSendPort){<font></font>
    //<font></font>
    //   SendPort   <font></font>
    //  <font></font>
    //<font></font>
    ReceivePort newIsolateReceivePort = ReceivePort();<font></font>
<font></font>
    //<font></font>
    //  ""   SendPort  <font></font>
    //<font></font>
    callerSendPort.send(newIsolateReceivePort.sendPort);<font></font>
<font></font>
    //<font></font>
    //  ,    ,<font></font>
    //    <font></font>
    //<font></font>
    newIsolateReceivePort.listen((dynamic message){<font></font>
        CrossIsolatesMessage incomingMessage = message as CrossIsolatesMessage;<font></font>
<font></font>
        //<font></font>
        //  <font></font>
        //<font></font>
        String newMessage = "complemented string " + incomingMessage.message;<font></font>
<font></font>
        //<font></font>
        //   <font></font>
        //<font></font>
        incomingMessage.sender.send(newMessage);<font></font>
    });<font></font>
}<font></font>
<font></font>
//<font></font>
//  <font></font>
//<font></font>
class CrossIsolatesMessage&lt;T&gt; {<font></font>
    final SendPort sender;<font></font>
    final T message;<font></font>
<font></font>
    CrossIsolatesMessage({<font></font>
        @required this.sender,<font></font>
        this.message,<font></font>
    });<font></font>
}</code></pre><br>
<h3 id="13-shag-3-udalenie-izolyata">1.3.  3:  <code></code></h3><br>
<p>      <code></code>,    :</p><br>
<pre><code class="plaintext hljs">void dispose(){<font></font>
    newIsolate?.kill(priority: Isolate.immediate);<font></font>
    newIsolate = null;<font></font>
}</code></pre><br>
<h3 id="14-zamechanie---stream-s-odnim-slushatelem">1.4.  â€” <code>Stream</code>   </h3><br>
<p>   ,   "" <code></code>  ""    (Streams).    <code>Single-Listener Stream</code> (   ).</p><br>
<h2 id="2-odnorazovoe-vychislenie-one-shot-computation">2.   (One-shot computation)</h2><br>
<p> ,               <code></code>  ,  <code>Dart</code>    <code>compute</code>, </p><br>
<ul>
<li> <code></code></li>
<li>    <code></code>,    </li>
<li>  â€”  -</li>
<li> <code></code>    .</li>
</ul><br>
<blockquote> :               ( ).</blockquote><br>
<h2 id="3-ochen-vazhnoe-ogranichenie">3.   </h2><br>
<p>   ,  , </p><br>
<blockquote>  (Platform-Channel communication)     <code></code> (main isolate).   <code></code>,      .</blockquote><p> ,      <code></code>,<br>
  .</p><br>
<h1 id="kogda-mne-sleduet-ispolzovat-future-i-izolyaty">    <code>Future</code>  <code></code></h1><br>
<p>       ,  :</p><br>
<ul>
<li></li>
<li> </li>
<li>  (user friendliness)</li>
</ul><br>
<p>      ,        (user experiences lags),      .</p><br>
<p>  ,       :</p><br>
<ol>
<li>      ,  <br>
  (       )</li>
<li>    ,     <br>
 ,   â€” <code>Event Loop</code>   <code>Futures</code></li>
<li>      ,  <br>
    ,   â€” <code></code></li>
</ol><br>
<p> , ,   ,   <code>Futures</code> (   <code>async</code>-) â€”   <code>Futures</code>      <code>Event Loop</code>  "" .    ,     ( - ,    ).</p><br>
<p>  ,       <code>Future</code>  <code></code> â€”   ,     .</p><br>
<ul>
<li>  =&gt; <code>Future</code></li>
<li>  =&gt; <code></code></li>
</ul><br>
<p>       <code></code>:</p><br>
<ul>
<li> JSON,     (HttpRequest),  <br>
  =&gt;  <code>compute</code></li>
<li>:      =&gt; <code></code></li>
<li>  (  ..)    =&gt; <code></code></li>
<li>   :       <code></code>,   ,     .</li>
</ul><br>
<h1 id="zaklyuchenie"></h1><br>
<p>,   ,   <code>Event Loop</code>  .</p><br>
<p><font style="vertical-align: inherit;"></font><code>Flutter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font></font><code>Dart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ãŒã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚ã‚‹ã“ã¨</font><font style="vertical-align: inherit;">ã‚’å¿˜ã‚Œãªã„ã“ã¨ã‚‚é‡è¦</font><font style="vertical-align: inherit;">ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æº€è¶³ã•ã›ã‚‹ãŸã‚ã«ã€é–‹ç™ºè€…ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã§ãã‚‹ã ã‘ã‚¹ãƒ ãƒ¼ã‚ºã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><code>Futures</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ã“ã®ç›®æ¨™ã‚’é”æˆã™ã‚‹ã®ã«å½¹ç«‹ã¤å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¸é‹ã‚’</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja497264/index.html">ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã€‚ãƒ‘ãƒ¼ãƒˆ2.è‡ªå‹•ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š</a></li>
<li><a href="../ja497268/index.html">ã€Œã‚ãªãŸã®ãŸã‚ã®è¨˜äº‹ã‚’èª­ã‚€ã€ã¨ã„ã†è¦‹å‡ºã—ã€‚2020å¹´3æœˆã€‚ãƒ‘ãƒ¼ãƒˆ2</a></li>
<li><a href="../ja497270/index.html">æ–°ã—ã„ç¾å®Ÿã€‚250ä¸‡ãƒ«ãƒ¼ãƒ–ãƒ«ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒƒã‚«ã‚½ãƒ³</a></li>
<li><a href="../ja497272/index.html">ã‚»ãƒ©ãƒ•ã‚£ãƒ ã¨ã¯ï¼Ÿã¾ãŸã¯ã€ãƒãƒƒã‚«ã‚½ãƒ³ã‚’åŒæ™‚ã«è² ã‘ã¦å‹ã¤æ–¹æ³•</a></li>
<li><a href="../ja497276/index.html">ãƒã‚§ãƒƒã‚¯ï¼šã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§ä½œæ¥­ã™ã‚‹ã¨ãã®ã‚ãªãŸã®ãƒãƒ¼ã‚ºã¯ã©ã®ç¨‹åº¦ã€Œå¥åº·ã€ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja497280/index.html">ç§ãŒæã‚Œã‚‹ã“ã¨ã‚’ã‚„ã‚ã¦ã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«ã«æ‹ã‚’ã—ãŸæ–¹æ³•</a></li>
<li><a href="../ja497282/index.html">Angularã§ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚ESLintã€codelyzerã€stylelintã€huskyã€lint-stagedãŠã‚ˆã³Prettierã®èª¿ç†</a></li>
<li><a href="../ja497286/index.html">Ludum Dareï¼šé–‹å§‹ã®1é€±é–“å‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</a></li>
<li><a href="../ja497288/index.html">è£…é£¾ã‚·ãƒ¼ãƒªãƒ³ã‚°ãƒ©ã‚¤ãƒˆFeron AL5000</a></li>
<li><a href="../ja497290/index.html">Sandy Bridge +ã§uopã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>