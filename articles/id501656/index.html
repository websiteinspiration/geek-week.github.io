<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ›ŒğŸ¿ ğŸ•Ÿ ğŸ‘¨â€ğŸš€ Pengembangan perpustakaan perusahaan komponen Bereaksi. Pendekatan lintas platform ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ğŸˆ´ ğŸ‘´ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini menceritakan tentang keberhasilan implementasi sistem desain di perusahaan salah satu pengecer DIY terbesar. Prinsip-prinsip dan pendekata...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pengembangan perpustakaan perusahaan komponen Bereaksi. Pendekatan lintas platform</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/luxoft/blog/501656/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel ini menceritakan tentang keberhasilan implementasi sistem desain di perusahaan salah satu pengecer DIY terbesar. </font><font style="vertical-align: inherit;">Prinsip-prinsip dan pendekatan pengembangan lintas-platform komponen UI menggunakan perpustakaan Asli Bereaksi dan Bereaksi dijelaskan, serta solusi untuk masalah penggunaan kembali kode antara proyek untuk platform yang berbeda.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, beberapa kata tentang bagaimana semuanya dimulai, dan mengapa ide menerapkan desain sistem muncul. Semuanya dimulai dengan aplikasi Android seluler untuk penjual di toko. Aplikasi ini dibangun di atas kerangka React-Native. Fungsi awal diwakili oleh hanya beberapa modul, seperti mencari produk dalam katalog dan kartu produk, dokumen penjualan. Omong-omong, sekarang ini adalah aplikasi yang cukup kuat yang telah sebagian besar menggantikan fungsi meja informasi di toko. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, proyek aplikasi web untuk karyawan departemen logistik, serta berbagai konfigurator, diluncurkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada tahap ini, pemahaman tentang pendekatan umum untuk desain aplikasi ini, serta keberadaan basis kode yang cukup besar, muncul. Dan logis untuk mensistematisasikan yang lain untuk digunakan kembali lebih lanjut.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mensistematisasikan UI / UX, diputuskan untuk mengembangkan sistem desain. Saya tidak akan merinci apa itu. Di Internet, Anda dapat menemukan banyak artikel tentang topik ini. Misalnya, di HabrÃ©, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">karya Andrei Sundiev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dapat direkomendasikan untuk dibaca </font><font style="vertical-align: inherit;">.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengapa mendesain sistem dan apa kelebihannya? Yang pertama adalah pengalaman umum dan perasaan menggunakan produk. Pengguna mendapatkan antarmuka yang familier terlepas dari aplikasinya: tombol-tombolnya terlihat dan bekerja seperti biasa, menu terbuka di tempat yang tepat dan dengan dinamika yang tepat, bidang input bekerja dengan cara biasa. Keuntungan kedua adalah pengenalan standar tertentu dan pendekatan umum baik dari sisi desain dan dari sisi pengembangan. Setiap fungsionalitas baru dikembangkan sesuai dengan kanon dan pendekatan yang sudah mapan. Dari hari-hari pertama, karyawan baru menerima pekerjaan yang jelas. Berikutnya adalah menggunakan kembali komponen dan menyederhanakan pengembangan. Tidak perlu "menemukan kembali roda" setiap saat. Anda dapat membangun antarmuka dari blok siap pakai dengan hasil akhir yang diharapkan.Nah, keuntungan utama di tempat pertama bagi pelanggan adalah menghemat uang dan waktu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi apa yang sudah kita lakukan. Bahkan, kami telah membuat tidak hanya perpustakaan komponen, tetapi seluruh kerangka kerja lintas platform. Kerangka kerja ini didasarkan pada skema batch. Kami memiliki 5 paket inti npm. Ini adalah inti untuk menyebarkan aplikasi lintas-platform web dan Android. Paket modul, utilitas dan layanan. Dan satu paket komponen, yang akan dibahas nanti. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah ini adalah diagram UML dari paket komponen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wi/kn/xs/wiknxsuqj_n4jze72crt4c4u10g.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini termasuk komponen itu sendiri, beberapa di antaranya independen (elemen), dan beberapa terhubung satu sama lain, serta inti dalam atau "sub-inti".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita pertimbangkan secara lebih terperinci apa yang termasuk dalam â€œsubnukleusâ€. Yang pertama adalah lapisan visual dari desain sistem. Semuanya di sini adalah tentang palet warna, tipografi, sistem indentasi, kisi, dll. Blok selanjutnya adalah layanan yang diperlukan agar komponen dapat berfungsi, seperti: ComponentsConfig (konfigurasi komponen), StyleSet (saya akan membahas konsep ini secara lebih rinci nanti) dan Device (metode untuk bekerja dengan perangkat api perangkat). Dan blok ketiga adalah semua jenis pembantu (resolver, generator gaya, dll.).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fx/7l/f6/fx7lf6zz7n8olddc2yuf7576s6a.jpeg" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat mengembangkan perpustakaan, kami menggunakan pendekatan atom untuk desain komponen. Semuanya dimulai dengan penciptaan komponen atau elemen elementer. Mereka adalah "partikel" elementer yang tidak tergantung satu sama lain. Yang utama adalah View, Text, Image, Icon. Berikutnya adalah komponen yang lebih kompleks. Masing-masing dari mereka menggunakan satu atau lebih elemen untuk membangun strukturnya. Misalnya, tombol, bidang input, pilih, dll. Level selanjutnya adalah pola. Mereka adalah kombinasi komponen untuk menyelesaikan masalah UI. Misalnya, formulir otorisasi, header dengan parameter dan pengaturan, atau kartu produk yang dirancang oleh perancang yang dapat digunakan dalam modul yang berbeda. Tingkat penting terakhir dan paling sulit dan pada saat yang sama adalah perilaku yang disebut. Ini adalah modul yang siap digunakan,Menerapkan logika bisnis tertentu dan, mungkin, termasuk serangkaian permintaan back-end yang diperlukan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/00/jv/e3/00jve3iwyh64n0tifikfxtoz0v4.jpeg" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, mari kita beralih ke implementasi perpustakaan komponen. </font><font style="vertical-align: inherit;">Seperti yang saya sebutkan sebelumnya, kami memiliki dua platform target - web dan Android (versi asli). </font><font style="vertical-align: inherit;">Jika di web ini adalah elemen yang terkenal untuk semua pengembang web seperti div, span, img, header, dll., Dalam reaksi-asli ini adalah komponen View, Text, Image, Modal. </font><font style="vertical-align: inherit;">Dan hal pertama yang kami sepakati adalah nama komponennya. </font><font style="vertical-align: inherit;">Kami memutuskan untuk menggunakan sistem gaya reaksi-asli, sebagai </font><font style="vertical-align: inherit;">pertama, beberapa basis komponen sudah diimplementasikan dalam proyek-proyek, dan kedua, nama-nama ini adalah yang paling universal dan dapat dipahami untuk pengembang web dan pengembang yang asli-bereaksi. </font><font style="vertical-align: inherit;">Misalnya, perhatikan komponen Lihat. </font><font style="vertical-align: inherit;">Metode komponen render bersyarat untuk web terlihat seperti ini:</font></font><br>
<br>
<pre><code class="javascript hljs">render() {
	<span class="hljs-keyword">return</span>(
		<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...props</span>}&gt;</span>
			{children}
		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
	)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu </font><font style="vertical-align: inherit;">di bawah tenda, ini tidak lebih dari sebuah div dengan alat peraga dan keturunan yang diperlukan. </font><font style="vertical-align: inherit;">Dalam reaksi asli, strukturnya sangat mirip, hanya komponen View yang digunakan dan bukan divs:</font></font><br>
<br>
<pre><code class="javascript hljs">render() {
	<span class="hljs-keyword">return</span>(
		<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> {<span class="hljs-attr">...props</span>}&gt;</span>
			{children}
		<span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><font></font>
	)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muncul pertanyaan: bagaimana menggabungkan ini menjadi satu komponen dan pada saat yang sama membagi rendering? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sinilah pola Bereaksi yang disebut HOC atau Komponen Orde Tinggi datang untuk menyelamatkan. </font><font style="vertical-align: inherit;">Jika Anda mencoba menggambar diagram UML dari pola ini, Anda mendapatkan sesuatu seperti berikut:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/73/sz/tb/73sztbbrwdkvgknh3edlwk93gyo.jpeg" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, setiap komponen terdiri dari apa yang disebut delegasi yang menerima alat peraga dari luar dan bertanggung jawab atas logika yang sama untuk kedua platform, dan dua bagian platform di mana metode spesifik untuk setiap platform sudah dienkapsulasi dan render yang paling penting. </font><font style="vertical-align: inherit;">Misalnya, pertimbangkan kode delegasi tombol:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buttonDelegate</span>(<span class="hljs-params">ReactComponent: ComponentType&lt;Props&gt;</span>): <span class="hljs-title">ComponentType</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ButtonDelegate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{<font></font>
        <font></font>
        <span class="hljs-comment">// Button common methods</span><font></font>
<font></font>
        render() {<font></font>
           <span class="hljs-keyword">const</span> { onPress, onPressIn, onPressOut } = <span class="hljs-keyword">this</span>.props;
            <span class="hljs-keyword">const</span> delegate = {
                <span class="hljs-attr">buttonContent</span>: <span class="hljs-keyword">this</span>.buttonContent,
                <span class="hljs-attr">buttonSize</span>: <span class="hljs-keyword">this</span>.buttonSize,
                <span class="hljs-attr">iconSize</span>: <span class="hljs-keyword">this</span>.iconSize,
                <span class="hljs-attr">onClick</span>: onPress,
                <span class="hljs-attr">onMouseUp</span>: onPressIn,
                <span class="hljs-attr">onMouseDown</span>: onPressOut,
                <span class="hljs-attr">onPress</span>: <span class="hljs-keyword">this</span>.onPress,
                <span class="hljs-attr">textColor</span>: <span class="hljs-keyword">this</span>.textColor,<font></font>
            };<font></font>
            <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReactComponent</span> {<span class="hljs-attr">...this.props</span>} <span class="hljs-attr">delegate</span>=<span class="hljs-string">{delegate}</span> /&gt;</span></span>);<font></font>
        }<font></font>
    };<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Delegasi menerima sebagai argumen bagian platform dari komponen, mengimplementasikan metode yang sama untuk kedua platform dan meneruskannya ke bagian platform. </font><font style="vertical-align: inherit;">Bagian platform dari komponen itu sendiri adalah sebagai berikut:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">WebProps</span>, <span class="hljs-title">State</span>&gt; </span>{<font></font>
    <font></font>
   <span class="hljs-comment">// Web specific methods</span><font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">delegate</span>: { onPress, buttonContent } } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">{this.classes}</span>
                {<span class="hljs-attr">...buttonProps</span>}
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onPress}</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>
            &gt;</span>
                {buttonContent(this.spinner, this.iconText)}
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> buttonDelegate(Button);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah metode render dengan semua fitur platformnya. Fungsi umum dari delegasi datang dalam bentuk objek melalui alat peraga delegasi. Contoh bagian platform dari tombol untuk implementasi asli-reaksi:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">NativeProps</span>, <span class="hljs-title">State</span>&gt; </span>{<font></font>
<font></font>
    <span class="hljs-comment">// Native specific methods</span><font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">delegate</span>: { onPress, buttonContent } } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">styleSet</span>=<span class="hljs-string">{this.styles}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">TouchableOpacity</span>
                    {<span class="hljs-attr">...butonProps</span>}
                    <span class="hljs-attr">onPress</span>=<span class="hljs-string">{onPress}</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">{this.touchableStyles}</span>
                    {<span class="hljs-attr">...touchableProps</span>}    
                &gt;</span>
                    {buttonContent(this.spinner, this.iconText)}
                <span class="hljs-tag">&lt;/<span class="hljs-name">TouchableOpacity</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> buttonDelegate(Button);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, logikanya serupa, tetapi komponen yang bereaksi asli digunakan. Di kedua daftar, buttonDelegate adalah HOC dengan logika umum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan pendekatan ini dalam implementasi komponen, muncul pertanyaan tentang pemisahan bagian platform selama perakitan proyek. Penting untuk memastikan bahwa paket web yang digunakan oleh kami dalam proyek-proyek untuk web hanya mengumpulkan bagian-bagian komponen yang dimaksudkan untuk web, sedangkan metro bundler dalam bahasa asli harus "menghubungkan" bagian platformnya, tidak memperhatikan komponen untuk web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengatasi masalah ini, mereka menggunakan fitur bundler metro bawaan, yang memungkinkan Anda menentukan awalan ekstensi file platform. Dalam kasus kami, metro.config.js terlihat seperti ini:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">resolver</span>: {
        <span class="hljs-attr">useWatchman</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">platforms</span>: [<span class="hljs-string">'native'</span>],<font></font>
    },<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, ketika membangun bundel, metro pertama-tama mencari file dengan ekstensi native.js, dan kemudian, jika tidak ada di direktori saat ini, itu mengaitkan file dengan ekstensi .js. Fungsionalitas ini memungkinkan untuk menempatkan bagian platform dari komponen dalam file terpisah: bagian untuk web terletak di file .js, bagian asli-reaksi ditempatkan dalam file dengan ekstensi .native.js. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Omong-omong, webpack memiliki fungsi yang sama menggunakan NormalModuleReplacementPlugin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tujuan lain dari pendekatan lintas-platform adalah untuk menyediakan mekanisme tunggal untuk komponen styling. Dalam hal aplikasi web, kami memilih prepasscessor sass, yang akhirnya dikompilasi menjadi css biasa. Itu untuk komponen web, kami menggunakan pengembang className reaksi yang familier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komponen asli-reaksi ditata melalui gaya inline dan gaya alat peraga. </font><font style="vertical-align: inherit;">Itu perlu untuk menggabungkan kedua pendekatan ini, sehingga memungkinkan untuk menggunakan kelas gaya untuk aplikasi Android. </font><font style="vertical-align: inherit;">Untuk tujuan ini, konsep styleSet diperkenalkan, yang tidak lebih dari serangkaian string - nama kelas:</font></font><br>
<br>
<pre><code class="javascript hljs">styleSet: <span class="hljs-built_in">Array</span>&lt;string&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat yang sama, layanan StyleSet dengan nama yang sama diimplementasikan untuk react-asli, yang memungkinkan mendaftarkan nama kelas:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> StyleSet.define({
    <span class="hljs-string">'lmui-Button'</span>: {
        <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">6</span>,<font></font>
    },<font></font>
    <span class="hljs-string">'lmui-Button-buttonSize-md'</span>: {
        <span class="hljs-attr">paddingTop</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">paddingBottom</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">paddingLeft</span>: <span class="hljs-number">12</span>,
        <span class="hljs-attr">paddingRight</span>: <span class="hljs-number">12</span>,<font></font>
    },<font></font>
    <span class="hljs-string">'lmui-Button-buttonSize-lg'</span>: {
        <span class="hljs-attr">paddingTop</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">paddingBottom</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">paddingLeft</span>: <span class="hljs-number">16</span>,
        <span class="hljs-attr">paddingRight</span>: <span class="hljs-number">16</span>,<font></font>
    },<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk komponen web, styleSet adalah array nama kelas css yang "direkatkan" menggunakan perpustakaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classnames</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena proyek ini adalah lintas-platform, jelas bahwa dengan pertumbuhan basis kode, jumlah dependensi eksternal juga meningkat. Selain itu, dependensi berbeda untuk setiap platform. Misalnya, untuk komponen web, perpustakaan seperti style-loader, react-dom, classnames, webpack, dll diperlukan. Untuk komponen yang asli, sejumlah besar perpustakaan asli digunakan, misalnya asli yang bereaksi sendiri. Jika sebuah proyek di mana ia seharusnya menggunakan perpustakaan komponen hanya memiliki satu platform target, maka menginstal semua dependensi pada platform lain tidak rasional. Untuk mengatasi masalah ini, kami menggunakan kait postinstall dari npm itu sendiri, di mana skrip diinstal untuk menginstal dependensi untuk platform yang ditentukan. Ketergantungan itu sendiri terdaftar di bagian yang sesuai dari package.json paket,dan platform target harus ditentukan dalam paket project.json sebagai sebuah array.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, pendekatan ini mengungkapkan kelemahan, yang kemudian berubah menjadi beberapa masalah selama perakitan dalam sistem CI. Akar masalahnya adalah bahwa dengan package-lock.json, skrip yang ditentukan dalam postinstall tidak menginstal semua dependensi terdaftar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harus mencari solusi lain untuk masalah ini. Solusinya sederhana. Skema dua paket diterapkan di mana semua dependensi platform ditempatkan di bagian dependensi paket platform yang sesuai. Sebagai contoh, dalam kasus web, paket disebut komponen-web, di mana ada satu file package.json tunggal. Ini berisi semua dependensi untuk platform web, serta paket utama dengan komponen komponen. Pendekatan ini memungkinkan kami untuk mempertahankan pemisahan dependensi dan menjaga fungsionalitas package-lock.json.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai kesimpulan, saya akan memberikan contoh kode JSX menggunakan perpustakaan komponen kami:</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;View row&gt;
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>
      <span class="hljs-attr">col-xs</span>=<span class="hljs-string">{12}</span>
      <span class="hljs-attr">col-md</span>=<span class="hljs-string">{8}</span>
      <span class="hljs-attr">col-lg</span>=<span class="hljs-string">{4}</span>
      <span class="hljs-attr">col-xl</span>=<span class="hljs-string">{4}</span>
      <span class="hljs-attr">middle-xs</span>
      <span class="hljs-attr">col-md-offset-3</span>
   /&gt;</span></span>
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">size</span>=<span class="hljs-string">â€fs1â€</span>&gt;</span>Sample text<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><font></font>
   &lt;/View&gt;<font></font>
&lt;/View&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuplikan kode ini adalah lintas-platform dan berfungsi sama di aplikasi reaksi untuk web dan aplikasi Android di asli-reaksi. </font><font style="vertical-align: inherit;">Jika perlu, kode yang sama dapat "ditutup" di bawah iOS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, tugas utama yang kami hadapi terpecahkan - penggunaan kembali maksimum dari kedua pendekatan desain dan basis kode antara berbagai proyek. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tolong tunjukkan dalam komentar mana pertanyaan tentang topik ini yang menarik untuk dipelajari di artikel selanjutnya.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id501646/index.html">Pergi, Vue, dan 3 hari untuk mengembangkan: sistem waktu nyata untuk memantau pasien</a></li>
<li><a href="../id501648/index.html">10 ekstensi untuk VS Code, tanpanya saya tidak bisa memprogram</a></li>
<li><a href="../id501650/index.html">Apa yang ada di dalam file .wasm? Memperkenalkan wasm-decompile</a></li>
<li><a href="../id501652/index.html">Nuxt sebagai server fullstack: frontend + backend API Server (Bagian 1)</a></li>
<li><a href="../id501654/index.html">Membangun proses kerja di situs jarak jauh: rekomendasi praktis</a></li>
<li><a href="../id501658/index.html">Cara membuat alur kerja "di kejauhan": 7 langkah praktis</a></li>
<li><a href="../id501662/index.html">Mengapa Axure dapat menekuk Sketch dan Figma, tetapi tidak menekuk</a></li>
<li><a href="../id501664/index.html">Konferensi video sekarang menjadi pasar dan teknologi baru. Longrid, bagian dua</a></li>
<li><a href="../id501668/index.html">Menyediakan komunikasi objek dan alat yang bergerak untuk meningkatkan keandalannya</a></li>
<li><a href="../id501670/index.html">Berapa nyawa atau $ 2,1 juta per injeksi: terapi gen yang luar biasa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>