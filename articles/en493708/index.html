<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🌾 📇 🐄 Anatomy of my home Kubernetes cluster ◼️ 🧙🏼 👩🏻‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A year ago, I realized that I wanted to create my own Kubernetes cluster. I am a software developer. Usually I either use a single-node local cluster ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Anatomy of my home Kubernetes cluster</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/493708/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A year ago, I realized that I wanted to create my own Kubernetes cluster. I am a software developer. Usually I either use a single-node local cluster or use a remote multi-node cluster to test my projects. When working with a single-node cluster, I usually rely on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minikube</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , although there are other solutions, like the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kind</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project </font><font style="vertical-align: inherit;">, which can emulate the presence of several nodes in a cluster. Support for multiple nodes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">may appear</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Minikube.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, I would like to have at my disposal the capabilities of both of the above environments. That is - so that I would have a cluster consisting of several nodes, and so that working with these clusters would not imply network delays typical for interacting with remote environments. </font><font style="vertical-align: inherit;">
Many great tutorials have already been written on building Kubernetes multi-node clusters using </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">single-board computers</font></a><font style="vertical-align: inherit;"> . Many of these manuals use the Raspberry Pi as SBC. Seeing this, I decided to follow the path of least resistance and also chose this computer. The Raspberry Pi platform has established itself as an inexpensive and affordable solution.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/il/ui/ts/iluits7z2ihfycqlskr35gzsstg.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It should be noted that the choice of this platform provides for some compromises. </font><font style="vertical-align: inherit;">For example, Broadcom and the Raspberry Pi Foundation did not license ARMv8 cryptographic extensions (this is necessary for hardware acceleration of AES support). </font><font style="vertical-align: inherit;">Another controversial solution is the use of microSD-cards in the form of a standard storage medium from which the operating system is loaded. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analyzing the existing guidelines for creating clusters on single-board computers, I did not find a single one that describes a solution that satisfies my requirements. </font><font style="vertical-align: inherit;">I’ll start the story about the cluster I created with them.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Requirements</font></font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The cluster should be enclosed in a separate housing, which can be easily moved, opened and maintained, working with separate modules of the system;</font></font></li>
<li>            ,         .         ,        ,        .   ,      .   ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</li>
<li>       ,      .</li>
<li>      , ,  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a> .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Behind these requirements, there is one non-obvious goal, which is that I needed my four-year-old daughter to work with the cluster. </font><font style="vertical-align: inherit;">I hope that he will become for her a kind of study guide that will help her get acquainted with computers, command shells and terminals.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accessories</font></font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detail</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Source</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pico 5 Raspberry PI 5S Starter Kit</font></font></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">picocluster.com</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Single Board Computers: 2 Raspberry Pi 4B (4GB) 3 Raspberry Pi 3B +</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 microSD cards 32GB class 10 / A1&nbsp;</font></font></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raspberrypi.org</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ethernet cables: 2 0.25m cat. 83 0.15m cat. 7, S / FTP</font></font></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1attack.de</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB cables PortaPow 20AWG2 USB-C3 cable micro-USB cable</font></font></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">portablepowersupplies.co.uk</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Official Raspberry Pi 7 ″ Touchscreen</font></font></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raspberrypi.org</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Power supply Dehner Elektronik STD-12090 12V / DC 9A 108W</font></font></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dehner.net</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12V to 5V 15A DC-Buck Converter</font></font></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">droking.com</font></font></a></td>
</tr>
<tr>
<td> Heschen 12V 25A SPST 2-Pin ON/OFF</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">heschen.com</a></td>
</tr>
<tr>
<td> Noctua NF-A4x20 5V PWM</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">noctua.at</a></td>
</tr>
<tr>
<td>  , (15A, 30V)  4 ,    MOSFET PSMN011-30YLC</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">ebay.com</a></td>
</tr>
<tr>
<td>2  M.2 NVMe  USB 3.0,   JMS58</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">amazon.com</a></td>
</tr>
<tr>
<td>2  Samsung SSD 970 EVO Plus M.2 PCIe NVMe 500 Go</td>
<td></td>
</tr>
<tr>
<td>2   USB 3.0 (  ,  )  6″/152mm</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">usbfirewire.com</a></td>
</tr>
<tr>
<td>2  USB 3.0- Delock, Male-Female ( 270°)</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">delock.com</a></td>
</tr>
<tr>
<td>  Adafruit  Raspberry Pi 24″/610mm</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">adafruit.com</a></td>
</tr>
<tr>
<td>  Adafruit (DSI  CSI)  Raspberry Pi&nbsp;</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">adafruit.com</a></td>
</tr>
<tr>
<td>  Wago  221</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">wago.com</a></td>
</tr>
<tr>
<td>  Lapp Unitronic 300mm/1200mm 2x0.14mm²</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">lappgroup.com</a></td>
</tr>
<tr>
<td> Lemo FGG.0B.302.CLAD42  EGG.0B.302.CLL</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">lemo.com</a></td>
</tr>
<tr>
<td>     DuPont Female-Female</td>
<td></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The PicoCluster case is small in size and very easy to use. From the starter kit I ordered, I used only the chassis, including the latches and racks, as well as the 8-port Gigabit Ethernet switch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I understand that it would be better if PicoCluster sold a version of its kit without any electrical components. Another alternative to this kit was the development of its own enclosure. This, however, would require more time. I would have to create vector drawings, I would have to use the services of laser cutting in a company offering acrylic sheets, ideally sheets with a coating that dissipates electrostatic discharge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the course of work, I came across warnings about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insufficient voltage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and found out that the problem was caused by micro-USB cables that came with the case. In addition, together with the case there was a step-down DC-DC converter 12V to 5V, 30W, which I replaced with a more powerful one. I did this for reasons that I will discuss below in the section on powering the system. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the time I started work on this project, I did not plan to use the Raspberry Pi 4 boards released in 2019. This explains that I still have three Raspberry Pi 3 boards that act as work nodes. I exchanged two other such boards for Raspberry Pi 4. They are used for nodes that need more resources. This is the main node and the working node, which, among other things, is used to create data backups.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Shortly after the release of the Raspberry Pi 4, PicoCluster launched a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new chassis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> designed specifically for such boards. It includes a powerful power supply, two fans and a power switch. True, this case is larger than mine, and the fans will certainly turn out to be louder than the Noctua NF-A4x20. The rotation speed of this fan can be controlled using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pulse-width modulation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (PWM), taking into account the results of temperature measurements performed on the boards. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It should be noted that both the SoC Broadcom BCM2837 (Raspberry Pi 3) and the SoC BCM2711 (Raspberry Pi 4) have hardware timers capable of generating PWM signals. As a result, it is very simple to issue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">control input signals</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expected by Noctua NF-A4x20 PWM without overloading the processor. </font><font style="vertical-align: inherit;">In addition, the fan is barely audible when it is running at half the speed it supports (about 2500 rpm). </font><font style="vertical-align: inherit;">This, as it turned out, is enough to maintain the system temperature below 45 ° C / 113 ° F under normal load. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The new enclosure includes an integrated power supply. </font><font style="vertical-align: inherit;">He, moreover, is more expensive than the one I chose. </font><font style="vertical-align: inherit;">All these features of this case are the reason that I would choose the Pico 5S kit even if I bought the case now. </font><font style="vertical-align: inherit;">More efforts should be put into bringing it to mind, but what turned out in the end seems to me better than what would have turned out, if I had chosen a different building. </font><font style="vertical-align: inherit;">In general, it is worth the effort and time.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assembly</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Front panel</font></font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c4c/69a/bae/c4c69abaec8489276a0ae015fcc88f93.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Front panel</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The front panel has an opening for access to microSD cards. This is convenient, even considering the fact that I plan to organize the system boot using the</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> USB mass storage boot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . I plan to do this right after the Raspberry Pi 4 fully supports this boot mode. The hole also helps to organize air circulation in the housing. In this case, two SSD-drives are located directly in front of the fan, which helps to maintain their optimum operating temperature.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The activity and power indicators of the boards are clearly visible, which allows you to assess the state of the cluster at a glance. The activity indicators of the Ethernet switch are also visible.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ada/9df/3c3/ada9df3c359aa12ccfe557460738e672.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The top panel of the case without a screen The</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
screen can easily be moved to bring it closer to the keyboard, or to provide access to the top panel when opening the case.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Left panel</font></font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb5/0af/849/bb50af8494c2c3a3df84832943addf92.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Left panel</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
On the left panel of the case are the GPIO ports of the boards. </font><font style="vertical-align: inherit;">One of the cables connects the main unit with the fan - for the organization of PWM control of its rotation speed. </font><font style="vertical-align: inherit;">Another cable connects the main node to the circuit board module, which is used to turn work nodes on and off. </font><font style="vertical-align: inherit;">Four cables connect each of the working nodes to the main node. </font><font style="vertical-align: inherit;">It uses GPIO pins with a high active level when turned off. </font><font style="vertical-align: inherit;">This allows the main node to safely turn off the power of the working node after the sequence of actions performed at the end of its operation is completed.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/157/16e/984/15716e984e6204e35758d85c63fa87db.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module used to connect the fan to the main node</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In the upper left corner there is a small module designed to connect the 4-pin Noctua fan connector to the Raspberry Pi main node. </font><font style="vertical-align: inherit;">The corresponding GPIO connector, thanks to the hardware support for generating PWM signals, is configured to control the fan speed. </font><font style="vertical-align: inherit;">The speed is selected based on the analysis of the temperature of the boards, information about which is regularly collected using SSH. </font><font style="vertical-align: inherit;">The main unit, in addition, for monitoring purposes, reads the fan speed.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ back panel</font></font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ad/7ab/516/9ad7ab516db66c36391208b50f254db0.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rear Panel</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The rear panel of the chassis conceals cables. The fact that everything looks that way can be considered the consequence of a cunning approach to the modular organization of my project. It was hard to find quality cables. Especially - short USB 3.0 cables with curved plugs. Cables - this is the largest group of moving elements in my system, they must meet certain mechanical and electrical characteristics. They turned out to be the main source of problems.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I had an idea to use a single spiral cable in order to replace it with a DSI tape cable, with which a screen is connected to the system. Then the spiral cable would connect the screen to the cluster and supply power to it. But I could not find a suitable DSI connector. I refrained from this venture and the fact that I was not attracted by the prospect of soldering 17 wires of 0.14mm². I used a DSI cable extender and applied a 2-wire spiral micro-USB power cable. This gave me the ability to easily move and turn off the screen without opening the case.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b04/a96/1a4/b04a961a4401c18d4a44864fb11ecde8.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsuccessful attempt to arrange cables</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Here is an unsuccessful attempt to use the system to organize cable entry into the enclosure designed for USB 3.0 expansion cables. </font><font style="vertical-align: inherit;">Despite countless attempts to properly route the cables, I have systematically encountered I / O errors during data transfers. </font><font style="vertical-align: inherit;">They were probably caused by the fact that they were stretched too much when laying the cables, or by the fact that this impaired the reliable connection of the cables to the connectors.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Right panel</font></font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/136/038/7ab/1360387abdbf37fa749782ec3df5b8ca.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Right panel</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
On the right side of the case you can see the 8-port Ethernet switch.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System design</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Food</font></font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eed/93b/b85/eed93bb85e71ca00a19f343d39fd706c.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Case with open front panel</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I had to decide which power supply to use. </font><font style="vertical-align: inherit;">In particular, about what power in watts it must support in order to meet the needs of the cluster. </font><font style="vertical-align: inherit;">This is a bit of a question about what came before - a chicken or an egg, since measurements cannot be made before power is applied to the cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to get an approximate estimate of power, I turned to the</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> official documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which contains some information about the power of the Raspberry Pi, as well as to the specifications of other components. </font><font style="vertical-align: inherit;">This gave me the following approximate figures based on average energy consumption.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fa/097/c9b/8fa097c9b1f40c9003bcf75b31d6c672.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what happened after taking into account the maximum values ​​of energy consumption from the documentation.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cec/3fc/424/cec3fc4241a30a788ff793edbf27cc86.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This was much higher than the power provided by those power supplies that I could find that produced 5V, since the "low-power" components needed a current of 10A. This ruled out the option of using a single 5V power supply. At the same time, 12V power supplies are very common, which can provide the necessary level of power. As a result, I selected the Dehner Elektronik STD-12090 12V / DC 9A 108W power supply and connected it to a </font><font style="vertical-align: inherit;">12V to 5V 75W </font><font style="vertical-align: inherit;">DC / DC </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">converter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here I had another option, which consisted of using five less powerful converters - one for each Raspberry Pi board, but this would greatly complicate the cluster design.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c86/e1a/95f/c86e1a95febd0d64ea0ee5f9bbafe28a.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patch board A</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
4-pin patch board based on the MOSFET PSMN011-30YLC is installed in the bottom of the chassis. It is used to enable and disable work nodes. It is labeled 15A, 30V, so it copes well even with the load created by four Raspberry Pi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I measured the average and maximum power consumed by the cluster. The measurement results are approximately consistent with those approximate calculations that I made earlier. The difference between the expected and actual values ​​can be explained by the features of the system configuration and the features of the test. In particular, I turned off Wi-Fi and Bluetooth on my Raspberry Pi, they also work without displaying an image on the monitor. This may explain the fact that in reality the values ​​turned out to be less.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As it turned out, the 108W power supply is much more powerful than what is needed for the cluster. </font><font style="vertical-align: inherit;">However, the fact that I have just such a power supply means that I can expand the capabilities of the system. </font><font style="vertical-align: inherit;">For example, replace Raspberry Pi 3 with Raspberry Pi 4.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Data storage</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the new nice features of the Raspberry Pi 4 is the presence on the board of two USB 3.0 ports that are connected to the BCM2711 SoC using an extremely fast PCIe connection. Thanks to this, one can hope to achieve very high data rates. I decided that I was using these USB 3.0 ports to connect SSDs using the M.2 NVMe to USB 3.0 adapters. However, as it turned out, it was very difficult to find such adapters. I naively suggested that any adapters would work for me. As a result, I bought the first such adapter without checking its compatibility with the Raspberry Pi 4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I, fortunately, came across </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi 4 download guide and then bought the recommended Shinestar M.2 NVMe to USB 3.0 adapter. </font><font style="vertical-align: inherit;">It was almost the same size as the M.2 NVMe 2280 (22 mm wide and 80 mm long), which is great for the Pico 5S case. </font><font style="vertical-align: inherit;">I used the adapter to connect the Samsung SSD 970 EVO Plus M.2 PCIe NVMe 500 Go to the Raspberry Pi.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/92e/5a5/1e9/92e5a51e924bcfe0c77ef14278917734.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M.2 NVMe adapter to USB 3.0</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
After I installed and configured everything, I decided to quickly test the drive and find out the data transfer speed. </font><font style="vertical-align: inherit;">To do this, I copied a large file from the SSD to my laptop using</font></font><code>scp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<code>$ scp pi@master:&lt;source&gt; &lt;destination&gt;<br>
100% 1181MB 39.0MB/s 00:30</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The result of 39 Mb / s disappointed me. These numbers are far from those needed to fully load the Gigabit Ethernet switch. I started looking for a possible bottleneck in the system, and realized that during file transfer one of the processor cores is always 100% loaded. After I found out that the processor was the bottleneck in data transfer, I quickly found out that the Raspberry Pi 4 does not have AES hardware support, since the Broadcom and the Raspberry Pi Foundation did not license ARMv8 cryptographic extensions. Interestingly, the processor is the bottleneck of the system on the Raspberry Pi 4, while the bottlenecks of the Raspberry Pi 3 were USB 2.0 and network interfaces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A new test using </font></font><code>netcat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, under the same conditions, gave much better results at 104 Mb / s:</font></font><br>
<br>
<pre><code class="bash hljs">$ nc -l 6000 |dd bs=1m of=&lt;destination&gt; &amp; ssh pi@master <span class="hljs-string">"dd bs=1M if=&lt;source&gt; | nc -q 0 <span class="hljs-subst">$(hostname -I | awk '{print $1}')</span> 6000"</span><font></font>
[1] 71300 71301<font></font>
1181+1 records <span class="hljs-keyword">in</span><font></font>
1181+1 records out<font></font>
1238558304 bytes (1.2 GB, 1.2 GiB) copied, 11.8632 s, 104 MB/s<font></font>
0+740624 records <span class="hljs-keyword">in</span><font></font>
0+740624 records out<font></font>
1238558304 bytes transferred <span class="hljs-keyword">in</span> 14.212518 secs (87145593 bytes/sec)<font></font>
[1]&nbsp; + 71300 <span class="hljs-keyword">done</span> &nbsp; &nbsp; &nbsp; nc -l 6000 |<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;71301 <span class="hljs-keyword">done</span> &nbsp; &nbsp; &nbsp; dd bs=1m of=&lt;destination&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Having dealt with the first SSD drive, I connected the second same drive to another Raspberry Pi 4 board. I am going to use this drive to backup the first one using something like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restic</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, I plan to use SSDs to organize boot using the USB mass storage boot immediately after the Raspberry Pi 4 fully supports this boot method. </font><font style="vertical-align: inherit;">It, in comparison with downloading from microSD, promises a higher speed and a more stable level of performance.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Software</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am a programmer, so I thought that it would be easier for me to deal with the software part of the cluster than with other questions. </font><font style="vertical-align: inherit;">The results of the wonderful work on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k3s</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> performed by the Rancher team </font><font style="vertical-align: inherit;">definitely helped me here </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">I will not go into particular details about setting up a Kubernetes cluster on a Raspberry Pi using k3s here. </font><font style="vertical-align: inherit;">For those who are interested, I can recommend referring to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> guide. </font><font style="vertical-align: inherit;">Here are the main points to configure that I would like to dwell on. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To start, on each node, enable </font></font><code>cgroups</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo sed -i <span class="hljs-string">'$ s/$/ cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory/'</span> /boot/cmdline.txt<font></font>
$ sudo reboot<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then install k3s on the main node:</font></font><br>
<br>
<pre><code class="bash hljs">$ curl -sfL https://get.k3s.io | sh -s - --write-kubeconfig-mode 644
<span class="hljs-comment">#   </span><font></font>
$ sudo systemctl status k3s<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we get a token authorizing the connection of work nodes to the main node:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo cat /var/lib/rancher/k3s/server/node-token
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next - install k3s on each working node:</font></font><br>
<br>
<pre><code class="bash hljs">$ curl -sfL https://get.k3s.io | K3S_URL=<span class="hljs-string">"https://&lt;MASTER_IP&gt;:6443"</span> K3S_TOKEN=<span class="hljs-string">"&lt;NODE_TOKEN&gt;"</span> sh -
<span class="hljs-comment">#   </span><font></font>
$ sudo systemctl status k3s-agent<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you plan to use the internal registry of container images, which is installed by default, you may need to configure it in a special way, doing this in order to allow </font></font><code>containerd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">images </font><font style="vertical-align: inherit;">to be </font><font style="vertical-align: inherit;">loaded from it:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo sh -c <span class="hljs-string">'REGISTRY=$(kubectl get svc -n kube-system registry -o jsonpath={.spec.clusterIP}); \
cat &lt;&lt;EOT &gt;&gt; /etc/rancher/k3s/registries.yaml
mirrors:
&nbsp;&nbsp;"$REGISTRY":
&nbsp;&nbsp;&nbsp;&nbsp;endpoint:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- "http://$REGISTRY"
EOT'</span><font></font>
$ sudo service k3s restart<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Future plans</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this material, I did not disclose some important topics that are worthy of sufficiently deep analysis. </font><font style="vertical-align: inherit;">For example, the following:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Software power management of work nodes and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">automatic cluster scaling</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installing a PWM fan and adjusting its speed taking into account the temperature indicators of the system.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi-Hole</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on Kubernetes using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MetalLB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhaps I will write more about this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, I plan to continue working on the cluster by doing the following:</font></font><br>
<br>
<ul>
<li>  SSD-   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">USB mass storage boot</a>.</li>
<li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Restic</a>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am sure that when I talked about my experience in creating the Kubernetes home cluster, I forgot a lot. </font><font style="vertical-align: inherit;">I am a programmer and am used to a rather heterogeneous breakdown of large tasks into smaller cases. </font><font style="vertical-align: inherit;">Experience has shown that hardware is much less tolerant than software when it comes to trial and error work. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, the more I find out, the greater admiration in me is caused by modern hardware and software technologies. </font><font style="vertical-align: inherit;">It amazes me how a person’s ingenuity was able to combine electrical phenomena and programming languages, making them something that can be considered an example of how consciousness controls matter. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dear readers! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Have you tried to do something similar to what the author of this article described?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493696/index.html">Accelerating the Qemu KVM disk subsystem on Linux</a></li>
<li><a href="../en493700/index.html">Using malware in Azure to gain access to Microsoft 365 tenants</a></li>
<li><a href="../en493702/index.html">Massive transition to remote work: technical problems and threats to security</a></li>
<li><a href="../en493704/index.html">Using TypeScript in JavaScript without writing TypeScript</a></li>
<li><a href="../en493706/index.html">Know your enemy: create a Node.js backdoor</a></li>
<li><a href="../en493712/index.html">New TypeScript features for enhanced usability</a></li>
<li><a href="../en493714/index.html">Security Cheat Sheets: Nodejs</a></li>
<li><a href="../en493716/index.html">Type inference with TypeScript using the as const construct and the infer keyword</a></li>
<li><a href="../en493718/index.html">Discussion: standard UNIX utilities that few have used and are currently using</a></li>
<li><a href="../en493720/index.html">The perfect storm: how technology is changing the food service industry</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>