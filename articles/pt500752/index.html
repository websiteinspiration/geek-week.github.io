<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº üîî üë©üèæ‚ÄçüöÄ MASK-RCNN para encontrar telhados a partir de imagens de drones üßñüèΩ üë©üèæ‚Äçü§ù‚Äçüë©üèΩ üêï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em uma cidade branca e branca, em uma rua branca e branca, havia casas brancas e brancas ... E com que rapidez voc√™ consegue encontrar todos os telhad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MASK-RCNN para encontrar telhados a partir de imagens de drones</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/500752/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad9/eb5/21e/ad9eb521e7c2fcb232116aa876742ee3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em uma cidade branca e branca, em uma rua branca e branca, havia casas brancas e brancas ... E com que rapidez voc√™ consegue encontrar todos os telhados das casas nesta foto? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada vez mais, pode-se ouvir sobre os planos do governo de realizar um invent√°rio completo de im√≥veis, a fim de esclarecer dados cadastrais. Para a solu√ß√£o prim√°ria para esse problema, um m√©todo simples pode ser aplicado com base no c√°lculo da √°rea do telhado dos pr√©dios principais a partir de fotografias a√©reas e compara√ß√£o adicional com dados cadastrais. Infelizmente, a pesquisa e o c√°lculo manuais levam muito tempo e, como novas casas s√£o demolidas e constru√≠das continuamente, o c√°lculo precisa ser repetido v√°rias vezes. Surge imediatamente a hip√≥tese de que esse processo pode ser automatizado usando algoritmos de aprendizado de m√°quina, em particular o Computer Vision. Neste artigo, falarei sobre como estamos na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NORBIT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> resolveu esse problema e que dificuldades eles encontraram.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spoiler - n√≥s </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conseguimos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O servi√ßo de ML desenvolvido √© baseado em um modelo profundo de aprendizado de m√°quina baseado em redes neurais de convolu√ß√£o. </font><font style="vertical-align: inherit;">O servi√ßo aceita imagens de ve√≠culos a√©reos n√£o tripulados como entrada, gera um arquivo GeoJSON com o layout dos objetos de constru√ß√£o de capital encontrados com coordenadas geogr√°ficas na sa√≠da. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, fica assim:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ab/892/528/0ab892528db9a5c84fd26d0e30329b5a.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar com os problemas t√©cnicos que encontramos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">existe uma diferen√ßa significativa entre as fotografias a√©reas de inverno e de ver√£o (um modelo treinado apenas em fotografias de ver√£o √© completamente incapaz de encontrar telhados no inverno);</font></font></li>
<li>            ,       ;</li>
<li>  ,          (  ),     (     )      ,           ;</li>
<li>   ,     ,         (     ).        ;</li>
<li>  (,   )     .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E os drones √†s vezes trazem essas fotos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/663/809/821/66380982148bc07c8309f8d106ecfc38.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tamb√©m gostaria de observar os problemas que poderiam ter sido, mas eles n√£o nos diziam respeito:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o tivemos a tarefa de realizar infer√™ncia por um tempo limitado (por exemplo, diretamente no momento do voo), o que resolveu imediatamente todos os poss√≠veis problemas com o desempenho;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na entrada para processamento, imediatamente recebemos imagens de alta qualidade e alta resolu√ß√£o (usando lentes com uma dist√¢ncia focal de 21 mm a uma altura de 250 m, que √© de 5 cm / px) de nosso cliente, a empresa Shakhty, poderia usar seus conhecimentos na localiza√ß√£o geogr√°fica de objetos em mapas e eles tamb√©m tiveram a oportunidade de estabelecer um conjunto espec√≠fico de requisitos para futuros voos de UAV, o que reduziu bastante a probabilidade de pe√ßas muito exclusivas que n√£o estavam no conjunto de treinamento;</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primeira solu√ß√£o para o problema, tra√ßado usando a caixa Limite&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas palavras sobre quais ferramentas usamos para criar a solu√ß√£o.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Anaconda √© um sistema conveniente de gerenciamento de pacotes para Python e R.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Tensorflow √© uma biblioteca de software de aprendizado de m√°quina de c√≥digo aberto desenvolvida pelo Google.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keras √© um complemento para os frameworks Deeplearning4j, TensorFlow e Theano.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O OpenCV √© uma biblioteca de algoritmos para vis√£o computacional, processamento de imagens e algoritmos num√©ricos de c√≥digo aberto de uso geral.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flask √© uma estrutura para criar aplicativos da Web na linguagem de programa√ß√£o Python.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o sistema operacional usava o Ubuntu 18.04. </font><font style="vertical-align: inherit;">Com os drivers na GPU (NVIDIA) no Ubuntu, tudo est√° em ordem; portanto, a tarefa geralmente √© resolvida com um comando:</font></font><br>
<br>
<code>&gt; sudo apt install nvidia-cuda-toolkit</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prepara√ß√£o de Azulejos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira tarefa que enfrentamos foi dividir as imagens de sobrev√¥o em blocos (2048x2048 px). </font><font style="vertical-align: inherit;">Voc√™ pode escrever seu pr√≥prio script, mas ter√° que pensar em manter a localiza√ß√£o geogr√°fica de cada bloco. </font><font style="vertical-align: inherit;">Era mais f√°cil usar uma solu√ß√£o pronta, por exemplo, GeoServer - √© um software de c√≥digo aberto que permite publicar dados geogr√°ficos no servidor. </font><font style="vertical-align: inherit;">Al√©m disso, o GeoServer resolveu outro problema para n√≥s - a exibi√ß√£o conveniente do resultado da marca√ß√£o autom√°tica no mapa. </font><font style="vertical-align: inherit;">Isso pode ser feito localmente, por exemplo, no qGIS, mas para um comando e demonstra√ß√£o distribu√≠dos, um recurso da Web √© mais conveniente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para executar lado a lado, voc√™ precisa especificar a escala e o tamanho necess√°rios nas configura√ß√µes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/688/b29/4d1/688b294d129f14dddc810ca0defdef44.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para tradu√ß√µes entre sistemas de coordenadas, usamos a biblioteca pyproj:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> pyproj <span class="hljs-keyword">import</span> Proj, transform<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Converter</span>:</span>
&nbsp;&nbsp;&nbsp;&nbsp;P3857 = Proj(init=<span class="hljs-string">'epsg:3857'</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;P4326 = Proj(init=<span class="hljs-string">'epsg:4326'</span>)<font></font>
...<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">from_3857_to_GPS</span>(<span class="hljs-params">self, point</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x, y = point<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> transform(self.P3857, self.P4326, x, y)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">from_GPS_to_3857</span>(<span class="hljs-params">self, point</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x, y = point<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> transform(self.P4326, self.P3857, x, y)<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, foi poss√≠vel formar facilmente uma grande camada de todos os pol√≠gonos e coloc√°-la sobre o substrato.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b8/9f6/428/2b89f642889bdc551871a35ba43a7c03.png"></div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para instalar o software GeoServer, voc√™ deve concluir as seguintes etapas.</font></font></b>
                        <div class="spoiler_text"><ol>
<li> Java  8.</li>
<li> GeoServer.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a></li>
<li>     , ,&nbsp;<code>/usr/share/geoserver</code></li>
<li>      &nbsp;<br>
<br>
<strong><code>echo ¬´export GEOSERVER_HOME=/usr/share/geoserver¬ª &gt;&gt; ~/.profile</code></strong></li>
<li>   :<br>
<br>
<strong><code>sudo groupadd geoserver</code></strong></li>
<li> ,     ,   :<br>
<br>
<strong><code>sudo usermod -a -G geoserver &lt;user_name&gt;</code></strong></li>
<li> -  :<br>
<br>
<strong><code>sudo chown -R :geoserver /usr/share/geoserver/</code></strong></li>
<li>    :<br>
<br>
<strong><code>sudo chmod -R g+rwx /usr/share/geoserver/</code></strong></li>
<li> GeoServer&nbsp;<br>
<br>
<strong><code>cd geoserver/bin &amp;&amp; sh startup.sh</code></strong></li>
</ol></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O GeoServer n√£o √© o √∫nico aplicativo que nos permite resolver nosso problema. </font><font style="vertical-align: inherit;">Como alternativa, por exemplo, voc√™ pode considerar o ArcGIS for Server, mas este produto √© propriet√°rio, portanto n√£o o usamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, cada telha tinha que encontrar todos os telhados vis√≠veis. </font><font style="vertical-align: inherit;">A primeira abordagem para resolver o problema foi usar a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detec√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">objeto</font></a><font style="vertical-align: inherit;"> do </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">conjunto</font></a><font style="vertical-align: inherit;"> de modelos / pesquisa Tensorflow. </font><font style="vertical-align: inherit;">Dessa maneira, as classes nas imagens podem ser encontradas e localizadas com uma sele√ß√£o retangular (caixa delimitadora).&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marca√ß√£o de dados de treinamento&nbsp;</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, para treinar o modelo, voc√™ precisa de um conjunto de dados rotulado. Por uma coincid√™ncia de sorte, al√©m de circular, em nossos compartimentos o conjunto de dados para 50 mil telhados foi preservado desde os bons velhos tempos, quando todos os conjuntos de dados para treinamento ainda eram de dom√≠nio p√∫blico em todos os lugares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil prever com anteced√™ncia o tamanho exato da amostra de treinamento necess√°ria para obter uma precis√£o aceit√°vel do modelo. Pode variar de acordo com a qualidade das imagens, seu grau de dissimilaridade entre si e as condi√ß√µes em que o modelo ser√° usado na produ√ß√£o. Tivemos casos em que 200 pe√ßas foram suficientes e, √†s vezes, 50 mil amostras marcadas tamb√©m estavam faltando. No caso de falta de imagens marcadas, geralmente adicionamos m√©todos de aumento: curvas, reflexos no espelho, classifica√ß√£o de cores, etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, existem muitos servi√ßos dispon√≠veis que permitem marcar imagens - tanto com c√≥digo-fonte aberto para instala√ß√£o em seu computador / servidor quanto com solu√ß√µes corporativas, incluindo o trabalho de avaliadores externos, como o Yandex.Toloka. </font><font style="vertical-align: inherit;">Neste projeto, usamos o mais simples </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VGG Image Annotator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Como alternativa, voc√™ pode tentar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anotador de coco</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√∫dio de etiqueta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Normalmente, usamos o √∫ltimo para marcar arquivos de texto e √°udio.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b1/46b/39c/5b146b39c6413ebde30c1a0a6f25421a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para treinar a marca√ß√£o de v√°rios anotadores, geralmente √© necess√°rio executar uma pequena troca de campos, um exemplo para o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VGG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para calcular corretamente a √°rea do telhado que caiu na √°rea de aloca√ß√£o retangular, √© necess√°rio observar v√°rias condi√ß√µes:</font></font><br>
<br>
<ul>
<li>     /     .          :</li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0c/41a/80e/b0c41a80e0ae785794143da7b38dfbbf.png"></div><br>
<ul>
<li>,    ,      :</li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/092/1de/dcb/0921dedcbc4effc0430d11cd8dea8401.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver o segundo problema, voc√™ pode tentar treinar um modelo separado que determine o √¢ngulo de rota√ß√£o correto do bloco para marca√ß√£o, mas tudo ficou um pouco mais f√°cil. </font><font style="vertical-align: inherit;">As pr√≥prias pessoas se esfor√ßam para reduzir a entropia, para alinhar todas as estruturas criadas pelo homem em rela√ß√£o umas √†s outras, especialmente com edif√≠cios densos. </font><font style="vertical-align: inherit;">Se voc√™ olhar de cima, em uma √°rea localizada, cercas, passarelas, planta√ß√µes, estufas e mandris ser√£o paralelos ou perpendiculares aos limites dos telhados. </font><font style="vertical-align: inherit;">Resta apenas encontrar todas as linhas claras e calcular o √¢ngulo de inclina√ß√£o mais comum em rela√ß√£o √† vertical. </font><font style="vertical-align: inherit;">Para isso, o OpenCV possui uma √≥tima ferramenta HoughLinesP.&nbsp;</font></font><br>
<br>
<pre><code class="python hljs">...<font></font>
<font></font>
lines = cv2.HoughLinesP(edges, <span class="hljs-number">1</span>, np.pi/<span class="hljs-number">180</span>, <span class="hljs-number">50</span>, minLineLength=minLineLength, maxLineGap=<span class="hljs-number">5</span>)
<span class="hljs-keyword">if</span> lines <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;length = image.shape[<span class="hljs-number">0</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;angles = []<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span> x1, y1, x2, y2 <span class="hljs-keyword">in</span> lines[<span class="hljs-number">0</span>]:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;angle = math.degrees(math.atan2(y2 ‚Äî y1, x2 - x1))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;angles.append(angle)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;parts_angles.append(angles)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;median_angle = np.median(angles)<font></font>
...<font></font>
<font></font>
<span class="hljs-comment">#    &nbsp;</span><font></font>
<font></font>
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, image.shape[<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>, image.shape[<span class="hljs-number">0</span>] // count_crops):
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, image.shape[<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>, image.shape[<span class="hljs-number">1</span>] // count_crops):<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_line(image[x:x+image.shape[<span class="hljs-number">0</span>]//count_crops, y:y+image.shape[<span class="hljs-number">1</span>]//count_crops, :])<font></font>
...<font></font>
<font></font>
<span class="hljs-comment">#      </span><font></font>
<font></font>
np.median([a <span class="hljs-keyword">if</span> a&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">90</span>+a <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> np.array(parts_angles).flatten()])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de encontrar o √¢ngulo, giramos a imagem usando a transforma√ß√£o afim:</font></font><br>
<br>
<pre><code class="python hljs">
h, w = image.shape[:<span class="hljs-number">2</span>]<font></font>
image_center = (w/<span class="hljs-number">2</span>, h/<span class="hljs-number">2</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span> size <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;radians = math.radians(angle)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;sin = math.sin(radians)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;cos = math.cos(radians)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;size = (int((h * abs(sin)) + (w * abs(cos))), int((h * abs(cos)) + (w * abs(sin))))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix = cv2.getRotationMatrix2D(image_center, angle, <span class="hljs-number">1</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>] += ((size[<span class="hljs-number">0</span>] / <span class="hljs-number">2</span>) ‚Äî image_center[<span class="hljs-number">0</span>])<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] += ((size[<span class="hljs-number">1</span>] / <span class="hljs-number">2</span>) ‚Äî image_center[<span class="hljs-number">1</span>])
<span class="hljs-keyword">else</span>:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix = cv2.getRotationMatrix2D(image_center, angle, <span class="hljs-number">1</span>)<font></font>
<font></font>
cv2.warpAffine(image, rotation_matrix, size)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo de exemplo completo est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aqui est√° o que parece:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b2/032/15c/2b203215c7a688dc7639e7993643a99e.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/594/423/c1b/594423c1b3e52a8e4fcd383b20a04b05.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O m√©todo de transformar ladrilhos e marcar com ret√¢ngulos funciona mais r√°pido do que com m√°scaras, quase todos os telhados s√£o encontrados, mas na produ√ß√£o esse m√©todo √© usado apenas como auxiliar devido a v√°rias desvantagens:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h√° muitos sobrev√¥os em que h√° um grande n√∫mero de telhados n√£o retangulares, por isso h√° muito trabalho manual para refinar a √°rea,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√†s vezes encontrado em casa com orienta√ß√µes diferentes no mesmo bloco,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Äs vezes, existem muitas linhas falsas nos ladrilhos, o que acaba levando a uma curva errada. </font><font style="vertical-align: inherit;">Se parece com isso:</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d4/ba0/30c/6d4ba030c0784c6ee7366486b3a8f03c.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/691/5fd/a10/6915fda10769dc9b5d96522737d6aef6.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A solu√ß√£o final baseada em Mask-RCNN</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda tentativa foi procurar e destacar os telhados por m√°scaras pixel por pixel e, em seguida, delinear automaticamente os contornos das m√°scaras encontradas e criar pol√≠gonos vetoriais.&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J√° existem materiais suficientes sobre os princ√≠pios de opera√ß√£o, tipos e tarefas de redes neurais convolucionais, incluindo as em russo, por isso n√£o iremos abord√°-las neste artigo. Vamos nos concentrar apenas em uma implementa√ß√£o espec√≠fica, Mask-RCNN - uma arquitetura para localizar e destacar os contornos dos objetos nas imagens. Existem outras solu√ß√µes excelentes com suas vantagens e desvantagens, por exemplo, UNet, mas foi poss√≠vel obter melhor qualidade no Mask-RCNN.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No processo de seu desenvolvimento, passou por v√°rias etapas. A primeira vers√£o do R-CNN foi desenvolvida em 2014. O princ√≠pio de seu trabalho √© destacar pequenas √°reas na imagem, para cada uma das quais √© feita uma estimativa da probabilidade da presen√ßa de um objeto alvo nessa √°rea. A R-CNN fez um excelente trabalho com a tarefa, mas sua velocidade deixou muito a desejar. O desenvolvimento l√≥gico foram as redes Fast R-CNN e Faster R-CNN, que receberam melhorias no algoritmo de rastreamento de imagem, o que permitiu aumentar significativamente a velocidade. Na sa√≠da para o Faster R-CNN, aparece uma marca√ß√£o com uma sele√ß√£o retangular indicando os limites do objeto, o que nem sempre √© suficiente para resolver o problema.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A m√°scara R-CNN tamb√©m adiciona uma sobreposi√ß√£o de m√°scara pixel por pixel para obter o contorno exato do objeto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A caixa delimitadora e as m√°scaras podem ser vistas claramente no resultado da opera√ß√£o do modelo (o filtro pela √°rea m√≠nima de constru√ß√£o est√° ativado):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d6e/d0c/756/d6ed0c7567ed2894bbe11161fc91af55.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Convencionalmente, existem 4 est√°gios na opera√ß√£o desta rede:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">padr√£o para todas as redes neurais convolucionais, a aloca√ß√£o de recursos na imagem, como linhas, curvas, limites contrastantes e outros;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A Region Proposal Network (RPN) varre pequenos fragmentos da imagem, chamados √¢ncoras (√¢ncoras) e determina se essa √¢ncora cont√©m sinais espec√≠ficos para a classe de destino (no nosso caso, o telhado);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classifica√ß√£o da regi√£o de interesse e caixa delimitadora. </font><font style="vertical-align: inherit;">Nesse est√°gio, a rede, com base nos resultados do est√°gio anterior, est√° tentando destacar grandes √°reas retangulares na fotografia, presumivelmente contendo o objeto de destino;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√°scaras de segmenta√ß√£o. </font><font style="vertical-align: inherit;">Nesse est√°gio, a m√°scara do objeto desejado √© obtida da √°rea retangular obtida pela aplica√ß√£o da caixa de limite.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, a rede mostrou-se muito flex√≠vel na configura√ß√£o e fomos capazes de reconstru√≠-la para processar imagens com camadas de informa√ß√µes adicionais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O uso de imagens exclusivamente RGB n√£o nos permitiu obter a precis√£o de reconhecimento necess√°ria (o modelo perdeu edif√≠cios inteiros, houve um erro m√©dio de 15% no c√°lculo da √°rea do telhado); portanto, fornecemos ao modelo dados √∫teis adicionais, como mapas de altura obtidos por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fotogrametria.</font></font></a>&nbsp;<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7cc/801/ac8/7cc801ac8060a3b99a2bb26415d2fe38.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©tricas usadas para avaliar a qualidade do modelo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao determinar a qualidade dos modelos, geralmente usamos a m√©trica Intersec√ß√£o sobre Uni√£o (IoU)</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8cc/486/5be/8cc4865be494cc0bee045c618df9ff59.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√≥digo de exemplo para calcular a IoU usando a biblioteca geometry.shapely:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> shapely.geometry <span class="hljs-keyword">import</span> Polygon<font></font>
<font></font>
true_polygon = Polygon([(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)])<font></font>
predicted_polygon = Polygon([(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">7</span>), (<span class="hljs-number">6</span>, <span class="hljs-number">7</span>), (<span class="hljs-number">6</span>, <span class="hljs-number">3</span>)])<font></font>
print(true_polygon.intersection(predicted_polygon).area / true_polygon.union(predicted_polygon).area)<font></font>
<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">0.3333333333333333</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O rastreamento do processo de treinamento de modelos √© convenientemente controlado usando o Tensorboard, uma ferramenta de controle m√©trico conveniente que permite receber dados em tempo real sobre a qualidade do modelo e compar√°-los com outros modelos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31c/a7a/b20/31ca7ab20d4583360b3058b59277bc10.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Tensorboard fornece dados sobre muitas m√©tricas diferentes. </font><font style="vertical-align: inherit;">Os mais interessantes para n√≥s s√£o:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val_mrcnn_bbox_loss - mostra qu√£o bem o modelo localiza objetos (ou seja, imp√µe uma caixa de limite);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val_mrcnn_mask_loss - mostra o qu√£o bem o modelo segmenta objetos (ou seja, imp√µe uma m√°scara).</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Treinamento e valida√ß√£o de modelos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante o treinamento, usamos a pr√°tica padr√£o de dividir aleatoriamente um conjunto de dados em 3 partes - treinamento, valida√ß√£o e teste. No processo de aprendizado, a qualidade do modelo √© avaliada em uma amostra de valida√ß√£o e, ap√≥s a conclus√£o, passa no teste final nos dados de teste que foram fechados no processo de aprendizado.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iniciamos nosso primeiro treinamento com um pequeno conjunto de fotos de ver√£o e, decidindo como o modelo ser√° bom no inverno, esperamos receber um resultado decepcionante. </font><font style="vertical-align: inherit;">A op√ß√£o de usar modelos diferentes para esta√ß√µes diferentes, √© claro, √© uma excelente maneira de sair da situa√ß√£o, mas isso acarretaria uma s√©rie de inconvenientes, por isso decidimos tentar universalizar o modelo. </font><font style="vertical-align: inherit;">Ao experimentar diferentes configura√ß√µes das camadas e tamb√©m fechar o peso de camadas individuais devido a altera√ß√µes de peso, descobrimos a estrat√©gia ideal para treinar o modelo aplicando alternadamente imagens de ver√£o e inverno na entrada.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um servi√ßo em segundo plano para reconhecimento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que temos um modelo em funcionamento, podemos criar um servi√ßo de API em segundo plano a partir de um script de reconhecimento que obt√©m uma imagem como entrada e gera json com pol√≠gonos de telhado encontrados na sa√≠da. </font><font style="vertical-align: inherit;">Isso n√£o afeta diretamente a solu√ß√£o do problema, mas pode ser √∫til para algu√©m.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Ubuntu usa systemd, e um exemplo ser√° dado especificamente para este sistema. </font><font style="vertical-align: inherit;">O c√≥digo do servi√ßo em si pode ser visto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As unidades de usu√°rio est√£o localizadas no diret√≥rio / etc / systemd / system, onde criaremos nosso arquivo de servi√ßo. </font><font style="vertical-align: inherit;">
Edite o arquivo:</font></font><br>
<br>
<code>cd /etc/systemd/system<br>
<br>
sudo touch my_srv.service</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">sudo vim my_srv.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A unidade systemd consiste em tr√™s se√ß√µes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Unidade] - descreve a ordem e condi√ß√£o da partida (por exemplo, voc√™ pode dizer ao processo para aguardar o in√≠cio de um determinado servi√ßo e s√≥ ent√£o inici√°-lo voc√™ mesmo);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Servi√ßo] - descreve par√¢metros de inicializa√ß√£o;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Instalar] - descreve o comportamento do servi√ßo ao adicion√°-lo √† inicializa√ß√£o.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, nosso arquivo ficar√° assim:</font></font><br>
<br>
<pre><code class="bash hljs">[Unit]<font></font>
Description=my_test_unit<font></font>
<font></font>
[Service]<font></font>
WorkingDirectory=/home/user/test_project<font></font>
User=root<font></font>
ExecStart=/home/user/test_project/venv/bin/python3 /home/user/test_project/script.py<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora recarregue a configura√ß√£o do systemd e execute nosso servi√ßo:</font></font><br>
<br>
<pre><code class="bash hljs">sudo systemctl daemon-reload<font></font>
sudo systemctl start my_srv.service<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um exemplo simples de um processo em segundo plano, o systemd suporta muitos par√¢metros diferentes que permitem configurar de forma flex√≠vel o comportamento do servi√ßo, mas nada mais complicado √© necess√°rio para a nossa tarefa.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O principal resultado do projeto foi a capacidade de detectar automaticamente inconsist√™ncias no desenvolvimento real e nas informa√ß√µes contidas nos dados cadastrais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado da avalia√ß√£o da precis√£o do modelo nos dados de teste, foram obtidos os seguintes valores: n√∫mero de telhados encontrados - 91%, precis√£o dos pol√≠gonos do contorno do telhado - 94%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foi poss√≠vel obter uma qualidade aceit√°vel dos modelos nos voos de ver√£o e inverno, mas a qualidade do reconhecimento pode diminuir nas imagens imediatamente ap√≥s uma queda de neve. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, nem mesmo a √ìpera de Sydney escapar√° dos olhos da nossa modelo.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/c1/yl/zsc1yl0dgkkhjahgjk3vssn8swc.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Planejamos colocar esse servi√ßo com um modelo treinado em nosso desmembramento. </font><font style="vertical-align: inherit;">Se voc√™ estiver interessado em experimentar o servi√ßo com suas pr√≥prias fotos, envie aplicativos para ai@norbit.ru.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500728/index.html">Kubernetes: c√≥digo aberto vs fornecedor</a></li>
<li><a href="../pt500732/index.html">Intelig√™ncia artificial e a crise das teorias da consci√™ncia</a></li>
<li><a href="../pt500734/index.html"># GitLab 12.10 lan√ßado com gerenciamento de requisitos e dimensionamento autom√°tico de IC no AWS Fargate</a></li>
<li><a href="../pt500744/index.html">‚ÄúPara ouvir melhor do que voc√™, meu falante‚Äù: como transmitir melhor em casa</a></li>
<li><a href="../pt500746/index.html">Rack de boxe para SMD e outras pequenas coisas</a></li>
<li><a href="../pt500754/index.html">Como se tornar um milion√°rio em 30 anos, deitado no sof√°</a></li>
<li><a href="../pt500756/index.html">Toda a pot√™ncia remota. Como funciona o streaming nas confer√™ncias online do JUG Ru Group?</a></li>
<li><a href="../pt500758/index.html">Principais tend√™ncias no mercado de ciberseguran√ßa e seguran√ßa da informa√ß√£o 2020-2021 versus previs√µes 2019-2020</a></li>
<li><a href="../pt500760/index.html">Como matar zumbis com mais efici√™ncia com o ZeroTier</a></li>
<li><a href="../pt500764/index.html">Desenhe um discurso: Boca autom√°tica de software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>