<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🤝‍👨🏽 👍🏼 🧖🏾 oVirt in 2 hours. Part 4. Basic operations 🙁 🌀 🧙🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we look at a number of basic operations that the administrator of the virtualization environment will regularly need to perform. The article is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>oVirt in 2 hours. Part 4. Basic operations</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503192/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Today we look at a number of basic operations that the administrator of the virtualization environment will regularly need to perform. </font><font style="vertical-align: inherit;">The article is a continuation of the oVirt series: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Content</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creating a VM and template</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VM migration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (live migration);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storage Migration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (storage migration);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rename VM and disk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update oVirt-Host</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (hypervisor);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update oVirt-Engine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (manager);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import VM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task management</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation of the manager (ovirt-engine) and hypervisors (hosts) </font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Additional settings</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic Operations - We Are Here</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traditionally, for details on administrative tasks, welcome to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When entering oVirt you will see 2 portals:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Administration portal</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VM Portal</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first is intended for the administrator and administrative tasks, the second - for customers of machines, but can also be used by the administrator - it’s even more convenient to make some functions there. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the top of the window of each collection of oVirt objects there is a powerful search box, with contextual prompts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As an example, selecting problem hosts in the control panel actually causes a filter:</font></font><br>
<br>
<pre><code class="plaintext hljs">status = unassigned or status = maintenance or status = installing or status = reboot or status = preparingformaintenance or status = pendingapproval or status = connecting or status = installingos or status = kdumping</code></pre><br>
<a name="vm-pool"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create VM and template</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I think you created a simple VM already in Part 2, now we will get to know other oVirt entities that are directly related to virtual machines - virtual machines themselves, templates, and pools. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A template</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a copy of a machine (usually pre-prepared) designed to create identical machines (cloning). The template may have a version, it’s convenient, because no need to make a new separate template after each update of the reference machine. More details in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A pool</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a group of identical machines generated from a single template. Convenient for VDI (virtual desktop infrastructure), when dozens or hundreds of users need to provide an identical working environment and this is done literally in the blink of an eye. Read more about pools in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's create a template for which we can clone a previously created machine, but for demonstration we will go the other way - import a template from the external collection Glance Images: Storage -&gt; Domains -&gt; ovirt-image-repository (1), Import (2): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/gg/lt/fxggltgss5p9llxyplgghxmpbsg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1 - Import of the Fedora 32 image.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
We mark “Import as Template” (3, Import as Template), give the template a name (4). It is strongly recommended that the disk be given a friendly name (5, Disk Alias). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The progress of tasks is conveniently monitored in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tasks</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> section </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/p6/co/cjp6cor50gw2euzkgnf_vl-lc24.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 2 - Progress in completing tasks in oVirt.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
After successful upload, the template is added to the list. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_n/o3/cg_no3kzfukaodkzouox0q2bt3q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 3 - Templates.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Based on the loaded template, create a pool: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fn/qk/aj/fnqkajhsx4hrbzr_wc8jozs9zua.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4 - Creating a pool.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We go to Compute -&gt; Pools (1), New (2), select the Fedora32 (3) template, the version - latests (4), assign the name "myPoolA- ??" (5). We do not touch the Number of VM and Prestarted VM fields yet, we will return to them in the next step. Next, turn on the advanced settings (6) and move on to setting up Initial Run. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/m5/dj/zxm5djt-ud05hne1hyahor2nluo.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4 - Configure initial startup.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Because from Glance Images we downloaded Cloud Image, we need to configure authentication. Check that “Use Cloud-Init / Sysprep” (1) is enabled, open Authentication (2), specify the username, for example, root or user (3). To create a unique password for the pool, disable “Use Already Configured Password” (4) and enter your password (5). Click “OK” - the pool is created, identical machines appeared in Compute -&gt; Virtual Machines (pay attention to their icon, it is different from a separately working machine). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note on the name of the pool. As you noticed, at the end is "- ??". This includes the "normalized" numbering of machines (supplemented by zeros - 01, 02, ..., 09, 10, etc.) Otherwise, the numbering will be natural numbers without alignment (1, 2, ..., 9, 10, ...)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before continuing, let's go back to the pool settings. </font><font style="vertical-align: inherit;">Notice that the Number of VM field has changed to Increase number of VMs in pool by. </font><font style="vertical-align: inherit;">We specify 31 here and the number of machines in the pool almost instantly becomes 32. Now in the “Prestarted VM” field we enter 16 - this will force oVirt to keep the specified number of machines pre-started and ready to connect users. </font><font style="vertical-align: inherit;">This is where we will finish about machines, templates, and pools and move on to migration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Key VM Icons:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rack unit - server;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitor - desktop;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 towers - server from the pool;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 monitors - desktop from the pool;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rewind (rewind) - stateless (the machine resets its state to its original state after shutdown; all changes are rolled back);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">triangle in the orange monitor - the requested configuration change requires a reboot.</font></font></li>
</ul><br>
<a name="live-migration"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VM migration (live migration)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Migration of the state of the switched on machine is simple - right-click on a machine or a group of machines. </font><font style="vertical-align: inherit;">The procedure is similar to that of vMotion in vSphere. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/ne/dz/zmnedzcid6vyhsgubvv95u6cnsy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">5 - Start migration. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compute -&gt; Virtual Machine, select one or more machines, Migrate. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8v/bp/9h/8vbp9hslgmoa_n_v3ltlmuxfknw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">6 - The migration process can be observed in hosts (Compute -&gt; Hosts). </font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At one time, no more than 2 cars are moving.</font></font><br>
<a name="storage-migration"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storage migration</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But this procedure may seem unusual to the VMware vSphere user, because </font><font style="vertical-align: inherit;">approaches to storing both disk images and machine configurations in systems differ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To transfer VM storage, go to the disks (Storage -&gt; Disks) or domains (Storage -&gt; Domains -&gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{Domain Name}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -&gt; Disks). </font><font style="vertical-align: inherit;">Select drive (s) and press </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Move</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">That's it, the drive (s) are sent to another storage. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note: due to internal organization, there are restrictions for migrating the template store and pool. </font><font style="vertical-align: inherit;">Familiarity with storage migration is best done on a separate machine, outside the pool. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Disk copying is performed in the same menus as manual loading / unloading.</font></font><br>
<a name="rename"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rename VM and disk</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Changing the name of a machine or template is very simple - Edit and enter a new name. </font><font style="vertical-align: inherit;">Renaming a pool requires deleting its machines and re-creating it, because </font><font style="vertical-align: inherit;">based on it VMs are generated with the corresponding names and configuration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Renaming a disk is also possible, but the path is longer than </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e: Compute -&gt; Virtual Machine -&gt; {VM Name} -&gt; Disks -&gt; {VM Disk Alias} -&gt; Edit, Alias. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Internal object identifiers are built on UUIDs. </font><font style="vertical-align: inherit;">When renaming, we actually change the aliases. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The section deals with the update, which is update (minor), not upgrade (major), when the version number changes (this is a more complicated procedure and is not part of daily tasks).</font></font><br>
<a name="update-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update oVirt-Host (hypervisor)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Host updates are simpler than in vSphere, the update manager in oVirt is organically integrated into the platform and does not require any settings. Official </font><font style="vertical-align: inherit;">update </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/we/j1/fjwej1ph06a03bqpfx2ye6ijeny.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 7 - If there are updates, the manager will report them with a CD icon. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ww/vw/rn/wwvwrnz9q9hizaqo3mfndfihp_m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 8 - Before starting the update, you need to enable the maintenance mode (Management -&gt; Maintenance), it will automatically start the VM migration to other hosts (see Fig. 6) and prepare for the update. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ol/ry/fw/olryfwdduor2j39tr47n8zlnpew.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 9 - The wrench icon indicates that the host is ready for service. </font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/ov/rt/ta/ovrttawkmmi6fkfp-wic5_mpy00.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 10 - Installation -&gt; Upgrade starts the upgrade procedure. </font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/8z/ch/7s/8zch7sdgo_plq5suw8yevk8nzz8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 11 - We can ask the manager to instruct the host to restart after the update is completed, for it to take effect.</font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/ze/dg/kb/zedgkbmmuxxm7kvy6qoxhh-bvza.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">12 - After the reboot, we bring the hypervisor out of service mode (Management -&gt; Activate). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We go through all the hosts and update them.</font></font><br>
<a name="update-engine"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update oVirt-Engine (manager)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At first, this can be confusing, but the manager update is performed using the engine-setup, with additional steps, as described in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If possible, make an archive or a snapshot of the machine, make sure that the last scheduled backup was successful.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We check and update installation packages:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-upgrade-check<font></font>
$ sudo update ovirt\*setup\*</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The main part of the update is performed by the engine-setup program. </font><font style="vertical-align: inherit;">She will ask a number of configuration questions, then stop the ovirt-engine service, download and install updated packages, create an archive and update the database, apply the updated configuration, and start the ovirt-engine service.</font></font><br>
 <br>
<pre><code class="bash hljs">$ sudo engine-setup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Upon successful update, we will receive the message:</font></font><br>
 <br>
<pre><code class="plaintext hljs">Execution of setup completed successfully</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example output from the engine-setup script</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs">$ sudo engine-setup</code></pre><br>
<pre><code class="plaintext hljs">[ INFO  ] Stage: Initializing<font></font>
[ INFO  ] Stage: Environment setup<font></font>
          Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf', '/etc/ovirt-engine-setup.conf.d/10-packaging.conf', '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf']<font></font>
          Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20200522232449-o97vyx.log<font></font>
          Version: otopi-1.8.2 (otopi-1.8.2-1.el7)<font></font>
[ INFO  ] Stage: Environment packages setup<font></font>
[ INFO  ] Stage: Programs detection<font></font>
[ INFO  ] Stage: Environment setup (late)<font></font>
[ INFO  ] Stage: Environment customization<font></font>
         <font></font>
          --== PRODUCT OPTIONS ==--<font></font>
         <font></font>
         <font></font>
          --== PACKAGES ==--<font></font>
         <font></font>
[ INFO  ] Checking for product updates...<font></font>
          Setup needs to install or update the following packages:<font></font>
          [updated] ovirt-engine-4.3.5.5-1.el7.noarch will be updated<font></font>
...<font></font>
          [update] ovirt-engine-wildfly-overlay-17.0.1-1.el7.noarch is an update<font></font>
          Replying "No" will abort Setup. You can pass the option "--offline" to prevent installing or updating packages.<font></font>
          Do you wish to update them now? (Yes, No) [Yes]: <font></font>
[ INFO  ] Checking for an update for Setup...<font></font>
         <font></font>
          --== NETWORK CONFIGURATION ==--<font></font>
         <font></font>
          Setup can automatically configure the firewall on this system.<font></font>
          Note: automatic configuration of the firewall may overwrite current settings.<font></font>
          NOTICE: iptables is deprecated and will be removed in future releases<font></font>
          Do you want Setup to configure the firewall? (Yes, No) [Yes]: <font></font>
[ INFO  ] firewalld will be configured as firewall manager.<font></font>
         <font></font>
          --== DATABASE CONFIGURATION ==--<font></font>
         <font></font>
          The detected DWH database size is 439 MB.<font></font>
          Setup can backup the existing database. The time and space required for the database backup depend on its size. This process takes time, and in some cases (for instance, when the size is few GBs) may take several hours to complete.<font></font>
          If you choose to not back up the database, and Setup later fails for some reason, it will not be able to restore the database and all DWH data will be lost.<font></font>
          Would you like to backup the existing database before upgrading it? (Yes, No) [Yes]: <font></font>
          Perform full vacuum on the oVirt engine history<font></font>
          database ovirt_engine_history@localhost?<font></font>
          This operation may take a while depending on this setup health and the<font></font>
          configuration of the db vacuum process.<font></font>
          See https://www.postgresql.org/docs/10/sql-vacuum.html<font></font>
          (Yes, No) [No]: <font></font>
         <font></font>
          --== OVIRT ENGINE CONFIGURATION ==--<font></font>
         <font></font>
          Perform full vacuum on the engine database engine@localhost?<font></font>
          This operation may take a while depending on this setup health and the<font></font>
          configuration of the db vacuum process.<font></font>
          See https://www.postgresql.org/docs/10/sql-vacuum.html<font></font>
          (Yes, No) [No]: <font></font>
         <font></font>
          --== STORAGE CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== PKI CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== APACHE CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== SYSTEM CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== MISC CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== END OF CONFIGURATION ==--<font></font>
         <font></font>
[ INFO  ] Stage: Setup validation<font></font>
          During execution engine service will be stopped (OK, Cancel) [OK]: <font></font>
[ INFO  ] Cleaning stale zombie tasks and commands<font></font>
         <font></font>
          --== CONFIGURATION PREVIEW ==--<font></font>
         <font></font>
          Default SAN wipe after delete           : False<font></font>
          Firewall manager                        : firewalld<font></font>
          Update Firewall                         : True<font></font>
          Host FQDN                               : ovirt.example.com<font></font>
          Upgrade packages                        : True<font></font>
          Set up Cinderlib integration            : False<font></font>
          Engine database secured connection      : False<font></font>
          Engine database user name               : engine<font></font>
          Engine database name                    : engine<font></font>
          Engine database host                    : localhost<font></font>
          Engine database port                    : 5432<font></font>
          Engine database host name validation    : False<font></font>
          Engine installation                     : True<font></font>
          PKI organization                        : JSC Open Lab<font></font>
          Set up ovirt-provider-ovn               : False<font></font>
          Configure WebSocket Proxy               : True<font></font>
          DWH installation                        : True<font></font>
          DWH database secured connection         : False<font></font>
          DWH database host                       : localhost<font></font>
          DWH database user name                  : ovirt_engine_history<font></font>
          DWH database name                       : ovirt_engine_history<font></font>
          Backup DWH database                     : True<font></font>
          DWH database port                       : 5432<font></font>
          DWH database host name validation       : False<font></font>
          Configure Image I/O Proxy               : True<font></font>
          Configure VMConsole Proxy               : True<font></font>
         <font></font>
          Please confirm installation settings (OK, Cancel) [OK]: <font></font>
[ INFO  ] Cleaning async tasks and compensations<font></font>
[ INFO  ] Unlocking existing entities<font></font>
[ INFO  ] Checking the Engine database consistency<font></font>
[ INFO  ] Stage: Transaction setup<font></font>
[ INFO  ] Stopping engine service<font></font>
[ INFO  ] Stopping ovirt-fence-kdump-listener service<font></font>
[ INFO  ] Stopping dwh service<font></font>
[ INFO  ] Stopping Image I/O Proxy service<font></font>
[ INFO  ] Stopping vmconsole-proxy service<font></font>
[ INFO  ] Stopping websocket-proxy service<font></font>
[ INFO  ] Stage: Misc configuration (early)<font></font>
[ INFO  ] Stage: Package installation<font></font>
[ INFO  ] Yum Status: Downloading Packages<font></font>
...<font></font>
[ INFO  ] Stage: Misc configuration<font></font>
[ INFO  ] Upgrading CA<font></font>
[ INFO  ] Not rewriting /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf because it was changed manually. You might want to compare it with /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf.new and edit as needed.<font></font>
[ INFO  ] Backing up database localhost:ovirt_engine_history to '/var/lib/ovirt-engine-dwh/backups/dwh-20200522233531.6LDItj.dump'.<font></font>
[ INFO  ] Creating/refreshing DWH database schema<font></font>
[ INFO  ] Configuring Image I/O Proxy<font></font>
[ INFO  ] Configuring WebSocket Proxy<font></font>
[ INFO  ] Backing up database localhost:engine to '/var/lib/ovirt-engine/backups/engine-20200522233538.LZCwME.dump'.<font></font>
[ INFO  ] Creating/refreshing Engine database schema<font></font>
[ INFO  ] Creating/refreshing Engine 'internal' domain database schema<font></font>
          Unregistering existing client registration info.<font></font>
[ INFO  ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf'<font></font>
[ INFO  ] Stage: Transaction commit<font></font>
[ INFO  ] Stage: Closing up<font></font>
[ INFO  ] Starting engine service<font></font>
[ INFO  ] Starting dwh service<font></font>
[ INFO  ] Restarting ovirt-vmconsole proxy service<font></font>
         <font></font>
          --== SUMMARY ==--<font></font>
         <font></font>
[ INFO  ] Restarting httpd<font></font>
          Web access is enabled at:<font></font>
              http://ovirt.example.com:80/ovirt-engine<font></font>
              https://ovirt.example.com:443/ovirt-engine<font></font>
          SSH fingerprint: SHA256:JvilhbwRuMjBCJEjQVPlFQgk0aLaKz7Od0WzsZtx4j4<font></font>
          Did not update /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf because it was changed manually. You might want to compare it with /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf.new and edit as needed.<font></font>
         <font></font>
          --== END OF SUMMARY ==--<font></font>
         <font></font>
[ INFO  ] Stage: Clean up<font></font>
          Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20200522232449-o97vyx.log<font></font>
[ INFO  ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20200522233608-setup.conf'<font></font>
[ INFO  ] Stage: Pre-termination<font></font>
[ INFO  ] Stage: Termination<font></font>
[ INFO  ] Execution of setup completed successfully</code></pre></div>
                    </div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We update the OS and other additional packages:</font></font><br>
 <pre><code class="bash hljs">$ sudo yum update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 If necessary (updating the kernel or its components) we reboot the machine.</font></font></li>
</ol><br>
<a name="import-vm"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import VM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can import from VMware, Export Domain (a special entity oVirt for exchanging images between the Data Center), Virtual Appliance (OVA), XEN, KVM. </font><font style="vertical-align: inherit;">All officially supported options:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import VM from VMware ESXi / VSPHERE runs on on host + authentication to the host wher ESXi / VSPHERE runs on</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import KVM / Xen VM from Libvirt: The user specify URL + authentication to the host where Libvirt runs on</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import KVM / Xen VM from a given path: The user specify nfs / posix path to the VM configuration &amp; disks</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import VM which was exported from VMware: The user specify nfs / posix path to ova file</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upload KVM / Xen VM: The user specify files of the configuration and the disks</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upload VM which was exported from VMware: The user specify ova file</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import VM from folder: The user specify path to folder that contains KVM / Xen VMs or VM exported from VMware</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let us dwell on 2 options - import from vSphere and a stand-alone machine with KVM. </font><font style="vertical-align: inherit;">To start the import mater in Compute -&gt; Virtual Machines, click the button for additional menu items (3 vertical points, see Fig. 13). </font><font style="vertical-align: inherit;">The source machine must be turned off.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import machines from vCenter</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the wizard:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Source: VMware;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">External Provider: in Administration -&gt; Providers you can configure a template for frequent operations;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vCenter: name or address of the vCenter server;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESXi: from which hypervisor will we pick up the car;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Ceter: full path to the cluster;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cluster: containing a hypervisor cluster;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Username / password: username and password for connecting to vCenter;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verify server's SSL certificate: when using self-signed certificates, you will have to disable their verification.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/g9/0i/4b/g90i4btxfdhaz_ji-bntbutlaei.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">13 - Import VMs from VMware vSphere.</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import machines from KVM</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Details about importing from KVM in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, you must enable connection to the KVM from the outside, if this has not been configured before.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permission to export machines to KVM</font></font></b>
                        <div class="spoiler_text">        ,      .       ! ,      ,        ,       .     , .,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">ArchLinux</a>.<br>
<br>
 ,   libvirtd<br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/sysconfig/libvirtd</code></pre><br>
 <br>
<br>
<pre><code class="plaintext hljs">LIBVIRTD_ARGS="--listen"</code></pre><br>
      <br>
<br>
<pre><code class="bash hljs">$ sudo cp /etc/libvirt/libvirtd.conf /etc/libvirt/libvirtd.conf.`date +%F`<font></font>
$ sudo vim /etc/libvirt/libvirtd.conf</code></pre><br>
  :<br>
<br>
<pre><code class="plaintext hljs">listen_tls = 0<font></font>
listen_tcp = 1<font></font>
listen_addr = "0.0.0.0"<font></font>
auth_tcp = "none"</code></pre><br>
     <br>
<br>
<pre><code class="plaintext hljs">log_outputs="3:syslog:libvirtd"</code></pre><br>
    libvirtd.    ,    libvirtd &gt; 0.6 (  libvirtd --version),   .<br>
<br>
<pre><code class="bash hljs">$ sudo service libvirtd restart</code></pre><br>
     tcp:16509.<br>
<br>
 CentOS 7     (  permanent):<br>
<br>
<pre><code class="bash hljs">$ sudo firewall-cmd --add-rich-rule=<span class="hljs-string">'rule family="ipv4" source address="172.17.71.32/30" port port="16509" protocol="tcp" accept'</span></code></pre><br>
 :<br>
<br>
<pre><code class="bash hljs">$ virsh -r -c <span class="hljs-string">'qemu+tcp://mgmt@kvm46.example.com/system'</span> list --all</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further, the import itself is very simple: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compute -&gt; Virtual Machines -&gt;: (additional menu, 3 vertical points) -&gt; Import -&gt; Source (KVM via libvirt) -&gt; URI (qemu + tcp: //kvm46.example.com / system) -&gt; Require Authentication (Disable) -&gt; Load. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We mark the necessary machines, select the allocation policy (Allocation Policy). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Allocation Policy - Preallocated is preferred for storage volumes with hardware zero detection, for volumes with high I / O, volumes with high occupancy, etc., otherwise thin provisioned can be. In any case, we look at the situation and analyze it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The checked “Clone” ticks, but does not copy the car. For example, a new MAC address for the network interface will be assigned.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the General tab, it is important to specify the correct OS type, and on the Network Interfaces tab, you can specify the desired network. </font><font style="vertical-align: inherit;">Next, “import”, and, depending on the speed of the equipment, we get the imported machine. </font><font style="vertical-align: inherit;">After importing (or before) do not forget to install ovirt-guest-agent.</font></font><br>
<br>
<a name="task-mgmt"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task management</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When tasks freeze, difficult “dances” begin, some of which I will try to touch upon. </font><font style="vertical-align: inherit;">With regular behavior, one can observe them in Fig. </font><font style="vertical-align: inherit;">2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the task is performed more or less normally, regular tools are enough. </font><font style="vertical-align: inherit;">With pimers and pictures you can see </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tasks are performed on oVirt-host.</font></font><br>
<br>
<pre><code class="plaintext hljs">[mgmt@ovirt-nodeNN] $ sudo vdsm-client Host getAllTasksInfo<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task getStatus taskID=&lt;TASKID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task stop taskID=&lt;TaskID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task clear taskID=&lt;TaskID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Host getAllTasksInfo</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Additionally, vdsm-client may try to roll back the task, all supported methods:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo vdsm-client Task -h</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Task methods: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 method [arg = value] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 getStatus Get Task status information. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 revert Rollback a Task to restore the previous system state. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 clear Discard information about a finished Task. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 getInfo Get information about a Task. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 stop Stop a currently running Task. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, the movements become more complicated if the task cannot be stopped using standard methods. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Officially, the taskcleaner tool is used for this:</font></font><br>
<br>
<pre><code class="bash hljs">[mgmt@ovirt-engine] $ sudo /usr/share/ovirt-engine/setup/dbutils/taskcleaner.sh --<span class="hljs-built_in">help</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For even more severe cases, direct editing of the database is required. </font><font style="vertical-align: inherit;">This method should be resorted to only as a last resort, having fresh archives of oVirt and the affected machines. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we connect software collection</font></font><br>
<br>
<pre><code class="bash hljs">[mgmt@ovirt-engine] $ sudo scl <span class="hljs-built_in">enable</span> rh-postgresql10 <span class="hljs-string">"psql -d engine -U postgres"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, connect to the database</font></font><br>
<br>
<pre><code class="plaintext hljs">su postgres<font></font>
psql -d engine -U postgres<font></font>
select * from job order by start_time desc;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And direct removal - running the DeleteJob procedure for the problematic task:</font></font><br>
<br>
<pre><code class="plaintext hljs">select DeleteJob('UUID_HERE');</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Example:</font></font><br>
<br>
<pre><code class="plaintext hljs">select DeleteJob('ed0127c7-b052-4ec2-a67c-8b3a65d55e19');</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's all for today, and I hope you never need to manually edit a database!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en503172/index.html">C #: Introducing Source Code Generators</a></li>
<li><a href="../en503176/index.html">Implementation of an algorithm for determining the width of an object using an ultrasonic rangefinder and encoders in RobotC language</a></li>
<li><a href="../en503178/index.html">Apple Mac and fancy devices. LTO, SAS, Fiber Channel, eSATA</a></li>
<li><a href="../en503182/index.html">"I am the first blind developer in my company." Part 1</a></li>
<li><a href="../en503184/index.html">We invite you to the online meeting Zabbix</a></li>
<li><a href="../en503194/index.html">ISA does not forgive mistakes</a></li>
<li><a href="../en503196/index.html">450 free courses from the Ivy League</a></li>
<li><a href="../en503200/index.html">YOLOv4 - the most accurate real-time neural network on the Microsoft COCO dataset</a></li>
<li><a href="../en503204/index.html">How to flash Xiaomi Redmi 4 Prime / Pro / Premium on Android 10</a></li>
<li><a href="../en503208/index.html">When is the best time to invest?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>