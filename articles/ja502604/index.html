<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✉️ ⚛️ ✊🏽 Patrik PatrickのTLSの概要（パート1） 🚵🏾 😈 🙌🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ご存知かもしれませんが、これはパトリックです。彼はヒトデです。つまり、彼を侮辱することなく、彼の手が1つの場所から成長していると言うことは可能です。パトリックはまた、非常に実用的であり、彼が必要としないものすべてをすぐに忘れます-しかし、彼が何かを必要とする場合、彼はそれを知りたいです（彼がそれを必...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Patrik PatrickのTLSの概要（パート1）</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plesk/blog/502604/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご存知かもしれませんが、これはパトリックです。彼はヒトデです。つまり、彼を侮辱することなく、彼の手が1つの場所から成長していると言うことは可能です。パトリックはまた、非常に実用的であり、彼が必要としないものすべてをすぐに忘れます-しかし、彼が何かを必要とする場合、彼はそれを知りたいです（彼がそれを必要とするからです！）。スポイラー：ここでパトリックはTLSハンドシェイクを実行しようとしています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/aa/64/diaa64cwcj8dktjvcv-4ba6wtbg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事はパトリックと彼のような人々のために書かれています。彼女は、社内の教育用Plesk TechTalkで最初に示されたプレゼンテーションから生まれました。そこでは、アクセシブルなフォームの従業員が興味深いテクノロジー、プロセス、ソリューションに関する情報を互いに共有しています。したがって、この記事の写真はスライドのようになります</font><font style="vertical-align: inherit;">。）</font><font style="vertical-align: inherit;">レポートの元のテキストの作成者は、プログラムマネージャーのPlesk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruslan Kosolapov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、すべてのTLS資料は、小さな全体像をカバーしますが、全体像はカバーしません。</font><font style="vertical-align: inherit;">これはあまり実用的ではなく、パトリックはこれから頭痛の種を抱えています。</font><font style="vertical-align: inherit;">ここではすべてが異なります。簡単に、「日常生活の中で」適用され、可能な限り網羅されます。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TLSとは何で、なぜPatrickにとってそれは</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TLS（トランスポート層セキュリティ）は、トランスポート層保護プロトコルです。誰もあなたを「聞いて」、いくつかの重要な情報を見つけることができないようにするために必要です（ネットワークでの作業について話す場合、ほとんどの場合パスワード）。また、送信中の改ざんやトラフィックの変更から身を守るためにも。 TLSの目的はこれら2つの点にあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明確にするために、TLSハンドシェイクをPatrick SpongeBobへの呼び出しと見なしてみましょう。通話中、誰かが会話を盗聴（Patrickの隣に立っているか、回線の真ん中で電源を入れている）でき、一般にスポンジボブがもう一方の端にない場合があります-これらすべての問題が関連しています。それらを解決するために、PatrickはTLSを使用したいと考えています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要するに、トップレベルのハンドシェイクは次のよう</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">になり</font><b><font style="vertical-align: inherit;">ます</font></b></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Patrick：</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TLSを使用したいのですが、暗号バージョンは次々です。</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スポンジボブ：</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、暗号バージョンなどを使用しましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、スポンジボブは証明書を送信し、パトリックはそれをチェックして、すべてが正常であると言い、セッションキーが完了します（実際には2つありますが、問題ではありません）。非対称暗号化ではなくセッションキーを使用する理由-高速なため。その後、彼らは解読が理解できない言語を話し始めます。したがって、すべてが保護されます。</font></font><br>
<img src="https://habrastorage.org/webt/na/xj/yu/naxjyufzfjvlcazi16qsmlf5muq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが単純なようです。ハードウェアでどのように機能するかは、私たちにとってそれほど重要ではありません。しかし、あなたが考え始めると-そしてパトリックは考え始める！ -これは、TLSを使用することに一般的にどのように同意するかという疑問を引き起こしますか？結局のところ、かつてTLSはありませんでしたが、SMTP、HTTPなどの通常のプロトコルしかありませんでした。 TLSに必要なものをどのように言うのですか？そして、私たちの業界では、すべてが通常どおりです-多くの方法があります！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は、特定のポートを使用したいと考えていました。これは、そのポートでのTLSの使用を意味します。</font><font style="vertical-align: inherit;">これの欠点は何ですか？</font><font style="vertical-align: inherit;">そして、なぜTLSセッションを開始するための明示的な（明示的な）メソッドが登場したのでしょうか。</font><font style="vertical-align: inherit;">いくつかの理由があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くのポートが必要です。ポートは使いたくないものです。</font><font style="vertical-align: inherit;">ファイアウォールが多いほど、ファイアウォールの構成が難しくなります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> サーバーはこれを無視できます-ポート443に接続されており、そこにはTLSはなく、HTTPSのないHTTPのみです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 接続が確立される前に、TLSサーバーがサポートされているかどうかを確認できません。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、明示的なメソッドが出現しました。通常のポートに接続してから、セッションをTLSにアップグレードします。</font><font style="vertical-align: inherit;">異なるサービスの場合、プロトコルには異なるコマンドがあります。たとえば、SMTPの場合、SMTPプロトコルのレベルに別のコマンド</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-STARTTLSがあり</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">HTTPにもこのようなジョークがあり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upgrade：TLS / 1.0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれてい</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">プロトコルレベルでは、TLSサーバーがサポートされているかどうかがわかりやすくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さまざまなタイプの接続と、TLSがどのように機能するかについてもう少し詳しく説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続：HTTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつものように、ニュアンスがなければ、すべてが簡単です。 HTTPの場合、増大するセキュリティ要件により、TLSと連携するプロセスが常に進化しています。最初はHTTPSへのリダイレクトがあり、これは単にヘッダーで行われました。これは脆弱性の抜け穴を残したので、仲間のGoogleはHSTS（HTTP Strict Transport Security）を思いつきました。これは、ブラウザに通知するHTTP応答のヘッダーです。「このドメインにアクセスしたら、HTTPにアクセスするように指示された場合でも、直接HTTPSにアクセスすることを忘れないでください」。したがって、リダイレクトはなく、すべてがより安全に行われます。さらに、Googleには別のイニシアチブがあります-見出しに関係なく、サイトをGoogle Chromeの「常にHTTPSを使用する」のリストに追加するようにリクエストを残すことができます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単に：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HSTSはHTTPからHTTPSへのリダイレクトの脆弱性を解決するため、ほとんどすべてのブラウザーがHSTSをサポートしています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続：エキゾチック（新しいバージョンのHTTPだけでなく）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP / 2では、TLSには優れた点があります。これは常に使用されます（ブラウザーが作成されるため）。</font><font style="vertical-align: inherit;">さらに、HTTP / 2のTLSは最新である必要があります。つまり、バージョン1.2以降が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も可能性が高いのは、GoogleがHTTP / 3の広範な使用をすぐに販売することです。現在はIANA標準で採用されています。</font><font style="vertical-align: inherit;">その外観と開発の話はかなり混乱しています。</font><font style="vertical-align: inherit;">パトリックを覚えておくべき主なこと：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HTTP / 3は常にTLS 1.3+です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP / 3はQUICに基づいています-これはUDPを介したプロトコルであり、Googleによると、TCPよりも優れています。</font><font style="vertical-align: inherit;">実際、HTTP / 3という名前が最終的に承認される前は、プロトコルはHTTP-over-QUICと呼ばれていました。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主に通信で使用されている興味深いSCTPプロトコルがまだあります。</font><font style="vertical-align: inherit;">その上では、TLSとDTLSの両方が使用されます（これはUDPのTLSです）。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単に言うと</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、2年後にはQUIC（つまりHTTP / 3）がどこでも使われるようになりますが、今ではすでにHTTP / 2がどこにでもあるはずですが、実際にはどこにでもあるわけではありません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続：メール</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのクライアントは、587番目のポートにTLSが必要であると信じていますが、ここにも微妙な違いがあります。誰かがデフォルトでTLSを期待し、誰か</font><font style="vertical-align: inherit;">がクライアントからの</font><font style="vertical-align: inherit;">明示的な</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STARTTLS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要求を期待</font><font style="vertical-align: inherit;">しています。このため、メールサーバーとメールクライアントのさまざまな組み合わせにより、望ましくない影響が生じることがあります。たとえば、クライアントはTLSが存在することを期待してポート587に入り、サーバーはクライアントが明示的に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STARTTLSを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要求するのを待ちます</font><font style="vertical-align: inherit;">。何も受信しないと、クライアントはポート25にロールバックします。その結果、安全でないSMTP接続へのサイレントスイッチが発生します。テストと開発の際には、クライアントとサーバーの組み合わせによるこのような影響について覚えておく価値があります。 Autodiscoverには、TLSを指定するためのさまざまなオプションがあります。それはどうあるべきか、何が期待されているか、何をすべきかです。多くのメールクライアントはこれらのことを理解しています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単に：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> メールサーバーとメールクライアントでのTLSサポートでは、一般的にすべてが問題ありませんが、特別な場合には問題が発生する可能性があり、TLS拡張はあまりサポートされていません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続：FTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで言うことはほとんどありません。</font><font style="vertical-align: inherit;">主な問題はSNIです（これは、異なるドメインが同じIP上にある場合です）。</font><font style="vertical-align: inherit;">FTPレベルでは、ドメイン名は転送されません。</font><font style="vertical-align: inherit;">明示的なバージョンでは、書き込む場所がないため、機能しません。</font><font style="vertical-align: inherit;">いくつかのソリューションオプションがあります-いくつかは提供し、他はそうです、一般的なソリューションはまだ採用されていません、標準がありません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単に言うと</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、FTP </font><b><font style="vertical-align: inherit;">に</font></b><font style="vertical-align: inherit;">はある種のTLSサポート（FTPS、SFTP-SSHを介して実装されたFTPのアナログ）がありますが、FTP自体の技術的な制限により、一部の側面はカバーされていません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TLSハンドシェイク</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、さまざまな接続でTLSを使用して通信を開始する方法がわかり、パトリックはスポンジボブに自分の欲望を伝えることができました。</font><font style="vertical-align: inherit;">TLSを使用することに同意すると、TLSハンドシェイクが生成されます。</font><font style="vertical-align: inherit;">その結果、クライアントとサーバーがすべてを暗号化する方法について合意する必要があります。</font><font style="vertical-align: inherit;">さらに、クライアントはサーバーが必要なサーバーであることを確認する必要があります。</font><font style="vertical-align: inherit;">サーバーがクライアントをチェックすることもあります（ただし、頻度ははるかに低くなります）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗号とバージョン</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに述べたように、最初のステップは、TLSのバージョンと暗号化に使用する暗号を選択することです。</font><font style="vertical-align: inherit;">通常、暗号は次のようになります</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/bc/ne/7jbcnel13ieehyi6h6ibu9gi7r4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。暗号スイートはIANAレジストリにあり、バイナリ形式のTLSプロトコルはそのIDのみです。</font><font style="vertical-align: inherit;">図からわかるように、ここには暗号（だけでなく）だけでなく、TLSハンドシェイクに必要な操作モードやその他の詳細も含まれています。</font><font style="vertical-align: inherit;">パトリックは詳細に入る必要はありません。</font><font style="vertical-align: inherit;">この段階で重要なことは、これらの文字が適切であることを思い出すことです（残りの文字は不適切です）。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DHE</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ECDhe</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AES128</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AES256</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RSA</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ecdsa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CBC</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gcm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SHA256</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SHA3​​83</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> チャチャ20</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ポリ1308</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
優れた暗号を覚えておくための画像：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/oz/us/5oozuswdmgo1dmropfliew8ee3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
覚えにくい場合は、Mozilla </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssl-config.mozilla.orgの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスなど、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">わかりやすい</font></a><font style="vertical-align: inherit;">良いサービスがあります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/06/g0/im06g0jqgsdkw3kbie0c3lzfjcq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたはそれがどこでどのようにサポートされているかをすぐに見ることができます-これはMozillaの連中がフォローしようとしているものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
興味深い詳細：クライアントは優先順位に従って優先順位に従って暗号を転送しますが、サーバーは決定に任されます-サポートされているクライアントのリストから最良と思われる暗号を選択します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
両側とも、プロトコルのサポートされる最大バージョンを示しています。この場合、PatrickはSpongeBobよりも高度です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際に証明書</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「このようにしましょう」という回答とともに、サーバーは1つまたは複数の証明書を送信します。証明書は多数存在する場合があります。</font></font><br>
<img src="https://habrastorage.org/webt/ay/9m/p-/ay9mp-c7akdltxlnomatwwq1zdq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
証明書とは何ですか？これは、情報（サブジェクト）（ほとんどの場合、ドメインまたは組織の名前）と公開鍵（公開鍵）の関係です。つまり、証明書には次のように記載されています。今、彼の助けを借りて、セッションキーに同意します。また、その助けを借りて、証明書などの署名をチェックできます。つまり、原則として、証明書ではなく、この関係が示されているレジストリを使用することが可能です。そして実際、この方向へのステップは続いています。認証局メカニズムはあまり良くないと考えられているため、他に何もありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、証明書は「Subject：Public key」とishyuerの署名の構造です（ロシア語への文字変換の発行者はひどく見えますが、ここで最も近い同義語は、「発行者」のコンテキストではそれほど近くありません）。 Ishüyerには、証明書と、誰かと何かとのつながりもあります。 ishyuereの公開鍵を取得して署名を確認することで、証明書が正しいかどうかを確認できます。結果として、ここでは何も偽ることはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
証明書を調べて、証明書にどんな問題があるか見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/14/gt/ox/14gtoxx4czgwthkckj2vjyjfnbi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、シリアル番号はishyuereの範囲内でのみ一意であることを意味しますが、一部のソフトウェアでは、それが宇宙全体で一意であると見なしています。幸い、たいていの場合、それは本当に完全にユニークです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
証明書は、暗号化と署名に使用されるアルゴリズム（RSAまたはECDSA）、つまり、この公開鍵を操作するために使用する暗号化も示しています。 RSAとECDSAの主な違いは、ECDSAの数学的原理は楕円曲線に基づいており、RSAは単純に自然数であるため、速度が遅くなり、巨大なキー（3〜4千万）を使用してクラックされないようにすることです。 。 ECDSAの場合、300ビットのキーで十分であり、より高速に動作します。そのため、多くがECDSAに切り替えています。ハンドシェイク自体は重いため、削減したいと考えています。 ECDSAは、証明書を発行するときに要求することができ、プロスペクターがサポートする場合は、それを代行してくれます。ただし、証明書の署名は、ECDSAとRSAのどちらを要求したかではなく、現在発行されている秘密鍵の発行者によって異なります。したがって、ブラウザーは、一方が署名にあり、もう一方が公開鍵にあることを示すことができ、署名がECDSAでない場合でも心配する必要はありません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">証明書を取得するには？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要するに-このように：</font></font><br>
<img src="https://habrastorage.org/webt/th/7f/f1/th7ff1g-1g54v0t-_genzf3rc3u.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パトリックは認証局に言います：私は証明書が必要です。</font><font style="vertical-align: inherit;">この人物（または組織）は、パトリックであるかどうかを確認します。</font><font style="vertical-align: inherit;">チェックは非常に異なる場合があります。</font><font style="vertical-align: inherit;">もちろん、クライアントとしてのPatrickには証明書がない場合がありますが、サーバーに証明書がない場合、TLSはありません。</font><font style="vertical-align: inherit;">証明書アプリケーションですべてが正しく示されているかどうか、パトリックが証明書を要求しているサブジェクトを本当に所有しているかどうかがチェックされます。</font><font style="vertical-align: inherit;">これは、誰もが信じる条件付きの人々である、より高い認証局センターによって行われます。</font><font style="vertical-align: inherit;">証明書を発行するには、CSR（証明書署名要求、証明書の要求）を作成する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z1/mi/dk/z1midktpy8soeqqaz_xah-w0sn8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これも構造であり、設定、指定、検証、およびすべてを確認できるサービスがほとんどないため、操作は非常に困難です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計で、公開鍵のペア：秘密鍵を生成しますが、公開のみを与え、秘密を隠します。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、証明書署名要求を生成し、秘密鍵で署名します。</font><font style="vertical-align: inherit;">これらすべてを認証局に送信し、検証を開始します。</font><font style="vertical-align: inherit;">それは異なる場合があります。特にクールな証明書の場合、特別なトリッキーな手順がありますが、一般的なケースについては詳しく説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CAA RR</font></font></h2><br>
<img src="https://habrastorage.org/webt/pg/rh/lw/pgrhlwwd8la4_perxzg4zawlyjy.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰もが信じている人は、あまり良くないことがあるという問題があります。シマンテックがDigiCertに参加した理由の1つは、ドメイン所有者に尋ねずに（Symantec）が証明書を発行したためです。あなたはこれを行うことはできません。あなたのビジネスを売らなければならなかったので、それは誰にとっても侮辱でしたが、何よりもシマンテック自体に侮辱でした。サーバーがそのような悪質な同志にあまり依存しないようにするために、CAA RR（DNSのレコード）のようなものがあります。これは、所有者がドメインの証明書を発行することを誰に許可するかを示します。この機能はPleskにもあります。これは、ほとんどDNSSecのようにこれまで使用されていませんが、それでも使用されます。すべての認証局がこのエントリを確認することに同意し、この認証局を発行できないと記載されている場合は、「検証に合格しなかったため、CAA RRに記述されています。私はあなたのために証明書を書き出すことができない」-そしてそれを書きません。エントリがない場合は、できます。現在、Googleはイニシアチブを推進しており、顧客が受け取った証明書をチェックしてCAA RRレコードに準拠しているかどうかを確認しています。議論はまだ進行中です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、Pleskでサポートを提供した時点からのCAA RRは、検証方法（つまり、このドメインが自分のものであることを検証する方法でここに示すこともできます）とアカウントURI（Uniform Resource Identifier）を示すことで拡張されました。</font><font style="vertical-align: inherit;">ユーザーに人気Plesk Let's Encryptはすでにこれらすべてをサポートしています（よくできました！）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはすべてのタイプの証明書で機能します。後で違いについて説明するので、タイプについてさらに詳しく説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">証明書の種類</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらの3つがあります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドメイン検証</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サブジェクトはドメインです。つまり、ここではそれだけをチェックします。</font><font style="vertical-align: inherit;">以前は、自動バリデーターがない場合、主にWhoisサービスを介して電子メールで検証が行われていました。</font><font style="vertical-align: inherit;">これは、あなたがこのドメインの所有者であると考えるのに十分な理由と考えられました。</font><font style="vertical-align: inherit;">それから彼らはDNSをチェックすることを考えました-彼らは電子メールであなたに「そしてそのようなそしてそのようなレコードをDNSに追加します」と書いた。</font><font style="vertical-align: inherit;">その後、自動メソッドが登場しました（ACMEについては、後でさらに説明します）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組織の検証</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「件名」フィールドには、ドメイン名に加えて、組織名も表示されます。</font><font style="vertical-align: inherit;">このチェックでは、ドメインがこの組織に属しているかどうか、および証明書を取得した人がそこで働いているかどうかを検証します。</font><font style="vertical-align: inherit;">これがどのように行われるか：彼らは登録簿で組織を探し、電話をし、何かをするように求めます（電話は正しいことが判明し、適切な人物が答えました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張検証</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OVと同じですが、クーラーのみです。ここではすべてが非常に規制されています。「5.6.8項では、次のようにする必要があります：...」などの40ページのドキュメント。国、部署（申請書に記載されている場合）、時には特別な人が目で見に行くことさえあります。実際的な違いは何ですか？ほとんどすべてのブラウザがOVとDVを区別しなくなりました。この場合、組織の名前が表示されないため、これは悪いことです。その結果、ドメインaliepxress.ruを作成したり、同じページを描画したり、クレジットカードを盗んだりする必要がなくなります。そして、そのようなドメインを作成し、その上にDV証明書を取得することは絶対に正当です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EVの例-組織の名前がここに表示されるため、誰かが何かを盗んだ場合、ユーザーはそれがバルブコーポレーションコーポレーションであることがわかり、コーポレーションの登録はドメインよりもやや難しい（チェックが増える）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6p/kp/kc/6pkpkccn848gjwl1osfx_yc0gjy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、すべてがEVの違いがなくなるところまで進み、モバイルデバイスでは表示されなくなり、別のボタンを押す必要があり、Safariでも同様です。</font><font style="vertical-align: inherit;">Google Chromeはまだ保持されています（UPD-もはや！IEから画面を作成する必要がありました）。</font><font style="vertical-align: inherit;">「あなたが心配しているなら、クリックして見てください」と示さない人たちの議論は、当然のことながら誰も押し付けません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">証明書の取得：自動化</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、DV証明書の自動受信について説明します。</font><font style="vertical-align: inherit;">わかりやすくするために、お気に入りのLet's Encryptがどのように実行するかを見てみましょう。</font><font style="vertical-align: inherit;">彼は、もし誰かが興味があれば、そしてロシア語でさえも、一般的に良いドキュメントを持っています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACME</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACME（自動証明書管理環境）は、証明書を取得するプロセスを自動化および標準化するために設計されたプロトコルです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACMEはどのようにしてドメイン所有者であることを証明しますか？</font><font style="vertical-align: inherit;">あなたは言う：私は証明書が必要で、自動検証のタイプを示します-たとえば、ACME HTTP-01。</font><font style="vertical-align: inherit;">Let's Encryptはデータをファイルに保存するように要求し、ファイルをドメインに配置できる場合（そして、Let's EncryptがHTTP経由でファイルを取得できる場合）は、おそらくその所有者です。</font><font style="vertical-align: inherit;">現在、このアプローチはフィッシングから保護されていないため、Googleを含めて批判されています。</font><font style="vertical-align: inherit;">つまり、手動検証では、aliepxress.ruドメインは疑いを抱かせる可能性がありますが、Let's Encrypt自体はこれまでのところ（または可能ですが、ひどく）わかりません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNSチャレンジ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACMEに加えて、DNSの課題もあります。</font><font style="vertical-align: inherit;">たとえば、DNSゾーンにtxtレコードを入力し、そこにデータを配置します。</font><font style="vertical-align: inherit;">他の方法がありますが、一般的ではありません。1つは脆弱であることが判明したため、完全にキャンセルされました。</font><font style="vertical-align: inherit;">Pleskの機能：ワイルドカード証明書（DNSチャレンジを使用してのみ書き出すことができます）は、多くの場合機能しません。PleskがドメインのDNSゾーンと拡張機能</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's Encrypt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">管理しないことが多いため、DNSゾーン</font><font style="vertical-align: inherit;">でのレコードの作成を自動化できないためです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's Encryptに関するもう2つの言葉</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's Encrypt証明書を操作する際の重要な側面は制限です。</font><font style="vertical-align: inherit;">疑わしい場合（またはそれらが達成された疑いがある場合）は、リンクをたどることが最善です：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">letsencrypt.org/docs/rate-limits</font></font></a><br>
<img src="https://habrastorage.org/webt/c0/lx/5g/c0lx5gabymsjx5fzdqfvn1lk-ku.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時々それらは更新されます。</font><font style="vertical-align: inherit;">人々が忘れてしまう明らかな制限があります。ほとんどの場合、サポートのリクエストから判断すると、証明書には100個のドメイン名という制限が課せられます。</font><font style="vertical-align: inherit;">Let's Encryptにもステージングサーバーがあり、さらに制限がありますが、そのような証明書は信頼されていないと見なされ、ブラウザーでは自己署名に似ています。</font><font style="vertical-align: inherit;">実際には、名前の数が100に制限されているので、それらがめったに私たちのところに来ることはありません（Pleskのサイトには合計1,300,000のLet's Encrypt証明書があるにもかかわらず）</font><font style="vertical-align: inherit;">統計によると、中央値は証明書ごとに20名です。</font><font style="vertical-align: inherit;">だから、何かがうまくいかない場合は、見てください-おそらく限界に達しています。</font><font style="vertical-align: inherit;">Let's Encryptには優れたエラーレポートがあり、通常は何が起こったかを理解できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次は何ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、証明書が受信された後、サーバーはセッションキーデータを送信します。これが暗号化に使用されます。</font><font style="vertical-align: inherit;">サーバーがクライアントを認証する必要があると判断した場合（たとえば、特定のサークルにのみアクセスが許可されている場合など）は、次のように尋ねます。</font><font style="vertical-align: inherit;">そして、クライアントは自分の証明書を送信する必要があります。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerHelloDone</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メッセージを受信した後</font><i><font style="vertical-align: inherit;">、</font></i><font style="vertical-align: inherit;">クライアントは、証明書を検証して鍵を操作するとき</font><font style="vertical-align: inherit;">が</font><i><font style="vertical-align: inherit;">来たと</font></i><font style="vertical-align: inherit;">認識します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TLS 1.3がオープンチャネルを通過する前に、私たちが話し合ったすべてのことは、誰でもこれらのすべてを見ることができます。</font><font style="vertical-align: inherit;">あなた自身について読むことができるいくつかの興味深い攻撃があります。</font><font style="vertical-align: inherit;">記事の</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第2 </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズ</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、クライアントが証明書を検証する方法を学習します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja502588/index.html">パワーポイントの信じられない話</a></li>
<li><a href="../ja502592/index.html">SwiftUIを使用したネオモーフィズム。パート1</a></li>
<li><a href="../ja502594/index.html">Webプロジェクトが終わらない7つの理由とそれに対処する方法</a></li>
<li><a href="../ja502596/index.html">無料の検疫教育コース：デザイン</a></li>
<li><a href="../ja502598/index.html">セキュリティウィーク21：Windows印刷サービスの脆弱性</a></li>
<li><a href="../ja502608/index.html">SaaSサービスのアプリケーションの市場を開始した方法</a></li>
<li><a href="../ja502614/index.html">Kubernetesのベストプラクティス。クエリとリソース制限の設定</a></li>
<li><a href="../ja502620/index.html">お金の会計</a></li>
<li><a href="../ja502624/index.html">彼らはどのようにFacebookで働いていますか？会社での価値観と採用</a></li>
<li><a href="../ja502626/index.html">XCTestplanとXcode 11を使用した自動iOSスクリーンショット</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>