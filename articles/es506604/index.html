<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§Ø üêº üå≠ Concurrencia y eficiencia: Python vs FSM üëµüèæ ‚ÜîÔ∏è üìå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lo admito, pero no s√© Python. Solo porque no lo uso. Sin embargo, al comenzar su desarrollo, as√≠ como al tratar de descifrar la misteriosa abreviatura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Concurrencia y eficiencia: Python vs FSM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506604/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo admito, pero no s√© Python. Solo porque no lo uso. Sin embargo, al comenzar su desarrollo, as√≠ como al tratar de descifrar la misteriosa abreviatura GIL, fui a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un art√≠culo que</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> describe los "fen√≥menos m√°gicos inexplicables" de una versi√≥n paralela de una funci√≥n dependiente de la CPU en Python. Hubo un deseo de volver a verificar esta prueba y compararla con la implementaci√≥n equivalente en forma de un modelo de m√°quina de estado (m√°quina de estado finito o FSM para abreviar) en el entorno de Programaci√≥n de componentes visuales (autom√°tico) - VKP (a). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cualquier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el programa depende en cierta medida de la CPU. Por otro lado, si esto no es solo ensamblador, entonces probando en uno u otro lenguaje de alto nivel, lo m√°s probable es que examinemos la capa de software oculta por √©l. Por lo tanto, considerando Python, ser√≠a m√°s correcto hablar sobre la dependencia de la CPU de su int√©rprete. Incluso se puede argumentar que un programa Python tendr√° una velocidad dependiendo de la versi√≥n del int√©rprete, y tendr√° un "misticismo" caracter√≠stico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, hay situaciones en las que casi no hay dependencia de la CPU (veremos esto). </font><font style="vertical-align: inherit;">Estamos hablando de lenguajes cuyo modelo computacional es diferente de la arquitectura t√≠pica del procesador. </font><font style="vertical-align: inherit;">El modelo computacional de Python le corresponde, y el modelo de c√≥mputo del aut√≥mata, que se discutir√° m√°s adelante, tiene una arquitectura diferente y esto determinar√° los detalles de sus pruebas. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cu√°l ser√° la velocidad y si el m√≠stico tendr√° lugar se revelar√° durante la prueba del "c√≥digo de aut√≥mata"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de Python prestado del art√≠culo, en versiones en serie y paralelas, se muestra en los Listados 1 y 2, respectivamente. En nuestro caso, se complementa con l√≠neas que fijan el tiempo de trabajo, y la prueba secuencial se incluye en un "contenedor" que le permite establecer el n√∫mero de repeticiones (una consecuencia de mi conocimiento de decoradores en Python). </font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 1. Prueba secuencial de CPU en Python</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">import</span> time

def <span class="hljs-title">count</span><span class="hljs-params">(n)</span>:
  st_time </span>= time.time()
  <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<font></font>
    n -= <span class="hljs-number">1</span><font></font>
  t = time.time() - st_time<font></font>
  print(<span class="hljs-string">"speed CPU------%s---"</span> % t)
  <span class="hljs-keyword">return</span> t<font></font>
<font></font>
def TestTime(fn, n):<font></font>
  def wrapper(*args):<font></font>
    tsum=<span class="hljs-number">0</span><font></font>
    st = time.time()<font></font>
    i=<span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> (i&lt;=n):<font></font>
      t = fn(*args)<font></font>
      tsum +=t<font></font>
      i +=<span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> tsum
  <span class="hljs-keyword">return</span> wrapper<font></font>
<font></font>
test1 = TestTime(count, <span class="hljs-number">2</span>)<font></font>
tt = test1(<span class="hljs-number">100000000</span>)<font></font>
print(<span class="hljs-string">"Total ---%s seconds ---"</span> % tt)
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 2. Prueba de CPU paralela</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">import</span> time
from threading <span class="hljs-keyword">import</span> Thread
def <span class="hljs-title">count</span><span class="hljs-params">(n)</span>:
  start_time </span>= time.time()
  <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:<font></font>
    n -= <span class="hljs-number">1</span>
  print(<span class="hljs-string">"speed CPU-%s seconds ---"</span> % (time.time() - start_time))<font></font>
<font></font>
k = <span class="hljs-number">2</span>
<span class="hljs-keyword">while</span> k &gt; <span class="hljs-number">0</span>:<font></font>
  print(<span class="hljs-string">"k=%d "</span> % k)<font></font>
  t1 = Thread(target=count,args=(<span class="hljs-number">100000000</span>,)); t1.start()<font></font>
  t2 = Thread(target=count,args=(<span class="hljs-number">100000000</span>,)); t2.start()<font></font>
  t1.join();<font></font>
  t2.join();<font></font>
  k -= <span class="hljs-number">1</span>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La Fig. 1 y la Fig. 2 muestran los resultados de la prueba obtenidos para dos ejecuciones de prueba consecutivas (Python 3.8.3 de 64 bits) para la CPU Intel¬Æ Core (TM) i5-2400S a 2.5 GHz, 6.0 GB de RAM. </font><font style="vertical-align: inherit;">Los resultados son los siguientes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prueba secuencial - 14.221 segundos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prueba paralela - 13.995 segundos</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el art√≠culo sobre GIL (en adelante denominado el art√≠culo original) esto fue de 24.6 segundos y 45.5 segundos respectivamente. </font><font style="vertical-align: inherit;">El tiempo de la prueba paralela es notable. </font><font style="vertical-align: inherit;">En comparaci√≥n con los resultados del art√≠culo original, esto demuestra que las cosas han progresado, aunque solo sea desde el punto de vista de la implementaci√≥n del paralelismo del int√©rprete (aunque esto es solo una suposici√≥n). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/mk/w6/uomkw6xfskl2xmcvhqzzuqo1yrk.jpeg" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 1. </font><font style="vertical-align: inherit;">Tiempo de ejecuci√≥n de prueba secuencial de Python </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/w6/il/dw/w6ildwbdjwthschinfwkvvh66vc.jpeg" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.2. </font><font style="vertical-align: inherit;">Tiempo de ejecuci√≥n de prueba paralela de Python</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que la versi√≥n paralela es casi dos veces m√°s lenta que la secuencial similar. Adem√°s, si creamos tres flujos, el resultado se ralentizar√° proporcionalmente (ver Fig. 3). De esto podemos concluir que un aumento en el n√∫mero de subprocesos conduce a un aumento m√∫ltiple en el tiempo de funcionamiento. Si no te pones bajo el cap√≥, entonces en el nivel actual de comprensi√≥n de Python, puede parecer misticismo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r7/lw/rm/r7lwrmuef38balputxp2u0vuguc.jpeg" alt="imagen"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 3. Prueba de CPU en tres subprocesos en Python</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Antes de proceder a la creaci√≥n de c√≥digo de aut√≥mata y probar en el entorno VKP (a), consideramos la implementaci√≥n de aut√≥matas fuera de √©l. En la Fig. 2 se muestra un modelo en forma de gr√°fico de un aut√≥mata equivalente al algoritmo del art√≠culo original. 4. De la variedad de opciones posibles (ver, por ejemplo, el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) considere el m√°s t√≠pico y conocido: en el formato de la denominada tecnolog√≠a SWITCH (para m√°s detalles, consulte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el sitio web de ITMO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, compararemos el programa Python con la implementaci√≥n de C ++. </font><font style="vertical-align: inherit;">El c√≥digo C ++ correspondiente al gr√°fico con su c√≥digo de inicio (vea la funci√≥n principal) se muestra en el Listado 3. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8l/io/zk/8liozkw_9cogioozutoi3xsadoq.jpeg" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 4. </font><font style="vertical-align: inherit;">Modelo automatizado de funci√≥n dependiente de la CPU</font></font></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 3. Implementando una prueba C ++</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FsmCount</span>
{</span>
<span class="hljs-keyword">public</span>:<font></font>
    FsmCount(<span class="hljs-keyword">int</span> n) { nCount = n; nState = <span class="hljs-number">0</span>; };
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ExecOneStep</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">int</span> nState;
<span class="hljs-keyword">protected</span>:
    <span class="hljs-keyword">int</span> nCount;
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FsmCount.h"</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FsmCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> nCount &gt; <span class="hljs-number">0</span>; }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FsmCount::y1</span><span class="hljs-params">()</span> </span>{ nCount--; }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FsmCount::ExecOneStep</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">switch</span> (nState) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
        <span class="hljs-keyword">if</span> (x1())<font></font>
            y1();<font></font>
        <span class="hljs-keyword">else</span> nState = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QCoreApplication&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FsmCount.h"</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span>
</span>{
    <span class="hljs-function">QCoreApplication <span class="hljs-title">a</span><span class="hljs-params">(argc, argv)</span></span>;<font></font>
<font></font>
    QTime time;<font></font>
    FsmCount *pFsmCount{<span class="hljs-literal">nullptr</span>};<font></font>
<font></font>
    pFsmCount = <span class="hljs-keyword">new</span> FsmCount(<span class="hljs-number">100000000</span>);<font></font>
    time.start();<font></font>
    <span class="hljs-keyword">while</span> (!pFsmCount-&gt;nState)<font></font>
        pFsmCount-&gt;ExecOneStep();<font></font>
    <span class="hljs-keyword">double</span> dTime = QString::number(time.elapsed()).toDouble();
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%f"</span>, dTime);
    <span class="hljs-keyword">if</span> (pFsmCount) <span class="hljs-keyword">delete</span> pFsmCount;<font></font>
<font></font>
    <span class="hljs-keyword">return</span> a.exec();<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tiempo de ejecuci√≥n de la prueba en la base de hardware mencionada es de 250 ms. </font><font style="vertical-align: inherit;">Esto es m√°s de 55 veces m√°s r√°pido que el c√≥digo Python. </font><font style="vertical-align: inherit;">Se realiz√≥ una comparaci√≥n con un caso de prueba paralelo para dos hilos (ver Fig. 2). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero la velocidad se puede aumentar a√∫n m√°s si la funci√≥n se calcula sin ir m√°s all√° de la acci√≥n / m√©todo y1 (ver Listado 4). </font><font style="vertical-align: inherit;">Como resultado, la velocidad de la prueba disminuy√≥ a menos de 1 ms (es dif√≠cil decirlo con mayor precisi√≥n, porque la prueba proporciona un valor igual a cero). </font><font style="vertical-align: inherit;">Si incluso este valor se toma como base, entonces la velocidad es m√°s de 14000 (!) Veces m√°s alta que en Python. </font><font style="vertical-align: inherit;">Queda claro por qu√© se prefiere C ++ al dise√±ar los mismos sistemas en tiempo real.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 4. Variante de m√©todo r√°pido para la clase FsmCount</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FsmCount::y1</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">while</span> (nCount&gt;<span class="hljs-number">0</span>)<font></font>
        nCount--;<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro pr√≥ximo objetivo es </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comparar Python con el entorno CPSU (a)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La prueba autom√°tica, como arriba, debe corresponder al modelo de la Fig. </font><font style="vertical-align: inherit;">4. Su c√≥digo muestra el Listado 5.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 5. Programa de prueba de CPU automatizado</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCount</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FCount(nameFsa); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
    FCount(<span class="hljs-built_in">string</span> strNam);<font></font>
    CVar *pVarCount;<font></font>
    CVar *pVarExtVarCount{<span class="hljs-literal">nullptr</span>};<font></font>
    CVar *pVarStrNameExtVarCount;<font></font>
    CVar *pVarWorkingHours;<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y2</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y3</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span></span>;<font></font>
    QTime time;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FCount.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_Count[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>),<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x12"</span>, <span class="hljs-string">"y2"</span>),<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x1"</span>,  <span class="hljs-string">"y1"</span>),<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x1"</span>, <span class="hljs-string">"y3"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<font></font>
FCount::FCount(<span class="hljs-built_in">string</span> strNam):<font></font>
    LFsaAppl(TBL_Count, strNam)<font></font>
{ }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCount::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarCount = CreateLocVar(<span class="hljs-string">"n"</span>, CLocVar::vtInteger, <span class="hljs-string">"local counter"</span>);<font></font>
    pVarStrNameExtVarCount = CreateLocVar(<span class="hljs-string">"strNameExtVarCount"</span>, CLocVar::vtString, <span class="hljs-string">"external counter name"</span>);;
    <span class="hljs-built_in">string</span> str = pVarStrNameExtVarCount-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarExtVarCount = pTAppCore-&gt;GetAddressVar(pVarStrNameExtVarCount-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarWorkingHours  = CreateLocVar(<span class="hljs-string">"strWorkingHours"</span>, CLocVar::vtString, <span class="hljs-string">"working hours"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarExtVarCount != <span class="hljs-literal">nullptr</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y1</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">int</span> n = <span class="hljs-keyword">int</span>(pVarCount-&gt;GetDataSrc());<font></font>
    pVarCount-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, --n);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y2</span><span class="hljs-params">()</span> </span>{<font></font>
    time.start();<font></font>
    pVarCount-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, pVarExtVarCount-&gt;GetDataSrc());<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y3</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, QString::number(time.elapsed()).toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y12</span><span class="hljs-params">()</span> </span>{ FInit(); }
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tiempo de ejecuci√≥n de la prueba est√° en el rango de 5.35 segundos con el n√∫mero de ciclos de 100,000. escrito en </font><font style="vertical-align: inherit;">C ++ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√°pido</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se ejecuta m√°s de 2600 veces (¬ø?) m√°s lento que la prueba paralela en Python. Tal resultado no puede sino molestar :( Pero observamos que la duraci√≥n del reloj discreto es de 0.0535 ms. Por ejemplo, el ciclo PLC est√°ndar del tipo OVEN-100 es de 1 ms, y por lo tanto, desde el punto de vista de los sistemas de control en tiempo real, el resultado es bastante decente. Aunque, todav√≠a A primera vista, el resultado no est√° a favor del AP, porque el c√≥digo es voluminoso y la velocidad provoca una cierta alarma (por ejemplo, para tareas puramente computacionales).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El uso de C ++ como lenguaje de dise√±o del VKP (a) hace que sea bastante simple resolver el problema de velocidad que ha surgido. El Listado 6 muestra el c√≥digo para un aut√≥mata que utiliza subprocesos del sistema est√°ndar basados ‚Äã‚Äãen la clase QThread de la biblioteca Qt. Como resultado, el tiempo cay√≥ a 70-80 ms, incluso cuando los ciclos aumentaron a 100000000. Por lo tanto, la prueba que usa la transmisi√≥n ya es 200 veces m√°s r√°pida que en Python. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que el resultado obtenido es una versi√≥n m√°s lenta de la prueba, sincronizada con el entorno del CPSU (a). Si comenta una l√≠nea (Listado 6):</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">while</span> (bIfExecuteStep) { bIfExecuteStep = <span class="hljs-literal">false</span>; }, </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
entonces el tiempo "colapsar√°" a 1 ms o menos. </font><font style="vertical-align: inherit;">Como resultado, la velocidad con respecto a Python ya ser√° m√°s de 14,000 veces mayor. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota 1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El indicador bIfExecuteStep es administrado por el entorno VKP (a). </font><font style="vertical-align: inherit;">Se establece al comienzo de la medida discreta actual. </font><font style="vertical-align: inherit;">Introducido para la sincronizaci√≥n con tiempo discreto del espacio del aut√≥mata del proceso. </font></font><br>
</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aumentar la velocidad, creamos una combinaci√≥n de un aut√≥mata y un flujo, donde este √∫ltimo implementa la funcionalidad deseada y el aut√≥mata lo envuelve. </font><font style="vertical-align: inherit;">Result√≥ ser un objeto bastante espec√≠fico, pero tambi√©n resolvimos el problema de aumentar la velocidad del trabajo, que decidimos como resultado.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 6. Prueba de CPU basada en hilos</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QThread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QCount</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThCount</span> :</span> <span class="hljs-keyword">public</span> QThread<font></font>
{<font></font>
    Q_OBJECT<font></font>
<span class="hljs-keyword">public</span>:<font></font>
    ThCount(QCount *p, QObject *parent);<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-keyword">bool</span> bIfRun{<span class="hljs-literal">false</span>};
    <span class="hljs-keyword">bool</span> bIfStop{<span class="hljs-literal">false</span>};
    <span class="hljs-keyword">bool</span> bIfExecuteStep{<span class="hljs-literal">false</span>};<font></font>
    QCount *pQCount;<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QCount</span>;</span><font></font>
};<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QCount</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ExecuteThreadStep</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">WaitForThreadToFinish</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> QCount(nameFsa); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
    QCount(<span class="hljs-built_in">string</span> strNam);
    <span class="hljs-keyword">virtual</span> ~QCount(<span class="hljs-keyword">void</span>);<font></font>
    ThCount  *pThCount{<span class="hljs-literal">nullptr</span>};<font></font>
    CVar *pVarCount;<font></font>
    CVar *pVarExtVarCount;<font></font>
    CVar *pVarStrNameExtVarCount;<font></font>
    CVar *pVarWorkingHours;<font></font>
<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y2</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span></span>;<font></font>
    QTime time;<font></font>
<font></font>
<span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThCount</span>;</span><font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"QCount.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTimer&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_Count[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"s2"</span>,<span class="hljs-string">"x12"</span>,	<span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s2"</span>,		<span class="hljs-string">"s3"</span>,<span class="hljs-string">"^x1"</span>,	<span class="hljs-string">"y2"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s3"</span>,		<span class="hljs-string">"s2"</span>,<span class="hljs-string">"^x1"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span><font></font>
    LArc()<font></font>
};<font></font>
<font></font>
QCount::QCount(<span class="hljs-built_in">string</span> strNam):<font></font>
    LFsaAppl(TBL_Count, strNam, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>)<font></font>
{ }<font></font>
<font></font>
QCount::~QCount(<span class="hljs-keyword">void</span>) { }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">QCount::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarCount = CreateLocVar(<span class="hljs-string">"n"</span>, CLocVar::vtInteger, <span class="hljs-string">"local counter"</span>);<font></font>
    pVarExtVarCount = <span class="hljs-literal">nullptr</span>;<font></font>
    pVarStrNameExtVarCount = CreateLocVar(<span class="hljs-string">"strNameExtVarCount"</span>, CLocVar::vtString, <span class="hljs-string">"external counter name"</span>);;
    <span class="hljs-built_in">string</span> str = pVarStrNameExtVarCount-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarExtVarCount = pTAppCore-&gt;GetAddressVar(pVarStrNameExtVarCount-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarWorkingHours  = CreateLocVar(<span class="hljs-string">"strWorkingHours"</span>, CLocVar::vtString, <span class="hljs-string">"working hours"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::ExecuteThreadStep</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">if</span> (pThCount) pThCount-&gt;bIfExecuteStep = <span class="hljs-literal">true</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::WaitForThreadToFinish</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span> (pThCount) {
        <span class="hljs-comment">//  </span>
        pThCount-&gt;bIfRun = <span class="hljs-literal">false</span>;<font></font>
        pThCount-&gt;quit();<font></font>
        pThCount-&gt;wait(<span class="hljs-number">500</span>);<font></font>
        pThCount-&gt;<span class="hljs-built_in">terminate</span>();<font></font>
    }<font></font>
    <span class="hljs-keyword">delete</span> pThCount;<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QCount::x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarExtVarCount != <span class="hljs-literal">nullptr</span>; }
<span class="hljs-comment">//  </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::y1</span><span class="hljs-params">()</span> </span>{<font></font>
    pThCount    = <span class="hljs-keyword">new</span> ThCount(<span class="hljs-keyword">this</span>, pTAppCore-&gt;pMainFrame);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::y2</span><span class="hljs-params">()</span> </span>{ pVarCount-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, pVarExtVarCount-&gt;GetDataSrc()); }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">QCount::y12</span><span class="hljs-params">()</span> </span>{ FInit(); }
<span class="hljs-comment">//                         </span><font></font>
ThCount::ThCount(QCount *p, QObject *parent) :<font></font>
    QThread(parent)<font></font>
{<font></font>
    pQCount = p;<font></font>
    bIfRun = <span class="hljs-literal">true</span>;      <span class="hljs-comment">//   / </span>
    start(QThread::IdlePriority);            <span class="hljs-comment">//  </span><font></font>
}<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ThCount::run</span><span class="hljs-params">()</span>
</span>{<font></font>
    bIfStop = <span class="hljs-literal">false</span>;       <span class="hljs-comment">//    </span>
    pQCount-&gt;pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, <span class="hljs-string">""</span>, <span class="hljs-literal">nullptr</span>);<font></font>
    pQCount-&gt;pVarCount-&gt;SetDataSrc(pQCount, pQCount-&gt;pVarExtVarCount-&gt;GetDataSrc());<font></font>
    pQCount-&gt;pVarCount-&gt;UpdateVariable();<font></font>
    <span class="hljs-keyword">while</span>(bIfRun)  {
        <span class="hljs-keyword">if</span> (pQCount-&gt;pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>) {<font></font>
            bIfExecuteStep = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">int</span> n = pQCount-&gt;pVarCount-&gt;GetDataSrc();
            <span class="hljs-keyword">if</span> (n&gt;<span class="hljs-number">0</span>) {<font></font>
                pQCount-&gt;time.start();<font></font>
            }<font></font>
            pQCount-&gt;time.start();<font></font>
            <span class="hljs-keyword">while</span> (n&gt;<span class="hljs-number">0</span>) {<font></font>
                n--;<font></font>
                <span class="hljs-keyword">while</span> (bIfExecuteStep) { bIfExecuteStep = <span class="hljs-literal">false</span>; }<font></font>
            }<font></font>
            <span class="hljs-built_in">string</span> str = QString::number(pQCount-&gt;time.elapsed()).toStdString();<font></font>
            pQCount-&gt;pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, QString::number(pQCount-&gt;time.elapsed()).toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
            pQCount-&gt;pVarCount-&gt;SetDataSrc(pQCount, <span class="hljs-number">0.0</span>);
            <span class="hljs-keyword">while</span> (n&lt;=<span class="hljs-number">0</span>) {<font></font>
                n = <span class="hljs-keyword">int</span>(pQCount-&gt;pVarCount-&gt;GetDataSrc());<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
    bIfStop = <span class="hljs-literal">true</span>;        <span class="hljs-comment">//    </span><font></font>
} <font></font>
</code></pre><br>
</div>
                    </div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considere otra prueba, prestando atenci√≥n al tiempo de ejecuci√≥n de los hilos.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como son absolutamente id√©nticos y luego se lanzan simult√°neamente, deben completar el trabajo simult√°neamente. Si para Python esto es cierto solo dentro de un cierto error (ver Fig. 5), entonces para los procesos en el CPSU (a) el tiempo coincide por completo (ver Fig. 6). Tenga en cuenta que el objeto de cron√≥metro creado adicionalmente, que determina el tiempo que la prueba se ejecuta fuera de √©l, muestra pr√°cticamente el mismo tiempo que el tiempo medido por la prueba / pruebas en s√≠ (consulte el Listado 4). </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observaci√≥n 2.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Cron√≥metro" es un proceso autom√°tico que inicia la cuenta regresiva cuando el proceso controlado ingresa al estado "s1" y fija el tiempo cuando ingresa al estado "st"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (consulte la tabla de transici√≥n del aut√≥mata en el Listado 4).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/m9/9j/yem99jhhwbjomjniiquk588avdq.jpeg" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.5. Pruebe el tiempo de ejecuci√≥n en Python </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/gj/vv/la/gjvvlahvngzhh_agxuwgesij9l0.jpeg" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 6. Tiempo de ejecuci√≥n de prueba en el entorno VKP (a) Los</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
aut√≥matas, en comparaci√≥n con otros modelos, tienen un tiempo discreto. El valor del reloj discreto se puede fijar para m√°quinas s√≠ncronas o flotantes, para as√≠ncronas (clasificaci√≥n seg√∫n Glushkov V.M.). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La pr√≥xima prueba ser√° verificar el entorno del CPSU (a) en busca de sincronismo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la capacidad de mantener una medida constante de tiempo discreto. Recuerde que la operaci√≥n s√≠ncrona de m√°quinas autom√°ticas es especialmente demandada en el dise√±o de sistemas de control autom√°tico (ver detalles [1]). Al mismo tiempo, este modo sirve como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ejemplo de la independencia real del modelo computacional de la velocidad de la CPU</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tiempo de ejecuci√≥n de la prueba con un ciclo de reloj discreto (en la teor√≠a del control autom√°tico (TAU) denominado intervalo de cuantificaci√≥n) dura 1 ms y el n√∫mero de ciclos 100000 debe ser de 100 segundos. </font><font style="vertical-align: inherit;">Los resultados obtenidos durante las pruebas se muestran en la Fig. </font><font style="vertical-align: inherit;">7. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bk/jk/po/bkjkpof2u2aemojgtv4at2jpvuq.jpeg" alt="imagen"><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 7. </font><font style="vertical-align: inherit;">Pruebas en modo s√≠ncrono (1 ms)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Realmente terminamos las pruebas principales y ahora podemos analizar la cantidad de c√≥digo, porque al mirar el Listado 3, los cr√≠ticos no dejar√°n de se√±alar esto. </font><font style="vertical-align: inherit;">Pero una vez m√°s se olvidar√°n de lo que se ha dicho m√°s de una vez. </font><font style="vertical-align: inherit;">El c√≥digo incluye una interacci√≥n de organizaci√≥n de shell con el entorno del CPSU (a). </font><font style="vertical-align: inherit;">Qu√© tipo de aut√≥mata tomar√° si lo excluye se explica en el Listado 7, que es c√≥digo puro para una </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funci√≥n de aut√≥mata</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 7. C√≥digo limpio de la m√°quina expendedora</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">extern</span> LArc TBL_CountMini[];
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCountMini</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:<font></font>
    FCountMini(<span class="hljs-built_in">string</span> strNam): LFsaAppl(TBL_CountMini, strNam) {};
    <span class="hljs-keyword">int</span> nCount;
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fcountmini.h"</span></span><font></font>
<font></font>
LArc TBL_CountMini[] = {<font></font>
    LArc(<span class="hljs-string">"1"</span>,	<span class="hljs-string">"1"</span>,<span class="hljs-string">"x1"</span>,	<span class="hljs-string">"y1"</span>),<font></font>
    LArc(<span class="hljs-string">"1"</span>,	<span class="hljs-string">"00"</span>,<span class="hljs-string">"^x1"</span>,	<span class="hljs-string">"--"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCountMini::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> nCount &gt; <span class="hljs-number">0</span>; }
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCountMini::y1</span><span class="hljs-params">()</span> </span>{ --nCount; }
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Result√≥, no es, mucho m√°s simple, aunque el tiempo de funcionamiento sigui√≥ siendo el mismo. </font><font style="vertical-align: inherit;">Pero, como ya hemos descubierto, el tiempo de una funci√≥n encerrada en una secuencia es literalmente de unos pocos microsegundos. </font><font style="vertical-align: inherit;">Ya se ha considerado una acci√≥n similar (ver Listado 4). </font><font style="vertical-align: inherit;">Con √©l, el tiempo de prueba se calcular√°, como antes, en microsegundos (ver Fig. 8). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, muchos problemas de los programas automatizados pueden resolverse si imagina c√≥mo administrar su efectividad. </font><font style="vertical-align: inherit;">Las caracter√≠sticas de C ++ en este sentido son pr√°cticamente ilimitadas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/9e/dd/jc9eddl6kh2-ycdztw6ukgrgcl4.jpeg" alt="imagen"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.8. </font><font style="vertical-align: inherit;">Resultados de probar la acci√≥n de y1 (Listado 6). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queda por considerar el "contenedor autom√°tico" para la funci√≥n en el Listado 7. El Listado 8 lo demuestra. El c√≥digo es voluminoso, pero, una vez m√°s, gen√©rico, que realiza funciones est√°ndar para el entorno.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listado 8. Contenedor para la funci√≥n de aut√≥mata en el Listado 5</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QTime&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCountMini</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCount</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FCount(nameFsa); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
    FCount(<span class="hljs-built_in">string</span> strNam);
    <span class="hljs-keyword">virtual</span> ~FCount(<span class="hljs-keyword">void</span>);<font></font>
    CVar *pVarCount;<font></font>
    CVar *pVarExtVarCount{<span class="hljs-literal">nullptr</span>};<font></font>
    CVar *pVarStrNameExtVarCount;<font></font>
    CVar *pVarWorkingHours;<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-keyword">void</span> <span class="hljs-title">y3</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y4</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span></span>;<font></font>
    QTime time;<font></font>
    FCountMini *pCountMini{<span class="hljs-literal">nullptr</span>};<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FCount.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fcountmini.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_Count[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"--"</span>,<span class="hljs-string">"y4"</span>),<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"st"</span>,<span class="hljs-string">"--"</span>,<span class="hljs-string">"y3"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<font></font>
FCount::FCount(<span class="hljs-built_in">string</span> strNam):<font></font>
    LFsaAppl(TBL_Count, strNam)<font></font>
{ }<font></font>
<font></font>
FCount::~FCount(<span class="hljs-keyword">void</span>)<font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (pCountMini) <span class="hljs-keyword">delete</span> pCountMini;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCount::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarCount = CreateLocVar(<span class="hljs-string">"n"</span>, CLocVar::vtInteger, <span class="hljs-string">"local counter"</span>);<font></font>
    pVarStrNameExtVarCount = CreateLocVar(<span class="hljs-string">"strNameExtVarCount"</span>, CLocVar::vtString, <span class="hljs-string">"external counter name"</span>);;
    <span class="hljs-built_in">string</span> str = pVarStrNameExtVarCount-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarExtVarCount = pTAppCore-&gt;GetAddressVar(pVarStrNameExtVarCount-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarWorkingHours  = CreateLocVar(<span class="hljs-string">"strWorkingHours"</span>, CLocVar::vtString, <span class="hljs-string">"working hours"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarCount-&gt;GetDataSrc() &gt; <span class="hljs-number">0</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FCount::x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarExtVarCount != <span class="hljs-literal">nullptr</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y3</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarWorkingHours-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, QString::number(time.elapsed()).toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y4</span><span class="hljs-params">()</span> </span>{<font></font>
    time.start();<font></font>
    <span class="hljs-keyword">if</span> (pCountMini) <span class="hljs-keyword">delete</span> pCountMini;<font></font>
        pCountMini = <span class="hljs-keyword">new</span> FCountMini(<span class="hljs-string">"CountMini"</span>);<font></font>
<font></font>
    pCountMini-&gt;nCount = pVarExtVarCount-&gt;GetDataSrc();<font></font>
    pCountMini-&gt;FCall(<span class="hljs-keyword">this</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FCount::y12</span><span class="hljs-params">()</span> </span>{ FInit(); }
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, podemos resumir. En el caso general, las m√°quinas en el CPSU (a) funcionan casi 2.600 veces m√°s lento en comparaci√≥n con los procesos en Python. Tal, de hecho, es la evaluaci√≥n del "int√©rprete autom√°tico" del entorno VKP (a). Por un lado, las reservas colosales de crecimiento est√°n ocultas en esto y, por otro lado, desde el punto de vista de la reactividad del medio, incluso tal tasa es suficiente. Pero, recuerde, el uso de hilos nos permite hacer frente a este problema ahora y viceversa, sobre esta base para ser m√°s r√°pido que Phython m√°s de 200 veces. Adem√°s de los subprocesos, existe una "soluci√≥n autom√°tica" a√∫n m√°s simple y te√≥ricamente m√°s precisa: llamar a una funci√≥n problem√°tica dentro de una o m√°s acciones (similar a "dividir una operaci√≥n o proceso en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragmentos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) En cualquier caso, con C ++, la situaci√≥n en el AP desde el punto de vista del rendimiento del programa no parece desesperada, y en una situaci√≥n determinada (dise√±o, por ejemplo, sistemas en tiempo real) es incluso ventajosa. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y finalmente, un poco sobre lo que va m√°s all√° de las simples pruebas.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Me enganch√≥ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Estoy de acuerdo en que "lo suficiente como para temer decisiones subjetivamente hermosas en el c√≥digo". Con una enmienda importante: estoy a favor de la objetividad. El c√≥digo de un programa de aut√≥mata puede parecer engorroso (lo cual es bastante reparable), no muy hermoso (esto es muy subjetivo) y puede que ni siquiera est√© organizado en velocidad (aqu√≠, como hemos visto, hay m√°s de una soluci√≥n en AP), pero la comprensi√≥n de su esencia revela algo oculto desde afuera vista de la belleza Por otra parte, la belleza objetiva.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øCu√°l es el criterio de objetividad aqu√≠? Teor√≠a. En nuestro caso, la teor√≠a de los aut√≥matas. Su implementaci√≥n, no importa c√≥mo se vea, por definici√≥n, no puede ser fea;) Y viceversa, si la implementaci√≥n no coincide, entonces no importa cu√°n ventajosa se vea, generalmente no tiene perspectiva desde el punto de vista de la teor√≠a. Es por eso que no importa en qu√© fervor propagues la tecnolog√≠a SWITCH, no importa cu√°n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elogiado sea el UniMod</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero si no cumplen con los requisitos de la teor√≠a de aut√≥matas, distorsionando su belleza, entonces involuntaria y objetivamente encontramos la situaci√≥n de que "el aut√≥mata no es diferente para muchos". Y tales "caos" y "bailar con una pandereta" no pueden rectificar esta situaci√≥n. Pero, si sigues la teor√≠a, esto no es necesario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Disparando flechas cr√≠ticas en la direcci√≥n de las ametralladoras, yo, como el "p√©simo sobre el ba√±o", no pude evitar recordar las corutinas;)</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me gustar√≠a probarlos tambi√©n, pero al mismo tiempo evaluar su belleza</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque ¬øEs realmente la belleza de los "dise√±os" como los que se muestran en la fig. 9 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver tambi√©n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), ¬øqu√© implemento, si no me equivoco, dos operadores paralelos (?) A = ab y b = a + b, pueden causar al menos ataques de admiraci√≥n m√≠nimos? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_1/lj/2t/_1lj2tagueuf7u2itoqbltdrvnu.jpeg" alt="imagen"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.9. Un ejemplo de corutina.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Quiz√°s este c√≥digo sea incluso efectivo, pero para alguien es indudablemente hermoso, pero es otra cosa. No estoy aqu√≠ sobre el deseo man√≠aco de describir el paralelismo con patrones de pensamiento consistente. Aunque esto, si es sencillo, molesto, porque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el pensamiento necesita ser cambiado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Soy completamente diferente ¬øExiste una teor√≠a de la rutina independiente del lenguaje de programaci√≥n que nos permita superar simple y claramente los "garabatos" del lenguaje (ver una vez m√°s la Fig. 9) y dar una respuesta inequ√≠voca a la pregunta formulada? Con respecto a la rutina, no conozco esa teor√≠a, aunque, para ser sincero, la busqu√©;) Para aut√≥matas finitos, esta es una teor√≠a de aut√≥matas en la que un aut√≥mata siempre es un aut√≥mata en cualquier forma (gr√°fico, tabla, matriz, etc.) sin conexi√≥n con lenguaje / lenguajes de programaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tirando de la "cadena de prueba" aparentemente m√°s simple, tocamos una mara√±a de ... problemas paralelos. Tal vez es cierto que simplemente lo suavizaron un poco. Y comenzaron, si alguien no lo ha olvidado, con una funci√≥n primaria dependiente de la CPU. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQui√©n hubiera pensado en lo que resultar√≠a en ... :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Literatura</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Miroshnik IV </font><font style="vertical-align: inherit;">Teor√≠a del control autom√°tico. </font><font style="vertical-align: inherit;">Sistemas lineales. </font><font style="vertical-align: inherit;">- San Petersburgo: Peter, 2005 .-- 336 p.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es506588/index.html">¬øQu√© es un algoritmo! (parte 2)</a></li>
<li><a href="../es506590/index.html">Conferencia DEVOXX Reino Unido. Elija un marco: Docker Swarm, Kubernetes o Mesos. Parte 2</a></li>
<li><a href="../es506594/index.html">Mejores pr√°cticas de Redis, parte 3</a></li>
<li><a href="../es506598/index.html">Microsoft: Rust es la 'mejor oportunidad' en la industria de programaci√≥n de sistemas seguros</a></li>
<li><a href="../es506600/index.html">El contrato para el desarrollo del sitio en t√©rminos de gesti√≥n de proyectos (teor√≠a + muestra)</a></li>
<li><a href="../es506606/index.html">Creaci√≥n de clicker PIXI.js</a></li>
<li><a href="../es506610/index.html">WAL-G: Copias de seguridad y recuperaci√≥n de bases de datos PostgreSQL</a></li>
<li><a href="../es506612/index.html">C√≥mo aumentar la integridad de los cursos masivos en l√≠nea</a></li>
<li><a href="../es506620/index.html">Pensamiento creativo: qu√© es, c√≥mo medir y aumentar su potencial</a></li>
<li><a href="../es506624/index.html">FOSS News No. 20 - revisi√≥n de noticias gratuitas y de c√≥digo abierto del 8 al 14 de junio de 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>