<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ö™Ô∏è üë∑üèº üë®üèª‚Äçüè´ API du compilateur Typescript: prenez le contr√¥le du compilateur üíáüèª ü•É üé∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le d√©veloppement d'applications typographiques a toujours une phase de construction de projet. Habituellement, les syst√®mes de construction et l'autom...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>API du compilateur Typescript: prenez le contr√¥le du compilateur</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/508484/"><img src="https://habrastorage.org/webt/ho/to/cr/hotocr4gcgj_he5xhhf6asthb6g.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le d√©veloppement d'applications typographiques a toujours une phase de construction de projet. Habituellement, les syst√®mes de construction et l'automatisation des flux de travail sont utilis√©s pour cela, tels que webpack ou gulp, accroch√©s avec suffisamment de plugins, ou le processus de construction est r√©parti dans les commandes et scripts shell package.json √† l'aide de tsc natif ou des commandes CLI utilis√©es dans le cadre du projet. Toutes ces solutions ont leurs avantages et leurs inconv√©nients. Souvent pendant le processus d'assemblage, quelque chose de non standard doit √™tre fait, et il s'av√®re que le syst√®me d'assemblage utilis√© ne fournit pas les fonctionnalit√©s n√©cessaires de la bo√Æte, et les plug-ins existants ne savent pas exactement ce qui est n√©cessaire. √Ä de tels moments, le travail sur le projet se l√®ve, et la s√©lection effr√©n√©e dans les configurations commence et la recherche d'un plug-in appropri√©. √Ä un moment donn√©, vous vous rendez compte que dans le temps pass√© √† chercher une b√©quille appropri√©e,Vous pourriez √©crire votre d√©cision.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans de nombreux cas, les processus critiques d'un projet peuvent √™tre automatis√©s avec des scripts javascript, dont l'expressivit√© et la fonctionnalit√© permettent de d√©crire le flux de travail souhait√© et de choisir parmi une grande vari√©t√© de biblioth√®ques sans se soucier de la pr√©sence de plug-ins pour eux pour un syst√®me de construction sp√©cifique. Un avantage important de cette approche est un contr√¥le total sur les processus et une flexibilit√© maximale. Pour les projets qui utilisent Typescript comme langage de d√©veloppement principal, la question se pose de savoir comment int√©grer le processus de compilation dans votre flux de travail. L'API du compilateur Typescript vient √† la rescousse ici. Dans cet article, nous verrons comment il peut √™tre utilis√© pour compiler un projet impl√©ment√© sur Typescript, interagir avec le compilateur √† diff√©rentes √©tapes de son travail et √©crire un script pour le rechargement √† chaud du serveur REST,d√©velopp√© par Nest.js.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai un projet sur un n≈ìud sur lequel je travaille pendant mon temps libre. Initialement, il √©tait destin√© √† une petite entreprise qui n'a jamais d√©coll√©, mais maintenant je l'utilise comme terrain d'entra√Ænement pour mes exp√©riences. Le projet, qui a √©t√© initialement construit sur Nuxt.js en collaboration avec Fastify, a subi de nombreuses transformations. Ici et la transition vers le script dactylographi√© et la conversion en un mono-r√©f√©rentiel, et le remplacement de Fastify par Nest.js. √âtant donn√© que le projet n'√©tait pas cens√© avoir une charge petite et s√©rieuse, tout cela devait tourner sur le m√™me serveur, j'ai donc utilis√© une seule instance Express pour le serveur REST et le frontal via Nuxt.js. Pour cela, Express, qui s'ex√©cute sous le capot de Nest.js, obtient la fonction de rendu de Nuxt.js.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette solution fonctionne bien en production, mais comme je travaillais sur un projet seul, il √©tait pratique d'√©crire des fonctions API et de faire une interface en parall√®le. Pour cela, le red√©marrage de Nest.js lors de la modification de fichiers ne doit pas conduire √† un red√©marrage de Nuxt.js fonctionnant en mode HMR, sinon il recommencerait le processus de construction, ce qui n'aurait aucun sens. Mais ici un probl√®me est survenu, le fait est que bien qu'il existe un mode de surveillance dans CLI Nest.js qui puisse effectuer un rechargement √† chaud, il le charge dans un processus distinct qui red√©marre lorsque le projet est recompil√©. Pour cette raison, chaque red√©marrage du serveur dans ce mode entra√Ænera une perte de contexte pour Nuxt, puis son assemblage complet commencera.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s tout cela est devenu clair, j'ai d√©cid√© de faire mon propre rechargement √† chaud dans le projet. Au d√©part, j'ai essay√© d'impl√©menter la solution √† l'aide de webpack, comme sugg√©r√© dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation Nest.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais il s'est av√©r√© que le plug-in start-server-webpack-plugin qui y est utilis√© pour impl√©menter le red√©marrage utilisait la m√™me strat√©gie que la CLI, c'est-√†-dire ex√©cut√© dans un processus distinct et red√©marr√© si n√©cessaire. J'ai r√©√©crit ce plugin pour qu'il fonctionne selon mes besoins, mais en utilisant Webpack, la solution s'est av√©r√©e plut√¥t difficile et non sans probl√®mes qui sont apparus ici et l√†, ce qui rend difficile de se concentrer sur le d√©veloppement du projet. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, j'ai d√©cid√© que je devais changer d'approche, je voulais utiliser directement les m√©canismes d√©finis dans le compilateur tsc, qui fonctionnait toujours comme une horloge rapidement et de mani√®re stable. J'ai fini par trouver</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un bon article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui montre des exemples d'utilisation de l'API du compilateur TypeScript. </font><font style="vertical-align: inherit;">Il s'est av√©r√© que les outils int√©gr√©s √† la biblioth√®que Typescript me permettent d'impl√©menter les fonctions dont j'ai besoin et sont assez pratiques √† utiliser. </font><font style="vertical-align: inherit;">Malheureusement, je suis tomb√© sur qu'il y a tr√®s peu d'informations sur l'API du compilateur Typescript, j'ai donc d√©cid√© de partager ce que j'ai r√©ussi √† d√©couvrir. </font><font style="vertical-align: inherit;">Je note √©galement que cette API au moment de la r√©daction est en cours de d√©veloppement et que certains points peuvent changer avec le temps.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compilation simple</font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour comprendre les principes de l'API du compilateur TypeScript, pour commencer, essayons simplement de compiler le projet avec. Le projet sur lequel j'exp√©rimenterai a une structure standard pour nest.js: les sources sont situ√©es dans le dossier src, le point d'entr√©e est le fichier ./src/main.ts. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que le compilateur r√©ussisse √† compiler le projet, il doit lui passer des param√®tres de compilation. Le moyen le plus simple est de l'analyser directement dans le script. Cr√©ez le fichier tsconfig.js:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> {ModuleResolutionKind, ModuleKind, ScriptTarget} = <span class="hljs-built_in">require</span>(<span class="hljs-string">"typescript"</span>)<font></font>
<font></font>
<span class="hljs-built_in">module</span>.exports =  {
    <span class="hljs-attr">moduleResolution</span>: ModuleResolutionKind.NodeJs,
    <span class="hljs-attr">module</span>: ModuleKind.CommonJS,
    <span class="hljs-attr">target</span>: ScriptTarget.ES2019,
    <span class="hljs-attr">declaration</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">removeComments</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">emitDecoratorMetadata</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">experimentalDecorators</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">outDir</span>: <span class="hljs-string">"./dist"</span>,
    <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">"./"</span>,
    <span class="hljs-attr">allowJs</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">skipLibCheck</span>: <span class="hljs-literal">true</span>,<font></font>
  }<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que certains param√®tres, tels que moduleResolution, module, target, sont d√©finis par le biais d'√©num√©rations, de sorte qu'il ne fonctionnera pas directement pour r√©cup√©rer les param√®tres de tsconfig.json, o√π ils sont √©crits sous forme de cha√Ænes, donc je ne vais pas l'utiliser pour impl√©menter l'exemple le plus simple. Comment r√©cup√©rer correctement les param√®tres de tsconfig.json, nous comprendrons un peu plus tard. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant les options de compilation et vous pouvez passer √† l'√©tape suivante. Pour ce faire, cr√©ez un fichier ts-compiler.js avec le contenu suivant:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ts = <span class="hljs-built_in">require</span>(<span class="hljs-string">'typescript'</span>);<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> compilerOptions = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./tsconfig'</span>);
  <span class="hljs-keyword">const</span> program = ts.createProgram([<span class="hljs-string">'./src/main.ts'</span>], compilerOptions);
  <span class="hljs-keyword">const</span> emitResult = program.emit();<font></font>
}<font></font>
<font></font>
compile();<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous ex√©cutez maintenant ce script pour ex√©cution, les fichiers de programme compil√©s devraient appara√Ætre dans le r√©pertoire ./dist. La compilation se d√©roule en deux √©tapes: tout d'abord, la commande createProgram analyse les fichiers source et cr√©e une liste de fichiers √† compiler, apr√®s quoi nous compilons et enregistrons les fichiers compil√©s √† l'aide de la fonction emit. Assez simple. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour am√©liorer la convivialit√©, nous devons maintenant impl√©menter le chargement des options de compilation √† partir du fichier tsconfig.json. Ajoutez la fonction suivante au script:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs">
<span class="hljs-keyword">const</span> formatHost = {
  <span class="hljs-attr">getCanonicalFileName</span>: <span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> path,
  <span class="hljs-attr">getCurrentDirectory</span>: ts.sys.getCurrentDirectory,
  <span class="hljs-attr">getNewLine</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ts.sys.newLine,<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTSConfig</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> configPath = ts.findConfigFile(<span class="hljs-string">'./'</span>, ts.sys.fileExists, <span class="hljs-string">'tsconfig.json'</span>);
  <span class="hljs-keyword">const</span> readConfigFileResult = ts.readConfigFile(configPath, ts.sys.readFile);
  <span class="hljs-keyword">if</span> (readConfigFileResult.error) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(ts.formatDiagnostic(readConfigFileResult.error, formatHost));<font></font>
  }<font></font>
  <span class="hljs-keyword">const</span> jsonConfig = readConfigFileResult.config;
  <span class="hljs-keyword">const</span> convertResult = ts.convertCompilerOptionsFromJson(jsonConfig.compilerOptions, <span class="hljs-string">'./'</span>);
  <span class="hljs-keyword">if</span> (convertResult.errors &amp;&amp; convertResult.errors.length &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(ts.formatDiagnostics(convertResult.errors, formatHost));<font></font>
  }<font></font>
  <span class="hljs-keyword">const</span> compilerOptions = convertResult.options;
  <span class="hljs-keyword">return</span> compilerOptions;<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour travailler avec des fichiers de configuration, l'API fournit un certain nombre de fonctions qui vous permettent de rechercher, de charger et de convertir la configuration sous la forme que le compilateur comprend. Ici, la fonction findConfigFile est utilis√©e pour d√©terminer le chemin d'acc√®s au fichier de configuration, puis il est charg√© en tant que json √† l'aide de readConfigFile, puis, s'il n'y a aucune erreur, nous obtenons des param√®tres de compilation √† l'aide de convertCompilerOptionsFromJson.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quelque chose s'est mal pass√© lors du chargement de la configuration, notre fonction l√®ve des exceptions en utilisant les m√©canismes de transfert des messages d'erreur int√©gr√©s dans l'API. La biblioth√®que renvoie tous les messages d'erreur et avertissements en tant qu'objets de la classe Diagnostic. Afin de former un message sur leur base pour une sortie vers la console, vous pouvez utiliser les fonctions de formatage de biblioth√®que standard, dans ce cas formatDiagnostic pour un message et formatDiagnostics pour un tableau. Pour que les fonctions de formatage fonctionnent correctement, un objet formatHost est requis, qui contient des param√®tres importants pour le formatage du message. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, pour obtenir les options du compilateur, nous pouvons appeler la fonction getTSConfig dans notre script.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> compilerOptions = getTSConfig();<font></font>
‚Ä¶<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce stade, si le compilateur trouve des erreurs dans le code, nous ne le saurons pas, corrigeons-le. Toutes les erreurs dans le code qui ont √©t√© d√©tect√©es lors de la compilation, la fonction emit retourne dans le champ diagnostics de l'objet EmitResult. Pour afficher magnifiquement les erreurs dans le code, vous pouvez utiliser la fonction formatDiagnosticsWithColorAndContext. Il est √©galement judicieux de v√©rifier les erreurs d√©tect√©es pendant la phase de cr√©ation du programme. Pour ce faire, utilisez la fonction getPreEmitDiagnostics. Nous compl√©tons notre script comme suit:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> compilerOptions = getTSConfig();
  <span class="hljs-keyword">const</span> program = ts.createProgram([<span class="hljs-string">'./src/main.ts'</span>], compilerOptions);
  <span class="hljs-built_in">console</span>.log(<font></font>
    ts.formatDiagnosticsWithColorAndContext(<font></font>
      ts.getPreEmitDiagnostics(program),<font></font>
      formatHost,<font></font>
    ),<font></font>
  );<font></font>
  <span class="hljs-keyword">const</span> emitResult = program.emit();
  <span class="hljs-built_in">console</span>.log(<font></font>
    ts.formatDiagnosticsWithColorAndContext(emitResult.diagnostics, formatHost),<font></font>
  );<font></font>
  <span class="hljs-keyword">return</span> emitResult.diagnostics.length === <span class="hljs-number">0</span>;<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous faisons maintenant une erreur dans nos sources, nous obtenons un message magnifiquement format√© dans la console: </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/gi/9_/ck/gi9_ck4zm0cjrg1mx8tzxbunkek.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, nous avons un script qui compilera nos sources et affichera les erreurs dans la console si elles se produisent. Comme vous pouvez le voir, cette approche permet de mettre en ≈ìuvre le processus de compilation de mani√®re tr√®s flexible, car nous avons acc√®s √† toutes les √©tapes et r√©sultats de la compilation. Une flexibilit√© suppl√©mentaire peut √™tre obtenue en personnalisant CompilerHost, qui contient un ensemble de fonctions n√©cessaires au compilateur. Supposons que nous voulions afficher dans la console les chemins d'acc√®s aux fichiers que le compilateur lit dans le processus. Ceci est facile √† faire en passant le CompilerHost personnalis√© √† la fonction createProgram. Voyons comment cela fonctionne dans la pratique.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne veux pas obstruer la sortie avec un footcloth de centaines de lignes de chemins de fichiers, donc j'√©crirai une fonction qui sortira les chemins sur une seule ligne:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayFilename</span>(<span class="hljs-params">originalFunc, operationName</span>) </span>{
  <span class="hljs-keyword">let</span> displayEnabled = <span class="hljs-literal">false</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayFunction</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> fileName = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (displayEnabled) {<font></font>
      process.stdout.clearLine();<font></font>
      process.stdout.cursorTo(<span class="hljs-number">0</span>);<font></font>
      process.stdout.write(<span class="hljs-string">`<span class="hljs-subst">${operationName}</span>: <span class="hljs-subst">${fileName}</span>`</span>);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> originalFunc(...arguments);<font></font>
  }<font></font>
  displayFunction.originalFunc = originalFunc;<font></font>
  displayFunction.enableDisplay = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (process.stdout.isTTY) {<font></font>
      displayEnabled = <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
  };<font></font>
  displayFunction.disableDisplay = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (displayEnabled) {<font></font>
      displayEnabled = <span class="hljs-literal">false</span>;<font></font>
      process.stdout.clearLine();<font></font>
      process.stdout.cursorTo(<span class="hljs-number">0</span>);<font></font>
    }<font></font>
  };<font></font>
  <span class="hljs-keyword">return</span> displayFunction;<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutons maintenant le code de fonction compile ().</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> compilerOptions = getTSConfig();
  <span class="hljs-keyword">const</span> compilerHost = ts.createCompilerHost(compilerOptions);<font></font>
  compilerHost.readFile = displayFilename(compilerHost.readFile, <span class="hljs-string">'Reading'</span>);<font></font>
  compilerHost.readFile.enableDisplay();<font></font>
  <span class="hljs-keyword">const</span> program = ts.createProgram(<font></font>
    [<span class="hljs-string">'./src/main.ts'</span>],<font></font>
    compilerOptions,<font></font>
    compilerHost,<font></font>
  );<font></font>
  compilerHost.readFile.disableDisplay();<font></font>
<font></font>
  <span class="hljs-built_in">console</span>.log(<font></font>
    ts.formatDiagnosticsWithColorAndContext(<font></font>
      ts.getPreEmitDiagnostics(program),<font></font>
      formatHost,<font></font>
    ),<font></font>
  );<font></font>
<font></font>
  compilerHost.writeFile = displayFilename(compilerHost.writeFile, <span class="hljs-string">'Emitting'</span>);<font></font>
  compilerHost.writeFile.enableDisplay()<font></font>
  <span class="hljs-keyword">const</span> emitResult = program.emit();<font></font>
  compilerHost.writeFile.disableDisplay();<font></font>
  <span class="hljs-built_in">console</span>.log(<font></font>
    ts.formatDiagnosticsWithColorAndContext(emitResult.diagnostics, formatHost),<font></font>
  );<font></font>
  <span class="hljs-keyword">return</span> emitResult.diagnostics.length === <span class="hljs-number">0</span>;<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, maintenant nous cr√©ons l'h√¥te en utilisant la fonction createCompilerHost et rempla√ßons par notre impl√©mentation les fonctions readFile et writeFile. </font><font style="vertical-align: inherit;">La fonction compile () renvoie √©galement true si aucune erreur n'est trouv√©e apr√®s la fin de l'op√©ration. </font><font style="vertical-align: inherit;">Maintenant, si la compilation s'est bien d√©roul√©e, vous pouvez imm√©diatement d√©marrer le serveur compil√©. </font><font style="vertical-align: inherit;">Voyons ce qui s'est pass√©: </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/is/tj/rv/istjrvmrrq-htnitutw8_p_ux64.gif">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voici le code complet du script r√©sultant:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ts-compiler.js</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ts = <span class="hljs-built_in">require</span>(<span class="hljs-string">'typescript'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> formatHost = {
  <span class="hljs-attr">getCanonicalFileName</span>: <span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> path,
  <span class="hljs-attr">getCurrentDirectory</span>: ts.sys.getCurrentDirectory,
  <span class="hljs-attr">getNewLine</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ts.sys.newLine,<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTSConfig</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> configPath = ts.findConfigFile(
    <span class="hljs-string">'./'</span>,<font></font>
    ts.sys.fileExists,<font></font>
    <span class="hljs-string">'tsconfig.json'</span>,<font></font>
  );<font></font>
  <span class="hljs-keyword">const</span> readConfigFileResult = ts.readConfigFile(configPath, ts.sys.readFile);
  <span class="hljs-keyword">if</span> (readConfigFileResult.error) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<font></font>
      ts.formatDiagnostic(readConfigFileResult.error, formatHost),<font></font>
    );<font></font>
  }<font></font>
  <span class="hljs-keyword">const</span> jsonConfig = readConfigFileResult.config;
  <span class="hljs-keyword">const</span> convertResult = ts.convertCompilerOptionsFromJson(<font></font>
    jsonConfig.compilerOptions,<font></font>
    <span class="hljs-string">'./'</span>,<font></font>
  );<font></font>
  <span class="hljs-keyword">if</span> (convertResult.errors &amp;&amp; convertResult.errors.length &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(ts.formatDiagnostics(convertResult.errors, formatHost));<font></font>
  }<font></font>
  <span class="hljs-keyword">const</span> compilerOptions = convertResult.options;
  <span class="hljs-keyword">return</span> compilerOptions;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayFilename</span>(<span class="hljs-params">originalFunc, operationName</span>) </span>{
  <span class="hljs-keyword">let</span> displayEnabled = <span class="hljs-literal">false</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayFunction</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> fileName = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (displayEnabled) {<font></font>
      process.stdout.clearLine();<font></font>
      process.stdout.cursorTo(<span class="hljs-number">0</span>);<font></font>
      process.stdout.write(<span class="hljs-string">`<span class="hljs-subst">${operationName}</span>: <span class="hljs-subst">${fileName}</span>`</span>);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> originalFunc(...arguments);<font></font>
  }<font></font>
  displayFunction.originalFunc = originalFunc;<font></font>
  displayFunction.enableDisplay = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (process.stdout.isTTY) {<font></font>
      displayEnabled = <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
  };<font></font>
  displayFunction.disableDisplay = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (displayEnabled) {<font></font>
      displayEnabled = <span class="hljs-literal">false</span>;<font></font>
      process.stdout.clearLine();<font></font>
      process.stdout.cursorTo(<span class="hljs-number">0</span>);<font></font>
    }<font></font>
  };<font></font>
  <span class="hljs-keyword">return</span> displayFunction;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> compilerOptions = getTSConfig();
  <span class="hljs-keyword">const</span> compilerHost = ts.createCompilerHost(compilerOptions);<font></font>
  compilerHost.readFile = displayFilename(compilerHost.readFile, <span class="hljs-string">'Reading'</span>);<font></font>
  compilerHost.readFile.enableDisplay();<font></font>
  <span class="hljs-keyword">const</span> program = ts.createProgram(<font></font>
    [<span class="hljs-string">'./src/main.ts'</span>],<font></font>
    compilerOptions,<font></font>
    compilerHost,<font></font>
  );<font></font>
  compilerHost.readFile.disableDisplay();<font></font>
<font></font>
  <span class="hljs-built_in">console</span>.log(<font></font>
    ts.formatDiagnosticsWithColorAndContext(<font></font>
      ts.getPreEmitDiagnostics(program),<font></font>
      formatHost,<font></font>
    ),<font></font>
  );<font></font>
<font></font>
  compilerHost.writeFile = displayFilename(compilerHost.writeFile, <span class="hljs-string">'Emitting'</span>);<font></font>
  compilerHost.writeFile.enableDisplay()<font></font>
  <span class="hljs-keyword">const</span> emitResult = program.emit();<font></font>
  compilerHost.writeFile.disableDisplay();<font></font>
  <span class="hljs-built_in">console</span>.log(<font></font>
    ts.formatDiagnosticsWithColorAndContext(emitResult.diagnostics, formatHost),<font></font>
  );<font></font>
  <span class="hljs-keyword">return</span> emitResult.diagnostics.length === <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
compile() &amp;&amp; <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dist/main'</span>);
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
</div>
                    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observateur de programme incr√©mental bricolage</font></font></h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la section pr√©c√©dente, nous avons examin√© comment l'API du compilateur TypeScript peut √™tre utilis√©e pour personnaliser le processus de compilation Typescript. Il est maintenant temps de faire quelque chose de plus urgent et utile, ce qui peut vraiment augmenter la vitesse et la facilit√© de d√©veloppement. Lors de la compilation du programme, le compilateur doit r√©soudre toutes les d√©pendances du programme.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, il lit et analyse s√©quentiellement les fichiers de projet et les fichiers de biblioth√®que. M√™me pour compiler un projet relativement petit comme le mien au stade de la pr√©paration, le compilateur doit lire, analyser et analyser plus de 2000 fichiers. Cela entra√Æne un ralentissement important du processus de compilation, par exemple, sur mon ordinateur portable, la compilation prend environ 20 secondes. Dans le m√™me temps, pendant le d√©veloppement, g√©n√©ralement seulement quelques fichiers changent entre les lancements du compilateur, il est donc logique qu'√† partir de la version 2.7, Typescript ait la possibilit√© d'une compilation incr√©mentielle qui, avec le mode de surveillance, qui vous permet de surveiller les modifications des fichiers sur le disque, a consid√©rablement augment√© la vitesse de recompilation. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces fonctions sont √©galement utilis√©es par CLI Nest.js, et vous pouvez commencer √† travailler dans ce mode √† l'aide de la commande</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="bash hljs">nest start --watch</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre opportunit√© pour profiter de ce mode de d√©veloppement est d'ex√©cuter tsc avec le commutateur --watch. Mais, comme je l'ai d√©j√† √©crit dans l'introduction, si les capacit√©s des commandes standard cessent √† un moment donn√© d'√™tre suffisantes, il est temps de regarder sous le capot de Typescript et de d√©couvrir comment cela fonctionne l√†-bas. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, comme dans le cas pr√©c√©dent, cr√©ez ts-wather.js avec le contenu suivant:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ts = <span class="hljs-built_in">require</span>(<span class="hljs-string">'typescript'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> formatHost = {
  <span class="hljs-attr">getCanonicalFileName</span>: <span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> path,
  <span class="hljs-attr">getCurrentDirectory</span>: ts.sys.getCurrentDirectory,
  <span class="hljs-attr">getNewLine</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ts.sys.newLine,<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchMain</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> configPath = ts.findConfigFile(
    <span class="hljs-string">'./'</span>,<font></font>
    ts.sys.fileExists,<font></font>
    <span class="hljs-string">'tsconfig.json'</span>,<font></font>
  );<font></font>
<font></font>
  <span class="hljs-keyword">const</span> host = ts.createWatchCompilerHost(<font></font>
    configPath,<font></font>
    {},<font></font>
    ts.sys,<font></font>
    ts.createEmitAndSemanticDiagnosticsBuilderProgram,<font></font>
    diagnostic =&gt;<font></font>
      <span class="hljs-built_in">console</span>.log(<font></font>
        ts.formatDiagnosticsWithColorAndContext([diagnostic], formatHost),<font></font>
      ),<font></font>
    diagnostic =&gt;<font></font>
      <span class="hljs-built_in">console</span>.log(
        <span class="hljs-string">'Watch status: '</span>,<font></font>
        ts.formatDiagnosticsWithColorAndContext([diagnostic], formatHost),<font></font>
      ),<font></font>
  );<font></font>
  ts.createWatchProgram(host);<font></font>
}<font></font>
watchMain();<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutez le script et voyez comment cela fonctionne: </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/fo/jb/qp/fojbqpahmqhjvjcscrwh_vj4etu.gif">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s le d√©marrage, le compilateur surveille et recompile les fichiers modifi√©s, donne des messages d'erreur magnifiquement con√ßus, en g√©n√©ral, il fonctionne de mani√®re tr√®s similaire √† tsc avec l'option --watch. Remarquez √† quelle vitesse la recompilation est! Mais quel est le b√©n√©fice pour nous de cela, demandez-vous, si notre script fait la m√™me chose que tsc ou nest start --watch, n'est-il pas plus facile d'utiliser un outil pr√™t √† l'emploi? Et notre profit est que nous pouvons maintenant faire diff√©rentes choses √† l'aide de crochets, ce qui facilitera grandement notre vie. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de nous permettre d'accrocher diff√©rentes choses dans l'h√¥te, √©crivons un petit assistant:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">on</span>(<span class="hljs-params">host, functionName, before, after</span>) </span>{
  <span class="hljs-keyword">const</span> originalFunction = host[functionName];<font></font>
  host[functionName] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
    before &amp;&amp; before(...arguments);<font></font>
    <span class="hljs-keyword">const</span> result = originalFunction &amp;&amp; originalFunction(...arguments);<font></font>
    after &amp;&amp; after(result);<font></font>
    <span class="hljs-keyword">return</span> result;<font></font>
  };<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il nous permettra d'effectuer les actions n√©cessaires avant et apr√®s la fonction appel√©e dans l'h√¥te, tout en recevant les arguments qui lui sont pass√©s et le r√©sultat de l'ex√©cution. </font><font style="vertical-align: inherit;">Maintenant, cette aide peut √™tre utilis√©e pour interf√©rer facilement avec le compilateur √† diff√©rentes √©tapes. </font><font style="vertical-align: inherit;">Par exemple, ajoutons des messages √† la console en pr√©paration de la compilation:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs">‚Ä¶<font></font>
    on(<font></font>
    host,<font></font>
    <span class="hljs-string">'createProgram'</span>,<font></font>
    () =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"** We're about to create the program! **"</span>);<font></font>
    },<font></font>
    () =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** Program created **'</span>);<font></font>
    },<font></font>
  );<font></font>
‚Ä¶<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant ce qui a chang√©: </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/bf/ap/-p/bfap-pqwd8buh9utntddvkwm9p8.gif">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ßa marche! </font><font style="vertical-align: inherit;">Et maintenant, ajoutons une ligne avec l'affichage des fichiers lisibles. </font><font style="vertical-align: inherit;">Pour ce faire, nous utilisons la fonction displayFilename de l'exemple pr√©c√©dent:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs">  host.readFile = displayFilename(host.readFile, <span class="hljs-string">'Reading'</span>);<font></font>
<font></font>
  on(<font></font>
    host,<font></font>
    <span class="hljs-string">'createProgram'</span>,<font></font>
    () =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"** We're about to create the program! **"</span>);<font></font>
      host.readFile.enableDisplay();<font></font>
    },<font></font>
    () =&gt; {<font></font>
      host.readFile.disableDisplay();<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** Program created **'</span>);<font></font>
    },<font></font>
  );<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Courez et voyez ce qui s'est pass√©: </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/1b/rj/wc/1brjwcm13btajai1evwcsubuiu8.gif">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien! </font><font style="vertical-align: inherit;">Faisons maintenant ce dont il s'agissait: red√©marrer le programme compil√©. </font><font style="vertical-align: inherit;">Pour ce faire, vous devez cr√©er un hook qui se d√©clenchera apr√®s l'√©criture des fichiers compil√©s sur le disque.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> currentProgram;<font></font>
  on(<font></font>
    host,<font></font>
    <span class="hljs-string">'afterProgramCreate'</span>,<font></font>
    (program) =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** We finished making the program! Emitting... **'</span>);<font></font>
      currentProgram = program;<font></font>
    },<font></font>
    () =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** Emit complete! **'</span>);
      <span class="hljs-keyword">const</span> onAppClosed = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (app) {<font></font>
          setTimeout(onAppClosed, <span class="hljs-number">100</span>);<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          clearCache();<font></font>
          <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dist/bootstrap'</span>)<font></font>
            .bootstrap()<font></font>
            .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<font></font>
              app = res;<font></font>
            });<font></font>
        }<font></font>
      };<font></font>
      <span class="hljs-keyword">if</span> (currentProgram &amp;&amp; currentProgram.getSemanticDiagnostics().length === <span class="hljs-number">0</span>) {<font></font>
        onAppClosed();<font></font>
      }<font></font>
    },<font></font>
  );<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons ce qui se passe ici. Tout d'abord, nous avons besoin de la variable app, dans laquelle nous √©crivons le r√©sultat de la fonction bootstrap, afin de fermer correctement le serveur apr√®s avoir chang√© le code et d√©marr√© la recompilation. Il contiendra un gestionnaire pour appeler la commande d'arr√™t du serveur. Deuxi√®mement, le serveur ne d√©marre que si aucune erreur n'a √©t√© trouv√©e dans le code pendant le processus de compilation. Pour ce faire, nous v√©rifions avec getSemanticDiagnostics que le nombre de diagnostics est nul. Et troisi√®mement - puisque le syst√®me modulaire met en cache les modules charg√©s, apr√®s avoir apport√© des modifications au code, nous devons nettoyer le cache des d√©pendances. Pour ce faire, j'ai √©crit une petite fonction d'aide clearCache, que nous appelions pr√©c√©demment.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearCache</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> cacheKeys = <span class="hljs-built_in">Object</span>.keys(<span class="hljs-built_in">require</span>.cache);
  <span class="hljs-keyword">const</span> paths = [<font></font>
    join(__dirname, <span class="hljs-string">'dist'</span>),<font></font>
    dirname(<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'typeorm'</span>)),<font></font>
    dirname(<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'@nestjs/typeorm'</span>)),<font></font>
  ];<font></font>
  cacheKeys<font></font>
    .filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> paths.filter(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> item.startsWith(p)).length &gt; <span class="hljs-number">0</span>)<font></font>
    .forEach(<span class="hljs-function">(<span class="hljs-params">item, index, arr</span>) =&gt;</span> {
      <span class="hljs-keyword">delete</span> <span class="hljs-built_in">require</span>.cache[item];<font></font>
      );<font></font>
    });<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, le cache est vid√© des d√©pendances qui peuvent nous emp√™cher de red√©marrer correctement le serveur. </font><font style="vertical-align: inherit;">Dans notre cas, nous devons supprimer tous les modules de notre projet du r√©pertoire dist du cache. </font><font style="vertical-align: inherit;">Je supprime √©galement les modules de typeorm, car les fonctionnalit√©s de leur impl√©mentation emp√™chent le serveur de red√©marrer (pourquoi cela se produit est une autre histoire). </font><font style="vertical-align: inherit;">En utilisant le d√©lai d'attente, nous attendons que le serveur soit ferm√© et que la variable d'application soit effac√©e. </font><font style="vertical-align: inherit;">Nous fermerons le serveur au moment o√π le compilateur d√©tecte les modifications de fichiers et commence √† cr√©er un programme avec les fichiers modifi√©s. </font><font style="vertical-align: inherit;">Pour ce faire, nous ajoutons un crochet √† la fonction createProgram.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs">‚Ä¶
  <span class="hljs-keyword">let</span> app;<font></font>
  on(<font></font>
    host,<font></font>
    <span class="hljs-string">'createProgram'</span>,<font></font>
    () =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"** We're about to create the program! **"</span>);<font></font>
      app &amp;&amp; app.close().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (app = <span class="hljs-literal">undefined</span>));<font></font>
      host.readFile.enableDisplay();<font></font>
    },<font></font>
    () =&gt; {<font></font>
      host.readFile.disableDisplay();<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** Program created **'</span>);<font></font>
    },<font></font>
  );<font></font>
‚Ä¶<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, la fonction d'arr√™t du serveur est asynchrone, c'est pourquoi nous devons cl√¥turer le jardin avec un timeout. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La touche finale est la substitution de process.exit ().</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="javascript hljs">process.exit = <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'!!!!!!!!!!!!!!!!!!!!!!! WARNING!!!!!!!!!!!!!!!!!!!!!!!!!'</span>);
  <span class="hljs-built_in">console</span>.trace(<span class="hljs-string">`Process try to exit with code <span class="hljs-subst">${code}</span>.`</span>);<font></font>
};<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, vous ne devriez pas faire cela, mais Nest.js a la mauvaise habitude de l'appeler si quelque chose s'est mal pass√© pendant le processus de d√©marrage, nous rempla√ßons donc simplement la fonction de sortie par un message d'erreur. </font><font style="vertical-align: inherit;">Dans ce cas, notre script continuera de fonctionner apr√®s avoir appel√© process.exit (). </font><font style="vertical-align: inherit;">Cela doit √™tre fait avant d'appeler la fonction watchMain. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, ex√©cutez maintenant notre script et voyez ce qui s'est pass√©: </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/ox/bq/ws/oxbqwsea1k9ytcqmczaqfs6ass8.gif">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ici, je fais une erreur dans le code du serveur, apr√®s que le serveur ne d√©marre pas et que des messages d'erreur s'affichent, une fois l'erreur corrig√©e, le serveur red√©marre avec succ√®s. </font><font style="vertical-align: inherit;">Voici le script r√©sultant:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ts-compiler.js</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ts = <span class="hljs-built_in">require</span>(<span class="hljs-string">'typescript'</span>);
<span class="hljs-keyword">const</span> { join, dirname } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> { exit } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'process'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> formatHost = {
  <span class="hljs-attr">getCanonicalFileName</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> path,
  <span class="hljs-attr">getCurrentDirectory</span>: ts.sys.getCurrentDirectory,
  <span class="hljs-attr">getNewLine</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ts.sys.newLine,<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">on</span>(<span class="hljs-params">host, functionName, before, after</span>) </span>{
  <span class="hljs-keyword">const</span> originalFunction = host[functionName];<font></font>
  host[functionName] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<font></font>
    before &amp;&amp; before(...arguments);<font></font>
    <span class="hljs-keyword">const</span> result = originalFunction &amp;&amp; originalFunction(...arguments);<font></font>
    after &amp;&amp; after(result);<font></font>
    <span class="hljs-keyword">return</span> result;<font></font>
  };<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearCache</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> cacheKeys = <span class="hljs-built_in">Object</span>.keys(<span class="hljs-built_in">require</span>.cache);
  <span class="hljs-keyword">const</span> paths = [<font></font>
    join(__dirname, <span class="hljs-string">'dist'</span>),<font></font>
    dirname(<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'typeorm'</span>)),<font></font>
    dirname(<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'@nestjs/typeorm'</span>)),<font></font>
  ];<font></font>
  cacheKeys<font></font>
    .filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> paths.filter(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> item.startsWith(p)).length &gt; <span class="hljs-number">0</span>)<font></font>
    .forEach(<span class="hljs-function">(<span class="hljs-params">item, index, arr</span>) =&gt;</span> {
      <span class="hljs-keyword">delete</span> <span class="hljs-built_in">require</span>.cache[item];<font></font>
      process.stdout.clearLine(); <span class="hljs-comment">// clear current text</span>
      process.stdout.cursorTo(<span class="hljs-number">0</span>); <span class="hljs-comment">// move cursor to beginning of line</span><font></font>
      process.stdout.write(<font></font>
        <span class="hljs-string">`Clearing cache <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor((index * <span class="hljs-number">100</span>) / arr.length + <span class="hljs-number">1</span>)}</span>%`</span>,<font></font>
      );<font></font>
    });<font></font>
  process.stdout.write(<span class="hljs-string">' finished.\n'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayFilename</span>(<span class="hljs-params">originalFunc, operationName</span>) </span>{
  <span class="hljs-keyword">let</span> displayEnabled = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayFunction</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> fileName = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (displayEnabled) {<font></font>
      process.stdout.clearLine();<font></font>
      process.stdout.cursorTo(<span class="hljs-number">0</span>);<font></font>
      process.stdout.write(<span class="hljs-string">`<span class="hljs-subst">${operationName}</span>: <span class="hljs-subst">${fileName}</span>`</span>);<font></font>
    }<font></font>
    counter++;<font></font>
    <span class="hljs-keyword">return</span> originalFunc(...arguments);<font></font>
  }<font></font>
  displayFunction.originalFunc = originalFunc;<font></font>
  displayFunction.enableDisplay = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
    counter = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (process.stdout.isTTY) {<font></font>
      displayEnabled = <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
  };<font></font>
  displayFunction.disableDisplay = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (displayEnabled) {<font></font>
      displayEnabled = <span class="hljs-literal">false</span>;<font></font>
      process.stdout.clearLine();<font></font>
      process.stdout.cursorTo(<span class="hljs-number">0</span>);<font></font>
    }<font></font>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${counter}</span> times function was called`</span>);<font></font>
  };<font></font>
  <span class="hljs-keyword">return</span> displayFunction;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">watchMain</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> configPath = ts.findConfigFile(
    <span class="hljs-string">'./'</span>,<font></font>
    ts.sys.fileExists,<font></font>
    <span class="hljs-string">'tsconfig.json'</span>,<font></font>
  );<font></font>
<font></font>
  <span class="hljs-keyword">const</span> host = ts.createWatchCompilerHost(<font></font>
    configPath,<font></font>
    {},<font></font>
    ts.sys,<font></font>
    ts.createEmitAndSemanticDiagnosticsBuilderProgram,<font></font>
    (diagnostic) =&gt;<font></font>
      <span class="hljs-built_in">console</span>.log(<font></font>
        ts.formatDiagnosticsWithColorAndContext([diagnostic], formatHost),<font></font>
      ),<font></font>
    (diagnostic) =&gt;<font></font>
      <span class="hljs-built_in">console</span>.log(
        <span class="hljs-string">'Watch status: '</span>,<font></font>
        ts.formatDiagnosticsWithColorAndContext([diagnostic], formatHost),<font></font>
      ),<font></font>
  );<font></font>
<font></font>
  host.readFile = displayFilename(host.readFile, <span class="hljs-string">'Reading'</span>);
  <span class="hljs-keyword">let</span> app;<font></font>
  on(<font></font>
    host,<font></font>
    <span class="hljs-string">'createProgram'</span>,<font></font>
    () =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"** We're about to create the program! **"</span>);<font></font>
      app &amp;&amp; app.close().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (app = <span class="hljs-literal">undefined</span>));<font></font>
      host.readFile.enableDisplay();<font></font>
    },<font></font>
    () =&gt; {<font></font>
      host.readFile.disableDisplay();<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** Program created **'</span>);<font></font>
    },<font></font>
  );<font></font>
  <span class="hljs-keyword">let</span> currentProgram;<font></font>
  on(<font></font>
    host,<font></font>
    <span class="hljs-string">'afterProgramCreate'</span>,<font></font>
    (program) =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** We finished making the program! Emitting... **'</span>);<font></font>
      currentProgram = program;<font></font>
    },<font></font>
    () =&gt; {<font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'** Emit complete! **'</span>);
      <span class="hljs-keyword">const</span> onAppClosed = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (app) {<font></font>
          setTimeout(onAppClosed, <span class="hljs-number">100</span>);<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          clearCache();<font></font>
          <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dist/bootstrap'</span>)<font></font>
            .bootstrap()<font></font>
            .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<font></font>
              app = res;<font></font>
            });<font></font>
        }<font></font>
      };<font></font>
      <span class="hljs-keyword">if</span> (currentProgram &amp;&amp; currentProgram.getSemanticDiagnostics().length === <span class="hljs-number">0</span>) {<font></font>
        onAppClosed();<font></font>
      }<font></font>
    },<font></font>
  );<font></font>
<font></font>
  ts.createWatchProgram(host);<font></font>
}<font></font>
process.exit = <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'!!!!!!!!!!!!!!!!!!!!!!! WARNING!!!!!!!!!!!!!!!!!!!!!!!!!'</span>);
  <span class="hljs-built_in">console</span>.trace(<span class="hljs-string">`Process try to exit with code <span class="hljs-subst">${code}</span>.`</span>);<font></font>
};<font></font>
watchMain();<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
</div>
                    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conclusions</font></font></h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce didacticiel, nous avons examin√© comment vous pouvez utiliser les capacit√©s de l'API du compilateur Typescript afin d'organiser de mani√®re flexible le processus de d√©bogage et de compilation de code. </font><font style="vertical-align: inherit;">Comme vous pouvez le voir, les d√©veloppeurs de Typescript nous fournissent une API puissante et facile √† utiliser pour qu'il ne soit pas n√©cessaire d'utiliser des biblioth√®ques tierces √† ces fins et en m√™me temps augmenter consid√©rablement la commodit√© et la vitesse de d√©veloppement. </font><font style="vertical-align: inherit;">J'esp√®re que les informations fournies ici vous seront utiles, merci d'avoir lu jusqu'√† la fin!</font></font></div>
      
    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr508460/index.html">DINS QA EVENING (en ligne): pourquoi le testeur devrait-il construire des CI / CD et comment garantir la qualit√© sur un grand projet</a></li>
<li><a href="../fr508462/index.html">Cadre de r√©solution de probl√®mes en trois √©tapes</a></li>
<li><a href="../fr508464/index.html">Que faire si des donn√©es personnelles sont collect√©es aupr√®s de vous sur le portail national et que vous souhaitez autoriser la distribution de messages publicitaires?</a></li>
<li><a href="../fr508468/index.html">CP / M: L'ascension et la chute de Gary Kildall</a></li>
<li><a href="../fr508478/index.html">Simulateurs pour la formation du personnel. Avantages et inconv√©nients</a></li>
<li><a href="../fr508490/index.html">Hackathon en ligne Digital Breakout 2020: comment c'√©tait</a></li>
<li><a href="../hi486176/index.html">‡§ï‡•â‡§∞‡•ç‡§™‡•ã‡§∞‡•á‡§ü ‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡•ç‡§∞‡§æ‡§ö‡§æ‡§∞ ‡§Æ‡•á‡§Æ‡•ã</a></li>
<li><a href="../hi486178/index.html">FOSS News No. 1 - 27 ‡§ú‡§®‡§µ‡§∞‡•Ä - 2 ‡§´‡§∞‡§µ‡§∞‡•Ä, 2020 ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§î‡§∞ ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ</a></li>
<li><a href="../hi486180/index.html">‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∞‡§π‡§ø‡§§ ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§î‡§∞ ‡§∏‡•ç‡§∞‡•ã‡§§</a></li>
<li><a href="../hi486184/index.html">‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä ‡§¢‡§Ç‡§ó ‡§∏‡•á ‡§ñ‡•ã‡§ú ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>