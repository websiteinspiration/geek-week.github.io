<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵🏾 🧛🏿 🥇 Überwachen des gesamten von einer Webseite verwendeten Speichers: performance.measureMemory () 📊 🎎 👩🏾‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Autor des Artikels, dessen Übersetzung wir heute veröffentlichen, spricht darüber, wie der den Webseiten zugewiesene Speicher überwacht werden kan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Überwachen des gesamten von einer Webseite verwendeten Speichers: performance.measureMemory ()</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/497986/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Autor des Artikels, dessen Übersetzung wir heute veröffentlichen, spricht darüber, wie der den Webseiten zugewiesene Speicher überwacht werden kann. </font><font style="vertical-align: inherit;">Die sorgfältige Berücksichtigung des Gedächtnisses von Seiten, die in der Produktion arbeiten, trägt dazu bei, die Produktivität von Webprojekten auf einem hohen Niveau zu halten.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/uj/ux/6i/ujux6ittjoa4u5aoapnuhggx4ca.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Browser steuern automatisch den Speicher, der Webseiten zugewiesen ist. Wenn eine Seite ein Objekt erstellt, weist der Browser mithilfe seiner internen Mechanismen Speicher zum Speichern dieses Objekts zu. Da der Speicher keine unendliche Ressource ist, führt der Browser regelmäßig eine Speicherbereinigung durch, bei der unnötige Objekte erkannt und der von ihnen belegte Speicher gelöscht wird. Der Prozess der Erkennung solcher Objekte ist jedoch nicht ideal. Es wurde </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bewiesen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dass eine absolut genaue und vollständige Identifizierung solcher Objekte eine unlösbare Aufgabe ist. Infolgedessen ersetzen Browser die Idee, „unnötige Objekte“ zu finden, durch die Idee, „nicht erreichbare Objekte“ zu finden. Wenn eine Webseite nicht über ihre Variablen und Felder anderer Objekte, auf die sie zugreifen kann, auf das Objekt zugreifen kann, bedeutet dies, dass der Browser den von einem solchen Objekt belegten Speicher sicher löschen kann. Der Unterschied zwischen "unnötig" und "nicht erreichbar" führt zu Speicherverlusten, wie im folgenden Beispiel dargestellt:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> object = { <span class="hljs-attr">a</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">1000</span>), <span class="hljs-attr">b</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">2000</span>) };<font></font>
setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(object.a), <span class="hljs-number">1000</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier gibt es ein großes unnötiges Array </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber der Browser gibt den von ihm belegten Speicher nicht frei, da er über die Objekteigenschaft </font></font><code>object.b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Rückruf erreichbar ist. Infolgedessen ist der von diesem Array belegte Speicher undicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speicherlecks treten </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">häufig</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der Webentwicklung auf. Sie werden sehr leicht in Programmen angezeigt, wenn Entwickler beispielsweise vergessen, sich vom Ereignis-Listener abzumelden, wenn sie versehentlich Objekte in einem Element erfassen </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wenn sie vergessen, den Worker zu schließen, wenn sie Objekte in Arrays sammeln. Wenn eine Webseite Speicherlecks aufweist, führt dies dazu, dass der Speicherverbrauch der Seite mit der Zeit zunimmt. Eine solche Seite scheint für Benutzer langsam und langsam zu sein.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der erste Schritt zur Lösung dieses Problems besteht darin, Messungen durchzuführen. </font><font style="vertical-align: inherit;">Mit der neuen API " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance.measureMemory ()"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> können Entwickler die Speichernutzung von Webseiten in der Produktion messen und als Ergebnis Speicherlecks erkennen, die durch lokale Tests verrutschen.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie unterscheidet sich die neue Performance.measureMemory () - API von der alten Performance.memory?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie mit der vorhandenen nicht standardmäßigen API vertraut sind </font></font><code>performance.memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, könnte Sie die Frage interessieren, wie sich die neue API von der alten unterscheidet. Der Hauptunterschied besteht darin, dass die alte API die Größe des JavaScript-Heaps zurückgibt und die neue die Speichernutzung der gesamten Webseite bewertet. Diese Unterscheidung ist wichtig, wenn Chrome die Heap-Freigabe zwischen mehreren Webseiten (oder mehreren Instanzen derselben Seite) organisiert. In solchen Fällen können die von der alten API zurückgegebenen Ergebnisse verzerrt sein. Da die alte API in implementierungsspezifischen Begriffen wie einem Heap definiert ist, ist die Standardisierung ein hoffnungsloses Geschäft.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer Unterschied besteht darin, dass die neue API in Chrome Speichermessungen beim Sammeln von Müll durchführt. </font><font style="vertical-align: inherit;">Dies reduziert das „Rauschen“ in den Messergebnissen, kann jedoch einige Zeit dauern, bis die Ergebnisse vorliegen. </font><font style="vertical-align: inherit;">Bitte beachten Sie, dass Entwickler anderer Browser möglicherweise entscheiden, die neue API zu implementieren, ohne an die Garbage Collection gebunden zu sein.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Empfohlene Möglichkeiten zur Verwendung der neuen API</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung des Speichers durch Webseiten hängt vom Auftreten von Ereignissen, von Benutzeraktionen und von der Speicherbereinigung ab. </font><font style="vertical-align: inherit;">Aus diesem Grund wurde die API </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entwickelt, um den Grad der Speichernutzung in der Produktion zu untersuchen. </font><font style="vertical-align: inherit;">Die Ergebnisse des Aufrufs dieser API in einer Testumgebung sind weniger nützlich. </font><font style="vertical-align: inherit;">Hier sind Beispiele für Optionen zur Verwendung:</font></font><br>
<br>
<ul>
<li>          -     .</li>
<li>A/B-  ,            .</li>
<li>            .</li>
<li>    ,  .           .</li>
</ul><br>
<h2><font color="#3AC1EF"> </font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit wird die betreffende API gemäß dem Origin-Testschema nur in Chrome 83 unterstützt. </font><font style="vertical-align: inherit;">Die von der API zurückgegebenen Ergebnisse hängen stark von der Implementierung ab, da verschiedene Browser unterschiedliche Arten der Darstellung von Objekten im Speicher und unterschiedliche Methoden zur Bewertung des Speicherbedarfs verwenden. </font><font style="vertical-align: inherit;">Browser können einige Speicherbereiche von der Abrechnung ausschließen, wenn die vollständige Abrechnung des gesamten verwendeten Speichers eine unangemessen schwierige oder unmögliche Aufgabe ist. </font><font style="vertical-align: inherit;">Infolgedessen können wir sagen, dass die von dieser API in verschiedenen Browsern erzeugten Ergebnisse nicht vergleichbar sind. </font><font style="vertical-align: inherit;">Es ist sinnvoll, nur die Ergebnisse zu vergleichen, die im selben Browser erzielt wurden.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktueller Arbeitsfortschritt</font></font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bedingung</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. API-Erklärungen erstellen</font></font><br>
</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abgeschlossen</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Erstellen eines Spezifikationsentwurfs</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durchgeführt</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Feedback einholen und das Projekt abschließen</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durchgeführt</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Origin-Testversuche</font></font><br>
</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durchgeführt</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Starten Sie</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nicht angefangen</font></font></td>
</tr>
</tbody></table></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden von performance.measureMemory ()</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Aktivieren Sie die Origin-Testunterstützung</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die API </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist in Chrome 83 gemäß dem Origin-Testschema verfügbar. </font><font style="vertical-align: inherit;">Diese Phase wird voraussichtlich mit der Veröffentlichung von Chrome 84 enden. Mit </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Origin Trial können Entwickler die neuen Funktionen von Chrome nutzen und der Web-Community Feedback zu Komfort, Benutzerfreundlichkeit und Effektivität dieser Funktionen geben. </font><font style="vertical-align: inherit;">Details zu diesem Programm finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie können das Programm auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Registrierungsseite </font><font style="vertical-align: inherit;">abonnieren </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Registrierung im Origin-Testprogramm</font></font></font></h3><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fordern Sie einen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Token für die Gelegenheit an, an der Sie interessiert sind.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fügen Sie das Token zu den Seiten des Pilotprojekts hinzu. </font><font style="vertical-align: inherit;">Es gibt zwei Möglichkeiten, dies zu tun:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fügen Sie </font><font style="vertical-align: inherit;">dem Titel jeder Seite </font><font style="vertical-align: inherit;">ein </font></font><code>&lt;meta&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tag hinzu </font></font><code>origin-trial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Zum Beispiel könnte es so aussehen : </font></font><code>&lt;meta http-equiv="origin-trial" content="TOKEN_GOES_HERE"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie Zugriff auf die Servereinstellungen haben, kann ein Token mithilfe eines HTTP-Headers hinzugefügt werden </font></font><code>Origin-Trial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Infolgedessen sollte der Antwortheader wie folgt aussehen : </font></font><code>Origin-Trial: TOKEN_GOES_HERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul></li>
</ol><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Eine neue Funktion über Chrome-Flags aktivieren</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit dem Origin Trial-Token </font><font style="vertical-align: inherit;">zu experimentieren </font><font style="vertical-align: inherit;">, müssen Sie das Flag </font></font><code>#experimental-web-platform-features</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font><font style="vertical-align: inherit;">aktivieren </font></font><code>chrome://flags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Überprüfen der API-Verwendung</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Funktionsaufruf </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann fehlschlagen, wenn ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecurityError ausgelöst wird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies kann passieren, wenn die Umgebung die Sicherheitsanforderungen für Informationslecks nicht erfüllt. </font><font style="vertical-align: inherit;">Während des Origin-Testversuchs in Chrome erfordert diese API die Einbeziehung der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Site-Isolation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wenn die API für den normalen Gebrauch bereit ist, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stützt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sie sich auf die Eigenschaft </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">crossOriginIsolated</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Eine Webseite kann in diesem Modus betrieben werden, indem die Header </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COOP und COEP gesetzt werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist ein Beispielcode:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (performance.measureMemory) {
&nbsp;&nbsp;<span class="hljs-keyword">let</span> result;
&nbsp;&nbsp;<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;result = <span class="hljs-keyword">await</span> performance.measureMemory();<font></font>
&nbsp;&nbsp;} <span class="hljs-keyword">catch</span> (error) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> DOMException &amp;&amp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.name === <span class="hljs-string">"SecurityError"</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The context is not secure."</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="hljs-keyword">else</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span> error;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(result);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Lokale Tests</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chrome führt beim Sammeln von Müll eine Speichermessung durch. </font><font style="vertical-align: inherit;">Dies bedeutet, dass der Zugriff auf die API das Versprechen nicht sofort auflöst. </font><font style="vertical-align: inherit;">Um das Ergebnis zu erhalten, müssen Sie auf die nächste Speicherbereinigungssitzung warten. </font><font style="vertical-align: inherit;">Die API startet die Speicherbereinigung zwangsweise nach einem bestimmten Zeitlimit, das derzeit auf 20 Sekunden festgelegt ist. </font><font style="vertical-align: inherit;">Wenn Sie Chrome mit einem Befehlszeilenflag ausführen </font></font><code>--enable-blink-features='ForceEagerMeasureMemory'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wird das Zeitlimit auf Null reduziert. Dies ist nützlich für lokales Debugging und lokale Tests.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird empfohlen, die neue API zu verwenden, indem Sie einen globalen Speichermonitor definieren, der den Speicherbedarf der gesamten Seite misst und die Ergebnisse an den Server sendet, wo sie aggregiert und analysiert werden können. Der einfachste Weg, mit dieser API zu arbeiten, besteht darin, regelmäßige Messungen durchzuführen. Zum Beispiel können sie jede </font></font><code>M</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minute </font><font style="vertical-align: inherit;">laufen </font><font style="vertical-align: inherit;">. Dies führt jedoch zu Verzerrungen in den Daten, da zwischen den Messungen Spitzen in der Speichernutzung auftreten können. Das folgende Beispiel zeigt, wie mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dem Poisson-Verfahren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Messungen frei von systematischen Fehlern durchgeführt werden können. Dieser Ansatz stellt sicher, dass Messsitzungen mit gleicher Wahrscheinlichkeit zu jedem Zeitpunkt stattfinden können ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier ist eine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Demonstration dieses Ansatzes,</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist der Quellcode). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deklarieren Sie zunächst eine Funktion, die den nächsten Start einer Sitzung plant, um die Menge des verbrauchten Speichers mithilfe einer Funktion </font></font><code>setTimeout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit einem zufällig festgelegten Intervall </font><font style="vertical-align: inherit;">zu messen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Diese Funktion sollte nach dem Laden der Seite im Browserfenster aufgerufen werden.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scheduleMeasurement</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">if</span> (!performance.measureMemory) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"performance.measureMemory() is not available."</span>);
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> interval = measurementInterval();
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Scheduling memory measurement in "</span> +
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Math</span>.round(interval / <span class="hljs-number">1000</span>) + <span class="hljs-string">" seconds."</span>);<font></font>
&nbsp;&nbsp;setTimeout(performMeasurement, interval);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//       .</span>
<span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<font></font>
&nbsp;&nbsp;scheduleMeasurement();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Funktion </font></font><code>measurementInterval()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findet ein zufälliges Intervall, ausgedrückt in Millisekunden, das so eingestellt ist, dass ungefähr alle fünf Minuten eine Messung durchgeführt wird. </font><font style="vertical-align: inherit;">Wenn Sie an den mathematischen Konzepten interessiert sind, auf denen diese Funktion basiert, lesen Sie die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exponentialverteilung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">measurementInterval</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> MEAN_INTERVAL_IN_MS = <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
&nbsp;&nbsp;<span class="hljs-keyword">return</span> -<span class="hljs-built_in">Math</span>.log(<span class="hljs-built_in">Math</span>.random()) * MEAN_INTERVAL_IN_MS;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen </font></font><code>performMeasurement()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ruft </font><font style="vertical-align: inherit;">die asynchrone Funktion </font><font style="vertical-align: inherit;">unsere API auf, zeichnet das Ergebnis auf und plant die nächste Messung.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">performMeasurement</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-comment">// 1.  performance.measureMemory().</span>
&nbsp;&nbsp;<span class="hljs-keyword">let</span> result;
&nbsp;&nbsp;<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;result = <span class="hljs-keyword">await</span> performance.measureMemory();<font></font>
&nbsp;&nbsp;} <span class="hljs-keyword">catch</span> (error) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> DOMException &amp;&amp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.name === <span class="hljs-string">"SecurityError"</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The context is not secure."</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//    .</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span> error;<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-comment">// 2.  .</span>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Memory usage:"</span>, result);
&nbsp;&nbsp;<span class="hljs-comment">// 3.   .</span><font></font>
&nbsp;&nbsp;scheduleMeasurement();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Messergebnisse können folgendermaßen aussehen:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// ,    :</span><font></font>
{<font></font>
&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">60</span>_000_000,
&nbsp;&nbsp;<span class="hljs-attr">breakdown</span>: [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">40</span>_000_000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">attribution</span>: [<span class="hljs-string">"https://foo.com"</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">userAgentSpecificTypes</span>: [<span class="hljs-string">"Window"</span>, <span class="hljs-string">"JS"</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;},<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">20</span>_000_000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">attribution</span>: [<span class="hljs-string">"https://foo.com/iframe"</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">userAgentSpecificTypes</span>: [<span class="hljs-string">"Window"</span>, <span class="hljs-string">"JS"</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;]<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Schätzung der Gesamtspeicherauslastung wird im Feld angezeigt </font></font><code>bytes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Bei der Ableitung dieser Schätzung werden die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trennzeichen der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ziffern von Zahlen verwendet. Diese Werte sind stark implementierungsabhängig. Wenn sie für verschiedene Browser empfangen werden, können Sie sie nicht vergleichen. Die Art und Weise, wie sie erhalten werden, kann auch in verschiedenen Versionen desselben Browsers variieren. Während das Origin-Testprogramm gültig ist, enthalten die Rückgabewerte Indikatoren für die Speichernutzung von JavaScript im Hauptfenster, Indikatoren für die Speichernutzung von Elementen </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">derselben Site und Indikatoren für verwandte Fenster. Wenn die API bereit ist, repräsentiert dieser Wert Informationen über den von JavaScript, dem DOM, allen </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit Windows und Web Workern verknüpften </font><font style="vertical-align: inherit;">Speicher belegten Speicher </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liste</font></font><code>breakdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gibt detailliertere Informationen über den verwendeten Speicher. </font><font style="vertical-align: inherit;">Jeder Eintrag beschreibt ein Stück Speicher und ordnet dieses Fragment einer Reihe von Fenstern, Elementen </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder Arbeitern zu, die durch eine URL identifiziert werden. </font><font style="vertical-align: inherit;">Das Feld </font></font><code>userAgentSpecificTypes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">listet die Speichertypen auf, die durch die Implementierungsfunktionen bestimmt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist wichtig, diese Listen allgemein zu betrachten und nicht unter Verwendung der Funktionen eines bestimmten Browsers zu versuchen, alles zu analysieren, was auf ihnen basiert. </font><font style="vertical-align: inherit;">Beispielsweise geben einige Browser möglicherweise leere Listen </font></font><code>breakdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder leere Felder zurück </font></font><code>attribution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Andere Browser geben möglicherweise </font></font><code>attribution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mehrere URLs </font><font style="vertical-align: inherit;">in einem Element zurück </font><font style="vertical-align: inherit;">, was darauf hinweist, dass sie nicht genau bestimmen können, zu welcher dieser URLs der Speicher gehört.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rückkopplung</font></font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Web Performance Community Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und das Chrome-Entwicklungsteam </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erfahren </font><font style="vertical-align: inherit;">gerne, woran Sie denken, </font><font style="vertical-align: inherit;">und erfahren mehr über Ihre Erfahrungen mit dieser API.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teilen Sie uns Ihre Ideen zum API-Gerät mit</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gibt es etwas in dieser API, das nicht wie erwartet funktioniert? </font><font style="vertical-align: inherit;">Vielleicht fehlt etwas, das Sie brauchen, um Ihre Idee umzusetzen? </font><font style="vertical-align: inherit;">Öffnen Sie eine neue Aufgabe im </font><font style="vertical-align: inherit;">Projekt- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tracker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder kommentieren Sie eine vorhandene Aufgabe.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Implementierungsproblem melden</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Haben Sie einen Fehler in Ihrer Chrome-Implementierung gefunden? </font><font style="vertical-align: inherit;">Oder hat sich herausgestellt, dass sich die Implementierung von der Spezifikation unterscheidet? </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notieren Sie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> den Fehler hier: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">new.crbug.com</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Versuchen Sie, so viele Details wie möglich in Ihre Nachricht aufzunehmen, geben Sie einfache Anweisungen zum Reproduzieren des Fehlers und geben Sie an, dass das Problem damit zusammenhängt </font></font><code>Blink&gt;PerformanceAPIs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glitch ist ein</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sehr guter Weg, um Fehler zu demonstrieren </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unterstütze uns</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Planen </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie </font><font style="vertical-align: inherit;">zu verwenden </font><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Wenn ja, erzählen Sie uns davon. </font><font style="vertical-align: inherit;">Diese Geschichten helfen dem Chrome-Entwicklungsteam, Prioritäten zu setzen. </font><font style="vertical-align: inherit;">Diese Geschichten zeigen den Entwicklern anderer Browser, wie wichtig es ist, neue Funktionen zu unterstützen. </font><font style="vertical-align: inherit;">Wenn Sie möchten, senden Sie einen Tweet an </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ChromiumDev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und teilen Sie uns mit, wo und wie Sie die neue API verwenden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebe Leser! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hast du es versucht </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497964/index.html">Telemedizin. Reverse Engineering Elektronisches Stethoskop</a></li>
<li><a href="../de497968/index.html">Ressourcen für Webentwickler: APIs und UI-Elemente</a></li>
<li><a href="../de497980/index.html">Wie viel Wasser ist ausgetreten? Wir lösen das Problem durch einen Mondspaziergang auf Haskell</a></li>
<li><a href="../de497982/index.html">Funktions- und Prozessansatz für das Management. Wie und was ist zu verwalten?</a></li>
<li><a href="../de497984/index.html">Migration von reCAPTCHA zu hCaptcha in Cloudflare</a></li>
<li><a href="../de497988/index.html">React Application Performance Profiling</a></li>
<li><a href="../de497990/index.html">PostgreSQL: Entwicklung von Erweiterungen (Funktionen) in C-Sprache</a></li>
<li><a href="../de497994/index.html">Sprachmechanik entgeht der Analyse</a></li>
<li><a href="../de497996/index.html">Sie wollen die Immunität nicht stärken. Oder die Extreme des menschlichen Körpers</a></li>
<li><a href="../de498000/index.html">Dinge, die ich gerne wissen würde, bevor ich mein eigenes Spiel entwickle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>