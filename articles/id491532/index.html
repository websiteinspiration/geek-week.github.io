<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍💻 🆒 🐒 Laravel + Docker + Gitlab. Di mana untuk memulai ☸️ 🐓 👩🏼‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya biasanya selalu melakukannya tanpa buruh pelabuhan dan berpikir bahwa buruh pelabuhan hanya diperlukan untuk proyek-proyek besar di perusahaan be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Laravel + Docker + Gitlab. Di mana untuk memulai</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya biasanya selalu melakukannya tanpa buruh pelabuhan dan berpikir bahwa buruh pelabuhan hanya diperlukan untuk proyek-proyek besar di perusahaan besar. </font><font style="vertical-align: inherit;">Tetapi suatu hari saya melihat bagaimana buruh pelabuhan bekerja bersama dengan gitlab teman dan menyadari bahwa saya masih harus mempelajarinya. </font><font style="vertical-align: inherit;">Namun, seperti biasanya terjadi, saya tidak menemukan satu artikel yang cocok - mereka terlalu kompleks atau tidak lengkap, atau tersirat bahwa Anda semua tahu dengan sendirinya. </font><font style="vertical-align: inherit;">Saya harus mencari berbagai sumber untuk waktu yang lama, mengumpulkan semuanya dan pada akhirnya saya berhasil membuat proyek sederhana dan CI / CD untuk itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua pekerjaan dapat dibagi menjadi tiga bagian: pada mesin lokal, pada hitlab dan pada server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, untuk implementasi proyek, kita memerlukan akun gitlab dan server jarak jauh dengan virtualisasi KVM atau XEN.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 1. Mesin lokal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di mesin lokal, Anda perlu menginstal buruh pelabuhan. </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komentar</font></font></b><div class="spoiler_text">  . Docker     Linux  ( Ubuntu, ),    Windows  MacOS.   macos     ,     Windows      .   - ,        linux .   - ,           .       VirtualBox.          Ubuntu     <br>
</div></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menginstal di lingkungan Linux, Anda harus menjalankan perintah berikut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hapus wadah lama:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get remove docker docker-engine docker.io containerd runc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbarui apt:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instal paket-paket berikut ini sehingga Anda dapat mengunduh buruh pelabuhan dari repositori melalui https:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install \<font></font>
    apt-transport-https \<font></font>
    ca-certificates \<font></font>
    curl \<font></font>
    gnupg-agent \<font></font>
    software-properties-common</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan kunci buruh pelabuhan GPG resmi:</font></font><br>
<br>
<pre><code class="bash hljs">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pastikan hasil cetak sudah benar:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-key fingerprint 0EBFCD88</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menjawab:</font></font><br>
<br>
<pre><code class="bash hljs">pub   rsa4096 2017-02-22 [SCEA]<font></font>
      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88<font></font>
uid           [ unknown] Docker Release (CE deb) &lt;docker@docker.com&gt;<font></font>
sub   rsa4096 2017-02-22 [S]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unduh versi stabil:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository \
   <span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   <span class="hljs-subst">$(lsb_release -cs)</span> \
   stable"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbarui kembali apt:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instal mesin buruh pelabuhan terbaru:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install docker-ce docker-ce-cli containerd.io</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Periksa operasi buruh pelabuhan:</font></font><br>
<br>
<pre><code class="bash hljs">sudo docker run hello-world</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika semuanya benar, unduhan gambar Hello World akan dimulai. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instruksi lengkap dalam dokumentasi resmi buruh pelabuhan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita juga perlu menginstal docker-compose. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instruksi resmi ada di sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menginstalnya, jalankan perintah di terminal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unduh dari repositori:</font></font><br>
<br>
<pre><code class="bash hljs">sudo curl -L <span class="hljs-string">"https://github.com/docker/compose/releases/download/1.25.4/docker-compose-<span class="hljs-subst">$(uname -s)</span>-<span class="hljs-subst">$(uname -m)</span>"</span> -o /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menambahkan latihan yang benar:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pemeriksaan Versi:</font></font><br>
<br>
<pre><code class="bash hljs">sudo docker-compose --version</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memasang buruh pelabuhan, sekarang perlu untuk mengumpulkan gambar. </font><font style="vertical-align: inherit;">Untuk melakukan ini, saya menggunakan artikel dari situs digitalocean: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.digitalocean.com/community/tutorials/how-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to-set-up-up-laravel-nginx-and-mysql-with-docker-compose-ru </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Akan ada cetak ulang artikel ini. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengunduh Laravel dan menginstal dependensi</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pada langkah pertama, kami mengunduh Laravel versi terbaru dan menginstal dependensi proyek, termasuk Composer, manajer paket PHP tingkat aplikasi. </font><font style="vertical-align: inherit;">Kami akan menginstal dependensi ini menggunakan Docker agar tidak melakukan instalasi global Composer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buka direktori home Anda dan klon Laravel versi terbaru ke direktori bernama laravel-app:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~<font></font>
git <span class="hljs-built_in">clone</span> https://github.com/laravel/laravel.git laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pergi ke direktori aplikasi laravel:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~/laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian pasang gambar komposer dari Docker ke direktori yang Anda perlukan untuk proyek Laravel Anda untuk menghindari biaya pemasangan Composer secara global:</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -v $(<span class="hljs-built_in">pwd</span>):/app composer install</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bendera -v dan --rm dari perintah run docker membuat wadah virtual yang mengikat ke direktori saat ini sampai dihapus. </font><font style="vertical-align: inherit;">Konten direktori ~ / laravel-app Anda akan disalin ke wadah, dan konten Komposer yang dibuat di dalam wadah folder vendor akan disalin ke direktori saat ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai kesimpulan, setel tingkat izin di direktori proyek sehingga dimiliki oleh pengguna tanpa hak akses root:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chown -R <span class="hljs-variable">$USER</span>:<span class="hljs-variable">$USER</span> ~/laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini akan menjadi penting ketika Anda menulis Dockerfile untuk gambar aplikasi Anda, karena itu akan memungkinkan Anda untuk bekerja dengan kode aplikasi dan memulai proses dalam wadah tanpa hak root. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda telah menempatkan kode aplikasi dan dapat melanjutkan ke definisi layanan menggunakan Docker Compose. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membuat Docker Compose File</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
membangun aplikasi dengan Docker Compose menyederhanakan proses konfigurasi dan versi di infrastruktur Anda. Untuk menyesuaikan aplikasi Laravel kami, kami akan membuat file docker-compose dengan definisi layanan server web, database, dan aplikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buka file:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/docker-compose.yml</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tiga layanan didefinisikan dalam file pembuatan docker: app, server web dan db. </font><font style="vertical-align: inherit;">Tambahkan kode berikut ke file, sambil mengganti kata sandi root untuk MYSQL_ROOT_PASSWORD, didefinisikan sebagai variabel lingkungan layanan db, dengan kata sandi pilihan Anda:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">version: '3'<font></font>
services:<font></font>
<font></font>
  #PHP Service<font></font>
  app:<font></font>
    build:<font></font>
      context: .<font></font>
      dockerfile: Dockerfile<font></font>
    image: digitalocean.com/php<font></font>
    container_name: app<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    environment:<font></font>
      SERVICE_NAME: app<font></font>
      SERVICE_TAGS: dev<font></font>
    working_dir: /var/www<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  #Nginx Service<font></font>
  webserver:<font></font>
    image: nginx:alpine<font></font>
    container_name: webserver<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    ports:<font></font>
      - "80:80"<font></font>
      - "443:443"<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  #MySQL Service<font></font>
  db:<font></font>
    image: mysql:5.7.22<font></font>
    container_name: db<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    ports:<font></font>
      - "3306:3306"<font></font>
    environment:<font></font>
      MYSQL_DATABASE: laravel<font></font>
      MYSQL_ROOT_PASSWORD: your_mysql_root_password<font></font>
      SERVICE_TAGS: dev<font></font>
      SERVICE_NAME: mysql<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
#Docker Networks<font></font>
networks:<font></font>
  app-network:<font></font>
    driver: bridge</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan berikut termasuk di sini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app: Definisi layanan ini berisi aplikasi Laravel dan meluncurkan gambar Docker yang dipersonalisasi, digitalocean.com/php. </font><font style="vertical-align: inherit;">Ini juga menetapkan parameter working_dir di wadah ke / var / www.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server web: definisi layanan ini mengambil gambar nginx: alpine dari Docker dan membuka port 80 dan 443.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">db: definisi layanan ini mengambil gambar mysql: 5.7.22 dari Docker dan mendefinisikan variabel lingkungan baru, termasuk basis data laravel untuk aplikasi Anda dan kata sandi root untuk database. </font><font style="vertical-align: inherit;">Anda dapat menggunakan nama basis data apa pun yang Anda inginkan, Anda juga harus mengganti kata sandi my_mysql_root_password Anda. </font><font style="vertical-align: inherit;">Definisi layanan ini juga memetakan port host 3306 ke port container 3306.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap properti container_name mendefinisikan nama kontainer yang sesuai dengan nama layanan. </font><font style="vertical-align: inherit;">Jika Anda tidak mendefinisikan properti ini, Docker akan memberikan setiap nama kontainer yang terdiri dari nama orang historis dan kata acak, dipisahkan oleh garis bawah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menyederhanakan interaksi antar wadah, layanan terhubung ke jaringan penghubung yang disebut app-network. Jaringan penghubung menggunakan jembatan perangkat lunak yang memungkinkan kontainer terhubung ke jaringan ini untuk berkomunikasi satu sama lain. Driver bridge secara otomatis menetapkan aturan host sehingga kontainer pada jaringan penghubung yang berbeda tidak dapat berkomunikasi secara langsung satu sama lain. Ini meningkatkan keamanan aplikasi karena hanya layanan terkait yang dapat berkomunikasi satu sama lain. Ini juga berarti bahwa Anda dapat menentukan berbagai jaringan dan layanan yang terhubung ke fungsi terkait: misalnya, layanan aplikasi klien dapat menggunakan jaringan frontend, dan layanan server dapat menggunakan jaringan backend.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, mari kita lihat cara menambahkan volume dan mengikat gambar yang dipasang ke definisi layanan untuk menyimpan data aplikasi secara permanen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyimpanan data yang persisten</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Docker memiliki sarana yang kuat dan nyaman untuk penyimpanan data yang persisten. </font><font style="vertical-align: inherit;">Dalam aplikasi kami, kami akan menggunakan volume dan gambar yang dipasang untuk secara permanen menyimpan file database, aplikasi, dan konfigurasi. </font><font style="vertical-align: inherit;">Volume memberikan fleksibilitas cadangan dan pengawetan setelah penghentian siklus hidup wadah, dan gambar yang dapat dipasang yang dapat dipasang menyederhanakan perubahan kode selama pengembangan dengan segera mencerminkan perubahan pada file host atau direktori dalam wadah. </font><font style="vertical-align: inherit;">Kami menggunakan kedua opsi.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringatan!</font></font></b><div class="spoiler_text">             ,   ,        .      ,       Docker   .       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentukan volume bernama dbdata di file docker-compose dalam definisi layanan db untuk tetap menggunakan database MySQL:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#MySQL Service<font></font>
db:<font></font>
  ...<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql<font></font>
    networks:<font></font>
      - app-network<font></font>
  ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Volume bernama dbdata digunakan untuk menyimpan secara permanen isi folder / var / lib / mysql di dalam wadah. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk menghentikan dan memulai kembali layanan db tanpa kehilangan data. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan definisi volume dbdata di akhir file:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#Volumes<font></font>
volumes:<font></font>
  dbdata:<font></font>
    driver: local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan definisi ini, Anda dapat menggunakan volume ini untuk berbagai layanan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian tambahkan ikatan mount image ke layanan db untuk file konfigurasi MySQL:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#MySQL Service<font></font>
db:<font></font>
  ...<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql<font></font>
      - ./mysql/my.cnf:/etc/mysql/my.cnf<font></font>
  ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gambar yang dipasang ini mengikat file ~ / laravel-app / mysql / my.cnf ke direktori /etc/mysql/my.cnf dalam wadah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian tambahkan gambar yang dipasang ke layanan server web. </font><font style="vertical-align: inherit;">Akan ada dua: satu untuk kode aplikasi, dan yang lainnya untuk menentukan konfigurasi Nginx</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">#Nginx Service<font></font>
webserver:<font></font>
  ...<font></font>
  volumes:<font></font>
      - ./:/var/www<font></font>
      - ./nginx/conf.d/:/etc/nginx/conf.d/<font></font>
  networks:<font></font>
      - app-network</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gambar yang dipasang pertama mengikat kode aplikasi di direktori ~ / laravel-app ke direktori / var / www di dalam wadah. File konfigurasi, ditambahkan ke ~ / laravel-app / nginx / conf.d /, juga dipasang di /etc/nginx/conf.d/ dalam wadah, yang memungkinkan Anda untuk menambah dan mengubah isi direktori konfigurasi sesuai kebutuhan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai kesimpulan, tambahkan tunggangan gambar yang dipasang berikut ke layanan aplikasi untuk kode aplikasi dan file konfigurasi:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">#PHP Service<font></font>
app:<font></font>
  ...<font></font>
  volumes:<font></font>
       - ./:/var/www<font></font>
       - ./php/local.ini:/usr/local/etc/php/conf.d/local.ini<font></font>
  networks:<font></font>
      - app-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan aplikasi mengikat gambar yang dipasang pada folder ~ / laravel-app, yang berisi kode aplikasi, ke folder / var / www. Ini akan mempercepat proses pengembangan, karena setiap perubahan dalam direktori aplikasi lokal akan segera tercermin dalam wadah. Anda juga menautkan file konfigurasi PHP ~ / laravel-app / php / local.ini ke file /usr/local/etc/php/conf.d/local.ini dalam wadah. Nanti Anda akan membuat file konfigurasi PHP lokal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File komposisi buruh pelabuhan Anda sekarang akan terlihat seperti ini:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="bash hljs">version: <span class="hljs-string">'3'</span><font></font>
services:<font></font>
<font></font>
  <span class="hljs-comment">#PHP Service</span><font></font>
  app:<font></font>
    build:<font></font>
      context: .<font></font>
      dockerfile: Dockerfile<font></font>
    image: digitalocean.com/php<font></font>
    container_name: app<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    environment:<font></font>
      SERVICE_NAME: app<font></font>
      SERVICE_TAGS: dev<font></font>
    working_dir: /var/www<font></font>
    volumes:<font></font>
      - ./:/var/www<font></font>
      - ./php/local.ini:/usr/<span class="hljs-built_in">local</span>/etc/php/conf.d/local.ini<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  <span class="hljs-comment">#Nginx Service</span><font></font>
  webserver:<font></font>
    image: nginx:alpine<font></font>
    container_name: webserver<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    ports:<font></font>
      - <span class="hljs-string">"80:80"</span>
      - <span class="hljs-string">"443:443"</span><font></font>
    volumes:<font></font>
      - ./:/var/www<font></font>
      - ./nginx/conf.d/:/etc/nginx/conf.d/<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  <span class="hljs-comment">#MySQL Service</span><font></font>
  db:<font></font>
    image: mysql:5.7.22<font></font>
    container_name: db<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    ports:<font></font>
      - <span class="hljs-string">"3306:3306"</span><font></font>
    environment:<font></font>
      MYSQL_DATABASE: laravel<font></font>
      MYSQL_ROOT_PASSWORD: your_mysql_root_password<font></font>
      SERVICE_TAGS: dev<font></font>
      SERVICE_NAME: mysql<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql/<font></font>
      - ./mysql/my.cnf:/etc/mysql/my.cnf<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
<span class="hljs-comment">#Docker Networks</span><font></font>
networks:<font></font>
  app-network:<font></font>
    driver: bridge<font></font>
<span class="hljs-comment">#Volumes</span><font></font>
volumes:<font></font>
  dbdata:<font></font>
    driver: <span class="hljs-built_in">local</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membuat Dockerfile</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Docker memungkinkan Anda untuk menentukan lingkungan di dalam masing-masing wadah menggunakan Dockerfile. </font><font style="vertical-align: inherit;">Dockerfile memungkinkan Anda membuat gambar yang dipersonalisasi. </font><font style="vertical-align: inherit;">yang dapat digunakan untuk menginstal perangkat lunak aplikasi yang diperlukan dan mengubah pengaturan sesuai kebutuhan. </font><font style="vertical-align: inherit;">Anda dapat mentransfer gambar yang dibuat ke Docker Hub atau registri pribadi apa pun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dockerfile akan berlokasi di direktori ~ / laravel-app. </font><font style="vertical-align: inherit;">Buat file:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/Dockerfile</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dockerfile ini akan menentukan gambar dasar dan perintah serta instruksi yang diperlukan untuk membangun gambar aplikasi Laravel. </font><font style="vertical-align: inherit;">Tambahkan kode berikut ke file:</font></font><br>
<br>
<code>~/laravel-app/php/Dockerfile</code><br>
<br>
<pre><code class="xml hljs">FROM php:7.2-fpm<font></font>
<font></font>
# Copy composer.lock and composer.json<font></font>
COPY composer.lock composer.json /var/www/<font></font>
<font></font>
# Set working directory<font></font>
WORKDIR /var/www<font></font>
<font></font>
# Install dependencies<font></font>
RUN apt-get update &amp;&amp; apt-get install -y \<font></font>
    build-essential \<font></font>
    mysql-client \<font></font>
    libpng-dev \<font></font>
    libjpeg62-turbo-dev \<font></font>
    libfreetype6-dev \<font></font>
    locales \<font></font>
    zip \<font></font>
    jpegoptim optipng pngquant gifsicle \<font></font>
    vim \<font></font>
    unzip \<font></font>
    git \<font></font>
    curl<font></font>
<font></font>
# Clear cache<font></font>
RUN apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*<font></font>
<font></font>
# Install extensions<font></font>
RUN docker-php-ext-install pdo_mysql mbstring zip exif pcntl<font></font>
RUN docker-php-ext-configure gd --with-gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ --with-png-dir=/usr/include/<font></font>
RUN docker-php-ext-install gd<font></font>
<font></font>
# Install composer<font></font>
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer<font></font>
<font></font>
# Add user for laravel application<font></font>
RUN groupadd -g 1000 www<font></font>
RUN useradd -u 1000 -ms /bin/bash -g www www<font></font>
<font></font>
# Copy existing application directory contents<font></font>
COPY . /var/www<font></font>
<font></font>
# Copy existing application directory permissions<font></font>
COPY --chown=www:www . /var/www<font></font>
<font></font>
# Change current user to www<font></font>
USER www<font></font>
<font></font>
# Expose port 9000 and start php-fpm server<font></font>
EXPOSE 9000<font></font>
CMD ["php-fpm"]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, Dockerfile membuat gambar di atas php: gambar Docker 7.2-fpm. Ini adalah gambar berdasarkan instance PHP FastCGI PHP-FPM yang diinstal. File ini juga menginstal paket yang diperlukan untuk Laravel: mcrypt, pdo_mysql, mbstring dan imagick dengan komposer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arahan RUN menentukan perintah untuk memperbarui, menginstal, dan mengkonfigurasi parameter di dalam wadah, termasuk pengguna khusus dan grup bernama www. Pernyataan WORKDIR menetapkan direktori / var / www sebagai direktori kerja aplikasi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Membuat pengguna dan grup terpisah dengan hak akses terbatas mengurangi kerentanan saat meluncurkan wadah Docker, yang secara default dijalankan dengan hak akses root. Alih-alih menjalankan wadah ini dengan hak akses root, kami membuat pengguna www dengan izin baca dan tulis untuk folder / var / www menggunakan perintah COPY dengan flag --chown untuk menyalin izin folder aplikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perintah EXPOSE membuka port 9000 dalam wadah untuk server php-fpm. CMD menunjukkan perintah yang harus dijalankan setelah wadah dibuat. Di sini, CMD menunjukkan perintah php-fpm yang memulai server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika Anda selesai melakukan perubahan, simpan file dan tutup editor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda dapat beralih ke mendefinisikan konfigurasi PHP Anda. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan PHP</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda telah menentukan infrastruktur dalam file pembuatan docker, dan sekarang Anda dapat mengonfigurasi layanan PHP untuk bertindak sebagai prosesor PHP untuk permintaan Nginx yang masuk. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengkonfigurasi PHP, Anda akan membuat file local.ini di folder php. </font><font style="vertical-align: inherit;">Ini adalah file yang Anda tautkan ke file /usr/local/etc/php/conf.d/local.ini dalam wadah di atas. </font><font style="vertical-align: inherit;">Membuat file ini akan memungkinkan Anda untuk mengabaikan file php.ini default yang dibaca PHP saat startup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat direktori php:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir ~/laravel-app/php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian buka file local.ini:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/php/local.ini</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mendemonstrasikan pengaturan PHP, kami akan menambahkan kode berikut untuk menetapkan batas ukuran unggahan file:</font></font><br>
<br>
<code>~/laravel-app/php/local.ini</code><br>
<br>
<pre><code class="xml hljs">upload_max_filesize=40M<font></font>
post_max_size=40M</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arahan upload_max_filesize dan post_max_size mengatur ukuran maksimum yang diijinkan dari file yang diunggah dan menunjukkan cara mengatur konfigurasi php.ini dari file local.ini. Anda dapat menyisipkan parameter konfigurasi PHP apa pun yang ingin Anda abaikan dalam file local.ini. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengkonfigurasi Nginx</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ketika Anda mengkonfigurasi layanan PHP, Anda dapat memodifikasi layanan Nginx untuk menggunakan PHP-FPM sebagai server FastCGI untuk menyajikan konten dinamis. Server FastCGI didasarkan pada protokol biner untuk interaksi program interaktif dengan server web. Informasi tambahan dapat ditemukan di artikel "Memahami dan Menerapkan FastCGI Proxies in Nginx". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengkonfigurasi Nginx, Anda akan membuat file app.conf dengan konfigurasi layanan di folder ~ / laravel-app / nginx / conf.d /. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama buat direktori nginx / conf.d /:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p ~/laravel-app/nginx/conf.d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian buat file konfigurasi app.conf:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/nginx/conf.d/app.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan kode berikut ke file untuk mengkonfigurasi Nginx:</font></font><br>
<br>
<code>~/laravel-app/nginx/conf.d/app.conf</code><br>
<br>
<pre><code class="xml hljs">server {<font></font>
    listen 80;<font></font>
    index index.php index.html;<font></font>
    error_log  /var/log/nginx/error.log;<font></font>
    access_log /var/log/nginx/access.log;<font></font>
    root /var/www/public;<font></font>
    location ~ \.php$ {<font></font>
        try_files $uri =404;<font></font>
        fastcgi_split_path_info ^(.+\.php)(/.+)$;<font></font>
        fastcgi_pass app:9000;<font></font>
        fastcgi_index index.php;<font></font>
        include fastcgi_params;<font></font>
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;<font></font>
        fastcgi_param PATH_INFO $fastcgi_path_info;<font></font>
    }<font></font>
    location / {<font></font>
        try_files $uri $uri/ /index.php?$query_string;<font></font>
        gzip_static on;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blok server mengkonfigurasi server web Nginx menggunakan arahan berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengarkan: arahan ini mendefinisikan port yang didengarkan oleh server untuk permintaan yang masuk.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">error_log dan access_log: arahan ini menentukan file untuk logging.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">root: arahan ini menetapkan path ke folder root, membentuk path lengkap untuk setiap file yang diminta dalam sistem file lokal.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di blok lokasi php, arahan fastcgi_pass menunjukkan bahwa layanan aplikasi mendengarkan pada soket TCP pada port 9000. Dengan itu, server PHP-FPM mendengarkan pada jaringan, bukan pada soket Unix. Meskipun soket Unix memberikan keuntungan kecepatan sedikit di atas soket TCP, ia tidak memiliki protokol jaringan dan melompati tumpukan jaringan. Dalam kasus di mana host berada pada sistem yang sama, menggunakan soket Unix mungkin masuk akal, tetapi jika layanan berjalan pada host yang berbeda, soket TCP memberikan keuntungan dengan memungkinkan Anda terhubung ke layanan terdistribusi. Karena wadah aplikasi dan server web kami berjalan pada host yang berbeda, lebih efisien menggunakan soket TCP dalam konfigurasi kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika Anda selesai melakukan perubahan, simpan file dan tutup editor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berkat pengikatan yang dibuat sebelumnya, setiap perubahan dalam folder nginx / conf.d / langsung tercermin dalam wadah server web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita lihat parameter MySQL. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menyiapkan MySQL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Setelah mengatur PHP dan Nginx, Anda dapat mengaktifkan MySQL sebagai basis data untuk aplikasi Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengkonfigurasi MySQL, Anda perlu membuat file my.cnf di folder mysql. </font><font style="vertical-align: inherit;">Ini adalah file yang Anda lampirkan ke file /etc/mysql/my.cnf di dalam wadah selama langkah konfigurasi database. </font><font style="vertical-align: inherit;">Memasang gambar yang dipasang memungkinkan Anda untuk mengabaikan opsi my.cnf, jika dan ketika diperlukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mendemonstrasikan cara kerjanya, kami akan menambahkan pengaturan ke my.cnf yang mencakup log permintaan umum dan mengatur file log. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat direktori mysql:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir ~/laravel-app/mysql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat file my.cnf:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/mysql/my.cnf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan kode berikut ke file untuk mengaktifkan log kueri dan mengatur lokasi file log:</font></font><br>
<br>
<code>~/laravel-app/mysql/my.cnf</code><br>
<br>
<pre><code class="xml hljs">[mysqld]<font></font>
general_log = 1<font></font>
general_log_file = /var/lib/mysql/general.log</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File my.cnf mendukung log dengan mengatur parameter general_log ke 1, yang memungkinkan log umum. </font><font style="vertical-align: inherit;">Parameter general_log_file menentukan di mana log akan disimpan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memulai wadah dan mengubah pengaturan lingkungan</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Anda mendefinisikan semua layanan dalam file pembuatan docker dan membuat file konfigurasi untuk layanan ini. </font><font style="vertical-align: inherit;">Sekarang Anda dapat menjalankan kontainer. </font><font style="vertical-align: inherit;">Sebagai kesimpulan, kami akan membuat salinan file .env.example yang Laravel sertakan secara default dan beri nama .env, karena Laravel menggunakan file seperti itu untuk menentukan lingkungan:</font></font><br>
<br>
<pre><code class="bash hljs">cp .env.example .env</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah memulai wadah, kami akan mengonfigurasi parameter pemasangan khusus dalam file ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang semua layanan Anda didefinisikan dalam file pembuatan docker, dan Anda hanya perlu menjalankan satu perintah untuk memulai semua kontainer, membuat volume dan mengkonfigurasi dan menghubungkan jaringan:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose up -d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama kali Anda meluncurkan komposisi docker, semua gambar Docker yang diperlukan akan diunduh, yang mungkin memerlukan waktu. </font><font style="vertical-align: inherit;">Setelah mengunduh gambar dan menyimpannya di komputer lokal, Compose akan membuat wadah Anda. </font><font style="vertical-align: inherit;">Bendera -d mengubah proses menjadi daemon yang wadahnya tetap berjalan di latar belakang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah proses selesai, gunakan perintah berikut untuk mendaftar semua wadah yang berjalan:</font></font><br>
<pre><code class="bash hljs">docker ps</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda akan melihat hasil berikut dengan data pada aplikasi, server web, dan wadah db:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
CONTAINER ID        NAMES               IMAGE                             STATUS              PORTS<font></font>
c31b7b3251e0        db                  mysql:5.7.22                      Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp<font></font>
ed5a69704580        app                 digitalocean.com/php              Up 2 seconds        9000/tcp<font></font>
5ce4ee31d7c0        webserver           nginx:alpine                      Up 2 seconds        0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hasil ini, ID KONTAINER adalah pengidentifikasi unik untuk setiap wadah, dan NAMES mencantumkan nama layanan untuk setiap wadah. </font><font style="vertical-align: inherit;">Anda dapat menggunakan kedua pengidentifikasi ini untuk mengakses kontainer. </font><font style="vertical-align: inherit;">IMAGE mendefinisikan nama gambar setiap wadah, dan STATUS memberikan informasi tentang status wadah: mulai, dimulai ulang, atau dihentikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda dapat memodifikasi file .env di wadah aplikasi untuk menambahkan parameter spesifik ke sistem Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buka file dengan exec docker-compose, yang memungkinkan Anda untuk menjalankan perintah tertentu dalam wadah. </font><font style="vertical-align: inherit;">Dalam hal ini, Anda membuka file untuk diedit:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app nano .env</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temukan blok yang menentukan DB_CONNECTION dan perbarui untuk mencerminkan pengaturan sistem Anda. </font><font style="vertical-align: inherit;">Anda akan mengubah bidang-bidang berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_HOST akan menjadi wadah basis data db Anda.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_DATABASE akan menjadi basis data laravel.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_USERNAME akan menjadi nama pengguna untuk basis data Anda. </font><font style="vertical-align: inherit;">Dalam hal ini, kita akan menggunakan laraveluser.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_PASSWORD akan menjadi kata sandi yang dilindungi untuk akun pengguna ini.</font></font></li>
</ol><br>
<code>/var/www/.env</code><br>
<br>
<pre><code class="xml hljs">DB_CONNECTION=mysql<font></font>
DB_HOST=db<font></font>
DB_PORT=3306<font></font>
DB_DATABASE=laravel<font></font>
DB_USERNAME=laraveluser<font></font>
DB_PASSWORD=your_laravel_db_password</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal ini juga diperlukan untuk memperbaiki variabel yang sama dalam file .env.example, karena akan digunakan nanti ketika digunakan ke server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian konfigurasikan kunci aplikasi untuk Laravel dengan kunci artisan php: menghasilkan perintah. </font><font style="vertical-align: inherit;">Perintah ini akan menghasilkan kunci dan menyalinnya ke file .env, yang akan melindungi sesi pengguna dan data terenkripsi:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan key:generate</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda memiliki semua pengaturan lingkungan yang diperlukan untuk menjalankan aplikasi. </font><font style="vertical-align: inherit;">Untuk cache pengaturan ini dalam file yang mempercepat pemuatan aplikasi, jalankan perintah:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan config:cache</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengaturan konfigurasi akan dimuat ke file /var/www/bootstrap/cache/config.php dalam wadah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terakhir, buka situs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di browser Anda </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Halaman utama aplikasi Laravel terbuka. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membuat pengguna MySQL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Saat memasang MySQL, secara default hanya akun root administratif yang dibuat dengan hak tidak terbatas untuk mengakses server database. </font><font style="vertical-align: inherit;">Biasanya, ketika bekerja dengan database, yang terbaik adalah menghindari menggunakan akun root administratif. </font><font style="vertical-align: inherit;">Sebagai gantinya, kami akan membuat pengguna basis data khusus untuk basis data Laravel aplikasi kami. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membuat pengguna baru, mulai shell interaktif bash di wadah db menggunakan perintah exec docker-compose:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> db bash</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di dalam wadah, masuk ke akun administratif root MySQL:</font></font><br>
<br>
<pre><code class="sql hljs">mysql -u root -p</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda akan diminta untuk memasukkan kata sandi yang ditentukan untuk akun root MySQL ketika diinstal pada file docker-compose. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, periksa database laravel yang ditentukan dalam file docker-compose. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jalankan perintah show databases untuk memverifikasi database yang ada:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">show</span> <span class="hljs-keyword">databases</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hasil, Anda akan melihat database laravel:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
+--------------------+<font></font>
| Database           |<font></font>
+--------------------+<font></font>
| information_schema |<font></font>
| laravel            |<font></font>
| mysql              |<font></font>
| performance_schema |<font></font>
| sys                |<font></font>
+--------------------+<font></font>
5 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian buat akun pengguna yang akan diizinkan mengakses ke basis data ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menggunakan nama pengguna laraveluser, tetapi Anda dapat menggantinya dengan nama yang lebih disukai. </font><font style="vertical-align: inherit;">Pastikan nama pengguna dan kata sandi cocok dengan yang ada di file .env pada langkah sebelumnya:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">ON</span> laravel.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'laraveluser'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'your_laravel_db_password'</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbarui hak istimewa untuk memberi tahu server MySQL tentang perubahan:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tutup MySQL:</font></font><br>
<br>
<pre><code class="sql hljs">EXIT;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keluar dari wadah:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">exit</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda dapat melakukan migrasi untuk menguji basis data:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan migrate</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasil konfirmasi migrasi adalah sebagai berikut:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
<font></font>
Migration table created successfully.<font></font>
Migrating: 2014_10_12_000000_create_users_table<font></font>
Migrated:  2014_10_12_000000_create_users_table<font></font>
Migrating: 2014_10_12_100000_create_password_resets_table<font></font>
Migrated:  2014_10_12_100000_create_password_resets_table</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 2. Gitlab</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di Hitlab, Anda perlu membuat proyek baru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita perlu menyimpan proyek di repositori hitlab. </font><font style="vertical-align: inherit;">Untuk melakukan ini, panggil perintah berikut dari folder proyek pada mesin lokal:</font></font><br>
<br>
<pre><code class="bash hljs">git init<font></font>
git remote add origin git@gitlab.com:&lt;&gt;/&lt;&gt;  <font></font>
git remote add origin https://gitlab.com/&lt;&gt;/&lt;&gt;      SSH<font></font>
git add .<font></font>
git commit -m <span class="hljs-string">"Initial commit"</span>
git push -u origin master</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek akan muncul di Ikhtisar Proyek -&gt; Detail. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membuatnya nyaman untuk segera mendapatkan lingkungan yang selesai, kami menyimpan gambar buruh pelabuhan dari lingkungan di register hitlist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melakukan ini, Anda harus melakukan:</font></font><br>
<br>
<pre><code class="bash hljs">docker login registry.gitlab.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan lemparkan gambar ke gitlab:</font></font><br>
<br>
<pre><code class="bash hljs">docker build -t registry.gitlab.com/&lt;&gt;/&lt;&gt; .<font></font>
docker push registry.gitlab.com/&lt;&gt;/&lt;&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gambar akan ditempatkan di </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Package- </font><font style="vertical-align: inherit;">&gt; Container Registry. </font><font style="vertical-align: inherit;">Untuk menyelesaikannya dengan gitlab, kami segera mendapatkan kunci untuk gitlab-runner. </font><font style="vertical-align: inherit;">Untuk melakukan ini, pergi ke Pengaturan-&gt; CI / CD-&gt; Runner. </font><font style="vertical-align: inherit;">Kuncinya ada di langkah 3 di bagian Konfigurasi manual (Mengatur Runner spesifik secara manual).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 3. Konfigurasi server</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server VPS harus diambil dengan virtualisasi tipe KVM atau XEN. </font><font style="vertical-align: inherit;">Virtualisasi seperti OpenVZ berbagi inti sistem antara semua pengguna, sehingga tidak memiliki kemampuan untuk mengubah parameter kernel. </font><font style="vertical-align: inherit;">Untuk pengujian, saya mengambil server KVM dengan Docker terinstal. </font><font style="vertical-align: inherit;">Namun, mungkin tidak ada buruh pelabuhan di server. </font><font style="vertical-align: inherit;">Dalam hal ini, Anda harus menginstalnya secara manual. </font><font style="vertical-align: inherit;">Algoritma ini sama dengan ketika menginstal pada mesin lokal. </font><font style="vertical-align: inherit;">Juga perlu memeriksa versi php. </font><font style="vertical-align: inherit;">Untuk Laravel Anda membutuhkan setidaknya 7.2. </font><font style="vertical-align: inherit;">Saya juga harus secara terpisah menginstal ekstensi untuk php ext-mbstring (dalam kasus saya untuk php 7.3):</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update<font></font>
sudo apt-get install php7.3-mbstring<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kita perlu menginstal gitlab-runner. </font><font style="vertical-align: inherit;">Runner adalah layanan yang akan menerima webhook dari hitlab ketika menerima versi baru dan menyebarkan semuanya di server kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menginstal gitlab-runner yang perlu Anda lakukan:</font></font><br>
<br>
<pre><code class="bash hljs">curl -L --output /usr/<span class="hljs-built_in">local</span>/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah mengunduh, tetapkan izin untuk menjalankan:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/gitlab-runner
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, buat pengguna gitlab-runner dan jalankan layanan gitlab runner:</font></font><br>
<br>
<pre><code class="bash hljs">sudo useradd --comment <span class="hljs-string">'GitLab Runner'</span> --create-home gitlab-runner --shell /bin/bash<font></font>
sudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner<font></font>
sudo gitlab-runner start</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daftar pelari. </font><font style="vertical-align: inherit;">Untuk melakukan ini, kita memerlukan token dari bagian 2 artikel ini:</font></font><br>
<br>
<pre><code class="bash hljs">sudo gitlab-runner register</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai tanggapan, mereka akan menanyakan alamat hitlab Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentukan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gitlab.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )<font></font>
https://gitlab.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, Anda harus memasukkan token. </font><font style="vertical-align: inherit;">Masukkan token dari bagian 2.</font></font><br>
<br>
<pre><code class="bash hljs">Please enter the gitlab-ci token <span class="hljs-keyword">for</span> this runner<font></font>
xxx<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, tentukan deskripsi dan tag yang dipisahkan oleh koma. </font><font style="vertical-align: inherit;">Kemudian kami ditawari untuk memilih pelaksana. </font><font style="vertical-align: inherit;">Di sini Anda perlu memilih shell:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
Please enter the executor:<font></font>
shell</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang saya pahami, eksekutor adalah lingkungan di mana kode dari file .gitlab-ci.yml dieksekusi. </font><font style="vertical-align: inherit;">Ada bash, ssh, buruh pelabuhan, paralel, kotak virtual dan kubernet untuk dipilih. </font><font style="vertical-align: inherit;">Dokumentasi merekomendasikan bahwa jika Anda tidak tahu apa yang harus digunakan, gunakan bash. </font><font style="vertical-align: inherit;">Ini adalah opsi universal yang berjalan pada baris perintah di server Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maka kita perlu menambahkan pengguna gitlab-runner ke grup pengguna buruh pelabuhan.</font></font><br>
<br>
<pre><code class="bash hljs">sudo usermod -aG docker gitlab-runner</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghindari kesalahan akses, tambahkan ke sudoers</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /etc/sudoers</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
baris </font></font><br>
<br>
<pre><code class="bash hljs">gitlab-runner ALL=(ALL) NOPASSWD: ALL</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita dapat membuat file .gitlab-ci.yml. </font><font style="vertical-align: inherit;">Hal ini diperlukan untuk pelaksanaan yang disebut Pipeline: urutan perintah untuk menggunakan proyek. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melakukan ini, pergi ke repositori proyek pada daftar hit dan klik Buat file baru. </font><font style="vertical-align: inherit;">Gitlab sendiri akan menawarkan templat file, di antaranya Anda harus memilih .gitlab-ci.yml. </font><font style="vertical-align: inherit;">Setelah membuat file di gitlab, Anda dapat memilih template untuk konten file. </font><font style="vertical-align: inherit;">Saya memilih laravel dan mengubahnya sedikit untuk diri saya sendiri:</font></font><br>
<br>
<pre><code class="xml hljs"><font></font>
# This file is a template, and might need editing before it works on your project.<font></font>
# Official framework image. Look for the different tagged releases at:<font></font>
# https://hub.docker.com/r/library/php<font></font>
# .    ,        <font></font>
image: registry.gitlab.com/<span class="hljs-tag">&lt;<span class="hljs-name"></span>&gt;</span>/<span class="hljs-tag">&lt;<span class="hljs-name"></span>&gt;</span>:latest<font></font>
<font></font>
# Pick zero or more services to be used on all builds.<font></font>
# Only needed when using a docker container to run your tests in.<font></font>
# Check out: http://docs.gitlab.com/ce/ci/docker/using_docker_images.html#what-is-a-service<font></font>
services:<font></font>
  - mysql:latest<font></font>
#    <font></font>
variables:<font></font>
  MYSQL_DATABASE: laravel<font></font>
  MYSQL_ROOT_PASSWORD: ***********<font></font>
<font></font>
# This folder is cached between builds<font></font>
# ,      <font></font>
# http://docs.gitlab.com/ce/ci/yaml/README.html#cache<font></font>
cache:<font></font>
  paths:<font></font>
    - vendor/<font></font>
    - node_modules/<font></font>
<font></font>
# This is a basic example for a gem or script which doesn't use<font></font>
# services such as redis or postgres<font></font>
#     <font></font>
before_script:<font></font>
  #   <font></font>
  - sudo apt-get update -yqq<font></font>
  #    nodejs<font></font>
  - sudo apt-get install gnupg -yqq<font></font>
  #  Node   12<font></font>
  - curl -sL https://deb.nodesource.com/setup_12.x | sudo bash -<font></font>
  #  <font></font>
  - sudo apt-get install git nodejs libcurl4-gnutls-dev libicu-dev libmcrypt-dev libvpx-dev libjpeg-dev libpng-dev libxpm-dev zlib1g-dev libfreetype6-dev libxml2-dev libexpat1-dev libbz2-dev libgmp3-dev libldap2-dev unixodbc-dev libpq-dev libsqlite3-dev libaspell-dev libsnmp-dev libpcre3-dev libtidy-dev -yqq<font></font>
  #  composer<font></font>
  - curl -sS https://getcomposer.org/installer | php<font></font>
  - php composer.phar install<font></font>
  - composer install<font></font>
  #   Node<font></font>
  - npm install<font></font>
  # Copy over testing configuration.<font></font>
  # Don't forget to set the database config in .env.testing correctly<font></font>
  - DB_HOST=mysql<font></font>
  - DB_DATABASE=laravel<font></font>
  - DB_USERNAME=root<font></font>
  - DB_PASSWORD=*********<font></font>
  #  .env.example    .env<font></font>
  - cp .env.example .env<font></font>
  #  npm build<font></font>
  - npm run dev<font></font>
  #       laravel<font></font>
  - php artisan key:generate<font></font>
  - php artisan config:cache<font></font>
  - php artisan route:clear<font></font>
  - php artisan config:clear<font></font>
  - php artisan cache:clear<font></font>
  #  .<font></font>
  - docker-compose exec app php artisan migrate<font></font>
  #   <font></font>
  #- docker-compose exec app php artisan db:seed<font></font>
<font></font>
#<font></font>
test:<font></font>
  script:<font></font>
    #  <font></font>
    - php vendor/bin/phpunit --coverage-text --colors=never<font></font>
    #  npm<font></font>
    - npm test<font></font>
<font></font>
#       <font></font>
deploying:<font></font>
  stage: deploy<font></font>
  script:<font></font>
    - echo "Deployed"<font></font>
    - docker-compose stop<font></font>
    - docker-compose up -d<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah berhasil mengeksekusi pipeline (CI / CD-&gt; Pipelines) di alamat ip server Anda, Anda akan melihat halaman laravel Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengkonfigurasi CI / CD, saya menggunakan instruksi dari Sean Bradley:</font></font><br>
<br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://youtu.be/RV0845KmsNI</font></font></a></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medium.com/@sean_bradley/auto-devops-with-gitlab-ci-and-docker-compose-f931233f080f</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id491520/index.html">Ubah xls menjadi xlsx dan xml dalam C #</a></li>
<li><a href="../id491522/index.html">Mengapa wanita hidup lebih lama</a></li>
<li><a href="../id491524/index.html">Stas Afanasyev. Juno. Pipa berdasarkan pada io.Reader / io.Writer. Bagian 2</a></li>
<li><a href="../id491528/index.html">Pengalaman saya melakukan 1000 wawancara. Sinopsis laporan oleh Yegor Bugaenko</a></li>
<li><a href="../id491530/index.html">Sekali lagi sekitar 433 MHz pemancar dan penerima</a></li>
<li><a href="../id491534/index.html">Panduan Singkat untuk Menggunakan GDB</a></li>
<li><a href="../id491536/index.html">YouTube - Kesalahan. Silakan coba lagi nanti. ID pemutaran: <...></a></li>
<li><a href="../id491538/index.html">Sprawl Lemmas untuk Bahasa Biasa dan Bebas Konteks</a></li>
<li><a href="../id491540/index.html">Jaringan untuk spesialis IT pemula. Basis wajib</a></li>
<li><a href="../id491542/index.html">Transformasi Warna: Penipisan Tabel Pencarian</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>