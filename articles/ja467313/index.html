<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸšï¸ ğŸ•– ğŸ‰‘ PostgreSQLã¨MySQLé–“ã®ã‚¯ãƒ­ã‚¹ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ğŸ§—ğŸ¿ ğŸ¥¡ ğŸˆº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PostgreSQLã¨MySQLã®é–“ã®ç›¸äº’ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã€ã“ã‚Œã‚‰2ã¤ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã®é–“ã®ç›¸äº’ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦æ¦‚èª¬ã—ã¾ã™ã€‚é€šå¸¸ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯åŒç¨®ã¨å‘¼ã°ã‚Œã€ã“ã‚Œã¯1ã¤ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆ¥ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã«ç§»å‹•...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PostgreSQLã¨MySQLé–“ã®ã‚¯ãƒ­ã‚¹ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/467313/"><p><img src="https://habrastorage.org/webt/ze/m9/h6/zem9h6cpvow7junwu4saxpddvpa.jpeg"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQLã¨MySQLã®é–“ã®ç›¸äº’ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã€ã“ã‚Œã‚‰2ã¤ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã®é–“ã®ç›¸äº’ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦æ¦‚èª¬ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">é€šå¸¸ã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯åŒç¨®ã¨å‘¼ã°ã‚Œã€ã“ã‚Œã¯1ã¤ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆ¥ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã«ç§»å‹•ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªæ–¹æ³•ã§ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQLã¨MySQLã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨è¦‹ãªã•ã‚Œã¾ã™ãŒã€è¿½åŠ ã®æ‹¡å¼µæ©Ÿèƒ½ã«ã‚ˆã‚ŠNoSQLæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§ã¯ã€ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«DBMSã®è¦³ç‚¹ã‹ã‚‰ã€PostgreSQLã¨MySQLã®é–“ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†…éƒ¨ã‚­ãƒƒãƒãƒ³å…¨ä½“ã‚’èª¬æ˜ã™ã‚‹ã®ã§ã¯ãªãã€åŸºæœ¬åŸç†ã®ã¿ã‚’èª¬æ˜ã™ã‚‹ã®ã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼é–“ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹æˆã™ã‚‹æ–¹æ³•ã€åˆ©ç‚¹ã€åˆ¶é™ã€ãŠã‚ˆã³ä½¿ç”¨ã‚·ãƒŠãƒªã‚ªã«ã¤ã„ã¦ã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</font></font></p><a name="habracut"></a><br>
<p>            ,        (  ,   )   (,   ).   â€”           .        ,      ,        .           ,          Â«-Â».  ,     ,         ,  Â«-Â»  Â«-Â»   ,               .</p><br>
<p>       .                      . MySQL  PostgreSQL            ,    ,         .</p><br>
<p>   MySQL  PostgreSQL           .      ,      .    ,    -,  pg_chameleon.</p><br>
<h3 id="chto-takoe-pg_chameleon">  pg_chameleon</h3><br>
<p>pg_chameleon â€”     MySQL  PostgreSQL  Python 3.    - mysql-replication,   Python.      MySQL     JSONB    PostgreSQL,     pl/pgsql      PostgreSQL.</p><br>
<h3 id="vozmozhnosti-pg_chameleon"> pg_chameleon</h3><br>
<p>  MySQL           PostgreSQL   Â«  Â»<br>
       .<br>
       MySQL.<br>
,       , .<br>
    .<br>
         YAML.</p><br>
<h3 id="primer"></h3><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>vm1</th>
<th>vm2</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong> </strong></td>
<td>CentOS Linux 7.6 x86_64</td>
<td>CentOS Linux 7.5 x86_64</td>
</tr>
<tr>
<td><strong>  </strong></td>
<td>MySQL 5.7.26</td>
<td>PostgreSQL 10.5</td>
</tr>
<tr>
<td><strong> </strong></td>
<td>3306</td>
<td>5433</td>
</tr>
<tr>
<td><strong>IP-</strong></td>
<td>192.168.56.102</td>
<td>192.168.56.106</td>
</tr>
</tbody>
</table></div><br>
<p>        pg_chameleon.     Python 3.6.8,       .</p><br>
<pre><code class="plaintext hljs">$&gt; wget https://www.python.org/ftp/python/3.6.8/Python-3.6.8.tar.xz<font></font>
$&gt; tar -xJf Python-3.6.8.tar.xz<font></font>
$&gt; cd Python-3.6.8<font></font>
$&gt; ./configure --enable-optimizations<font></font>
$&gt; make altinstall</code></pre><br>
<p>   Python3.6    ,      .  , pip-         pg_chameleon.      pg_chameleon 2.0.9,    â€” 2.0.10.  ,       .</p><br>
<pre><code class="plaintext hljs">$&gt; python3.6 -m venv venv<font></font>
$&gt; source venv/bin/activate<font></font>
(venv) $&gt; pip install pip --upgrade<font></font>
(venv) $&gt; pip install pg_chameleon==2.0.9</code></pre><br>
<p>   pg_chameleon (chameleon â€”  )   set_configuration_files,   pg_chameleon        .</p><br>
<pre><code class="plaintext hljs">(venv) $&gt; chameleon set_configuration_files<font></font>
creating directory /root/.pg_chameleon<font></font>
creating directory /root/.pg_chameleon/configuration/<font></font>
creating directory /root/.pg_chameleon/logs/<font></font>
creating directory /root/.pg_chameleon/pid/<font></font>
copying configuration  example in /root/.pg_chameleon/configuration//config-example.yml</code></pre><br>
<p>    config-example.yml  default.yml,       .        .</p><br>
<pre><code class="plaintext hljs">$&gt; cat default.yml<font></font>
---<font></font>
#global settings<font></font>
pid_dir: '~/.pg_chameleon/pid/'<font></font>
log_dir: '~/.pg_chameleon/logs/'<font></font>
log_dest: file<font></font>
log_level: info<font></font>
log_days_keep: 10<font></font>
rollbar_key: ''<font></font>
rollbar_env: ''<font></font>
<font></font>
# type_override allows the user to override the default type conversion into a different one.<font></font>
type_override:<font></font>
  "tinyint(1)":<font></font>
    override_to: boolean<font></font>
    override_tables:<font></font>
      - "*"<font></font>
<font></font>
#postgres  destination connection<font></font>
pg_conn:<font></font>
  host: "192.168.56.106"<font></font>
  port: "5433"<font></font>
  user: "usr_replica"<font></font>
  password: "pass123"<font></font>
  database: "db_replica"<font></font>
  charset: "utf8"<font></font>
<font></font>
sources:<font></font>
  mysql:<font></font>
    db_conn:<font></font>
      host: "192.168.56.102"<font></font>
      port: "3306"<font></font>
      user: "usr_replica"<font></font>
      password: "pass123"<font></font>
      charset: 'utf8'<font></font>
      connect_timeout: 10<font></font>
    schema_mappings:<font></font>
      world_x: pgworld_x<font></font>
    limit_tables:<font></font>
#      - delphis_mediterranea.foo<font></font>
    skip_tables:<font></font>
#      - delphis_mediterranea.bar<font></font>
    grant_select_to:<font></font>
      - usr_readonly<font></font>
    lock_timeout: "120s"<font></font>
    my_server_id: 100<font></font>
    replica_batch_size: 10000<font></font>
    replay_max_rows: 10000<font></font>
    batch_retention: '1 day'<font></font>
    copy_max_memory: "300M"<font></font>
    copy_mode: 'file'<font></font>
    out_dir: /tmp<font></font>
    sleep_loop: 1<font></font>
    on_error_replay: continue<font></font>
    on_error_read: continue<font></font>
    auto_maintenance: "disabled"<font></font>
    gtid_enable: No<font></font>
    type: mysql<font></font>
    skip_events:<font></font>
      insert:<font></font>
        - delphis_mediterranea.foo #skips inserts on the table delphis_mediterranea.foo<font></font>
      delete:<font></font>
        - delphis_mediterranea #skips deletes on schema delphis_mediterranea<font></font>
      update:</code></pre><br>
<p>     â€”     pg_chameleon          ,        .</p><br>
<p>   default.yml     (global settings),     ,    ,  ,     . .      (type override),          .        ,   tinyint(1)   .          .       PostgreSQL,   pg_conn.      ,       ,       , ,   ,  , ,  . ,  Â«sourcesÂ»    ,            ,    Â«  Â».</p><br>
<p>  world_x    4   ,   MySQL   .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.       tar          .</p><br>
<p>   MySQL  PostgreSQL       usr_replica.  MySQL         .</p><br>
<pre><code class="plaintext hljs">mysql&gt; CREATE USER usr_replica ;<font></font>
mysql&gt; SET PASSWORD FOR usr_replica='pass123';<font></font>
mysql&gt; GRANT ALL ON world_x.* TO 'usr_replica';<font></font>
mysql&gt; GRANT RELOAD ON *.* to 'usr_replica';<font></font>
mysql&gt; GRANT REPLICATION CLIENT ON *.* to 'usr_replica';<font></font>
mysql&gt; GRANT REPLICATION SLAVE ON *.* to 'usr_replica';<font></font>
mysql&gt; FLUSH PRIVILEGES;</code></pre><br>
<p>  PostgreSQL    db_replica,        MySQL.  usr_replica  PostgreSQL       pgworld_x  sch_chameleon,           .      create_replica_schema,    .</p><br>
<pre><code class="plaintext hljs">postgres=# CREATE USER usr_replica WITH PASSWORD 'pass123';<font></font>
CREATE ROLE<font></font>
postgres=# CREATE DATABASE db_replica WITH OWNER usr_replica;<font></font>
CREATE DATABASE</code></pre><br>
<p>  MySQL     ,     ,   .      ,     .</p><br>
<pre><code class="plaintext hljs">$&gt; vi /etc/my.cnf<font></font>
binlog_format= ROW<font></font>
binlog_row_image=FULL<font></font>
log-bin = mysql-bin<font></font>
server-id = 1</code></pre><br>
<p>        ,     pg_chameleon   .</p><br>
<p>  PostgreSQL:</p><br>
<pre><code class="plaintext hljs">$&gt; mysql -u usr_replica -Ap'admin123' -h 192.168.56.102 -D world_x</code></pre><br>
<p>  MySQL :</p><br>
<pre><code class="plaintext hljs">$&gt; psql -p 5433 -U usr_replica -h 192.168.56.106 db_replica</code></pre><br>
<p>   pg_chameleon (chameleon)  ,     .  create_replica_schema  pg_chameleon     (sch_chameleon)    (pgworld_x)    PostgreSQL,    .  add_source      ,    (default.yml),      mysql,  init_replica        .</p><br>
<pre><code class="plaintext hljs">$&gt; chameleon create_replica_schema --debug<font></font>
$&gt; chameleon add_source --config default --source mysql --debug<font></font>
$&gt; chameleon init_replica --config default --source mysql --debug</code></pre><br>
<p>          .                .</p><br>
<p>,     start_replica      .</p><br>
<pre><code class="plaintext hljs">$&gt; chameleon start_replica --config default --source mysql <font></font>
output: Starting the replica process for source mysql</code></pre><br>
<p>       show_status,    â€”    show_errors.</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">.</a></p><br>
<p>   ,     .   ,     Linux ps,   .</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">.</a></p><br>
<p>   ,        ,   .   ,       MySQL    sync_tables  pg_chameleon,            PostgreSQL.</p><br>
<pre><code class="plaintext hljs">mysql&gt; create table t1 (n1 int primary key, n2 varchar(10));<font></font>
Query OK, 0 rows affected (0.01 sec)<font></font>
mysql&gt; insert into t1 values (1,'one');<font></font>
Query OK, 1 row affected (0.00 sec)<font></font>
mysql&gt; insert into t1 values (2,'two');<font></font>
Query OK, 1 row affected (0.00 sec)</code></pre><br>
<pre><code class="plaintext hljs">$&gt; chameleon sync_tables --tables world_x.t1 --config default --source mysql<font></font>
Sync tables process for source mysql started.</code></pre><br>
<p>   ,      PostgreSQL   .</p><br>
<pre><code class="plaintext hljs">$&gt; psql -p 5433 -U usr_replica -d db_replica -c "select * from pgworld_x.t1";<font></font>
 n1 |  n2<font></font>
----+-------<font></font>
  1 | one<font></font>
  2 | two</code></pre><br>
<p>   ,   pg_chameleon   .     ,   ,       ,        PostgreSQL          (sch_chameleon).</p><br>
<pre><code class="plaintext hljs">$&gt; chameleon stop_replica --config default --source mysql <font></font>
$&gt; chameleon detach_replica --config default --source mysql --debug</code></pre><br>
<p>          .</p><br>
<pre><code class="plaintext hljs">$&gt; chameleon drop_source --config default --source mysql --debug<font></font>
$&gt; chameleon drop_replica_schema --config default --source mysql --debug</code></pre><br>
<h3 id="preimuschestva-pg_chameleon"> pg_chameleon</h3><br>
<p>   .<br>
          .<br>
        ,    .<br>
        ,    ,           MySQL     PostgreSQL.<br>
    .</p><br>
<h3 id="nedostatki-pg_chameleon"> pg_chameleon</h3><br>
<p>   MySQL 5.5       PostgreSQL 9.5       .<br>
        ,      init_replica,   .<br>
  â€”   MySQL  PostgreSQL.      Â«-Â».<br>
      MySQL,     PostgreSQL        (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>)</p><br>
<h3 id="itogi-po-pg_chameleon">  pg_chameleon</h3><br>
<p>   pg_chameleon        MySQL  PostgreSQL.    ,    ,            -,  .         - â€” SymmetricDS.</p><br>
<p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://pgchameleon.org/documents/usage.html&amp;usg=ALkJrhic0SxUd6PYgCaQHp48AoOCb31ksg#"></a>.</p><br>
<h3 id="obzor-symmetricds"> SymmetricDS</h3><br>
<p>SymmetricDS â€”  -,           : Oracle, MongoDB, PostgreSQL, MySQL, SQL Server, MariaDB, DB2, Sybase, Greenplum, Informix, H2, Firebird     ,  Redshift,  Azure  . .  :     ,     ,  ,   .    Java,     JRE  JDK ( 8.0  ).                      .</p><br>
<h3 id="vozmozhnosti-symmetricds"> SymmetricDS</h3><br>
<p>    ,          .<br>
       ,         .<br>
     Push  Pull    .<br>
           .<br>
           .<br>
     API .</p><br>
<h3 id="primer-1"></h3><br>
<p>SymmetricDS       :<br>
 () ,         () ,          .<br>
  ( 1)          ( 2)  .</p><br>
<p>        Push  Pull.       Â«-Â».     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,      SymmetricDS.</p><br>
<p> SymmetricDS  :  - zip- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>   ,  .           SymmetricDS   ,     ,  Linux, IP-     .</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>vm1</th>
<th>vm2</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong> </strong></td>
<td>CentOS Linux 7.6 x86_64</td>
<td>CentOS Linux 7.6 x86_64</td>
</tr>
<tr>
<td><strong>  </strong></td>
<td>MySQL 5.7.26</td>
<td>PostgreSQL 10.5</td>
</tr>
<tr>
<td><strong> </strong></td>
<td>3306</td>
<td>5832</td>
</tr>
<tr>
<td><strong>IP-</strong></td>
<td>192.168.1.107</td>
<td>192.168.1.112</td>
</tr>
<tr>
<td><strong> SymmetricDS</strong></td>
<td>SymmetricDS 3.9</td>
<td>SymmetricDS 3.9</td>
</tr>
<tr>
<td><strong>  SymmetricDS</strong></td>
<td>/usr/local/symmetric-server-3.9.20</td>
<td>/usr/local/symmetric-server-3.9.20</td>
</tr>
<tr>
<td><strong>  SymmetricDS</strong></td>
<td>corp-000</td>
<td>store-001</td>
</tr>
</tbody>
</table></div><br>
<p>   SymmetricDS  /usr/local/symmetric-server-3.9.20,          .     samples  engines.   samples       ,     SQL    .</p><br>
<p>  samples        â€”       .</p><br>
<pre><code class="plaintext hljs">corp-000.properties<font></font>
store-001.properties<font></font>
store-002.properties</code></pre><br>
<p> SymmetricDS          3  ( 1),          2  ( 2).       samples  engines   vm1.  :</p><br>
<pre><code class="plaintext hljs">$&gt; cat engines/corp-000.properties<font></font>
engine.name=corp-000<font></font>
db.driver=com.mysql.jdbc.Driver<font></font>
db.url=jdbc:mysql://192.168.1.107:3306/replica_db?autoReconnect=true&amp;useSSL=false<font></font>
db.user=root<font></font>
db.password=admin123<font></font>
registration.url=<font></font>
sync.url=http://192.168.1.107:31415/sync/corp-000<font></font>
group.id=corp<font></font>
external.id=000</code></pre><br>
<p>    SymmetricDS  corp-000,        mysql jdbc,    ,  ,     .      replica_db,        . sync.url       .</p><br>
<p> 2   vm2   store-001,      node.properties,   .  store-001    PostgreSQL,  pgdb_replica â€”     . registration.url   vm2    vm1      .</p><br>
<pre><code class="plaintext hljs">$&gt; cat engines/store-001.properties<font></font>
engine.name=store-001<font></font>
db.driver=org.postgresql.Driver<font></font>
db.url=jdbc:postgresql://192.168.1.112:5832/pgdb_replica<font></font>
db.user=postgres<font></font>
db.password=admin123<font></font>
registration.url=http://192.168.1.107:31415/sync/corp-000<font></font>
group.id=store<font></font>
external.id=001</code></pre><br>
<p>  SymmetricDS            ( ).       vm1 (corp-000),      4 .   create-sym-tables  symadmin   ,         . ,     .</p><br>
<pre><code class="plaintext hljs">vm1$&gt; cd /usr/local/symmetric-server-3.9.20/bin<font></font>
vm1$&gt; ./dbimport --engine corp-000 --format XML create_sample.xml<font></font>
vm1$&gt; ./symadmin --engine corp-000 create-sym-tables<font></font>
vm1$&gt; ./dbimport --engine corp-000 insert_sample.sql</code></pre><br>
<p>   item  item_selling_price      corp-000  store-001,   sale (sale_transaction  sale_return_line_item)      store-001  corp-000.       PostgreSQL   vm2 (store-001),        corp-000.</p><br>
<pre><code class="plaintext hljs">vm2$&gt; cd /usr/local/symmetric-server-3.9.20/bin<font></font>
vm2$&gt; ./dbimport --engine store-001 --format XML create_sample.xml</code></pre><br>
<p> ,     MySQL  vm1       SymmetricDS. ,    SymmetricDS (  sym_)      corp-000,       create-sym-tables    .        store-001   4    .</p><br>
<p>.       sym   ,   .</p><br>
<pre><code class="plaintext hljs">vm1$&gt; cd /usr/local/symmetric-server-3.9.20/bin<font></font>
vm1$&gt; sym 2&gt;&amp;1 &amp;</code></pre><br>
<p>       (symmetric.log)     ,   SymmetricDS,      .  sym      store-001.</p><br>
<pre><code class="plaintext hljs">vm2$&gt; cd /usr/local/symmetric-server-3.9.20/bin<font></font>
vm2$&gt; sym 2&gt;&amp;1 &amp;</code></pre><br>
<p>    sym   vm2,     SymmetricDS      PostgreSQL.     sym   ,     ,     corp-000  store-001.        4    ,  ,    .        store-001  corp-000  .</p><br>
<pre><code class="plaintext hljs">vm1$&gt; ./symadmin --engine corp-000 reload-node 001</code></pre><br>
<p>     item    MySQL   corp-000 (: vm1)   ,         PostgreSQL   store-001 (: vm2).    Pull     corp-000  store-001.</p><br>
<pre><code class="plaintext hljs">mysql&gt; insert into item values ('22000002','Jelly Bean');<font></font>
Query OK, 1 row affected (0.00 sec)</code></pre><br>
<pre><code class="plaintext hljs">vm2$&gt; psql -p 5832 -U postgres pgdb_replica -c "select * from item"<font></font>
 item_id  |   name<font></font>
----------+-----------<font></font>
 11000001 | Yummy Gum<font></font>
 22000002 | Jelly Bean<font></font>
(2 rows)</code></pre><br>
<p>   Push     store-001  corp-000,     sale_transaction  ,   .</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">.</a></p><br>
<p>           MySQL  PostgreSQL.       ,   .   t1         .       corp-000  store-001.</p><br>
<pre><code class="plaintext hljs">mysql&gt; create table  t1 (no integer);<font></font>
Query OK, 0 rows affected (0.01 sec)</code></pre><br>
<pre><code class="plaintext hljs">mysql&gt; insert into sym_channel (channel_id,create_time,last_update_time) <font></font>
values ('t1',current_timestamp,current_timestamp);<font></font>
Query OK, 1 row affected (0.01 sec)</code></pre><br>
<pre><code class="plaintext hljs">mysql&gt; insert into sym_trigger (trigger_id, source_table_name,channel_id,<font></font>
last_update_time, create_time) values ('t1', 't1', 't1', current_timestamp,<font></font>
current_timestamp);<font></font>
Query OK, 1 row affected (0.01 sec)</code></pre><br>
<pre><code class="plaintext hljs">mysql&gt; insert into sym_trigger_router (trigger_id, router_id,<font></font>
Initial_load_order, create_time,last_update_time) values ('t1',<font></font>
'corp-2-store-1', 1, current_timestamp,current_timestamp);<font></font>
Query OK, 1 row affected (0.01 sec)</code></pre><br>
<p>      ,     ,    symadmin   sync-triggers,       .  send-schema       store-001,    t1 .</p><br>
<pre><code class="plaintext hljs">vm1$&gt; ./symadmin -e corp-000 --node=001 sync-triggers    <font></font>
vm1$&gt; ./symadmin send-schema -e corp-000 --node=001 t1</code></pre><br>
<h3 id="preimuschestva-symmetricds"> SymmetricDS</h3><br>
<p>   ,              .<br>
      ,  ,    .<br>
         ,  WAN   .<br>
            .<br>
       .</p><br>
<h3 id="nedostatki-symmetricds"> SymmetricDS</h3><br>
<p>            SQL    ,   .<br>
      ,        SQL,      .<br>
     ,        ,       .</p><br>
<h3 id="itogi-po-symmetricds">  SymmetricDS</h3><br>
<p>SymmetricDS      ,      ,      .   ,     ,         ,         HTTPS,         . . SymmetricDS      ,        ,  ,    , ,       .</p><br>
<p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>  SymmetricDS.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>    ,       SymmetricDS.</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467295/index.html">Androidã§å¾…æœ›ã®ãƒ“ãƒ¥ãƒ¼ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°</a></li>
<li><a href="../ja467299/index.html">æ¦‚å¿µï¼šSTDãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã®ç°¡ç•¥åŒ–</a></li>
<li><a href="../ja467301/index.html">Hitmanã§ã®AIã®ä»•çµ„ã¿ï¼ˆ2016ï¼‰</a></li>
<li><a href="../ja467303/index.html">æœ€å¹´å°‘ã®PSBãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ç‰©èªï¼šãƒãƒƒã‚«ã‚½ãƒ³ã¯éŠ€è¡Œã¸ã®æ‰‰ã«ãªã‚Šã¾ã—ãŸ</a></li>
<li><a href="../ja467305/index.html">éƒ½å¸‚ãŒã‚¹ãƒãƒ¼ãƒˆãªã¨ãï¼šãƒ¡ã‚¬ã‚·ãƒ†ã‚£ã®ä½“é¨“</a></li>
<li><a href="../ja467317/index.html">ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ãŒä¸–ç•Œã‚’é£²ã¿è¾¼ã‚“ã æ–¹æ³•</a></li>
<li><a href="../ja467323/index.html">ãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹ãŸã‚ã®Qt Creator 4.10ãŠã‚ˆã³QBS 1.14ã®å¯èƒ½æ€§ã®æ¦‚è¦</a></li>
<li><a href="../ja467327/index.html">35ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒã«ãªã£ãŸçµŒç·¯</a></li>
<li><a href="../ja467329/index.html">æœ€é«˜ã®è£½å“ã¯ã€å®Ÿéš›ã®å•é¡Œã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ï¼šã‚¤ãƒ³ã‚¿ãƒ¼ã‚¸ãƒ§ãƒ–ã®ä»•äº‹ã‚’ã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆ1</a></li>
<li><a href="../ja467331/index.html">ãƒ¯ãƒ¼ãƒ‰ãƒ—ãƒ¬ã‚¹ã§$ 269ã®ã€Œã‚¼ãƒ­ã‹ã‚‰ã€ã®è²©å£²+ç¾ã—ã„ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ãƒˆã‚¢-ç§ãŸã¡ã®çµŒé¨“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>