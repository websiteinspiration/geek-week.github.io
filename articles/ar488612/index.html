<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵 👨🏻‍✈️ 🏴‍☠️ تسلسل جافا: السرعة القصوى بدون بنية بيانات جامدة 👩🏼‍🤝‍👩🏻 🧚🏼 🙇🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="يعمل فريقنا في Sberbank على تطوير خدمة بيانات الجلسة التي تنظم تبادل سياق جلسة Java واحد بين التطبيقات الموزعة. تحتاج خدمتنا بشكل عاجل إلى إجراء تسلسل...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>تسلسل جافا: السرعة القصوى بدون بنية بيانات جامدة</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/488612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يعمل فريقنا في Sberbank على تطوير خدمة بيانات الجلسة التي تنظم تبادل سياق جلسة Java واحد بين التطبيقات الموزعة. تحتاج خدمتنا بشكل عاجل إلى إجراء تسلسل سريع جدًا لكائنات Java ، لأن هذا جزء من مهمتنا الحرجة. في البداية ، توصلنا إلى أذهاننا: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Protocol Buffers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Thrift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Avro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تتطلب المكتبات الثلاثة الأولى من هذه المكتبات إجراء تسلسل للكائنات لوصف مخطط بياناتها. </font><font style="vertical-align: inherit;">CBOR منخفض المستوى لدرجة أنه لا يمكنه إجراء تسلسل إلا للقيم العددية ومجموعاتها. </font><font style="vertical-align: inherit;">ما كنا بحاجة إليه هو مكتبة تسلسل جافا "لم تطرح الكثير من الأسئلة" ولم تفرض الفرز اليدوي للأشياء القابلة للتسلسل "إلى ذرات". </font><font style="vertical-align: inherit;">أردنا إجراء تسلسل لكائنات Java العشوائية دون معرفة أي شيء عنها تقريبًا ، وأردنا القيام بذلك في أسرع وقت ممكن. </font><font style="vertical-align: inherit;">لذلك ، نظمنا منافسة على الحلول المفتوحة المصدر المتاحة لمشكلة تسلسل Java.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/52/0t/82/520t82yicq9kayb7s3bovbktf04.png" alt="KDPV"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المنافسين</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالنسبة للمسابقة ، اخترنا مكتبات تسلسل Java الأكثر شيوعًا ، وذلك باستخدام التنسيق الثنائي بشكل رئيسي ، بالإضافة إلى المكتبات التي عملت جيدًا في </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">مراجعات</font></a><font style="vertical-align: inherit;"> تسلسل Java </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الأخرى</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معيار Java</font></font></i></td>
<td> Java- « »,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>2</td>
<td><i>Jackson JSON</i></td>
<td> &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">FasterXML/jackson-databind</a>,  Java-   JSON-.<br>
</td>
</tr>
<tr>
<td>3</td>
<td><i>Jackson JSON (with types)</i></td>
<td>  ,   ,    ,      full qualified  Java-.        JSON- (,  )  .<br>
<div class="spoiler"><b class="spoiler_title">,    JSON...</b><div class="spoiler_text"><pre><code class="javascript hljs">[
  <span class="hljs-string">"ru.sbrf.ufs.dto.PersonDto"</span>,<font></font>
  {<font></font>
    <span class="hljs-string">"firstName"</span>:<span class="hljs-string">"Ivan"</span>,
    <span class="hljs-string">"lastName"</span>:<span class="hljs-string">"Ivanov"</span><font></font>
  }<font></font>
]<font></font>
</code></pre></div></div><div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper();<font></font>
}<font></font>
</code></pre>:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper()<font></font>
            .enable(<font></font>
                    ACCEPT_SINGLE_VALUE_AS_ARRAY,<font></font>
                    ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,<font></font>
                    ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT,<font></font>
                    READ_UNKNOWN_ENUM_VALUES_AS_NULL,<font></font>
                    UNWRAP_SINGLE_VALUE_ARRAYS<font></font>
            )<font></font>
            .disable(<font></font>
                    FAIL_ON_INVALID_SUBTYPE,<font></font>
                    FAIL_ON_NULL_FOR_PRIMITIVES,<font></font>
                    FAIL_ON_IGNORED_PROPERTIES,<font></font>
                    FAIL_ON_UNKNOWN_PROPERTIES,<font></font>
                    FAIL_ON_NUMBERS_FOR_ENUMS,<font></font>
                    FAIL_ON_UNRESOLVED_OBJECT_IDS,<font></font>
                    WRAP_EXCEPTIONS<font></font>
            )<font></font>
            .enable(ALLOW_SINGLE_QUOTES)<font></font>
            .disable(FAIL_ON_EMPTY_BEANS)<font></font>
            .enable(MapperFeature.PROPAGATE_TRANSIENT_MARKER)<font></font>
            .setVisibility(FIELD, ANY)<font></font>
            .setVisibility(ALL, NONE)<font></font>
            .enableDefaultTyping(NON_FINAL);  <span class="hljs-comment">// !</span><font></font>
}<font></font>
</code></pre></div></div></td>
</tr>
<tr>
<td>4</td>
<td><i>Jackson Smile</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">FasterXML/jackson-dataformats-binary/smile</a>,   Jackson-,  Java-    JSON- – Smile.<br>
</td>
</tr>
<tr>
<td>5</td>
<td><i>Jackson Smile (with types)</i></td>
<td>  ,   ,    «Jackson JSON (with types)» (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>6</td>
<td><i>Bson4Jackson</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">michel-kraemer/bson4jackson</a>,   Jackson-,  Java-    JSON- – BSON.<br>
</td>
</tr>
<tr>
<td>7</td>
<td><i>Bson4Jackson (with types)</i></td>
<td>  ,   ,    «Jackson JSON (with types)» (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>8</td>
<td><i>BSON MongoDb</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">mongodb/mongo-java-driver/bson</a>,&nbsp;&nbsp; Java-  BSON-.<br>
</td>
</tr>
<tr>
<td>9</td>
<td><i>Kryo</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">EsotericSoftware/kryo</a>,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>10</td>
<td><i>Kryo (unsafe)</i></td>
<td>  ,   ,      sun.misc.Unsafe   /.<br>
<div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text"> :<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.Input<font></font>
com.esotericsoftware.kryo.io.Output<font></font>
</code></pre>:<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.UnsafeInput<font></font>
com.esotericsoftware.kryo.io.UnsafeOutput</code></pre></div></div></td>
</tr>
<tr>
<td>11</td>
<td><i>FST</i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مكتبة&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuedigerMoeller / التسلسل السريع</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> التي تحول كائنات Java إلى تنسيق ثنائي خاص بها.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (غير آمن)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نفس المكتبة المذكورة أعلاه ، ولكن تم تكوينها لاستخدام فئة sun.misc.Unsafe لتسريع التسلسل / إلغاء التسلسل.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ميزات إعدادات المكتبة ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs">FSTConfiguration fst = FSTConfiguration.createDefaultConfiguration();
</code></pre>:<pre><code class="plaintext hljs">FSTConfiguration fst = FSTConfiguration.createUnsafeBinaryConfiguration();</code></pre></div></div></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ثلاثة عشر</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">واحد جديد</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مكتبة&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">odnoklassniki / one-nio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> التي تحول كائنات Java إلى تنسيق ثنائي خاص بها.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (للإصرار)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نفس المكتبة المذكورة أعلاه ، ولكن تم تكوينها بطريقة تتضمن معلومات التعريف التفصيلية حول فئة كائن Java القابل للتسلسل في نتيجة التسلسل. </font><font style="vertical-align: inherit;">قد يكون هذا مطلوبًا أثناء التخزين طويل المدى </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(على سبيل المثال ، في قاعدة البيانات) قبل إلغاء التسلسل. </font><font style="vertical-align: inherit;">أي أن الهدف المنشود هو نفس هدف جاكسون JSON (مع الأنواع).</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ميزات إعدادات المكتبة ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithoutSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
SerializeStream out = <span class="hljs-keyword">new</span> SerializeStream( bufWithoutSerializers );<font></font>
out.writeObject(object);<font></font>
<span class="hljs-comment">// bufWithoutSerializers is the result</span>
</code></pre>:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
PersistStream out = <span class="hljs-keyword">new</span> PersistStream( bufWithSerializers );<font></font>
out.writeObject(object);<font></font>
bufWithSerializers = out.toByteArray();<font></font>
<span class="hljs-comment">// bufWithSerializers is the result</span>
</code></pre><br>
   <code>object</code>-  <code>result</code>&nbsp;  -:<br>
1) full qualified    <code>object</code>,<br>
2)     ,<br>
3) full qualified     ,<br>
4)        .<br>
  -  ,  One Nio   ,        .</div></div></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ها نحن ذا!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">سباق</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
السرعة هي المعيار الرئيسي لتقييم مكتبات تسلسل جافا التي تشارك في منافستنا المرتجلة. </font><font style="vertical-align: inherit;">من أجل التقييم الموضوعي لأي من مكتبات التسلسل أسرع ، أخذنا </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بيانات حقيقية من سجلات نظامنا</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> وقمنا </font><i><font style="vertical-align: inherit;">بتكوين بيانات جلسات اصطناعية منها بأطوال مختلفة</font></i><font style="vertical-align: inherit;"> : من 0 إلى 1 ميجابايت. </font><font style="vertical-align: inherit;">كان تنسيق البيانات سلاسل وسلاسل البايت.</font></font><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ملاحظة:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بالنظر إلى المستقبل ، يجب القول أن الفائزين والخاسرين قد ظهروا بالفعل على أحجام الكائنات القابلة للتسلسل من 0 إلى 10 كيلوبايت. </font><font style="vertical-align: inherit;">زيادة أخرى في حجم العناصر إلى 1 ميغابايت لم تغير نتيجة المسابقة. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذا الصدد ، من أجل وضوح أفضل ، فإن الرسوم البيانية التالية لأداء متسلقي Java محدودة بحجم الكائنات 10 كيلوبايت.</font></font></blockquote><i> ,    :</i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td>Intel<sup>R</sup>&nbsp;Core<sup>TM</sup> i7-6700 CPU, 3.4GHz, 8 cores</td>
</tr>
<tr>
<td></td>
<td>16 GB</td>
</tr>
<tr>
<td> </td>
<td>Microsoft Windows&nbsp;10&nbsp;(64-bit)</td>
</tr>
<tr>
<td>JRE</td>
<td>IBM J9 VM 1.7.0</td>
</tr>
</tbody></table></div><blockquote><strong>:</strong>   ,  IBM JRE    One Nio (   13  14).     <code>sun.reflect.MagicAccessorImpl</code>    <code>private</code>  <code>final</code> ( )  ,    . , IBM JRE      &nbsp;<code>sun.reflect.MagicAccessorImpl</code>,   ,     runtime .<br>
<br>
           (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Serialization-FAQ</a>,  One Nio   ),    fork  ,    &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  .   &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  fork-   <code>sun.misc.Unsafe</code>     .<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالإضافة إلى ذلك ، في شوكة لدينا ، تم تحسين تسلسل السلاسل - بدأت السلاسل في إجراء تسلسل 30-40 ٪ أسرع عند العمل على IBM JRE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذا الصدد ، في هذا المنشور ، تم الحصول على جميع نتائج مكتبة One Nio على مفترقنا ، وليس في المكتبة الأصلية.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تم إجراء القياس المباشر لسرعة التسلسل / إلغاء التسلسل باستخدام </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Microbenchmark Harness</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (JMH) - وهي أداة من OpenJDK لبناء وتشغيل معايير الأداء. </font><font style="vertical-align: inherit;">لكل قياس (نقطة واحدة على الرسم البياني) ، تم استخدام 5 ثوان "لتسخين" JVM و 5 ثوانٍ أخرى لقياسات الوقت نفسها ، متبوعة بالمتوسط. </font></font><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحديث:</font></font></b></i><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كود JMH المرجعي بدون بعض التفاصيل</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializationPerformanceBenchmark</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@State( Scope.Benchmark )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parameters</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Param( {
            "Java standard",
            "Jackson default",
            "Jackson system",
            "JacksonSmile default",
            "JacksonSmile system",
            "Bson4Jackson default",
            "Bson4Jackson system",
            "Bson MongoDb",
            "Kryo default",
            "Kryo unsafe",
            "FST default",
            "FST unsafe",
            "One-Nio default",
            "One-Nio for persist"
        } )</span>
        <span class="hljs-keyword">public</span> String serializer;
        <span class="hljs-keyword">public</span> Serializer serializerInstance;<font></font>
<font></font>
        <span class="hljs-meta">@Param( { "0", "100", "200", "300", /*... */ "1000000" } )</span>  <span class="hljs-comment">// Toward 1 MB</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> sizeOfDto;
        <span class="hljs-keyword">public</span> Object dtoInstance;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serializedDto;<font></font>
<font></font>
        <span class="hljs-meta">@Setup( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
            serializerInstance = Serializers.getMap().get( serializer );<font></font>
            dtoInstance = DtoFactory.createWorkflowDto( sizeOfDto );<font></font>
            serializedDto = serializerInstance.serialize( dtoInstance );<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@TearDown( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
            serializerInstance = <span class="hljs-keyword">null</span>;<font></font>
            dtoInstance = <span class="hljs-keyword">null</span>;<font></font>
            serializedDto = <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serialization( Parameters parameters ) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> parameters.serializerInstance.serialize(<font></font>
                parameters.dtoInstance );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">unserialization</span><span class="hljs-params">( Parameters parameters )</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
        <span class="hljs-keyword">return</span> parameters.serializerInstance.deserialize(<font></font>
                parameters.serializedDto,<font></font>
                parameters.dtoInstance.getClass() );<font></font>
    }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إليك ما حدث: </font><font style="vertical-align: inherit;">
أولاً ، لاحظ أن خيارات المكتبة التي تضيف بيانات تعريف إضافية إلى نتيجة التسلسل أبطأ من التكوينات الافتراضية للمكتبات نفسها (انظر التكوينات "مع الأنواع" و "للاستمرار"). </font><font style="vertical-align: inherit;">
بشكل عام ، بغض النظر عن التكوين ، يصبح </font><i><font style="vertical-align: inherit;">جاكسون JSON و Bson4Jackson ، الذين هم خارج السباق ،</font></i><font style="vertical-align: inherit;"> غرباء وفقًا لنتائج التسلسل </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
بالإضافة إلى ذلك ، </font><i><font style="vertical-align: inherit;">يخرج Java Standard عن السباق</font></i><font style="vertical-align: inherit;"> بناءً على نتائج إلغاء التسلسل </font><font style="vertical-align: inherit;">، مثل بالنسبة لأي حجم من البيانات القابلة للتسلسل ، تكون إزالة التسلسل أبطأ بكثير من المنافسين. </font><font style="vertical-align: inherit;">
ألق نظرة عن كثب على المشاركين المتبقين: </font><font style="vertical-align: inherit;">
وفقًا لنتائج التسلسل ، فإن مكتبة </font><i><font style="vertical-align: inherit;">FST</font></i><font style="vertical-align: inherit;"> في قادة واثقين</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/un/cl/x7/unclx7kgnmniixupznbhmuigcwi.png" alt="السباق - جميع المشاركين"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/ct/fm/cg/ctfmcgtlh9wo66vctatdvwujhzy.png" alt="السباق - باستثناء الغرباء"></a><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ومع زيادة حجم الأشياء ، " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " تخطو على عقبها </font><font style="vertical-align: inherit;">. لاحظ أنه بالنسبة إلى </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio ،</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يكون خيار "للإصرار" أبطأ بكثير من التكوين الافتراضي لسرعة التسلسل. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذا نظرت إلى إلغاء التسلسل ، فإننا نرى أن </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> كان قادرًا على تجاوز </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مع زيادة حجم البيانات </font><font style="vertical-align: inherit;">. في الأخير ، على العكس من ذلك ، يؤدي التكوين غير القياسي "غير الآمن" إلى إلغاء التسلسل بشكل أسرع. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من أجل وضع جميع النقاط أكثر من AND ، دعونا نلقي نظرة على النتيجة الإجمالية للتسلسل وإلغاء التسلسل: </font><font style="vertical-align: inherit;">
أصبح من الواضح أن هناك </font><u><font style="vertical-align: inherit;">قائدين لا لبس فيهما: </font></u><u><i><font style="vertical-align: inherit;">FST (غير آمن)</font></i></u><u><font style="vertical-align: inherit;"> و </font></u><u><i><font style="vertical-align: inherit;">One Nio</font></i></u><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
إذا كانت الأجسام الصغيرة </font><i><font style="vertical-align: inherit;">FST (غير آمنة)</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/zp/qq/mw/zpqqmwuxdlsb_gvl3orjyd1pyda.png" alt="السباق - باستثناء الغرباء (التصنيف العام)"></a><br>
<br><font style="vertical-align: inherit;"></font><u><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i></u><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;يقود بثقة ، ثم مع زيادة حجم الأشياء القابلة للتسلسل ، يبدأ في التنازل ، وفي النهاية ، أدنى من </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
المركز الثالث مع الزيادة في حجم الأشياء القابلة للتسلسل يتخذ بثقة من قبل </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، على الرغم من أنه </font><u><i><font style="vertical-align: inherit;">يتقدم</font></i></u><font style="vertical-align: inherit;"> مرتين تقريبًا على القادة.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وزن</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
حجم نتيجة التسلسل هو ثاني أهم معيار لتقييم مكتبات تسلسل جافا. بطريقة ما ، تعتمد سرعة التسلسل / إلغاء التسلسل على حجم النتيجة: من الأسرع تكوين ومعالجة نتيجة مضغوطة من وحدة تخزين واحدة. من أجل "ترجيح" نتائج التسلسل ، تم استخدام جميع كائنات Java نفسها ، والتي تم تشكيلها من بيانات حقيقية مأخوذة من سجلات النظام (سلاسل وصفائف البايت). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالإضافة إلى ذلك ، فإن خاصية مهمة نتيجة التسلسل هي أيضًا مقدار ضغطها بشكل جيد (على سبيل المثال ، لحفظها في قاعدة البيانات أو المخازن الأخرى). في منافسينا ، استخدمنا </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خوارزمية</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ضغط </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;">الانكماش</font></i></a><font style="vertical-align: inherit;"> ، والتي هي أساس ZIP و gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وكانت نتائج "الترجيح" كما يلي:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/pb/ek/h-/pbekh-hfdtstyzpd2ttgtkfhb88.png" alt="وزن"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من المتوقع أن تكون النتائج الأكثر إحكاما هي التسلسل من أحد قادة السباق: </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
حصل المركز الثاني في التعاقد على </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(الذي احتل المركز الثالث في السباق). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في المركز الثالث من حيث التعاقد ، "هربت" مكتبة </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كريو</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، التي فشلت سابقًا في إثبات نفسها في السباق. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يتم أيضًا ضغط نتائج التسلسل لهؤلاء القادة الثلاثة "للوزن" بشكل مثالي (تقريبًا اثنين). </font><font style="vertical-align: inherit;">اتضح أنه الأكثر قابلية للضغط: المعادل الثنائي لـ JSON هو Smile و JSON نفسه. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
حقيقة غريبة - كل الفائزين في "الوزن" أثناء التسلسل يضيفون نفس كمية بيانات الخدمة إلى كائنات صغيرة وكبيرة قابلة للتسلسل.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المرونة</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
قبل اتخاذ قرار مسؤول بشأن اختيار فائز ، قررنا التحقق بدقة من مرونة كل مُسلسل ومدى قابليته للاستخدام. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لهذا ، قمنا بتجميع 20 معيارًا لتقييم المتسللين المشاركين في المسابقة حتى لا يمر "ماوس واحد" عبر أعيننا.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/zd/t4/it/zdt4itoudhnnpfo7e2l9jdscwdo.png" alt="المرونة"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحواشي مع التفسيرات</font></font></b><div class="spoiler_text"><sup>1</sup>&nbsp; &nbsp; <i> <code>LinkedHashMap</code>.</i><br>
<sup>2</sup>&nbsp; &nbsp;<i>    — ,    — .</i><br>
<sup>3</sup>&nbsp; &nbsp;<i>    — ,    — .</i><br>
<sup>4</sup>&nbsp; &nbsp;<i>  <code>sun.reflect.MagicAccessorImpl</code> — : boxing/unboxing,   <code>BigInteger/BigDecimal/String</code>.   <code>MagicAccessorImpl</code>&nbsp;(  ' fork One Nio) — .</i><br>
<sup>5</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>.</i><br>
<sup>6</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>  <code>HashSet</code>      .</i><br>
<sup>7</sup>&nbsp; &nbsp;<i> <code>HashMap</code>.</i><br>
<sup>8</sup>&nbsp; &nbsp;<i>        — ,     ,   /Map-,   (   <code>HashMap</code>).</i><br>
<sup>9</sup>&nbsp; &nbsp;<i>   -.</i><br>
<sup>10</sup>&nbsp;<i>   One Nio — ,    ' fork- — .</i><br>
<sup>11</sup> <i>     .</i><br>
</div></div><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> وفقًا للمعيار الثالث عشر ، حصل One Nio (للإصرار) على نقطة أخرى (19).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ربما كان هذا "الفحص الدقيق للمتقدمين" أكثر المراحل التي تستغرق وقتًا طويلاً في عملية "الصب". لكن نتائج المقارنة هذه تفتح بشكل جيد راحة استخدام مكتبات التسلسل. نتيجة لذلك ، يمكنك استخدام هذه النتائج كمرجع.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كان من العار أن ندرك ، لكن قادتنا وفقًا لنتائج السباقات والوزن -</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FST (غير آمن)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- اتضح أنهم غرباء من حيث المرونة ... ومع ذلك ، كنا مهتمين بحقيقة غريبة: واحد Nio في التكوين "للإصرار" (ليس الأسرع وليس الأصغر) سجل أكبر عدد من النقاط من حيث المرونة - 19/20. كما أن فرصة جعل التهيئة الافتراضية (السريعة والمدمجة) One Nio تعمل بشكل مرن تبدو جذابة للغاية - وكانت هناك طريقة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في البداية ، عندما قدمنا ​​المشاركين في المسابقة ، قيل أن </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (للإصرار) تم</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تضمينه في نتيجة التسلسل معلومات </font><i><font style="vertical-align: inherit;">وصفية</font></i><font style="vertical-align: inherit;"> تفصيلية </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حول فئة كائن Java القابل للتسلسل</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(*). </font><font style="vertical-align: inherit;">باستخدام هذه المعلومات الوصفية لإلغاء التسلسل ، تعرف مكتبة One Nio بالضبط ما تبدو عليه فئة الكائن القابل للتسلسل في وقت التسلسل. </font><font style="vertical-align: inherit;">على أساس هذه المعرفة أن خوارزمية One Nio deserialization مرنة للغاية بحيث توفر أقصى قدر من التوافق الناتج عن التسلسل </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
اتضح أنه يمكن الحصول على المعلومات الوصفية (*) بشكل منفصل للفئة المحددة ، وتسلسلها&nbsp; </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;وإرسالها إلى الجانب حيث سيتم إلغاء تسلسل كائنات Java من هذه الفئة:</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مع التعليمات البرمجية في الخطوات ...</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">//  №1:  -   SomeDto</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = Repository.get( SomeDto.class );<font></font>
<span class="hljs-keyword">byte</span>[] dtoMeta = serializeByDefaultOneNioAlgorithm( dtoSerializerWithMeta );<font></font>
//  №<span class="hljs-number">1</span>:  dtoMeta  №<span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">//  №2:  -    SomeDto      One Nio</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = deserializeByOneNio( dtoMeta );<font></font>
Repository.provideSerializer( dtoSerializerWithMeta );<font></font>
<font></font>
<span class="hljs-comment">//  №1:    SomeDto</span>
<span class="hljs-keyword">byte</span>[] bytes1 = serializeByDefaultOneNioAlgorithm( object1 );
<span class="hljs-keyword">byte</span>[] bytes2 = serializeByDefaultOneNioAlgorithm( object2 );<font></font>
...<font></font>
<span class="hljs-comment">//  №1:    №2</span><font></font>
<font></font>
<span class="hljs-comment">//  №2:      SomeDto</span><font></font>
SomeDto object1 = deserializeByOneNio( bytes1 );<font></font>
SomeDto object2 = deserializeByOneNio( bytes2 );<font></font>
...<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذا قمت بتنفيذ هذا الإجراء الصريح لتبادل المعلومات الوصفية حول الفئات بين الخدمات الموزعة ، فستكون هذه الخدمات قادرة على إرسال كائنات Java المتسلسلة إلى بعضها البعض باستخدام التكوين الافتراضي (السريع والمضغوط) One Nio. بعد كل شيء ، أثناء تشغيل الخدمات ، فإن إصدارات الفئات على جانبيها لم تتغير ، مما يعني أنه لا يوجد سبب "لسحب ذهابًا وإيابًا" للمعلومات الوصفية الثابتة داخل كل نتيجة تسلسل خلال كل تفاعل. وبالتالي ، بعد أن قمت بعمل أكثر قليلاً في البداية ، يمكنك استخدام سرعة وانضغاط </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio في</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> وقت واحد مع مرونة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (للاستمرار)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . بالضبط ما هو مطلوب! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نتيجة لذلك ، لنقل كائنات Java بين الخدمات الموزعة في شكل تسلسلي (هذا هو ما نظمناه هذه المسابقة)&nbsp;</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كان One Nio هو الفائز في المرونة</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(19/20). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من بين متسلقي جافا الذين ميزوا أنفسهم سابقًا في السباق والوزن ، لم تظهر المرونة السيئة:</font></font><br>
<br>
<ul>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(14.5 / 20) ،</font></font></li>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كريو</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (13/20).</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الركيزة</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تذكر نتائج مسابقات تسلسل جافا السابقة:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في السباقات ، تم تقسيم أول سطرين من التصنيف على </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (غير آمن)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في المركز الثالث </font><font style="vertical-align: inherit;">،</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هزم </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">واحد Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الوزن </font><font style="vertical-align: inherit;">، يليه </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ،</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">من حيث المرونة ، فقط </font><i><font style="vertical-align: inherit;">لمهمتنا</font></i><font style="vertical-align: inherit;"> لتبادل سياق الجلسة بين التطبيقات الموزعة ، ذهب </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مرة أخرى أولاً&nbsp; </font><font style="vertical-align: inherit;">، </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وفاز BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وبالتالي ، من حيث مجموع النتائج المحققة ، فإن القاعدة التي حصلنا عليها هي كما يلي:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
في المسابقة الرئيسية - السباقات - شارك المركز الأول مع </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (غير آمن)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، لكنه وزن المنافس بشكل كبير في الوزن واختبار المرونة.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (غير آمن)</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
أيضًا مكتبة تسلسل Java سريعة جدًا ، ومع ذلك ، فإنها تفتقر إلى التوافق المباشر والخلفي لصفيف البايت الناتج عن التسلسل.</font></font></li>
<li><strong>BSON MongoDB&nbsp;+&nbsp;Kryo</strong><br>
 2   3-      Java-,     .       2-   ,          .        <code>Collection</code>  <code>Map</code>,   <i>BSON MongoDB</i>     custom-  / (<code>Externalizable</code>  ..).</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في Sberbank ، في خدمة بيانات الجلسة ، استخدمنا مكتبة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، التي فازت بالمركز الأول في منافسينا. باستخدام هذه المكتبة ، تم إجراء تسلسل لبيانات سياق جلسة Java ونقلها بين التطبيقات. بفضل هذه المراجعة ، تسارعت سرعة نقل الجلسة عدة مرات. أظهر اختبار الحمل أنه في السيناريوهات القريبة من سلوك المستخدم الفعلي في Sberbank Online ، تم الحصول على تسريع يصل إلى 40٪ فقط بسبب هذا التحسين وحده. هذه النتيجة تعني تقليل وقت استجابة النظام لإجراءات المستخدم ، مما يزيد من درجة رضا عملائنا. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في المقالة التالية سأحاول أن أثبت </font><i><font style="vertical-align: inherit;">عمليًا</font></i><font style="vertical-align: inherit;"> التسارع الإضافي لـ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مستمدة من استخدام الفصل </font></font><code>sun.reflect.MagicAccessorImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">لسوء الحظ ، لا يدعم IBM JRE أهم خصائص هذه الفئة ، مما يعني أن الإمكانات الكاملة لـ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في هذا الإصدار من JRE لم يتم الكشف عنها بعد. </font><font style="vertical-align: inherit;">يتبع.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar488600/index.html">كيف يهتم مقدمو الخدمة بسلامة العملاء</a></li>
<li><a href="../ar488602/index.html">iOS MEETUP # 2 من FUNCORP وكيفية الحفاظ على تحديث مطور البرامج</a></li>
<li><a href="../ar488604/index.html">ملخص المواد الطازجة من عالم الواجهة الأمامية للأسبوع الماضي رقم 402 (10 - 16 فبراير 2020)</a></li>
<li><a href="../ar488608/index.html">"مجد ZHPSS!" أو تذكر GPSS World</a></li>
<li><a href="../ar488610/index.html">قصة شخص حساس للإشعاع الكهرومغناطيسي ، أو كيف نشعر حافة الهاوية ... UPD: + FAQ</a></li>
<li><a href="../ar488614/index.html">Bobbin 3.0.0 - مراجعة التحسينات</a></li>
<li><a href="../ar488616/index.html">مشكلة فارغة في علوم البيانات والتعلم الآلي</a></li>
<li><a href="../ar488618/index.html">ملخص المواد المثيرة للاهتمام لمطور الجوال رقم 333 (10 - 16 فبراير)</a></li>
<li><a href="../ar488622/index.html">هل تحل قائمة cheklists اللوائح؟</a></li>
<li><a href="../ar488624/index.html">الاقتصاد المتبادل</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>