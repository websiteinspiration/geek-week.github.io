<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóΩ üò• üòº Go, Vue e 3 dias para desenvolver: um sistema em tempo real para monitorar pacientes üë¶üèø üêû üë©üèª‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em novembro de 2019, as pessoas ouviram falar dos primeiros casos de uma doen√ßa mortal desconhecida na China. Agora todo mundo sabe que esta doen√ßa √© ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Go, Vue e 3 dias para desenvolver: um sistema em tempo real para monitorar pacientes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/501646/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em novembro de 2019, as pessoas ouviram falar dos primeiros casos de uma doen√ßa mortal desconhecida na China. </font><font style="vertical-align: inherit;">Agora todo mundo sabe que esta doen√ßa √© chamada COVID-19. </font><font style="vertical-align: inherit;">Aparentemente, a epidemia mudou para sempre o mundo que conhec√≠amos. </font><font style="vertical-align: inherit;">O v√≠rus √© perigoso e muito contagioso. </font><font style="vertical-align: inherit;">E a humanidade ainda n√£o sabe muito sobre isso. </font><font style="vertical-align: inherit;">Eu realmente espero que uma cura para esta doen√ßa seja encontrada em breve. </font><font style="vertical-align: inherit;">
A natureza do v√≠rus √© tal que √© muito dif√≠cil impedir a sua propaga√ß√£o. </font><font style="vertical-align: inherit;">No Sri Lanka, onde moro, enfrentamos a mesma situa√ß√£o que as pessoas de outros pa√≠ses. </font><font style="vertical-align: inherit;">Aqui, quero falar sobre como os programadores foram capazes de fornecer toda a assist√™ncia poss√≠vel √†queles que combatem a doen√ßa pessoalmente.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/up/8x/uw/up8xuwl64afjkhamgpr2cicrs8q.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Riscos relacionados ao atendimento ao paciente</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma pessoa pode ser infectada mesmo se cometer um pequeno erro. </font><font style="vertical-align: inherit;">Os m√©dicos periodicamente precisam visitar as enfermarias de isolamento infeccioso para verificar os sinais vitais dos pacientes. </font><font style="vertical-align: inherit;">Depois de visitar o centro de deten√ß√£o, roupas de prote√ß√£o devem ser destru√≠das. </font><font style="vertical-align: inherit;">E tudo isso √© apenas observar os indicadores exibidos nas telas dos dispositivos m√©dicos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Representantes das autoridades de sa√∫de nos dirigiram com uma proposta para desenvolver um sistema de monitoramento remoto de pacientes. </font><font style="vertical-align: inherit;">Existem solu√ß√µes de monitoramento prontas para uso que s√£o muito caras. </font><font style="vertical-align: inherit;">Mas o Sri Lanka n√£o √© um pa√≠s t√£o rico.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In√≠cio do trabalho</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, n√≥s (eu e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keshara</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) fizemos algumas pesquisas e descobrimos que os dispositivos que precisam ser retirados de indicadores, monitores de cabeceira, usam o protocolo HL7 comum (N√≠vel de Sa√∫de 7) para trocar dados m√©dicos (como indicadores vitais). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passamos algum tempo estudando esse protocolo. </font><font style="vertical-align: inherit;">Ele parecia um pouco estranho para n√≥s. </font><font style="vertical-align: inherit;">N√≥s nunca t√≠nhamos trabalhado com ele antes. </font><font style="vertical-align: inherit;">Para n√≥s, foi um novo desafio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° a apar√™ncia das mensagens HL7.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cbb/cef/4f4/cbbcef4f4da78fbeea17de45d85d595a.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pacote HL7</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Na se√ß√£o, os</font></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dados m√©dicos do paciente s√£o apresentados como mostrado abaixo. </font></font><code>&lt;CR&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Este</font></font><code>\r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© um caractere de avan√ßo de linha usado para separar mensagens.</font></font><br>
<br>
<pre><code class="go hljs">MSH|^~\&amp;|||||||ORU^R01|<span class="hljs-number">103</span>|P|<span class="hljs-number">2.3</span><span class="hljs-number">.1</span>|&lt;CR&gt;<font></font>
PID|||<span class="hljs-number">14140</span>f00<span class="hljs-number">-7</span>bbc<span class="hljs-number">-0478</span><span class="hljs-number">-11122</span>d2d02000000||WEERASINGHE^KESHARA||<span class="hljs-number">19960714</span>|M|&lt;CR&gt;<font></font>
PV1||I|^^ICU&amp;<span class="hljs-number">1</span>&amp;<span class="hljs-number">3232237756</span>&amp;<span class="hljs-number">4601</span>&amp;&amp;<span class="hljs-number">1</span>|||||||||||||||A|||&lt;CR&gt;<font></font>
OBR||||Mindray Monitor|||<span class="hljs-number">0</span>|&lt;CR&gt;<font></font>
OBX||NM|<span class="hljs-number">52</span>^||<span class="hljs-number">189.0</span>||||||F&lt;CR&gt;<font></font>
OBX||NM|<span class="hljs-number">51</span>^||<span class="hljs-number">100.0</span>||||||F&lt;CR&gt;<font></font>
OBX||ST|<span class="hljs-number">2301</span>^||<span class="hljs-number">2</span>||||||F&lt;CR&gt;<font></font>
OBX||CE|<span class="hljs-number">2302</span>^Blood||<span class="hljs-number">0</span>^N||||||F&lt;CR&gt;<font></font>
OBX||CE|<span class="hljs-number">2303</span>^Paced||<span class="hljs-number">2</span>^||||||F&lt;CR&gt;<font></font>
OBX||ST|<span class="hljs-number">2308</span>^BedNoStr||BED<span class="hljs-number">-001</span>||||||F&lt;CR&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece estranho, certo? </font><font style="vertical-align: inherit;">Pareceu-nos. </font><font style="vertical-align: inherit;">Ele usa o formato Pipehat. </font><font style="vertical-align: inherit;">O s√≠mbolo √© usado aqui para separar segmentos de dados </font></font><code>|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">N√£o vou falar muito sobre o pr√≥prio protocolo. </font><font style="vertical-align: inherit;">Existem muitos materiais na Internet sobre isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conseguimos encontrar boas bibliotecas para o processamento de mensagens HL7 escritas em diferentes idiomas.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que escolhemos Go?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° o que eles </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrevem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre Go: ‚ÄúGo ou Golang √© uma linguagem de tipo estat√≠stico cuja sintaxe √© baseada na sintaxe de C. Mas Go √© caracterizado por alguns recursos adicionais, como a presen√ßa de um coletor de lixo na linguagem (como em Java), trabalho seguro com tipos e alguns recursos para digita√ß√£o din√¢mica. Go foi desenvolvido pelo Google em 2007. A linguagem foi criada por um grupo de especialistas altamente qualificados. Estes s√£o Robert Griesmer, Rob Pike e Ken Thompson. ‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Go foi projetado com suporte para execu√ß√£o de c√≥digo multithread, os mecanismos correspondentes s√£o incorporados ao idioma. O Go possui os chamados goroutins e canais, cuja utiliza√ß√£o permite ao programador desenvolver, rapidamente e com o m√≠nimo esfor√ßo, programas com alto n√≠vel de paralelismo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, decidimos escolher Ir. </font><font style="vertical-align: inherit;">Se falarmos sobre o problema que nos confrontou, pensamos que, ao resolv√™-lo, ter√≠amos que lidar com a necessidade de trabalhar com uma infinidade de tarefas paralelas. </font><font style="vertical-align: inherit;">Al√©m disso, os execut√°veis ‚Äã‚Äãdo Go s√£o compilados estaticamente, o que simplifica a instala√ß√£o de programas nos computadores do hospital, eliminando a necessidade de atendimento a depend√™ncias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Procuramos boas bibliotecas para suportar o protocolo HL7 escrito em Go e, no final, achamos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adequado </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Seu autor, entre outras coisas, escreveu um bom </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">material</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre o HL7. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa biblioteca facilita muito o trabalho com mensagens HL7.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que escolhemos Vue?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do </font><font style="vertical-align: inherit;">Vue </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">,</font></a><font style="vertical-align: inherit;"> voc√™ pode descobrir o seguinte: ‚ÄúO Vue (pronunciado / vjuÀê /, aproximadamente como a vista) √© uma estrutura progressiva para criar interfaces de usu√°rio. </font><font style="vertical-align: inherit;">Diferentemente das estruturas monol√≠ticas, o Vue √© adequado para implanta√ß√£o gradual. ‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas ao uso do Vue, conseguimos criar facilmente interfaces reativas agrad√°veis. </font><font style="vertical-align: inherit;">Escolhemos o Vue porque √© uma ferramenta poderosa e conveniente para criar interfaces. </font><font style="vertical-align: inherit;">Al√©m disso, usamos o Vuetify como uma biblioteca de interface do usu√°rio.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitor de cabeceira</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de </font><font style="vertical-align: inherit;">estudarmos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o manual do</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mindray Bedside Monitor para programadores (existem muitos desses dispositivos no hospital, ent√£o escolhemos), criamos um pequeno prot√≥tipo para decodificar mensagens HL7. </font><font style="vertical-align: inherit;">O prot√≥tipo conseguiu decodificar corretamente as mensagens e convert√™-las corretamente para o formato JSON. </font><font style="vertical-align: inherit;">Fizemos isso usando a Interface de resultado n√£o solicitado descrita no manual.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f13/674/04a/f1367404a1b99d972d2ee01702d017c1.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mindray uMec10</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Mas quando t√≠nhamos um dispositivo real √† nossa disposi√ß√£o, ele se recusava a funcionar. </font><font style="vertical-align: inherit;">Depois disso, Keshara e eu come√ßamos a analisar pacotes no Wireshark, tentando descobrir o que o dispositivo estava realmente fazendo. </font><font style="vertical-align: inherit;">Como se viu, o dispositivo n√£o usou esse protocolo. </font><font style="vertical-align: inherit;">Ele usou a Interface de resultados em tempo real - uma interface bastante antiga que n√£o era mais suportada pelo fabricante.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recuperando mensagens de pacotes HL7</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja como recuperar mensagens HL7 dos dispositivos. </font><font style="vertical-align: inherit;">Usamos um objeto para esta tarefa </font></font><code>bufio.Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pois ela fornece ao desenvolvedor mecanismos eficientes de processamento de fluxo. </font><font style="vertical-align: inherit;">Em vez de acessar a camada de rede de cada vez, </font></font><code>Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nos permitiu ler com efici√™ncia dados de uma conex√£o TCP.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Device)</span> <span class="hljs-title">ProcessHL7Packet</span><span class="hljs-params">()</span> <span class="hljs-params">(hl7.Message, error)</span></span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   ,   0x0B</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;b, err := d.ReadByte()<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error reading start byte: %s"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> b != <span class="hljs-keyword">byte</span>(<span class="hljs-number">0x0B</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"invalid header"</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//  </span>
&nbsp;&nbsp;&nbsp;&nbsp;payloadWithDelimiter, err := d.ReadBytes(<span class="hljs-keyword">byte</span>(<span class="hljs-number">0x1C</span>))
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error reading payload: %s"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//       </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;b, err = d.ReadByte()<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error reading end byte %s"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> b != <span class="hljs-keyword">byte</span>(<span class="hljs-number">0x0D</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"invalid message end"</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   2  hl7-</span>
&nbsp;&nbsp;&nbsp;&nbsp;payload := payloadWithDelimiter[:<span class="hljs-built_in">len</span>(payloadWithDelimiter)<span class="hljs-number">-1</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;log.Debugf(<span class="hljs-string">"Length of payload %d\n"</span>, <span class="hljs-built_in">len</span>(payload))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;m, _, err := hl7.ParseMessage(payload)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error parsing hl7: %s\n"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> m, err<font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura do sistema</font></font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/658/799/2dc/6587992dc3561ae132316b7976733409.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura do sistema ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O sistema foi projetado para que, a longo prazo, funcione de maneira confi√°vel. Selecionamos cuidadosamente as melhores ferramentas para resolver os desafios que enfrentamos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escolhemos o PostgreSQL como DBMS, pois esse sistema √© est√°vel e confi√°vel. Ao usar o HA, voc√™ pode criar um sistema confi√°vel de armazenamento de dados para o sistema de monitoramento. Al√©m disso, o sistema que selecionamos suporta o processamento de grandes volumes de dados de entrada, o que foi uma vantagem para n√≥s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No futuro, usando o TimescaleDB, planejamos criar um sistema de an√°lise em tempo real. Como resultado, o PostgreSQL se tornou a escolha ideal, pois o TimescaleDB pode ser instalado no PostgreSQL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dividimos a API do Health 24 e o gateway do Health 24 com base em considera√ß√µes de gerenciamento do sistema. </font><font style="vertical-align: inherit;">Ao criar o gateway, buscamos compacidade e confiabilidade. </font><font style="vertical-align: inherit;">Gra√ßas ao uso do Golang, a solu√ß√£o desse problema foi f√°cil e agrad√°vel.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrando no mundo real</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os monitores de cabeceira relatam sua presen√ßa transmitindo mensagens UDP. </font><font style="vertical-align: inherit;">Precis√°vamos capturar e processar esses pacotes para extrair dados deles necess√°rios para organizar o acesso aos dispositivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando o Go, criamos um servi√ßo separado, projetado para detectar transmiss√µes UDP de broadcast e registrar novos dispositivos no sistema. </font><font style="vertical-align: inherit;">O pr√≥ximo passo no nosso trabalho foi conectar dispositivos ao gateway. </font><font style="vertical-align: inherit;">Criamos no Go outro servi√ßo projetado para oferecer suporte √†s conex√µes TCP correspondentes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f3/01c/b1d/3f301cb1d8403751ef87849035769fb9.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descoberta de dispositivos</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Como o gateway precisava se conectar ao dispositivo como um cliente, tivemos que coordenar e desconectar os dispositivos. </font><font style="vertical-align: inherit;">Al√©m disso, o status de cada monitor precisava ser monitorado no gateway. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atrav√©s do uso</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de canais</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Go, podemos facilmente armazenar dados relevantes em um banco de dados PostgreSQL para an√°lise posterior. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os canais permitem que voc√™ organize uma intera√ß√£o conveniente entre goroutines. </font><font style="vertical-align: inherit;">Us√°-los foi muito conveniente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Minha experi√™ncia com o projeto</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© um banco de dados baseado em mem√≥ria compat√≠vel com Redis, foi √∫til para resolver as v√°rias dificuldades que nos enfrentaram no decorrer de nosso trabalho.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sa√≠da em tempo real de sinais vitais</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao desenvolver a parte do servidor do projeto, tamb√©m lidamos com a parte do cliente. Destina-se a m√©dicos e visa demonstrar dados lidos em monitores de cabeceira. O frontend foi ocupado principalmente por Keshara. Como resultado, uma interface de sistema muito boa foi criada em apenas 3 dias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuetify</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , criamos um layout de interface que parecia a interface de um monitor de cabeceira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para gerenciar o estado do aplicativo, usamos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e desenvolvemos um servi√ßo de alerta que leva em considera√ß√£o a prioridade das tarefas, que √© usada para alertar a equipe do hospital em caso de situa√ß√µes perigosas. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Combinamos</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
a API e o front-end usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Socket.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o que nos permitiu criar um canal de comunica√ß√£o eficaz, cujos dados s√£o transmitidos em tempo real. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quero agradecer novamente a Keshara pelo excelente trabalho no frontend.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a17/fe5/b90/a17fe5b9066bd99b7d8847f41ad461ce.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Painel em tempo real</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implanta√ß√£o do sistema</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os monitores de cabeceira enviam grandes quantidades de dados para a rede. </font><font style="vertical-align: inherit;">Decidimos usar uma VLAN separada para os dispositivos e outra VLAN para a API. </font><font style="vertical-align: inherit;">O objetivo disso era permitir o processamento confi√°vel do tr√°fego sem criar congestionamentos na rede hospitalar. </font><font style="vertical-align: inherit;">Al√©m disso, fomos assistidos por nossos professores universit√°rios, Dr. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asitha Bandaranaike</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sunet Namal Karunaratna</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas ao seu apoio, conseguimos estabelecer uma rede confi√°vel. </font><font style="vertical-align: inherit;">Em seguida, lan√ßamos o Ubuntu 18.04 no servidor e come√ßamos a implantar o sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keshara fez muito nessa √°rea, arriscando contratar o COVID-19 no hospital.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/922/b52/fd4/922b52fd43cfa193a6bdf9f45ac7e1a7.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keshara est√° implantando um sistema em um hospital</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o do sistema em produ√ß√£o</font></font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui est√° um</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> v√≠deo mostrando </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">como</font></a><font style="vertical-align: inherit;"> trabalhar com o sistema.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0d/e40/c34/b0de40c34813ac536d1929955ae6d26a.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dr. Wikramasinghe testa o sistema</font></font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7dc/8f5/5d1/7dc8f55d188994cf38514fb6142ae575.jpg"></div><br>
<i><font color="#999999">      </font></i><br>
<br>
<h2><font color="#3AC1EF">    </font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criamos o complexo do programa acima, a pedido de representantes das autoridades de sa√∫de. Este projeto n√£o √© comercial. Mesmo levando em considera√ß√£o a presen√ßa desse sistema no hospital, √© altamente recomend√°vel que os m√©dicos visitem os pacientes e verifiquem pessoalmente seus sinais vitais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como esse complexo foi desenvolvido muito rapidamente, em uma pandemia, n√≥s o liberamos, equipando-o apenas com o mais importante: a capacidade de monitorar. Al√©m disso, realizamos seus longos testes, usando muitos dispositivos durante os testes. At√© agora, ele se mostrou bom. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o indica que criamos um sistema que j√° √© imposs√≠vel de melhorar. Trabalhamos constantemente para aprimor√°-lo e corrigir erros, alcan√ßando alta estabilidade do sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, devemos advertir os m√©dicos de que eles devem usar este sistema com cautela.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trabalhadores m√©dicos na vanguarda da batalha contra o v√≠rus trabalham sem descanso. </font><font style="vertical-align: inherit;">Devemos fornecer a eles toda a assist√™ncia poss√≠vel. </font><font style="vertical-align: inherit;">N√≥s, estudantes de tecnologia da computa√ß√£o, fizemos todo o poss√≠vel para apoi√°-los. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema de monitoramento remoto da condi√ß√£o dos pacientes permite solucionar alguns problemas sem contato direto com os pacientes, o que significa que ajuda os m√©dicos a realizar seu trabalho com mais efici√™ncia e seguran√ßa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agradecemos a todos que desenvolveram maravilhosas ferramentas e bibliotecas de c√≥digo aberto, sem as quais nosso projeto n√£o estaria destinado a ver a luz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A decis√£o de usar Golang foi uma id√©ia brilhante. </font><font style="vertical-align: inherit;">O uso dessa linguagem nos permitiu criar um sistema muito est√°vel em apenas alguns dias. </font><font style="vertical-align: inherit;">O mesmo pode ser dito de Vue. </font><font style="vertical-align: inherit;">Gra√ßas a essa estrutura, conseguimos criar rapidamente uma interface de alta qualidade e f√°cil de usar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juntos, podemos derrotar o COVID-19. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como voc√™ construiria um sistema semelhante ao descrito neste artigo?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501632/index.html">5 bibliotecas JavaScript para trabalhar com strings</a></li>
<li><a href="../pt501634/index.html">Fun√ß√µes CSS min (), max () e clamp ()</a></li>
<li><a href="../pt501636/index.html">Como implantar o cluster Kubernetes em Morpheus em 30 minutos</a></li>
<li><a href="../pt501642/index.html">Qual √© o melhor: confirma√ß√£o da a√ß√£o ou a possibilidade de seu cancelamento?</a></li>
<li><a href="../pt501644/index.html">An√°lise de desempenho de anima√ß√£o CSS</a></li>
<li><a href="../pt501648/index.html">10 extens√µes para o VS Code, sem as quais n√£o posso programar</a></li>
<li><a href="../pt501650/index.html">O que h√° dentro de um arquivo .wasm? Apresentando wasm-decompile</a></li>
<li><a href="../pt501652/index.html">Nuxt como servidor fullstack: servidor API de front-end + back-end (parte 1)</a></li>
<li><a href="../pt501654/index.html">Crie processos de trabalho em um site remoto: recomenda√ß√µes pr√°ticas</a></li>
<li><a href="../pt501656/index.html">Desenvolvimento de uma biblioteca corporativa de componentes React. Abordagem multiplataforma</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>