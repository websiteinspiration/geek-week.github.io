<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òîÔ∏è ‚è∫Ô∏è ü•® Acerca de las copias de seguridad en Proxmox VE ü¶Ä üë≤ üôçüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el art√≠culo "La magia de la virtualizaci√≥n: un curso introductorio en Proxmox VE", instalamos con √©xito un hipervisor en el servidor, conectamos el...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Acerca de las copias de seguridad en Proxmox VE</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/486194/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/wt/vx/xu/wtvxxuyee73gugficymc7t4x0zm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el art√≠culo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"La magia de la virtualizaci√≥n: un curso introductorio en Proxmox VE",</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> instalamos con √©xito un hipervisor en el servidor, conectamos el almacenamiento, nos ocupamos de la seguridad b√°sica e incluso creamos la primera m√°quina virtual. Ahora veremos c√≥mo implementar las tareas m√°s b√°sicas que debe realizar para poder siempre restaurar los servicios en caso de falla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las herramientas Proxmox establecidas le permiten no solo hacer una copia de seguridad de los datos, sino tambi√©n crear conjuntos de im√°genes preconfiguradas de sistemas operativos para una implementaci√≥n r√°pida. Esto no solo ayuda si es necesario para crear un nuevo servidor para cualquier servicio en unos segundos, sino que tambi√©n reduce el tiempo de inactividad al m√≠nimo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No hablaremos sobre la necesidad de crear copias de seguridad, ya que esto es obvio y ha sido durante mucho tiempo un axioma. </font><font style="vertical-align: inherit;">Deteng√°monos en algunas cosas y caracter√≠sticas no obvias.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, considere c√≥mo se guardan los datos durante el procedimiento de copia de seguridad.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmos de respaldo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para empezar, Proxmox tiene un buen conjunto de herramientas de personal para crear copias de seguridad de m√°quinas virtuales. </font><font style="vertical-align: inherit;">Le permite guardar f√°cilmente todos los datos de la m√°quina virtual y admite dos mecanismos de compresi√≥n, as√≠ como tres m√©todos para crear estas copias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinemos primero los mecanismos de compresi√≥n:</font></font><br>
<br>
<ol>
<li><b> LZO</b>.     ,     90- .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> (  Proxmox  lzop).        . ,   ,     ,        .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comprimiendo el GZIP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Usando este algoritmo, la copia de seguridad se comprimir√° sobre la marcha con la utilidad GNU Zip, que utiliza el poderoso algoritmo Deflate creado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phil Katz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El √©nfasis principal est√° en la compresi√≥n de datos m√°xima, que reduce el espacio en disco ocupado por las copias de seguridad. </font><font style="vertical-align: inherit;">La principal diferencia con LZO es que los procedimientos de compresi√≥n / descompresi√≥n requieren una cantidad de tiempo bastante grande.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modos de archivo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proxmox ofrece tres m√©todos de respaldo para que el administrador del sistema pueda elegir. </font><font style="vertical-align: inherit;">Utiliz√°ndolos, puede resolver el problema requerido determinando la prioridad entre la necesidad de tiempo de inactividad y la confiabilidad de la copia de seguridad:</font></font><br>
<br>
<ol>
<li><b> Snapshot ()</b>.       Live backup,          .       VM,       ‚Äî    -         .  ,   ,      .     ,     ,    .</li>
<li><b> Suspend ()</b>.    ¬´¬ª  ,     .     ,        ,     . ,        ,    /  ,      . ,       .              .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo de parada</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El m√©todo de respaldo m√°s confiable, pero que requiere un apagado completo de la m√°quina virtual. </font><font style="vertical-align: inherit;">Se env√≠a un comando para apagar normalmente, despu√©s de detenerse, se realiza una copia de seguridad y luego se emite un comando para encender la m√°quina virtual. </font><font style="vertical-align: inherit;">El n√∫mero de errores con este enfoque es m√≠nimo y la mayor√≠a de las veces se reduce a cero. </font><font style="vertical-align: inherit;">Las copias de seguridad creadas de esta manera casi siempre se implementan correctamente.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realizar el procedimiento de respaldo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hacer copias de seguridad:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pasamos a la m√°quina virtual necesaria.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seleccione el elemento de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reserva</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haga clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reservar ahora</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se abrir√° una ventana en la que puede seleccionar las opciones para la futura copia de seguridad.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/et/gn/fu/etgnfuz7yjw9dohf4ktcvphtxry.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como almacenamiento indicamos el que conectamos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la parte anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de seleccionar los par√°metros, haga clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copia de seguridad</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y espere hasta que se cree la copia de seguridad. </font><font style="vertical-align: inherit;">Esto se indicar√° con la inscripci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TAREA OK</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/u-/8i/pc/u-8ipc1amu1z51u4ibgh9tjxs-o.png"></div><br>
</li>
</ol><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los archivos ahora creados con copias de seguridad de m√°quinas virtuales estar√°n disponibles para descargar desde el servidor. </font><font style="vertical-align: inherit;">La forma m√°s simple y m√°s com√∫n de copiar es SFTP. </font><font style="vertical-align: inherit;">Para hacer esto, use el popular cliente FTP multiplataforma FileZilla, que puede funcionar usando el protocolo SFTP.</font></font><br>
<br>
<ol>
<li>  <b></b>  IP-   ,   <b> </b>  root,   <b></b> ‚Äî ,     ,    <b></b>  ¬´22¬ª (   ,     SSH-).</li>
<li>  <b> </b> ,      ,        ,   .</li>
<li>   <b>/mnt/storage</b>.         ¬´dump¬ª.    :<ul>
<li><b>vzdump-qemu-_--.vma.gz</b>     GZIP;</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vzdump-qemu-machine_number-date-time.vma.lzo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si se selecciona el m√©todo LZO.</font></font></li>
</ul></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se recomienda que descargue las copias de seguridad inmediatamente del servidor y las guarde en un lugar seguro, por ejemplo, en nuestro almacenamiento en la nube. </font><font style="vertical-align: inherit;">Si descomprime un archivo con resoluci√≥n vma, la utilidad del mismo nombre que viene incluida con Proxmox, entonces los archivos con las extensiones </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raw</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estar√°n dentro </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Estos archivos contienen lo siguiente:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cruda</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> imagen de disco -;</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : configuraci√≥n de VM;</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : configuraci√≥n del firewall.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reinstalar desde el respaldo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere la situaci√≥n en la que la m√°quina virtual se elimin√≥ accidentalmente y se requiere su recuperaci√≥n de emergencia de la copia de seguridad:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abra el almacenamiento en el que se encuentra la copia de seguridad.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vaya a la pesta√±a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenido</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seleccione la copia deseada y haga clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restaurar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bg/ou/ts/bgoutsyb4clkt_qx4xy88avgtqq.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especificamos el almacenamiento de destino y la ID que se asignar√° a la m√°quina despu√©s de que se complete el proceso.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haz clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restaurar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez que se complete la recuperaci√≥n, la VM aparecer√° en la lista de disponibles.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clonaci√≥n de m√°quinas virtuales.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, suponga que una empresa necesita realizar cambios en un servicio cr√≠tico. </font><font style="vertical-align: inherit;">Tal cambio se implementa haciendo muchos cambios en los archivos de configuraci√≥n. </font><font style="vertical-align: inherit;">El resultado es impredecible y cualquier error puede causar una falla en el servicio. </font><font style="vertical-align: inherit;">Para evitar que dicho experimento afecte a un servidor en ejecuci√≥n, se recomienda que clone la m√°quina virtual.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mecanismo de clonaci√≥n crear√° una copia exacta del servidor virtual con el que est√° permitido realizar cambios sin afectar el funcionamiento del servicio principal. Luego, si los cambios se aplican con √©xito, la nueva VM se inicia y la anterior se apaga. Hay una caracter√≠stica en este proceso que siempre debe recordarse. En la m√°quina clonada, la direcci√≥n IP ser√° exactamente la misma que la VM de origen, es decir, cuando se inicie, habr√° un conflicto de direcciones.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diremos c√≥mo evitar tal situaci√≥n. Inmediatamente antes de realizar la clonaci√≥n, debe realizar cambios en la configuraci√≥n de la red. Para hacer esto, debe cambiar temporalmente la direcci√≥n IP, pero no reiniciar el servicio de red. Despu√©s de clonar en la m√°quina principal, debe devolver la configuraci√≥n y, en la m√°quina clonada, especificar cualquier otra direcci√≥n IP. Por lo tanto, obtenemos dos copias del mismo servidor en diferentes direcciones. Esto introducir√° r√°pidamente un nuevo servicio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si este servicio es un servidor web, solo necesita cambiar el registro A de su proveedor de DNS, despu√©s de lo cual las solicitudes del cliente para este nombre de dominio ya se enviar√°n a la direcci√≥n de la m√°quina virtual clonada.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por cierto, Selectel ofrece a todos sus clientes el servicio de colocar cualquier n√∫mero de dominios en servidores NS de forma gratuita. </font><font style="vertical-align: inherit;">La gesti√≥n de registros se lleva a cabo utilizando nuestro panel de control y una API especial. </font><font style="vertical-align: inherit;">Lea m√°s sobre esto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en nuestra base de conocimiento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clonar una VM en Proxmox es una tarea muy simple. </font><font style="vertical-align: inherit;">Para realizarlo, debe realizar los siguientes pasos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ve al auto que necesitamos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elija del men√∫ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√°s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clonar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la ventana que se abre, complete el par√°metro Nombre.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3n/on/wn/3nonwng-06gxpllialr7u_9ck2m.png"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clone presionando el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clone</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta herramienta le permite hacer una copia de una m√°quina virtual no solo en el servidor local. </font><font style="vertical-align: inherit;">Si se combinan varios servidores de virtualizaci√≥n en un cl√∫ster, con esta herramienta puede mover inmediatamente la copia creada al servidor f√≠sico deseado. </font><font style="vertical-align: inherit;">Una funci√≥n √∫til es la elecci√≥n del almacenamiento en disco (par√°metro </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target Storage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), que es muy conveniente al mover una m√°quina virtual de un medio f√≠sico a otro.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formatos de unidad virtual</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le informaremos m√°s sobre los formatos de unidad utilizados en Proxmox:</font></font><br>
<br>
<ol>
<li><b>RAW</b>.     .       ¬´  ¬ª    .    ,       mount   linux-.      ¬´¬ª ,        .<br>
<br>
     ,        ,             RAW (        ).</li>
<li><b>QEMU image format (qcow2)</b>. ,       .    ,             . ,    40  ,      2 ,         VM.        .<br>
<br>
       :        ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  nbd</a>,     <b>qemu-nbd</b>,            .       ,   ,       .<br>
<br>
 ,    -      ,           .        ,     RAW.</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formato de imagen de VMware (vmdk)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Este formato es nativo del hipervisor VMware vSphere y se ha incluido con Proxmox por compatibilidad. </font><font style="vertical-align: inherit;">Le permite migrar una m√°quina virtual VMware a la infraestructura de Proxmox. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No se recomienda usar vmdk de forma continua, este formato es el m√°s lento en Proxmox, por lo que es adecuado solo para la migraci√≥n, no m√°s. </font><font style="vertical-align: inherit;">Probablemente en el futuro previsible se eliminar√° esta deficiencia.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabaja con im√°genes de disco</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con Proxmox se incluye una utilidad muy conveniente llamada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qemu-img</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Una de sus funciones es convertir im√°genes de discos virtuales. </font><font style="vertical-align: inherit;">Para usarlo, simplemente abra la consola del hipervisor y ejecute el comando en el formato:</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img convert -f vmdk test.vmdk -O qcow2 test.qcow2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el ejemplo anterior, la imagen vmdk de la unidad virtual VMware llamada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prueba</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se convertir√° al formato </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qcow2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Este es un comando muy √∫til cuando necesita corregir un error en la selecci√≥n de formato inicial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias al mismo comando, puede forzar la imagen deseada usando el argumento </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img create -f raw test.raw 40G</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tal comando crear√° una imagen de prueba en formato </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAW</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , de 40 GB de tama√±o. </font><font style="vertical-align: inherit;">Ahora es adecuado para conectarse a cualquiera de las m√°quinas virtuales.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambiar el tama√±o de un disco virtual</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conclusi√≥n, mostraremos c√≥mo aumentar el tama√±o de una imagen de disco si, por alguna raz√≥n, el espacio en ella ya no es suficiente. </font><font style="vertical-align: inherit;">Para hacer esto, use el argumento de cambio de tama√±o:</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img resize -f raw test.raw 80G</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora nuestra imagen se ha convertido en el tama√±o de 80 GB. </font><font style="vertical-align: inherit;">Puede ver informaci√≥n detallada sobre la imagen utilizando el argumento de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informaci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img info test.raw</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No olvide que la extensi√≥n de la imagen en s√≠ no aumentar√° el tama√±o de la partici√≥n autom√°ticamente, simplemente agregar√° el espacio libre disponible. </font><font style="vertical-align: inherit;">Para ampliar la secci√≥n, use el comando:</font></font><br>
<br>
<pre><code class="plaintext hljs">resize2fs /dev/sda1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
donde </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ dev / sda1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es la partici√≥n deseada.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatizar copias de seguridad</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El uso del m√©todo manual de creaci√≥n de copias de seguridad es una tarea que requiere mucho tiempo y lleva mucho tiempo. </font><font style="vertical-align: inherit;">Por lo tanto, Proxmox VE incluye una herramienta para copias de seguridad programadas autom√°ticas. </font><font style="vertical-align: inherit;">Considere c√≥mo hacer esto:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando la interfaz web del hipervisor, abra el elemento </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Centro de datos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seleccione el elemento de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reserva</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haz clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Establecemos los par√°metros para el planificador.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/5d/a0/tu/5da0tunglle5mwsvudggbwjyuhc.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marque la casilla </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habilitar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guarde los cambios con el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora el planificador iniciar√° autom√°ticamente el programa de respaldo a la hora exacta especificada, seg√∫n el cronograma especificado.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideramos m√©todos regulares de respaldo y recuperaci√≥n de m√°quinas virtuales. Su uso le permite guardar todos los datos sin ning√∫n problema y restaurarlos urgentemente en caso de emergencia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, esta no es la √∫nica forma posible de guardar datos importantes. Existen muchas herramientas, por ejemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Duplicity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , con las cuales puede crear copias completas e incrementales de los contenidos de servidores virtuales basados ‚Äã‚Äãen Linux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al realizar procedimientos de copia de seguridad, siempre debe considerar que est√°n cargando activamente el subsistema de disco. </font><font style="vertical-align: inherit;">A este respecto, se recomienda realizar estos procedimientos en momentos de carga m√≠nima para evitar demoras al realizar operaciones de E / S dentro de las m√°quinas. </font><font style="vertical-align: inherit;">Puede controlar el estado de los retrasos en la operaci√≥n del disco directamente desde la interfaz web del hipervisor (par√°metro de retraso IO).</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es486194/">https://habr.com/ru/post/es486194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es486184/index.html">C√≥mo usar la b√∫squeda de manera efectiva</a></li>
<li><a href="../es486186/index.html">Nube catastr√≥fica: c√≥mo funciona</a></li>
<li><a href="../es486188/index.html">Presentaci√≥n del sistema de copia de seguridad wal-g de PostgreSQL</a></li>
<li><a href="../es486190/index.html">Nuestra experiencia en el desarrollo de un controlador CSI en Kubernetes para Yandex.Cloud</a></li>
<li><a href="../es486192/index.html">Los estafadores cibern√©ticos piratean a los operadores m√≥viles para obtener n√∫meros de tel√©fono de suscriptores</a></li>
<li><a href="../es486198/index.html">Hablar es dif√≠cil. Ensayos sobre comunicaci√≥n con no programadores</a></li>
<li><a href="../es486200/index.html">Consejos de Docker: limpie su m√°quina de basura</a></li>
<li><a href="../es486202/index.html">Alpine recoge las construcciones de Docker bajo Python 50 veces m√°s lento, y las im√°genes son 2 veces m√°s pesadas</a></li>
<li><a href="../es486204/index.html">Profesi√≥n: Administrador del sistema</a></li>
<li><a href="../es486206/index.html">¬øQu√© tipos de fraude he encontrado en freelance y outsourcing?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>