<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ„ ğŸ‘©ğŸ¼â€ğŸ³ ğŸ¿ï¸ PVS-Studioåˆ†æä»ªRunUOæ£€æŸ¥ ğŸ¤§ â˜ğŸ¼ ğŸ‘¨ğŸ¾â€ğŸŒ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡è‡´åŠ›äºä½¿ç”¨PVS-Studioé™æ€åˆ†æå™¨æ£€æŸ¥RunUOé¡¹ç›®ã€‚RunUOæ˜¯Ultima Onlineçš„æœåŠ¡å™¨è½¯ä»¶ä»¿çœŸå™¨ï¼Œè¯¥æ¸¸æˆæ›¾ä¸€åº¦èµ¢å¾—äº†è®¸å¤šMMORPGç²‰ä¸çš„å…³æ³¨ã€‚
 
 ä»‹ç»
 RunUOæ˜¯MMORPG Ultima Onlineçš„æœåŠ¡å™¨è½¯ä»¶æ¨¡æ‹Ÿå™¨ã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯åˆ›å»ºç¨³å®šçš„è½¯ä»¶ï¼Œä½¿å…¶èƒ½å¤Ÿä¸EA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PVS-Studioåˆ†æä»ªRunUOæ£€æŸ¥</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/487106/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/pk/vz/nb/pkvznbl6d22oijuluuu2xfoztcs.png" alt="å›¾ç‰‡1"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬æ–‡è‡´åŠ›äºä½¿ç”¨PVS-Studioé™æ€åˆ†æå™¨æ£€æŸ¥RunUOé¡¹ç›®ã€‚</font><font style="vertical-align: inherit;">RunUOæ˜¯Ultima Onlineçš„æœåŠ¡å™¨è½¯ä»¶ä»¿çœŸå™¨ï¼Œè¯¥æ¸¸æˆæ›¾ä¸€åº¦èµ¢å¾—äº†è®¸å¤šMMORPGç²‰ä¸çš„å…³æ³¨ã€‚</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»‹ç»</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RunUO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯MMORPG Ultima Onlineçš„æœåŠ¡å™¨è½¯ä»¶æ¨¡æ‹Ÿå™¨ã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯åˆ›å»ºç¨³å®šçš„è½¯ä»¶ï¼Œä½¿å…¶èƒ½å¤Ÿä¸EA Gamesçš„å®˜æ–¹æœåŠ¡å™¨ç«äº‰ã€‚ RunUOæ—©åœ¨2002å¹´å°±åˆ›å»ºäº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¤±å»ç›¸å…³æ€§ï¼Œå¹¶ä¸”ä¸€ç›´æ´»è·ƒåˆ°ä»Šå¤©ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡¹ç›®éªŒè¯çš„ç›®çš„æ˜¯æ™®åŠé™æ€åˆ†æçš„ä¸»é¢˜ã€‚æˆ‘ä»¬æ£€æŸ¥å„ç§é¡¹ç›®-æ¸¸æˆï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œåº“ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼ŒMessengerï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œæµè§ˆå™¨ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ä»¥åŠæ›´å¤šå†…å®¹ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ä»¥å¸å¼•å¤šå…ƒåŒ–çš„å—ä¼—ã€‚é€šè¿‡è¿™äº›æ–‡ç« ï¼Œæˆ‘ä»¬è¯•å›¾å¸å¼•äººä»¬æ³¨æ„åœ¨å¼€å‘ä¸­ä½¿ç”¨é™æ€åˆ†æçš„é‡è¦æ€§ã€‚é™æ€åˆ†æä½¿ä»£ç æ›´å¯é ï¼Œæ›´å®‰å…¨ã€‚åŒæ ·ï¼Œé€šè¿‡å¸¸è§„ä½¿ç”¨ï¼Œæ‚¨å¯ä»¥å°½æ—©å‘ç°å¹¶æ¶ˆé™¤é”™è¯¯ã€‚è¿™èŠ‚çœäº†å¼€å‘äººå‘˜çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå› ä¸ºæ²¡æœ‰äººæ„¿æ„èŠ±è´¹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50ä¸ªå°æ—¶æ¥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯»æ‰¾åˆ†æä»ªå¯ä»¥æ‰¾åˆ°çš„é”™è¯¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬è¿˜å¸®åŠ©å¼€æºç¤¾åŒºã€‚</font><font style="vertical-align: inherit;">é€šè¿‡å‘ç°é”™è¯¯çš„æ–‡ç« ï¼Œæˆ‘ä»¬ä¸ºå¼€æºçš„å‘å±•åšå‡ºäº†è´¡çŒ®ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šåˆ†ææ‰€æœ‰è­¦å‘Šã€‚</font><font style="vertical-align: inherit;">æœ‰äº›è­¦å‘Šä¼¼ä¹å¤ªæ— èŠï¼Œä»¥è‡³äºæˆ‘ä»¬æ— æ³•è¿›å…¥æœ¬æ–‡ï¼Œæœ‰äº›è­¦å‘Šè¢«è¯æ˜æ˜¯è¯¯æŠ¥ï¼Œç­‰ç­‰ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘ä»¬å‡†å¤‡</font><font style="vertical-align: inherit;">ä¸ºå¼€æºé¡¹ç›®</font><font style="vertical-align: inherit;">æä¾›</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…è´¹è®¸å¯è¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è€Œä¸”ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œè®©æœ¬æ–‡æ„Ÿåˆ°æ— èŠçš„å†…å®¹å¯¹äºæ­£åœ¨æµ‹è¯•çš„é¡¹ç›®çš„å¼€å‘äººå‘˜æ¥è¯´ä¼¼ä¹å¾ˆæœ‰è¶£ï¼Œå› ä¸ºè¯¥é¡¹ç›®çš„å¼€å‘äººå‘˜ä»ç„¶æ›´åŠ äº†è§£å“ªäº›é—®é¢˜æœ€ä¸ºå…³é”®ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ£€æŸ¥åˆ†æå™¨æŠ¥å‘Šæ—¶å¼•èµ·æ³¨æ„çš„ä»£ç æ®µ</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3010éœ€è¦ä½¿ç”¨åŠŸèƒ½â€œ Internâ€çš„è¿”å›å€¼ã€‚</font><font style="vertical-align: inherit;">BasePaintedMask.cs 49</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> <span class="hljs-title">Intern</span>(<span class="hljs-params"> <span class="hljs-keyword">string</span> str </span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> ( str == <span class="hljs-literal">null</span> )
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( str.Length == <span class="hljs-number">0</span> )
    <span class="hljs-keyword">return</span> String.Empty;<font></font>
<font></font>
  <span class="hljs-keyword">return</span> String.Intern( str );<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BasePaintedMask</span>(<span class="hljs-params"> <span class="hljs-keyword">string</span> staffer, <span class="hljs-keyword">int</span> itemid </span>)
                            : <span class="hljs-title">base</span>(<span class="hljs-params"> itemid + Utility.Random( <span class="hljs-number">2</span> </span>) )</span><font></font>
{<font></font>
  m_Staffer = staffer;<font></font>
<font></font>
  Utility.Intern( m_Staffer );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ†æå™¨æŒ‡å‡ºï¼Œä»»ä½•åœ°æ–¹</font><font style="vertical-align: inherit;">
éƒ½</font><font style="vertical-align: inherit;">ä¸ä¼šè€ƒè™‘</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internï¼ˆï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•çš„è¿”å›å€¼</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯æˆ–å†—ä½™ä»£ç ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3017æ£€æµ‹åˆ°ä¸€ä¸ªæ¨¡å¼ï¼šï¼ˆé¡¹ç›®ä¸ºBasePotionï¼‰|| </font><font style="vertical-align: inherit;">ï¼ˆï¼ˆé¡¹ç›®ä¸ºBasePotionï¼‰&amp;&amp; ...ï¼‰ã€‚</font><font style="vertical-align: inherit;">è¡¨è¾¾å¼è¿‡å¤šæˆ–åŒ…å«é€»è¾‘é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">ç¬¬137ç« </font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsBuggable</span>(<span class="hljs-params"> Item item </span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> ( item <span class="hljs-keyword">is</span> Fists )
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> ( item <span class="hljs-keyword">is</span> ICommodity || item <span class="hljs-keyword">is</span> Multis.BaseBoat<font></font>
    || item <span class="hljs-keyword">is</span> Fish || item <span class="hljs-keyword">is</span> BigFish<font></font>
    || item <span class="hljs-keyword">is</span> BasePotion || item <span class="hljs-keyword">is</span> Food || item <span class="hljs-keyword">is</span> CookableFood<font></font>
    || item <span class="hljs-keyword">is</span> SpecialFishingNet || item <span class="hljs-keyword">is</span> BaseMagicFish<font></font>
    || item <span class="hljs-keyword">is</span> Shoes || item <span class="hljs-keyword">is</span> Sandals<font></font>
    || item <span class="hljs-keyword">is</span> Boots || item <span class="hljs-keyword">is</span> ThighBoots<font></font>
    || item <span class="hljs-keyword">is</span> TreasureMap || item <span class="hljs-keyword">is</span> MessageInABottle<font></font>
    || item <span class="hljs-keyword">is</span> BaseArmor || item <span class="hljs-keyword">is</span> BaseWeapon<font></font>
    || item <span class="hljs-keyword">is</span> BaseClothing<font></font>
    || ( item <span class="hljs-keyword">is</span> BaseJewel &amp;&amp; Core.AOS )<font></font>
    || ( item <span class="hljs-keyword">is</span> BasePotion &amp;&amp; Core.ML )<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰å¯ä»¥ç®€åŒ–çš„å­è¡¨è¾¾å¼ã€‚</font><font style="vertical-align: inherit;">æˆ‘å°†å®ƒä»¬å†™å‡ºæ¥ä»¥ä¾¿æ›´æ¸…æ¥šï¼š</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (item <span class="hljs-keyword">is</span> BasePotion || ( item <span class="hljs-keyword">is</span> BasePotion &amp;&amp; Core.ML ))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡è®¾ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº§å“BasePotion =ä¸ºçœŸ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™æ¡ä»¶ä¸ºçœŸï¼Œå°½ç®¡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Core.ML</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœè¯¥é¡¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºBasePotion =</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™æ¡ä»¶ä¸ºfalseï¼Œæ— è®ºå€¼</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Core.MLä¸ºä½•</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¿™æ ·çš„ä»£ç é€šå¸¸åªæ˜¯ç®€å•çš„å†—ä½™ï¼Œä½†æ˜¯ï¼Œå½“ç¨‹åºå‘˜çŠ¯äº†ä¸€ä¸ªé”™è¯¯å¹¶åœ¨ç¬¬äºŒä¸ªå­è¡¨è¾¾å¼ä¸­å†™å…¥äº†é”™è¯¯çš„å˜é‡æ—¶ï¼Œæƒ…å†µæ›´ç³Ÿã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3031è¿‡åº¦æ£€æŸ¥å¯ä»¥ç®€åŒ–ã€‚</font><font style="vertical-align: inherit;">â€œ ||â€ </font><font style="vertical-align: inherit;">è¿ç®—ç¬¦è¢«ç›¸åçš„è¡¨è¾¾å¼'bPlayerOnly'å’Œ'ï¼bPlayerOnly'åŒ…å›´ã€‚</font><font style="vertical-align: inherit;">BaseCreature.cs 3005</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">double</span> <span class="hljs-title">GetFightModeRanking</span>(<span class="hljs-params"> Mobile m,
                                           FightMode acqType,
                                           <span class="hljs-keyword">bool</span> bPlayerOnly </span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> ( ( bPlayerOnly &amp;&amp; m.Player ) ||  !bPlayerOnly )<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤ä»£ç æ˜¯å†—ä½™çš„æˆ–é”™è¯¯çš„ã€‚</font><font style="vertical-align: inherit;">ä»–çš„é—®é¢˜æ˜¯â€œ ||â€çš„ä¸¤è¾¹ </font><font style="vertical-align: inherit;">åœ¨å­è¡¨è¾¾çš„æ„ä¹‰ä¸Šæ˜¯ä¸åŒçš„ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæˆ‘ä»¬è¿™æ ·åˆ‡ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> ( m.Player || !bPlayerOnly )</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åä»€ä¹ˆéƒ½ä¸ä¼šæ”¹å˜ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3001åœ¨'||'çš„å·¦ä¾§å’Œå³ä¾§æœ‰ç›¸åŒçš„å­è¡¨è¾¾å¼'deed is SmallBrickHouseDeed'ã€‚</font><font style="vertical-align: inherit;">æ“ä½œå‘˜ã€‚</font><font style="vertical-align: inherit;">æˆ¿åœ°äº§ç»çºªäºº132</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">ComputePriceFor</span>(<span class="hljs-params"> HouseDeed deed </span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">int</span> price = <span class="hljs-number">0</span>;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> ( deed <span class="hljs-keyword">is</span> SmallBrickHouseDeed ||    <span class="hljs-comment">// &lt;=</span>
       deed <span class="hljs-keyword">is</span> StonePlasterHouseDeed ||<font></font>
       deed <span class="hljs-keyword">is</span> FieldStoneHouseDeed ||<font></font>
       deed <span class="hljs-keyword">is</span> SmallBrickHouseDeed ||    <span class="hljs-comment">// &lt;=</span>
       deed <span class="hljs-keyword">is</span> WoodHouseDeed ||<font></font>
       deed <span class="hljs-keyword">is</span> WoodPlasterHouseDeed ||<font></font>
       deed <span class="hljs-keyword">is</span> ThatchedRoofCottageDeed )<font></font>
      ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘è®¤ä¸ºæ²¡æœ‰å¿…è¦åœ¨æ­¤è§£é‡Šä»»ä½•å†…å®¹ï¼ŒåŒ…æ‹¬ä¸‹ä¸€ä¸ªæˆ–é”™è¯¯çš„ä»£ç æˆ–å¤šä½™çš„ä»£ç ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3067å¯èƒ½å¿˜è®°æˆ–æ³¨é‡Šäº†â€œ elseâ€å—ï¼Œä»è€Œæ”¹å˜äº†ç¨‹åºçš„æ“ä½œé€»è¾‘ã€‚</font><font style="vertical-align: inherit;">BaseHouse.cs 1558</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetLockdown</span>(<span class="hljs-params"> Item i, <span class="hljs-keyword">bool</span> locked, <span class="hljs-keyword">bool</span> checkContains </span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> ( m_LockDowns == <span class="hljs-literal">null</span> )
    <span class="hljs-keyword">return</span>;<font></font>
<font></font>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">region</span> Mondain's Legacy</span>
  <span class="hljs-keyword">if</span> ( i <span class="hljs-keyword">is</span> BaseAddonContainer )<font></font>
    i.Movable = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">else</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">endregion</span></span><font></font>
<font></font>
  i.Movable = !locked;<font></font>
  i.IsLockedDown = locked;<font></font>
<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
éå¸¸ç½•è§çš„è­¦å‘Šã€‚</font><font style="vertical-align: inherit;">åˆ†æäººå‘˜å‘ç°</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#endregion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡ä»¤åçš„ä»£ç æ ¼å¼</font><i><font style="vertical-align: inherit;">å¯ç–‘ã€‚</font></i><font style="vertical-align: inherit;">å¦‚æœæ‚¨ä¸é˜…è¯»ä»£ç ï¼Œå®ƒçœ‹èµ·æ¥åƒä¸€è¡Œ</font></font><br>
<br>
<pre><code class="cs hljs">i.Movable = !locked;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ— è®ºå˜é‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä»€ä¹ˆï¼Œéƒ½å°†åœ¨ä»»ä½•æƒ…å†µä¸‹æ‰§è¡Œ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¹Ÿè®¸è¿™é‡ŒèŠ±æ‹¬å·è¢«é—å¿˜äº†â€¦â€¦é€šå¸¸ï¼Œå¼€å‘äººå‘˜åº”æ£€æŸ¥æ­¤ä»£ç ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3043ä»£ç çš„æ“ä½œé€»è¾‘ä¸å…¶æ ¼å¼ä¸ç¬¦ã€‚</font><font style="vertical-align: inherit;">è¯¥è¯­å¥å‘å³ç¼©è¿›ï¼Œä½†å§‹ç»ˆä¼šæ‰§è¡Œã€‚</font><font style="vertical-align: inherit;">å¤§æ‹¬å·å¯èƒ½ä¸¢å¤±ã€‚</font><font style="vertical-align: inherit;">åœ°éœ‡57</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCast</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> ( Core.AOS )<font></font>
  {<font></font>
    damage = m.Hits / <span class="hljs-number">2</span>;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> ( !m.Player )<font></font>
      damage = Math.Max( Math.Min( damage, <span class="hljs-number">100</span> ), <span class="hljs-number">15</span> );<font></font>
      damage += Utility.RandomMinMax( <span class="hljs-number">0</span>, <span class="hljs-number">15</span> );            <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ä»£ç ä¸­å¯èƒ½ç¼ºå°‘èŠ±æ‹¬å·ã€‚</font><font style="vertical-align: inherit;">å¯ä»¥ç”±äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifï¼ˆï¼M.Playerï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸»ä½“ä¸­ä»£ç çš„å¥‡æ€ªæ ¼å¼è€Œå¾—å‡ºæ­¤ç»“è®º</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3083å¯¹äº‹ä»¶'ServerStarted'çš„ä¸å®‰å…¨è°ƒç”¨ï¼Œå¯èƒ½ä¼šå‘ç”ŸNullReferenceExceptionã€‚</font><font style="vertical-align: inherit;">è¯·è€ƒè™‘åœ¨è°ƒç”¨äº‹ä»¶ä¹‹å‰å°†äº‹ä»¶åˆ†é…ç»™å±€éƒ¨å˜é‡ã€‚</font><font style="vertical-align: inherit;">EventSink.cs 921</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">InvokeServerStarted</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> ( ServerStarted != <span class="hljs-literal">null</span> )<font></font>
    ServerStarted();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­£å¦‚åˆ†æå™¨æŒ‡å‡ºçš„é‚£æ ·ï¼Œ</font><font style="vertical-align: inherit;">
æ­¤æ–¹æ³•ä½¿ç”¨å¯¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RefreshStarted</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº‹ä»¶</font><i><font style="vertical-align: inherit;">å¤„ç†ç¨‹åº</font></i><font style="vertical-align: inherit;">çš„æ½œåœ¨ä¸å®‰å…¨è°ƒç”¨</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºä»€ä¹ˆæœ‰å±é™©ï¼Ÿæƒ³è±¡ä¸€ä¸‹è¿™ç§æƒ…å†µã€‚</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerStarted</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº‹ä»¶</font><font style="vertical-align: inherit;">åªæœ‰ä¸€ä¸ªè®¢é˜…è€…ã€‚åœ¨æ£€æŸ¥nullå’Œç›´æ¥</font><font style="vertical-align: inherit;">åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­</font><font style="vertical-align: inherit;">è°ƒç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerStartedï¼ˆï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº‹ä»¶å¤„ç†ç¨‹åºä¹‹é—´çš„é‚£ä¸€åˆ»</font><font style="vertical-align: inherit;">ï¼Œæ­¤äº‹ä»¶å·²å–æ¶ˆè®¢é˜…ã€‚è¿™å°†æŠ›å‡º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é˜²æ­¢è¿™ç§æƒ…å†µçš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨'ï¼Ÿã€‚'è¿ç®—ç¬¦æä¾›å®‰å…¨çš„äº‹ä»¶è°ƒç”¨ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">InvokeServerStarted</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  ServerStarted?.Invoke();<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3054æ½œåœ¨ä¸å®‰å…¨çš„åŒé‡æ£€æŸ¥é”å®šã€‚ä½¿ç”¨æ˜“å¤±æ€§å˜é‡æˆ–åŒæ­¥åŸè¯­å¯ä»¥é¿å…è¿™ç§æƒ…å†µã€‚ Item.cs 1624</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> Packet m_RemovePacket;<font></font>
....<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">object</span> _rpl = <span class="hljs-keyword">new</span> <span class="hljs-keyword">object</span>();
<span class="hljs-keyword">public</span> Packet RemovePacket<font></font>
{<font></font>
  <span class="hljs-keyword">get</span><font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (m_RemovePacket == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">lock</span> (_rpl)<font></font>
      {<font></font>
        <span class="hljs-keyword">if</span> (m_RemovePacket == <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
          m_RemovePacket = <span class="hljs-keyword">new</span> RemoveItem(<span class="hljs-keyword">this</span>);<font></font>
          m_RemovePacket.SetStatic();<font></font>
        }<font></font>
      }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> m_RemovePacket;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ†æä»ªè­¦å‘Šä¸ä¸å®‰å…¨ä½¿ç”¨åŒé‡æ£€æŸ¥çš„é”å®šæ–¹å¼æœ‰å…³ã€‚ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåº”ç”¨äº†åŒé‡æ£€æŸ¥é”æ¥å®ç°ç”Ÿæˆæ¨¡å¼-Lonersã€‚å½“æˆ‘ä»¬å°è¯•é€šè¿‡</font><font style="vertical-align: inherit;">è®¿é—®</font><i><font style="vertical-align: inherit;">RemovePacket</font></i><font style="vertical-align: inherit;">å±æ€§è·å–</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Packet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»çš„å®ä¾‹æ—¶</font><font style="vertical-align: inherit;">ï¼Œgetterä¼šæ£€æŸ¥</font><i><font style="vertical-align: inherit;">m_RemovePacket</font></i><font style="vertical-align: inherit;">å­—æ®µ</font><font style="vertical-align: inherit;">çš„ç›¸ç­‰æ€§æ˜¯å¦ä¸ºé›¶ã€‚å¦‚æœæ£€æŸ¥é€šè¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿›å…¥</font><i><font style="vertical-align: inherit;">lock</font></i><font style="vertical-align: inherit;">è¯­å¥çš„ä¸»ä½“</font><font style="vertical-align: inherit;">ï¼Œå…¶ä¸­</font><i><font style="vertical-align: inherit;">m_RemovePacket</font></i><font style="vertical-align: inherit;">å­—æ®µå·²</font><i><font style="vertical-align: inherit;">åˆå§‹åŒ–</font></i><font style="vertical-align: inherit;">ã€‚å½“ä¸»çº¿ç¨‹å·²</font><font style="vertical-align: inherit;">é€šè¿‡æ„é€ å‡½æ•°</font><font style="vertical-align: inherit;">åˆå§‹åŒ–</font><i><font style="vertical-align: inherit;">m_RemovePacket</font></i><font style="vertical-align: inherit;">å˜é‡</font><font style="vertical-align: inherit;">ä½†å°šæœªè°ƒç”¨æ–¹æ³•</font><font style="vertical-align: inherit;">æ—¶ï¼Œä¼šå‡ºç°ä¸€ç§æœ‰è¶£çš„æƒ…å†µã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetStaticï¼ˆï¼‰ã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»ç†è®ºä¸Šè®²ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥</font><font style="vertical-align: inherit;">åœ¨éå¸¸ä¸æ–¹ä¾¿çš„æ—¶åˆ»</font><font style="vertical-align: inherit;">è®¿é—®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RemovePacket</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§</font><font style="vertical-align: inherit;">ã€‚æ£€æŸ¥</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_RemovePacket</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„ç›¸ç­‰æ€§æ˜¯å¦ä¸ºé›¶å°†ä¸å†å¤±è´¥ï¼Œå¹¶ä¸”è°ƒç”¨çº¿ç¨‹å°†æ”¶åˆ°æŒ‡å‘æœªå®Œå…¨ä½¿ç”¨çš„å¯¹è±¡çš„é“¾æ¥ã€‚ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œ</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥</font><font style="vertical-align: inherit;">åœ¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lock</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯­å¥çš„ä¸»ä½“ä¸­</font><font style="vertical-align: inherit;">åˆ›å»º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Packet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»çš„ä¸­é—´å˜é‡ï¼Œ</font><font style="vertical-align: inherit;">é€šè¿‡æ„é€ å‡½æ•°è°ƒç”¨å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetStaticï¼ˆï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–</font><i><font style="vertical-align: inherit;">ï¼Œ</font></i><font style="vertical-align: inherit;">ç„¶åå°†å…¶åˆ†é…ç»™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_RemovePacket</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡</font><font style="vertical-align: inherit;">ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lock</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯­å¥çš„ä¸»ä½“</font><font style="vertical-align: inherit;">å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">lock</span> (_rpl)<font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (m_RemovePacket == <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
    Packet instance = <span class="hljs-keyword">new</span> RemoveItem(<span class="hljs-keyword">this</span>);<font></font>
    instance.SetStatic();<font></font>
    m_RemovePacket = instance;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥é—®é¢˜ä¼¼ä¹å·²è§£å†³ï¼Œè¯¥ä»£ç å°†æŒ‰é¢„æœŸå·¥ä½œã€‚ä½†æ˜¯äº‹å®å¹¶éå¦‚æ­¤ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿˜æœ‰ä¸€ç‚¹ï¼šåˆ†æå™¨ä¸ä»…ä»…å»ºè®®ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volatile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³é”®å­—</font><font style="vertical-align: inherit;">ã€‚åœ¨ç¨‹åºçš„å‘è¡Œç‰ˆä¸­ï¼Œç¼–è¯‘å™¨å¯ä»¥æ‰§è¡Œä¼˜åŒ–å¹¶é‡æ–°è®¾ç½®å¯¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetStaticï¼ˆï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•çš„è°ƒç”¨çš„è¡Œï¼Œå¹¶å°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ä¾‹</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡åˆ†é…ç»™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_RemovePacket</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­—æ®µ</font><font style="vertical-align: inherit;">ï¼ˆä»ç¼–è¯‘å™¨çš„è§’åº¦æ¥çœ‹ï¼Œä¸ä¼šè¿åç¨‹åºçš„è¯­ä¹‰ï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬å†æ¬¡å›åˆ°å¼€å§‹çš„åŒä¸€ç‚¹-è·å¾—æœªåˆå§‹åŒ–å˜é‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_RemovePacketçš„å¯èƒ½æ€§</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æ— æ³•ç¡®åˆ‡åœ°è¯´å‡ºè¿™ç§é‡æ–°æ’åºä½•æ—¶å‘ç”Ÿä»¥åŠæ˜¯å¦ä¼šå‘ç”Ÿï¼šå®ƒå¯èƒ½ä¼šå—åˆ°CLRç‰ˆæœ¬ï¼Œæ‰€ä½¿ç”¨å¤„ç†å™¨çš„ä½“ç³»ç»“æ„ç­‰çš„å½±å“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä»ç„¶å€¼å¾—ä¿æŠ¤ï¼Œè§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼ˆä½†æ˜¯ï¼Œä¸æ˜¯æœ€æœ‰æ•ˆçš„ï¼‰å°†æ˜¯ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volatile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³é”®å­—</font><font style="vertical-align: inherit;">ã€‚å°†ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volatileä¿®é¥°ç¬¦</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å£°æ˜çš„å˜é‡</font><font style="vertical-align: inherit;">åœ¨ç¼–è¯‘å™¨ä¼˜åŒ–æœŸé—´ä¸ä¼šè¿›è¡Œæ’åˆ—ã€‚æœ€ç»ˆå›ºå®šçš„ä»£ç å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> Packet m_RemovePacket;<font></font>
....<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">object</span> _rpl = <span class="hljs-keyword">new</span> <span class="hljs-keyword">object</span>();
<span class="hljs-keyword">public</span> Packet RemovePacket<font></font>
{<font></font>
  <span class="hljs-keyword">get</span><font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (m_RemovePacket == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">lock</span> (_rpl)<font></font>
      {<font></font>
        <span class="hljs-keyword">if</span> (m_RemovePacket == <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
          Packet instance = <span class="hljs-keyword">new</span> RemoveItem(<span class="hljs-keyword">this</span>);<font></font>
          instance.SetStatic();<font></font>
          m_RemovePacket = instance;<font></font>
        }<font></font>
      }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> m_RemovePacket;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰æ—¶</font><font style="vertical-align: inherit;">ç”±äºè®¿é—®æ­¤ç±»å­—æ®µçš„å¼€é”€è€Œå¯èƒ½ä¸å¸Œæœ›</font><font style="vertical-align: inherit;">ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜“å¤±æ€§</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­—æ®µã€‚æˆ‘ä»¬ä¸ä¼šè¯¦ç»†è®¨è®ºè¯¥ä¸»é¢˜ï¼Œåªæ˜¯æŒ‡å‡ºåœ¨æ‰€è€ƒè™‘çš„ç¤ºä¾‹ä¸­ï¼ŒåŸå­å­—æ®µè®°å½•ä»…éœ€è¦ä¸€æ¬¡ï¼ˆç¬¬ä¸€æ¬¡è®¿é—®è¯¥å±æ€§æ—¶ï¼‰ï¼Œä½†æ˜¯ï¼Œå°†å­—æ®µå£°æ˜ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volatile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†å¯¼è‡´ç¼–è¯‘å™¨è¿›è¡ŒåŸå­è¯»å†™å°±æ€§èƒ½è€Œè¨€å¯èƒ½ä¸æ˜¯æœ€ä½³çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œå¦ä¸€ç§çº æ­£æ­¤åˆ†æå™¨è­¦å‘Šä»¥é¿å…å£°æ˜</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯å˜</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­—æ®µçš„</font><font style="vertical-align: inherit;">é¢å¤–å¼€é”€çš„æ–¹æ³•</font><font style="vertical-align: inherit;">æ˜¯ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lazy &lt;T&gt;ç±»å‹</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥æ”¯æŒ</font><i><font style="vertical-align: inherit;">m_RemovePacket</font></i><font style="vertical-align: inherit;">å­—æ®µ</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€Œä¸æ˜¯ä»”ç»†æ£€æŸ¥é”å®šã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†getterä¸»ä½“æ›¿æ¢ä¸ºinitializeræ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¼ é€’ç»™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lazy &lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ä¾‹çš„æ„é€ å‡½æ•°</font><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> Lazy&lt;Packet&gt; m_RemovePacket = <span class="hljs-keyword">new</span> Lazy&lt;Packet&gt;(() =&gt;<font></font>
  {<font></font>
    Packet instance = <span class="hljs-keyword">new</span> RemoveItem(<span class="hljs-keyword">this</span>);<font></font>
    instance.SetStatic();<font></font>
    <span class="hljs-keyword">return</span> instance;<font></font>
  }, LazyThreadSafetyMode.ExecutionAndPublication);<font></font>
<font></font>
....<font></font>
<span class="hljs-keyword">public</span> Packet RemovePacket<font></font>
{<font></font>
  <span class="hljs-keyword">get</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> m_RemovePacket.Value;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–æ¬¡è®¿é—®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lazy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹æ—¶ï¼Œå°†è°ƒç”¨ä¸€æ¬¡åˆå§‹åŒ–æ–¹æ³•ï¼Œ</font><font style="vertical-align: inherit;">å¹¶ä¸”é€šè¿‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lazy &lt;T&gt;ç±»å‹</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥ä¿è¯åœ¨åŒæ—¶ä»å¤šä¸ªçº¿ç¨‹è®¿é—®è¯¥å±æ€§çš„æƒ…å†µä¸‹çš„æµå®‰å…¨æ€§</font><font style="vertical-align: inherit;">ï¼ˆçº¿ç¨‹å®‰å…¨æ¨¡å¼ç”±</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lazy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ§åˆ¶</font><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3131å·²æ£€æŸ¥è¡¨è¾¾å¼â€œ targetedâ€ä¸ç±»å‹â€œ IAxeâ€çš„å…¼å®¹æ€§ï¼Œä½†å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºâ€œ Itemâ€ç±»å‹ã€‚</font><font style="vertical-align: inherit;">HarvestTarget.cs 61</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnTarget</span>(<span class="hljs-params"> Mobile <span class="hljs-keyword">from</span>, <span class="hljs-keyword">object</span> targeted </span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( m_System <span class="hljs-keyword">is</span> Lumberjacking &amp;&amp;<font></font>
            targeted <span class="hljs-keyword">is</span> IAxe &amp;&amp; m_Tool <span class="hljs-keyword">is</span> BaseAxe )<font></font>
  {<font></font>
    IAxe obj = (IAxe)targeted;<font></font>
    Item item = (Item)targeted;<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­£å¦‚åˆ†æå™¨æŠ¥å‘Šçš„</font><i><font style="vertical-align: inherit;">é‚£æ ·</font></i><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">æ£€æŸ¥äº†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›®æ ‡</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å˜é‡</font><font style="vertical-align: inherit;">æ˜¯å¦å±äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IAxe</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹</font><font style="vertical-align: inherit;">ï¼Œä½†</font><font style="vertical-align: inherit;">æ²¡æœ‰æ£€æŸ¥ä»»ä½•äºº</font><font style="vertical-align: inherit;">å±äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Item</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå§‹åŒ–â€œ m_LastMobileâ€å˜é‡æ—¶ï¼Œä½¿ç”¨V3070æœªåˆå§‹åŒ–çš„å˜é‡â€œé›¶â€ã€‚ Serial.cs 29</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Serial : IComparable, IComparable&lt;Serial&gt;<font></font>
{<font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> m_Serial;<font></font>
<font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Serial m_LastMobile = Zero;                <span class="hljs-comment">// &lt;=</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Serial m_LastItem = <span class="hljs-number">0x40000000</span>;<font></font>
<font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Serial LastMobile { .... }
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Serial LastItem { .... }<font></font>
<font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Serial MinusOne = <span class="hljs-keyword">new</span> Serial( <span class="hljs-number">-1</span> );
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Serial Zero = <span class="hljs-keyword">new</span> Serial( <span class="hljs-number">0</span> );     <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Serial</span>(<span class="hljs-params"> <span class="hljs-keyword">int</span> serial </span>)</span><font></font>
  {<font></font>
    m_Serial = serial;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œè¿™é‡Œæ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯ç¼–å†™å®ƒä¸æ˜¯å¾ˆå¥½ã€‚ç”±äºå°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_LastMobile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ†é…</font><i><font style="vertical-align: inherit;">ç»™</font></i><font style="vertical-align: inherit;">æœªåˆå§‹åŒ–çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›¶</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">çš„</font></i><font style="vertical-align: inherit;">å€¼ï¼Œ</font><font style="vertical-align: inherit;">å°†åˆ›å»ºå…·æœ‰é»˜è®¤æ„é€ å‡½æ•°</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serialï¼ˆï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„ç»“æ„</font><font style="vertical-align: inherit;">ï¼Œè¿™å°†å¯¼è‡´</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_Serial = 0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„åˆå§‹åŒ–</font><font style="vertical-align: inherit;">ã€‚è€Œè¿™ç­‰æ•ˆäºè°ƒç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°çš„Serialï¼ˆ0ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å®é™…ä¸Šï¼Œå¼€å‘äººå‘˜å¾ˆå¹¸è¿ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serial</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”è¯¥ç­‰äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¦‚æœåº”è¯¥æœ‰ä»»ä½•å…¶ä»–å€¼ï¼Œè¿™å°†å¯¼è‡´é”™è¯¯ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3063å¦‚æœå¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œè¯„ä¼°ï¼Œåˆ™è¯¥æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šm_Serial &lt;= 0x7FFFFFFFã€‚ Serial.cs 83</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IsItem<font></font>
{<font></font>
  <span class="hljs-keyword">get</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> ( m_Serial &gt;= <span class="hljs-number">0x40000000</span> &amp;&amp; m_Serial &lt;= <span class="hljs-number">0x7FFFFFFF</span> );<font></font>
  }<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x7FFFFFFF</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int32</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥åŒ…å«çš„æœ€å¤§å¯èƒ½å€¼</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæ— è®º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_Serial</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡</font><i><font style="vertical-align: inherit;">å…·æœ‰</font></i><font style="vertical-align: inherit;">ä»€ä¹ˆå€¼</font><font style="vertical-align: inherit;">ï¼Œå®ƒåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½å°†å°äºæˆ–ç­‰äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x7FFFFFFF</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3004'then'è¯­å¥ç­‰æ•ˆäº'else'è¯­å¥ã€‚</font><font style="vertical-align: inherit;">åºåˆ—åŒ–.cs 1571</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteDeltaTime</span>(<span class="hljs-params"> DateTime <span class="hljs-keyword">value</span> </span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">try</span> <font></font>
  { <font></font>
    d = <span class="hljs-keyword">new</span> TimeSpan( ticks-now ); <font></font>
  }<font></font>
  <span class="hljs-keyword">catch</span> <font></font>
  {<font></font>
    <span class="hljs-keyword">if</span>( ticks &lt; now ) <font></font>
      d = TimeSpan.MaxValue; <font></font>
    <span class="hljs-keyword">else</span> <font></font>
      d = TimeSpan.MaxValue;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ†æå™¨è­¦å‘Šä¸€æ®µå¯ç–‘çš„ä»£ç ï¼Œå…¶ä¸­</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifè¯­å¥çš„</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çœŸå‡åˆ†æ”¯</font><font style="vertical-align: inherit;">å®Œå…¨é‡åˆã€‚</font><font style="vertical-align: inherit;">ä¹Ÿè®¸å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯åº”å…·æœ‰</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimeSpan.MinValueã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ä»¥ä¸‹å‡ ä¸ªåœ°æ–¹å‘ç°äº†ç›¸åŒçš„ä»£ç ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V3004'then'è¯­å¥ç­‰æ•ˆäº'else'è¯­å¥ã€‚</font><font style="vertical-align: inherit;">Item.cs 2103</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Serialize</span>(<span class="hljs-params"> GenericWriter writer </span>)</span><font></font>
{<font></font>
  ....<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>( ticks &lt; now ) <font></font>
    d = TimeSpan.MaxValue; <font></font>
  <span class="hljs-keyword">else</span> <font></font>
    d = TimeSpan.MaxValue;<font></font>
  <font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V3004'then'è¯­å¥ç­‰æ•ˆäº'else'è¯­å¥ã€‚</font><font style="vertical-align: inherit;">åºåˆ—åŒ–.cs 383</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteDeltaTime</span>(<span class="hljs-params"> DateTime <span class="hljs-keyword">value</span> </span>)</span><font></font>
{<font></font>
  ....<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>( ticks &lt; now ) <font></font>
    d = TimeSpan.MaxValue; <font></font>
  <span class="hljs-keyword">else</span> <font></font>
    d = TimeSpan.MaxValue;<font></font>
  <font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä¹‹æ‰€ä»¥ä½¿ç”¨â€œ Thisâ€æ˜¯æœ‰åŸå› çš„ï¼Œé™¤å…¶ä»–å› ç´ å¤–ï¼Œå¾ˆæœ‰å¯èƒ½æ²¡æœ‰å¤åˆ¶ç²˜è´´ï¼Œè¿™äº›ä»£ç ç‰‡æ®µçœ‹èµ·æ¥éå¸¸ç—›è‹¦ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è­¦å‘ŠPVS-Studioï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3051ç±»å‹è½¬æ¢è¿‡å¤šã€‚</font><font style="vertical-align: inherit;">è¯¥å¯¹è±¡å·²ç»æ˜¯â€œé¡¹ç›®â€ç±»å‹ã€‚</font><font style="vertical-align: inherit;">Mobile.cs 11237</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> Item Talisman<font></font>
{<font></font>
  <span class="hljs-keyword">get</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> FindItemOnLayer( Layer.Talisman ) <span class="hljs-keyword">as</span> Item;<font></font>
  }<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> Item <span class="hljs-title">FindItemOnLayer</span>(<span class="hljs-params"> Layer layer </span>)</span><font></font>
{<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœè¿‡å¤šä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿ç®—ç¬¦ï¼Œåˆ™å¯ä»¥å¾—åˆ°æ­¤åˆ†æå™¨è­¦å‘Š</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä»£ç çš„è¿™ä¸€éƒ¨åˆ†æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºè‡ªå·±çš„ç±»å‹ä¹Ÿæ²¡æœ‰æ„ä¹‰ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è­¦å‘Š</font><b><font style="vertical-align: inherit;">ï¼š</font></b><font style="vertical-align: inherit;"> V3148å°†â€œ toSetâ€çš„æ½œåœ¨â€œç©ºâ€å€¼è½¬æ¢ä¸ºå€¼ç±»å‹å¯èƒ½ä¼šå¯¼è‡´NullReferenceExceptionã€‚</font><font style="vertical-align: inherit;">Properties.cs 502</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> <span class="hljs-title">ConstructFromString</span>(<span class="hljs-params"> .... </span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">object</span> toSet;
  <span class="hljs-keyword">bool</span> isSerial = IsSerial( type );<font></font>
<font></font>
  <span class="hljs-keyword">if</span> ( isSerial ) <span class="hljs-comment">// mutate into int32</span>
    type = m_NumericTypes[<span class="hljs-number">4</span>];<font></font>
<font></font>
  ....<font></font>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">value</span> == <span class="hljs-literal">null</span> )<font></font>
  {<font></font>
    toSet = <span class="hljs-literal">null</span>;<font></font>
  }<font></font>
  ....<font></font>
<font></font>
  <span class="hljs-keyword">if</span> ( isSerial ) <span class="hljs-comment">// mutate back</span><font></font>
    toSet = (Serial)((Int32)toSet);<font></font>
<font></font>
  constructed = toSet;<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™éƒ¨åˆ†ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æƒ…å†µä¸‹ï¼Œå½“å˜é‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å€¼</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›¶</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç„¶åï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toSet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡</font><font style="vertical-align: inherit;">ä¹Ÿä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ­¤å¤–ï¼Œå¦‚æœå˜é‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isSerial == true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™å°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toSetå¼ºåˆ¶è½¬æ¢</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int32</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿™å°†å¯¼è‡´</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NRE</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ é»˜è®¤å€¼0æ¥ä¿®å¤æ­¤ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="cs hljs">toSet = (Serial)((Int32)(toSet ?? <span class="hljs-number">0</span>));</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3031è¿‡åº¦æ£€æŸ¥å¯ä»¥ç®€åŒ–ã€‚</font><font style="vertical-align: inherit;">â€œ ||â€ </font><font style="vertical-align: inherit;">è¿ç®—ç¬¦è¢«ç›¸åçš„è¡¨è¾¾å¼'pack == null'å’Œ'packï¼= null'åŒ…å›´ã€‚</font><font style="vertical-align: inherit;">BODBuyGump.cs 64</font></font><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnResponse</span>(<span class="hljs-params">Server.Network.NetState sender, RelayInfo info</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> ( (pack == <span class="hljs-literal">null</span>) ||<font></font>
       ((pack != <span class="hljs-literal">null</span>) &amp;&amp;<font></font>
        (!pack.CheckHold(<font></font>
                m_From,<font></font>
                item,<font></font>
                <span class="hljs-literal">true</span>,
                <span class="hljs-literal">true</span>,
                <span class="hljs-number">0</span>,<font></font>
                item.PileWeight + item.TotalWeight)) ) )<font></font>
  {<font></font>
    pv.SayTo(m_From, <span class="hljs-number">503204</span>);<font></font>
    m_From.SendGump(<span class="hljs-keyword">new</span> BOBGump(m_From, m_Book, m_Page, <span class="hljs-literal">null</span>));<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºåˆ†æä»ªæŠ¥å‘Šï¼Œæ­¤ä»£ç å¯ä»¥ç®€åŒ–ï¼š </font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> ((pack == <span class="hljs-literal">null</span>) || ((pack != <span class="hljs-literal">null</span>) &amp;&amp; (!pack.CheckHold(....))))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿ç®—ç¬¦â€œ ||â€çš„å·¦ä¾§å’Œå³ä¾§ </font><font style="vertical-align: inherit;">åœ¨è¡¨è¾¾çš„å«ä¹‰ä¸Šæ˜¯ç›¸åçš„ã€‚</font><font style="vertical-align: inherit;">è¿™é‡Œçš„check </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packï¼= Null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºåœ¨æ­¤ä¹‹å‰æ£€æŸ¥äº†ç›¸åçš„æ¡ä»¶</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pack == null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”è¿™äº›è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦'||'åˆ†éš”ã€‚</font><font style="vertical-align: inherit;">è¯¥è¡Œå¯ä»¥ç¼©çŸ­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (pack == <span class="hljs-literal">null</span> || !pack.CheckHold(....))</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3080å¯èƒ½ä¸ºç©ºçš„å–æ¶ˆå¼•ç”¨ã€‚</font><font style="vertical-align: inherit;">è€ƒè™‘æ£€æŸ¥â€œä¼˜èƒœè€…â€ã€‚</font><font style="vertical-align: inherit;">CTF.cs 1302</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Finish_Callback</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  ....<font></font>
  CTFTeamInfo winner = ( teams.Count &gt; <span class="hljs-number">0</span> ? teams[<span class="hljs-number">0</span>] : <span class="hljs-literal">null</span> );<font></font>
<font></font>
  .... <font></font>
<font></font>
  m_Context.Finish( m_Context.Participants[winner.TeamID] <span class="hljs-keyword">as</span> Participant );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¯´</font><i><font style="vertical-align: inherit;">teams.Count</font></i><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ç„¶å</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è·èƒœè€…=ç©ºã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿›ä¸€æ­¥åœ¨ä»£ç ä¸­ï¼Œ</font><font style="vertical-align: inherit;">æ— éœ€æ£€æŸ¥</font><i><font style="vertical-align: inherit;">null </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å³å¯è®¿é—®winner.TeamID</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§</font><font style="vertical-align: inherit;">ï¼Œè¿™å°†å¯¼è‡´é€šè¿‡nullå¼•ç”¨è¿›è¡Œè®¿é—®ã€‚</font><b><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></b><font style="vertical-align: inherit;"> V3041è¯¥è¡¨è¾¾å¼ä»'int'ç±»å‹éšå¼è½¬æ¢ä¸º'double'ç±»å‹ã€‚è€ƒè™‘ä½¿ç”¨æ˜¾å¼ç±»å‹è½¬æ¢ä»¥é¿å…ä¸¢å¤±å°æ•°éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼šdouble A =ï¼ˆdoubleï¼‰ï¼ˆXï¼‰/ Y;ã€‚ StormsEye.cs 87</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Gain</span>(<span class="hljs-params"> Mobile <span class="hljs-keyword">from</span>, Skill skill </span>)</span> <font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">from</span>.Player &amp;&amp; <font></font>
     ( skills.Total / skills.Cap ) &gt;= Utility.RandomDouble())<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤ä»£ç ç‰‡æ®µåŒ…å«å°†æ‰€è¿°å˜é‡çš„æ“ä½œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skills.Total</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skills.Cap</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒä»¬æ˜¯ç±»å‹çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INT</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”å°†ç»“æœç„¶åéšå¼è½¬æ¢ä¸ºç±»å‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½œä¸ºåˆ†æä»ªæŠ¥å‘Šã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3085åµŒå¥—ç±»å‹ä¸­çš„'typeofObject'å­—æ®µåç§°ä¸æ˜ç¡®ã€‚å¤–éƒ¨ç±»å‹åŒ…å«åç§°ç›¸åŒçš„é™æ€å­—æ®µã€‚ PropsGump.cs 744</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Type typeofObject = <span class="hljs-keyword">typeof</span>( <span class="hljs-keyword">object</span> );<font></font>
....<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GroupComparer</span> : <span class="hljs-title">IComparer</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Type typeofObject = <span class="hljs-keyword">typeof</span>( Object );<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å˜é‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typeofObject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯åœ¨æ­¤éƒ¨åˆ†ä»£ç ä¸­çš„åµŒå¥—ç±»ä¸­åˆ›å»ºçš„</font><font style="vertical-align: inherit;">ã€‚å®ƒçš„é—®é¢˜æ˜¯ï¼Œåœ¨å¤–éƒ¨ç±»ä¸­æœ‰ä¸€ä¸ªå…·æœ‰ç›¸åŒåç§°çš„å˜é‡ï¼Œå› æ­¤ä¼šå‘ç”Ÿé”™è¯¯ã€‚æœ€å¥½ä¸è¦è¿™æ ·åšï¼Œä»¥å‡å°‘ç”±äºç–å¿½å¼•èµ·çš„æ­¤ç±»é”™è¯¯çš„å¯èƒ½æ€§ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3140å±æ€§è®¿é—®å™¨ä½¿ç”¨ä¸åŒçš„åå¤‡å­—æ®µã€‚ WallBanner.cs 77</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> m_IsRewardItem;<font></font>
<font></font>
[<span class="hljs-meta">CommandProperty( AccessLevel.GameMaster )</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IsRewardItem<font></font>
{<font></font>
  <span class="hljs-keyword">get</span>{ <span class="hljs-keyword">return</span> m_IsRewardItem; }
  <span class="hljs-keyword">set</span>{ m_IsRewardItem = <span class="hljs-keyword">value</span>; InvalidateProperties(); }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> m_East;<font></font>
<font></font>
[<span class="hljs-meta">CommandProperty( AccessLevel.GameMaster )</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> East<font></font>
{<font></font>
  <span class="hljs-keyword">get</span>{ <span class="hljs-keyword">return</span> m_East; }
  <span class="hljs-keyword">set</span>{ m_IsRewardItem = <span class="hljs-keyword">value</span>; InvalidateProperties(); }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºå¤åˆ¶ç²˜è´´ï¼Œè¿™é‡Œå‡ºç°äº†ä¸€ä¸ªé”™è¯¯ã€‚</font><i><font style="vertical-align: inherit;">East</font></i><font style="vertical-align: inherit;">å±æ€§</font><font style="vertical-align: inherit;">çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¿é—®æ–¹æ³•</font><font style="vertical-align: inherit;">æ˜¯ä¸º</font><i><font style="vertical-align: inherit;">m_East</font></i><font style="vertical-align: inherit;">åˆ†é…ä¸€ä¸ªå€¼</font><font style="vertical-align: inherit;">ï¼Œè€Œä¸æ˜¯</font><i><font style="vertical-align: inherit;">m_IsRewardItem</font></i><font style="vertical-align: inherit;">ã€‚</font><b><font style="vertical-align: inherit;">PVS-Studio</font></b><font style="vertical-align: inherit;"> 
è­¦å‘Š</font><b><font style="vertical-align: inherit;">ï¼š</font></b><font style="vertical-align: inherit;"> V3012ä¸è®ºæ¡ä»¶è¡¨è¾¾å¼å¦‚ä½•ï¼Œâ€œ ?:â€è¿ç®—ç¬¦å§‹ç»ˆè¿”å›ä¸€ä¸ªç›¸åŒçš„å€¼ï¼š0xe7fã€‚ TreasureChestLevel2.cs 52 </font><font style="vertical-align: inherit;">
V3012ä¸ç®¡æ¡ä»¶è¡¨è¾¾å¼å¦‚ä½•ï¼Œâ€œ ?:â€è¿ç®—ç¬¦å§‹ç»ˆè¿”å›ä¸€ä¸ªç›¸åŒçš„å€¼ï¼š0xe77ã€‚ TreasureChestLevel2.cs 57</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b> <br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetChestAppearance</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">bool</span> UseFirstItemId = Utility.RandomBool();<font></font>
<font></font>
  <span class="hljs-keyword">switch</span>( Utility.RandomList( <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span> ) )<font></font>
  {<font></font>
    ....<font></font>
    <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<span class="hljs-comment">// Keg</span>
      <span class="hljs-keyword">this</span>.ItemID = ( UseFirstItemId ? <span class="hljs-number">0xe7f</span> : <span class="hljs-number">0xe7f</span> );
      <span class="hljs-keyword">this</span>.GumpID = <span class="hljs-number">0x3e</span>;
      <span class="hljs-keyword">break</span>;<font></font>
<font></font>
    <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<span class="hljs-comment">// Barrel</span>
      <span class="hljs-keyword">this</span>.ItemID = ( UseFirstItemId ? <span class="hljs-number">0xe77</span> : <span class="hljs-number">0xe77</span> );
      <span class="hljs-keyword">this</span>.GumpID = <span class="hljs-number">0x3e</span>;
      <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŸç§é€‰æ‹©ï¼Œæ— è®ºå…¶ä»·å€¼çš„:)é”™è§‰</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UseFirstItemId</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this.ItemID</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æ˜¯è¦ä¹ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0xe7f</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ–</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0xe77</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ç¬¬äºŒä½ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è­¦å‘ŠPVS-Studioï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3066ä¼ é€’ç»™â€œ OnSwingâ€æ–¹æ³•çš„å‚æ•°çš„å¯èƒ½é”™è¯¯é¡ºåºï¼šâ€œé˜²å¾¡è€…â€å’Œâ€œæ”»å‡»è€…â€ã€‚</font><font style="vertical-align: inherit;">BaseWeapon.cs 1188</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">AbsorbDamageAOS</span>(<span class="hljs-params"> Mobile attacker,
                                    Mobile defender,
                                    <span class="hljs-keyword">int</span> damage </span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> ( weapon != <span class="hljs-literal">null</span> )<font></font>
  {<font></font>
    defender.FixedParticles(<span class="hljs-number">0x3779</span>,
                            <span class="hljs-number">1</span>,
                            <span class="hljs-number">15</span>,
                            <span class="hljs-number">0x158B</span>,
                            <span class="hljs-number">0x0</span>,
                            <span class="hljs-number">0x3</span>,<font></font>
                            EffectLayer.Waist);<font></font>
    weapon.OnSwing( defender, attacker );<font></font>
  }<font></font>
  ....<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> TimeSpan <span class="hljs-title">OnSwing</span>(<span class="hljs-params"> Mobile attacker, Mobile defender </span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">return</span> OnSwing( attacker, defender, <span class="hljs-number">1.0</span> );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºåˆ†æå™¨æ¥è¯´ï¼Œä¼¼ä¹ä¼¼ä¹æ€€ç–‘</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnSwingï¼ˆï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•æ˜¯ä»¥</font><font style="vertical-align: inherit;">ç›¸åçš„é¡ºåºä¼ é€’å‚æ•°çš„ã€‚</font><font style="vertical-align: inherit;">ä¹Ÿè®¸è¿™æ˜¯ç”±äºé”™è¯¯ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> V3092åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­å¯èƒ½å­˜åœ¨èŒƒå›´äº¤ç‚¹ã€‚</font><font style="vertical-align: inherit;">ç¤ºä¾‹ï¼šifï¼ˆA&gt; 0 &amp;&amp; A &lt;5ï¼‰{...}å¦åˆ™ifï¼ˆA&gt; 3 &amp;&amp; A &lt;9ï¼‰{...}ã€‚</font><font style="vertical-align: inherit;">HouseFoundation.cs 1883</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsFixture</span>(<span class="hljs-params"> <span class="hljs-keyword">int</span> itemID </span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( itemID &gt;= <span class="hljs-number">0x319C</span> &amp;&amp; itemID &lt; <span class="hljs-number">0x31B0</span> ) 
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-comment">// ML doors</span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( itemID == <span class="hljs-number">0x2D46</span> ||<font></font>
           itemID == <span class="hljs-number">0x2D48</span> ||<font></font>
           itemID == <span class="hljs-number">0x2FE2</span> ||<font></font>
           itemID == <span class="hljs-number">0x2FE4</span> )
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( itemID &gt;= <span class="hljs-number">0x2D63</span> &amp;&amp; itemID &lt; <span class="hljs-number">0x2D70</span> )
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( itemID &gt;= <span class="hljs-number">0x319C</span> &amp;&amp; itemID &lt; <span class="hljs-number">0x31AF</span> ) 
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ¡ä»¶ä¸‹æµ‹è¯•çš„èŒƒå›´ç›¸äº¤ã€‚</font><font style="vertical-align: inherit;">å¯¹äºåˆ†æä»ªè€Œè¨€ï¼Œè¿™ä¼¼ä¹ä»¤äººæ€€ç–‘ã€‚</font><font style="vertical-align: inherit;">å³ä½¿è¿™æ®µä»£ç å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä»ç„¶å€¼å¾—ä¿®å¤ã€‚</font><font style="vertical-align: inherit;">è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦é‡å†™äº†æœ€åçš„èº«ä½“çŠ¶å†µ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¦‚æœ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ ·ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œè¯¥æ–¹æ³•è¿”å›</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itemID</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­‰äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x319C</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™è¯¥æ–¹æ³•ä»å°†è¿”å›</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åè¿‡æ¥ï¼Œè¿™å°†æµªè´¹å¯»æ‰¾é”™è¯¯çš„æ—¶é—´ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RunUOåˆ›å»ºäºå¾ˆä¹…ä»¥å‰ï¼Œå·²ç»å®Œæˆäº†å¾ˆå¤šå·¥ä½œï¼Œä½†æ˜¯ï¼Œä½¿ç”¨è¯¥é¡¹ç›®çš„ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¯¹å…·æœ‰å†å²è®°å½•çš„é¡¹ç›®ä½¿ç”¨é™æ€åˆ†æçš„å¥½å¤„ã€‚</font><font style="vertical-align: inherit;">ç”¨äº54.3ä¸‡è¡Œé¡¹ç›®ä»£ç çš„åˆ†æå™¨å‘å‡ºäº†å¤§çº¦500æ¡è­¦å‘Šï¼ˆä¸åŒ…æ‹¬</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œ</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½â€ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><u><font style="vertical-align: inherit;">çº§åˆ«</font></u></a><font style="vertical-align: inherit;">ï¼‰ï¼Œç”±äºå®ƒä»¬çš„ç»Ÿä¸€æ€§ï¼Œå¤§å¤šæ•°æœªå‡ºç°åœ¨æ–‡ç« ä¸­ã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†æ›´è¯¦ç»†åœ°äº†è§£åˆ†æç»“æœï¼Œæˆ‘å»ºè®®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹å¼€æºé¡¹ç›®</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><u><font style="vertical-align: inherit;">å…è´¹è®¸å¯è¯</font></u></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨æƒ³ä¸è¯´è‹±è¯­çš„è¯»è€…åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é“¾æ¥ï¼šEkaterina Nikiforovaã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡PVS-Studioåˆ†æä»ªè¿›è¡ŒRunUOæ£€æŸ¥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN487106/">https://habr.com/ru/post/zh-CN487106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN487092/index.html">å°†ä¸šåŠ¡æµç¨‹å»ºæ¨¡ä¸ºERPç³»ç»Ÿå®æ–½é¡¹ç›®çš„ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN487094/index.html">é‡æ–°å¤„ç†ä»å¡å¤«å¡æ”¶åˆ°çš„äº‹ä»¶</a></li>
<li><a href="../zh-CN487096/index.html">ç‰‡æ®µã€‚å¦‚ä½•ç®€åŒ–ä½¿ç”¨æ–‡æ¡£çš„è¿‡ç¨‹</a></li>
<li><a href="../zh-CN487098/index.html">ç”¨èš‚èšç»˜åˆ¶ï¼šä½¿ç”¨èšç¾¤ä¼˜åŒ–ç®—æ³•çš„ç¨‹åºå›¾åƒ</a></li>
<li><a href="../zh-CN487100/index.html">æœ€å…ˆè¿›çš„ä¸å¯å˜æ•°æ®ç»“æ„</a></li>
<li><a href="../zh-CN487108/index.html">æ‰‹æœºæ¸¸æˆç©å®¶èµ„æ–™ï¼šMyTrackerç ”ç©¶</a></li>
<li><a href="../zh-CN487110/index.html">Slurm SREã€‚ç”±Booking.comå’ŒGoogle.comçš„ä¸“å®¶è¿›è¡Œçš„å®Œæ•´å®éªŒ</a></li>
<li><a href="../zh-CN487112/index.html">ç–¯ç‹‚è¾¹ç¼˜ï¼šåŸºæœ¬åœˆå­</a></li>
<li><a href="../zh-CN487116/index.html">ä¸ºä»€ä¹ˆDiscordä»Goå˜æˆRust</a></li>
<li><a href="../zh-CN487118/index.html">Loki-ä½¿ç”¨Prometheusæ–¹æ³•æ”¶é›†æ—¥å¿—</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>