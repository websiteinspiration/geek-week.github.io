<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚¨ÜÔ∏è üë©‚Äçüíª üç≠ How we migrated from Oracle JDK and Java Web Start to AdoptOpenJDK and OpenWebStart üë©üèΩ‚Äçü§ù‚Äçüë©üèº üà¥ üå¶Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 
 
 In this article I will talk about the ‚Äúmodernization‚Äù in the company I work for of such a tool as Java Web Start, or rather, about repla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How we migrated from Oracle JDK and Java Web Start to AdoptOpenJDK and OpenWebStart</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487798/"><img src="https://habrastorage.org/webt/wy/dl/dd/wydlddv9m1-mxrvnfor6vxdifra.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good day. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article I will talk about the ‚Äúmodernization‚Äù in the company I work for of such a tool as Java Web Start, or rather, about replacing it with an alternative opensource solution.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">About myself</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My name is Ildar and I work in a German company, which, like many German companies, uses the old technology stack and tries to migrate to a newer stack. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problem</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I'll start with a description of the problem. Our company has the most important part of the system, which is a legacy application written in java 6 and partially in java 8. It was launched in java 8. To use this application for production, users download the jnlp file from the site and run it in their home on computers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So the company </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">happily</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> existed for a </font><font style="vertical-align: inherit;">long time </font><font style="vertical-align: inherit;">, until Oracle announced that it had stopped supporting version 8 of java, marked Java Web Start technology as deprecated, and decided to cut it out starting with java 11. It meant that there are still more JWS applications, of which there are still many will not receive including security updates. Of course, few can come to terms with this. Also thought enthusiasts from Karakun decided to write their replacement for JWS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our company, some time ago, they began to rewrite the application using Spring boot for the backend and React for the frontend, but the process is not fast, and there are no updates now.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Search for a solution</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So the development team faced the question of finding alternative solutions. In general, it is worth recognizing that there is more than one solution to the problem. Initially, architects selected two </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetDown</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solutions </font><font style="vertical-align: inherit;">and the same </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWebStart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . At the time of the initial decision, the choice fell on the first option, since OpenWebStart was not even released under the first version (there were only some developments and plans). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each of the solutions had its pros and cons, but the company decided not to wait for the release of OpenWebStart and begin to implement proof of concept based on GetDown. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After spending a couple of weeks, one of the developers coped with the task and we realized that, in principle, we can implement a complete solution that satisfies our requirements by spending a little more time.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the meantime, other urgent tasks arrived and the development team distracted from the transition from the PoC stage to the full implementation of the Java Web Start replacement.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deadlines</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everyone lived happily until the management realized that it was time to end already and with the replacement of Java Web Start. </font><font style="vertical-align: inherit;">Until this moment, I was not involved in this project, but here they connected me too. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, I decided to look for information on solutions to our problem again. </font><font style="vertical-align: inherit;">So let's say get into the solution from scratch. </font><font style="vertical-align: inherit;">Thus, I discovered the existence of OpenWebStart. </font><font style="vertical-align: inherit;">I tested it locally, ran into some problems (then we ran into others as well) and solved them. </font><font style="vertical-align: inherit;">As a result, everyone liked the solution. </font><font style="vertical-align: inherit;">Needless to say, management especially liked it because it would not have to spend time on development, as is the case with GetDown. </font><font style="vertical-align: inherit;">But in the end, we spent time getting our system to work with OpenWebStart.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quick Info About OpenWebStart</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenWebStart is based on another implementation of Java Web Start - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IcedTea-Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and the JNLP specification </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSR-56</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">At the time of writing, the project exists in version 1.1.4 and plans to implement the main features of Java Web Start (progress can be observed </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I don‚Äôt see the point of listing all the possible settings, it can take a very long time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here are just a few of them:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cache management (size, location ...),</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">security settings (allowing users to run an application not signed by certificates, whether or not to show warning popups ...),</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">add server addresses to the white list,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remote debug settings,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">security certificate management</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JRE / JDK version control,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">other</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Features of using OpenWebStart and the problems we encountered</font></font></h4><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install OpenWebStart</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installing OpenWebStart is quite simple. </font><font style="vertical-align: inherit;">It is enough to </font><font style="vertical-align: inherit;">download the installation file for your platform </font><font style="vertical-align: inherit;">on the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">website</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and follow the instructions of the installer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But this is bad luck. </font><font style="vertical-align: inherit;">In our case, the users are about 10,000 customers, for each of which the support service of our company must install this tool. </font><font style="vertical-align: inherit;">The solution was found quite quickly: the so-called background installation is available. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You need to upload the installation file to each of the computers and run a special command (and for this the company already has a tool):</font></font><br>
<br>
<pre><code class="bash hljs">OpenWebStart_windows_Setup.exe -q -varfile response.varfile
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, where response.varfile is a file with some settings that can be set in advance by the installer. For example, the folder in which to install OpenWebStart, and some others. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, we coped with this problem. Further, it would be necessary for all clients to somehow install a specific version of AdoptOpenJDK and link them to OpenWebStart, which is easily done through the user interface, but this is not our case. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0w/w4/3l/0ww43l5ljpbdwqa766ywant6yac.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We found in the settings that you can specify the URL from which OpenWebStart will take the settings file, in which you can specify the URL to the JRE we need. And the URL itself with the settings file can be specified in the response.varfile mentioned above (that's how complicated it is). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The JSON settings file itself with different versions of the JRE is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as follows</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the settings, you can also specify the version and vendor of the JRE, in case several JREs are specified in the JSON file. </font><font style="vertical-align: inherit;">We indicated only one and uploaded the JSON file and archive with the JRE we need on the Amazon S3 bucket. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After testing, we found that with the version of JRE that we downloaded, the application does not start ... It turned out that our Java has a slightly different structure in the archive. </font><font style="vertical-align: inherit;">We whipped up a batch script that rebuilt the structure of the JRE archive. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚ÄúWell, now everything will work fine,‚Äù we thought. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When you first start the application, the JRE is automatically loaded, which is used in the future. </font><font style="vertical-align: inherit;">But, we were waiting for the next surprise.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misfortune never comes alone</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But as it usually happens, we were not limited to one problem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our application has, let's say, one feature. There are actually two of them. One application (one jnlp file) starts a second application (second jnlp). And in this case, the second application did not start. In the logs, you could see that the applications are stuck in the deadlock. From the stealth trace, it became clear that the reason is the OpenWebStart internal logging mechanism. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The problem was solved by disabling the internal logging of OpenWebStart. The logs of our applications, of course, remained on. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0t/1n/yi/0t1nyitsnxpltecpcwbrpjavjw0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These settings were also turned off in the response.varfile file, which is used during the background installation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And now, after overcoming these and a few other obstacles (I don‚Äôt have to mention everyone), we managed to launch our application, which is currently undergoing testing before being released to the prod. </font><font style="vertical-align: inherit;">As we tested, the version of OpenWebStart upgraded from 1.1.1 to 1.1.4. </font><font style="vertical-align: inherit;">Of the notable changes was added the ability to debut remotely. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/lg/sf/dalgsf4r0owjtavojy00fc7fgwk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhaps my article will be useful to someone in such a difficult job as support for legacy applications. </font><font style="vertical-align: inherit;">If you have questions - ask, I will try to answer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS all images are taken from the official </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWebStart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> website </font><font style="vertical-align: inherit;">.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en487788/index.html">Product design without a designer</a></li>
<li><a href="../en487790/index.html">‚ÄúYes, they exist!‚Äù What do Data Science specialists in Kazakhstan do and how much do they earn?</a></li>
<li><a href="../en487792/index.html">Raising Mercurial on a Windows server (with Nginx)</a></li>
<li><a href="../en487794/index.html">Rating of high-speed web frameworks 2020</a></li>
<li><a href="../en487796/index.html">Top 10 Essential Eclipse Plugins for Java Developers</a></li>
<li><a href="../en487800/index.html">Why is it important to tell the applicant what went wrong during the interview (and how to do it right)</a></li>
<li><a href="../en487802/index.html">Uninterruptible APC Smart UPS, and how to cook them</a></li>
<li><a href="../en487804/index.html">Growth Teams Meetup at Raiffeisenbank</a></li>
<li><a href="../en487806/index.html">Creating a small Deno API</a></li>
<li><a href="../en487808/index.html">Recurrent Neural Networks (RNN) with Keras</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>