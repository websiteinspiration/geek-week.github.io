<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçß ü§∑üèø üë∂üèº HighLoad ++, Mikhail Tyulenev (MongoDB): Consist√™ncia causal: da teoria √† pr√°tica ü§Ωüèº üêô ‚öæÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A pr√≥xima confer√™ncia HighLoad ++ ser√° realizada nos dias 6 e 7 de abril de 2020 em S√£o Petersburgo. 
 Detalhes e ingressos aqui . HighLoad ++ Sib√©ria...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HighLoad ++, Mikhail Tyulenev (MongoDB): Consist√™ncia causal: da teoria √† pr√°tica</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/487638/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A pr√≥xima confer√™ncia HighLoad ++ ser√° realizada nos dias 6 e 7 de abril de 2020 em S√£o Petersburgo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Detalhes e ingressos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . HighLoad ++ Sib√©ria 2019. Sal√£o "Krasnoyarsk". 25 de junho, 12:00. Resumos e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apresenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ok/iw/mz/okiwmzx4qkp6dxvjvqjxvfzqtnk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ocorre que os requisitos pr√°ticos entram em conflito com uma teoria em que aspectos importantes para um produto comercial n√£o s√£o levados em considera√ß√£o. Este relat√≥rio apresenta o processo de sele√ß√£o e combina√ß√£o de v√°rias abordagens para criar componentes de consist√™ncia causal com base em pesquisa acad√™mica com base nos requisitos de um produto comercial. Os alunos aprender√£o sobre as abordagens te√≥ricas existentes para rel√≥gios l√≥gicos, rastreamento de depend√™ncias, seguran√ßa do sistema, sincroniza√ß√£o de clock e por que o MongoDB parou nessas ou nessas solu√ß√µes.</font></font><a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikhail Tyulenev (doravante - MT):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Vou falar sobre consist√™ncia causal - esse √© um recurso que trabalhamos no MongoDB. </font><font style="vertical-align: inherit;">Eu trabalho em um grupo de sistemas distribu√≠dos, fizemos isso cerca de dois anos atr√°s. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ih/xx/xg/ihxxxghkrknnqdxg7tb4w97izi0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No processo, tive que me familiarizar com muita pesquisa acad√™mica, porque esse recurso √© bem estudado. </font><font style="vertical-align: inherit;">Verificou-se que nem um √∫nico artigo se encaixa no que √© necess√°rio na produ√ß√£o, o banco de dados em vista dos requisitos muito espec√≠ficos que s√£o, provavelmente, em qualquer aplicativo de produ√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou falar sobre como n√≥s, como consumidores de Pesquisa acad√™mica, preparamos algo que podemos apresentar aos nossos usu√°rios como um prato pronto que √© conveniente e seguro de usar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consist√™ncia causal. </font><font style="vertical-align: inherit;">Vamos definir conceitos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para come√ßar, quero descrever em termos gerais o que √© consist√™ncia causal. Existem dois personagens - Leonard e Penny (a s√©rie "The Big Bang Theory"): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7q/nw/lr/7qnwlrmqtidow8cl_jrdakec3d0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que Penny esteja na Europa e Leonard queira fazer algum tipo de surpresa para ela, uma festa. E ele n√£o tem nada melhor do que jog√°-la para fora da lista de amigos, enviando atualiza√ß√µes para alimentar todos os amigos: "Vamos fazer Penny feliz!" (ela na Europa, enquanto dorme, n√£o v√™ tudo isso e n√£o pode ver, porque ela n√£o est√° l√°). No final, ele exclui este post, apaga-o do "Feed" e restaura o acesso para que ele n√£o perceba nada e n√£o haja esc√¢ndalo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo bem, mas vamos supor que o sistema esteja distribu√≠do e que os eventos deram um certo erro. </font><font style="vertical-align: inherit;">Talvez, por exemplo, aconte√ßa que a restri√ß√£o de acesso a Penny ocorreu ap√≥s a publica√ß√£o desta postagem, se os eventos n√£o estiverem conectados por um relacionamento causal. </font><font style="vertical-align: inherit;">Na verdade, este √© um exemplo de quando a consist√™ncia causal √© necess√°ria para cumprir uma fun√ß√£o comercial (neste caso). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, essas s√£o propriedades n√£o triviais do banco de dados - poucas pessoas as ap√≥iam. </font><font style="vertical-align: inherit;">Vamos para os modelos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelos de consist√™ncia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que √© um modelo de consist√™ncia em bancos de dados em geral? </font><font style="vertical-align: inherit;">Essas s√£o algumas das garantias que um sistema distribu√≠do oferece em rela√ß√£o a quais dados e em que sequ√™ncia o cliente pode receber. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em princ√≠pio, todos os modelos de consist√™ncia se resumem a como o sistema √© distribu√≠do como um sistema que funciona, por exemplo, no mesmo aceno de um laptop. </font><font style="vertical-align: inherit;">E √© assim que o sistema, que funciona em milhares de n√≥s geodistribu√≠dos, √© semelhante a um laptop, no qual todas essas propriedades s√£o executadas automaticamente em princ√≠pio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, os modelos de consist√™ncia se aplicam apenas a sistemas distribu√≠dos. </font><font style="vertical-align: inherit;">Todos os sistemas que existiam anteriormente e trabalhavam na mesma escala vertical n√£o tiveram esses problemas. </font><font style="vertical-align: inherit;">Havia um cache de buffer, e tudo era sempre lido nele.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo forte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, o primeiro modelo √© Forte (ou a capacidade de aumentar a linha, como costuma ser chamada). </font><font style="vertical-align: inherit;">Este √© um modelo de consist√™ncia que garante que todas as altera√ß√µes, assim que a confirma√ß√£o de que ocorreu, sejam vis√≠veis a todos os usu√°rios do sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso cria uma ordem global de todos os eventos no banco de dados. </font><font style="vertical-align: inherit;">Esta √© uma propriedade de consist√™ncia muito forte e geralmente √© muito cara. </font><font style="vertical-align: inherit;">No entanto, √© muito bem conservado. </font><font style="vertical-align: inherit;">√â simplesmente muito caro e lento - eles s√£o raramente usados. </font><font style="vertical-align: inherit;">Isso √© chamado de capacidade de aumento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° outra propriedade mais poderosa suportada na "Chave inglesa" - chamada Consist√™ncia externa. </font><font style="vertical-align: inherit;">Falaremos sobre ele um pouco mais tarde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Causal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O seguinte √© causal, exatamente do que eu estava falando. Existem v√°rios subn√≠veis entre Strong e Causal dos quais n√£o falarei, mas todos eles se resumem a Causal. Este √© um modelo importante porque √© o mais forte de todos os modelos, a consist√™ncia mais forte na presen√ßa de uma rede ou parti√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Causais √© realmente uma situa√ß√£o na qual os eventos s√£o conectados por um relacionamento causal. Muitas vezes, eles s√£o percebidos como direitos de leitura, do ponto de vista do cliente. Se o cliente observou alguns valores, ele n√£o pode ver os valores que estavam no passado. Ele j√° est√° come√ßando a ver leituras de prefixo. Tudo se resume √† mesma coisa.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Causais como modelo de consist√™ncia √© uma ordem parcial de eventos no servidor, na qual os eventos de todos os clientes s√£o observados na mesma sequ√™ncia. </font><font style="vertical-align: inherit;">Nesse caso, Leonard e Penny.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eventual</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O terceiro modelo √© a consist√™ncia eventual. √â isso que suporta absolutamente todos os sistemas distribu√≠dos, um modelo m√≠nimo que geralmente faz sentido. Significa o seguinte: quando temos algumas altera√ß√µes nos dados, elas se tornam consistentes em algum momento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse momento, ela n√£o diz nada, caso contr√°rio ela se tornaria Consist√™ncia Externa - haveria uma hist√≥ria completamente diferente. No entanto, este √© um modelo muito popular, o mais comum. Por padr√£o, todos os usu√°rios de sistemas distribu√≠dos usam Consist√™ncia Eventual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quero dar alguns exemplos comparativos: o </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yn/5s/p9/yn5sp9tyjn4dh4q3vonroirvxic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
que essas setas significam?</font></font><br>
<br>
<ul>
<li><b>Latency.</b>          :    ,       ,    ,     .   Eventual Consistency   ,   ,  ,    memory       .</li>
<li><b>Availability.</b>           , partitions,  -  ‚Äì      ,    ,         - . Eventual Consistency        ‚Äì    ,  .</li>
<li><b>Anomalies.</b>  , ,   .  Strong Consistency       ,  Eventual Consistency     .  :     Eventual Consistency,    ?    ,  Eventual Consistency- ,   , ,    ;        -   ;       .   ,       .</li>
</ul><br>
<h3> CAP</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ v√™ as palavras consist√™ncia, disponibilidade - o que vem √† sua mente? Direito - teorema da CAP! Agora quero dissipar o mito ... N√£o sou eu - h√° Martin Kleppman, que escreveu um artigo maravilhoso, um livro maravilhoso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/rc/v1/-krcv1vofhv9ofnwbty6ql6hvhg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O teorema da PAC √© um princ√≠pio formulado nos anos 2000 que Consist√™ncia, Disponibilidade, Parti√ß√µes: pegue dois, e voc√™ n√£o pode escolher tr√™s. Era um certo princ√≠pio. Foi provado como um teorema alguns anos depois, por Gilbert e Lynch. Em seguida, tornou-se usado como um mantra - os sistemas come√ßaram a ser divididos em CA, CP, AP e assim por diante.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse teorema foi realmente provado pelos seguintes motivos ... Primeiro, a disponibilidade n√£o foi considerada como um valor cont√≠nuo de zero a centenas (0 - o sistema est√° "morto", 100 - responde rapidamente; estamos acostumados a consider√°-lo), mas como uma propriedade do algoritmo , que garante que, com todas as suas execu√ß√µes, retorne dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o h√° uma palavra sobre o tempo de resposta! Existe um algoritmo que retorna dados ap√≥s 100 anos - um algoritmo perfeitamente dispon√≠vel, que faz parte do teorema da CAP. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segundo: foi provado um teorema para mudan√ßas nos valores da mesma chave, apesar de essas mudan√ßas serem uma linha redimension√°vel. Isso significa que, na verdade, eles praticamente n√£o s√£o usados, porque os modelos s√£o diferentes de Consist√™ncia Eventual, Consist√™ncia Forte (talvez).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que isso √© tudo? </font><font style="vertical-align: inherit;">Al√©m disso, o teorema da PAC, na forma em que √© provado, praticamente n√£o √© aplic√°vel, √© raramente usado. </font><font style="vertical-align: inherit;">Em uma forma te√≥rica, de alguma forma limita tudo. </font><font style="vertical-align: inherit;">Acontece que um certo princ√≠pio √© intuitivamente verdadeiro, mas de modo algum √© provado em geral.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consist√™ncia causal - o modelo mais forte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que est√° acontecendo agora - voc√™ pode obter todas as tr√™s coisas: Consist√™ncia e disponibilidade podem ser obtidas usando Parti√ß√µes. </font><font style="vertical-align: inherit;">Em particular, a consist√™ncia causal √© o modelo de consist√™ncia mais forte que, na presen√ßa de Parti√ß√µes (quebras de rede), ainda funciona. </font><font style="vertical-align: inherit;">Portanto, √© de t√£o grande interesse e, portanto, estamos envolvidos nela. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/4s/k8/ty4sk8sx4n73xnsxlkw2wtb1ity.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, simplifica o trabalho dos desenvolvedores de aplicativos. </font><font style="vertical-align: inherit;">Em particular, h√° muito suporte do servidor: quando todos os registros que ocorrem dentro de um cliente s√£o garantidos para chegar nessa ordem no outro cliente. </font><font style="vertical-align: inherit;">Em segundo lugar, suporta parti√ß√µes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cozinha interior MongoDB</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembrando do almo√ßo, vamos para a cozinha. Vou falar sobre o modelo do sistema, ou seja, o que √© o MongoDB para quem primeiro ouviu sobre esse banco de dados. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fn/-b/kj/fn-bkjwvkdxcokzum9xwwkshcu8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/2u/qz/3g/2uqz3gts5ipfvvojtpo2epigtf4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O MongoDB (doravante denominado "MongoBD") √© um sistema distribu√≠do que suporta escala horizontal, ou seja, sharding; e dentro de cada fragmento, ele tamb√©m suporta redund√¢ncia de dados, ou seja, replica√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sharding no ‚ÄúMongoBD‚Äù (banco de dados n√£o relacional) executa o balanceamento autom√°tico, ou seja, cada cole√ß√£o de documentos (ou ‚Äútabela‚Äù em termos de dados relacionais) em peda√ßos, e o servidor j√° os move automaticamente entre os shards. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Query Router que distribui consultas para o cliente √© um cliente atrav√©s do qual ele trabalha. Ele j√° sabe onde e quais dados est√£o localizados, envia todas as solicita√ß√µes para o shard correto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro ponto importante: o MongoDB √© um √∫nico mestre. </font><font style="vertical-align: inherit;">H√° uma Prim√°ria - ela pode receber registros que suportam as chaves que ela cont√©m. </font><font style="vertical-align: inherit;">Voc√™ n√£o pode fazer grava√ß√£o multimestre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fizemos o lan√ßamento 4.2 - novas coisas interessantes apareceram l√°. </font><font style="vertical-align: inherit;">Em particular, eles inseriram o Lucene - a pesquisa - era execut√°vel java diretamente no "Mongo", e foi poss√≠vel pesquisar no Lucene, o mesmo que no "Elastic". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E eles criaram um novo produto - Gr√°ficos, tamb√©m est√° dispon√≠vel no Atlas (a pr√≥pria nuvem do Mongo). </font><font style="vertical-align: inherit;">Eles t√™m n√≠vel gratuito - voc√™ pode brincar com isso. </font><font style="vertical-align: inherit;">Gostei muito dos gr√°ficos - a visualiza√ß√£o de dados √© muito intuitiva.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingredientes causais de consist√™ncia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contei cerca de 230 artigos que foram publicados sobre esse assunto - de Leslie Lampert. </font><font style="vertical-align: inherit;">Agora, da minha mem√≥ria, trarei para voc√™ algumas partes desses materiais. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2_/dt/2n/2_dt2nhood8jlup51kyeddsy7w8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo come√ßou com um artigo de Leslie Lampert, que foi escrito na d√©cada de 1970. </font><font style="vertical-align: inherit;">Como voc√™ pode ver, algumas pesquisas sobre esse t√≥pico ainda est√£o em andamento. </font><font style="vertical-align: inherit;">Agora, a consist√™ncia causal est√° experimentando interesse em conex√£o com o desenvolvimento de sistemas distribu√≠dos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limita√ß√µes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quais s√£o as limita√ß√µes? </font><font style="vertical-align: inherit;">Este √© realmente um dos pontos principais, porque as restri√ß√µes impostas pelos sistemas de produ√ß√£o s√£o muito diferentes das restri√ß√µes existentes nos artigos acad√™micos. </font><font style="vertical-align: inherit;">Muitas vezes, s√£o bastante artificiais.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qd/nh/ql/qdnhql6zcor1hzt53ur72spzqzy.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em primeiro lugar, o "MongoDB" √© um √∫nico mestre, como eu j√° disse (isso simplifica bastante).</font></font></li>
<li> ,   10     .     -  ,      .</li>
<li>   ,   ,      ,    binary,     ,    .</li>
<li>  ,   Research  :      . ¬´¬ª ‚Äì  . ,     ,  ‚Äì    .  ,     .</li>
<li>  ,     ‚Äì  :    ,   performance degradation   .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro ponto √© geralmente anti-acad√™mico: compatibilidade de vers√µes anteriores e futuras. </font><font style="vertical-align: inherit;">Drivers antigos devem suportar novas atualiza√ß√µes e o banco de dados deve suportar drivers antigos.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, tudo isso imp√µe limita√ß√µes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Componentes de consist√™ncia causal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vou falar sobre alguns dos componentes. </font><font style="vertical-align: inherit;">Se considerarmos a consist√™ncia Causal geral, podemos distinguir blocos. </font><font style="vertical-align: inherit;">Optamos pelas obras que pertencem a um determinado bloco: Rastreamento de Depend√™ncias, escolha de horas, como esses rel√≥gios podem ser sincronizados entre si e como garantimos a seguran√ßa - este √© um plano aproximado do que falarei:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zv/rb/rq/zvrbrqunyfdrj1pmbrjncugqed4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rastreamento de Depend√™ncia Total</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que √© necess√°rio? Para que, quando os dados forem replicados - cada registro, cada altera√ß√£o de dados contenha informa√ß√µes sobre quais altera√ß√µes elas dependem. A primeira e ing√™nua altera√ß√£o ocorre quando cada mensagem que cont√©m um registro cont√©m informa√ß√µes sobre mensagens anteriores: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/ue/jh/gkuejhztxm81mfji3fazhsmbmbm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste exemplo, o n√∫mero entre chaves √© o n√∫mero de registros. √Äs vezes, esses registros com valores s√£o transferidos na √≠ntegra, √†s vezes, algumas vers√µes s√£o transferidas. A conclus√£o √© que cada mudan√ßa cont√©m informa√ß√µes sobre a anterior (obviamente, ela carrega tudo por si mesma).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que decidimos n√£o usar essa abordagem (rastreamento completo)? </font><font style="vertical-align: inherit;">Obviamente, porque essa abordagem √© impratic√°vel: qualquer altera√ß√£o na rede social depende de todas as altera√ß√µes anteriores nessa rede social, transmitindo, digamos, o Facebook ou o Vkontakte em cada atualiza√ß√£o. </font><font style="vertical-align: inherit;">No entanto, existem muitas pesquisas, a saber, o Full Dependency Tracking - essas s√£o redes sociais, para algumas situa√ß√µes realmente funcionam.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rastreamento de depend√™ncia expl√≠cito</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pr√≥ximo √© mais limitado. </font><font style="vertical-align: inherit;">Tamb√©m aqui √© considerada a transmiss√£o de informa√ß√µes, mas apenas as que claramente dependem. </font><font style="vertical-align: inherit;">O que depende do que, como regra, j√° √© determinado pelo Aplicativo. </font><font style="vertical-align: inherit;">Quando os dados s√£o replicados, apenas as respostas s√£o retornadas quando uma solicita√ß√£o √© feita, quando as depend√™ncias anteriores foram atendidas, ou seja, mostradas. </font><font style="vertical-align: inherit;">Essa √© a ess√™ncia de como a consist√™ncia causal funciona. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y_/jc/mw/y_jcmwt2w-vqj9guslui0wl8vgi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ela v√™ que o registro 5 depende dos registros 1, 2, 3, 4 - respectivamente, espera antes que o cliente obtenha acesso √†s altera√ß√µes feitas pelo decreto de acesso de Penny quando todas as altera√ß√µes anteriores j√° tiverem passado para o banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso tamb√©m n√£o nos conv√©m, porque de qualquer maneira h√° muita informa√ß√£o, e isso desacelerar√°. </font><font style="vertical-align: inherit;">Existe uma abordagem diferente ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lamport Clock</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles s√£o muito antigos. O Lamport Clock implica que essas depend√™ncias sejam recolhidas em uma fun√ß√£o escalar chamada Lamport Clock. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma fun√ß√£o escalar √© algum n√∫mero abstrato. Muitas vezes chamado de tempo l√≥gico. Em cada evento, esse contador aumenta. O contador, atualmente conhecido pelo processo, envia cada mensagem. √â claro que os processos podem estar fora de sincronia, eles podem ter tempos completamente diferentes. No entanto, o sistema de alguma forma equilibra o rel√≥gio com essas mensagens. O que acontece nesse caso?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dividi esse grande fragmento em dois para que fique claro: os amigos podem viver em um n√≥ que cont√©m uma parte da cole√ß√£o e o Feed pode viver em outro n√≥ que cont√©m uma parte dessa cole√ß√£o. Est√° claro como eles podem sair da curva? Primeiro, o Feed diz "Replicado" e depois Amigos. Se o sistema n√£o fornecer garantias de que o Feed n√£o ser√° mostrado at√© que as depend√™ncias de Friends na cole√ß√£o Friends tamb√©m sejam entregues, teremos apenas uma situa√ß√£o que mencionei. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ v√™ como o tempo do contador logicamente aumenta no Feed:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gv/pz/vw/gvpzvwwxqonuthkwv6j2ez0fruc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, a propriedade principal dessa consist√™ncia causal e de rel√≥gio de Lamport (explicada atrav√©s do rel√≥gio de Lamport) √© a seguinte: se tivermos os eventos A e B e o evento B depender do evento A *, ent√£o o LogicalTime do evento A ser√° menor do que o LogicalTime do Evento B. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* √Äs vezes eles at√© dizem que A aconteceu antes de B, ou seja, A aconteceu antes de B - esse √© um tipo de relacionamento que ordena parcialmente todo o conjunto de eventos que geralmente acontecem.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O contr√°rio est√° errado. Esta √© realmente uma das principais desvantagens do Lamport Clock - pedido parcial. Existe um conceito de eventos simult√¢neos, ou seja, eventos nos quais nem (A aconteceu antes de B) nem (A aconteceu antes de B). Um exemplo √© a adi√ß√£o paralela de Leonard a amigos de outra pessoa (nem mesmo Leonard, mas Sheldon, por exemplo).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa √© a propriedade frequentemente usada ao trabalhar com rel√≥gios Lamport: eles examinam a fun√ß√£o exatamente e tiram uma conclus√£o disso - talvez esses eventos sejam dependentes. </font><font style="vertical-align: inherit;">Porque em uma dire√ß√£o isso √© verdade: se LogicalTime A for menor que LogicalTime B, B n√£o poder√° ocorrer antes de A; </font><font style="vertical-align: inherit;">e se mais, ent√£o talvez.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rel√≥gio de vetor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O desenvolvimento l√≥gico dos rel√≥gios Lamport √© o Vector Clock. Eles diferem em que cada n√≥ aqui cont√©m seu pr√≥prio rel√≥gio separado e s√£o transmitidos como um vetor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, voc√™ v√™ que o √≠ndice zero do vetor √© respons√°vel pelo Feed e o primeiro √≠ndice do vetor √© para Friends (cada um desses n√≥s). E agora eles aumentar√£o: o √≠ndice zero do "Feed" aumenta ao gravar - 1, 2, 3: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cv/xm/cd/cvxmcdiz_dgbjsu7elnj3xt2hcc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como √© o rel√≥gio vetorial melhor? O fato de que eles podem descobrir quais eventos s√£o simult√¢neos e quando ocorrem em diferentes n√≥s. Isso √© muito importante para um sistema de sharding como o MongoBD. No entanto, n√£o escolhemos isso, embora seja uma coisa maravilhosa, e funcione muito bem, e provavelmente nos sirva ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se temos 10 mil fragmentos, n√£o podemos transferir 10 mil componentes, mesmo se compactar, pensamos em outra coisa - mesmo assim, a carga √∫til ser√° v√°rias vezes menor que o volume de todo esse vetor. </font><font style="vertical-align: inherit;">Portanto, moendo nossos cora√ß√µes e dentes, abandonamos essa abordagem e passamos para outra.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chave inglesa TrueTime. </font><font style="vertical-align: inherit;">Rel√≥gio at√¥mico</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu disse que haver√° uma hist√≥ria sobre a Spanner. Isso √© legal, no s√©culo XXI: rel√≥gios at√¥micos, sincroniza√ß√£o GPS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que ideia? O Spanner √© um sistema do Google que recentemente se tornou dispon√≠vel para as pessoas (elas anexaram o SQL a ele). Cada transa√ß√£o tem um carimbo de data / hora. Como a hora √© sincronizada *, cada evento pode ser atribu√≠do a uma hora espec√≠fica - o rel√≥gio at√¥mico possui um tempo de espera, ap√≥s o qual √© garantido que outra hora ocorrer√°. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zn/vw/e3/znvwe3zwpqvjhsx-qglxpbqen9g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, apenas gravando no banco de dados e aguardando um certo per√≠odo de tempo, a serializa√ß√£o do evento √© garantida automaticamente. Eles t√™m o modelo de consist√™ncia mais forte, que em princ√≠pio pode ser imaginado - √© Consist√™ncia Externa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Esse √© o principal problema dos rel√≥gios Lampart - eles nunca s√£o s√≠ncronos em sistemas distribu√≠dos. </font><font style="vertical-align: inherit;">Eles podem divergir, mesmo com o NTP, eles ainda n√£o funcionam muito bem. </font><font style="vertical-align: inherit;">"Spanner" possui um rel√≥gio at√¥mico e a sincroniza√ß√£o parece ser microssegundos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que n√£o escolhemos? </font><font style="vertical-align: inherit;">N√£o assumimos que nossos usu√°rios tenham um rel√≥gio at√¥mico embutido. </font><font style="vertical-align: inherit;">Quando eles aparecerem, sendo incorporados a todos os laptops, haver√° algum tipo de sincroniza√ß√£o GPS super bacana - ent√£o sim ... Enquanto isso, o melhor poss√≠vel √© a Amazon, esta√ß√µes base para fan√°ticos ... Portanto, usamos outros rel√≥gios.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rel√≥gio h√≠brido</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â isso que realmente marca o ‚ÄúMongoBD‚Äù, garantindo a consist√™ncia causal. </font><font style="vertical-align: inherit;">O que eles s√£o h√≠bridos? </font><font style="vertical-align: inherit;">Um h√≠brido √© um valor escalar, mas consiste em dois componentes:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hi/wz/uv/hiwzuvz-czbmb52b9iypojrr0_u.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primeira √© a era unix (quantos segundos se passaram desde o "come√ßo do mundo dos computadores").</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O segundo √© um incremento, tamb√©m um int n√£o assinado de 32 bits.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© tudo, na verdade. </font><font style="vertical-align: inherit;">Existe uma abordagem desse tipo: a parte respons√°vel pela hora √© sincronizada com o rel√≥gio o tempo todo; </font><font style="vertical-align: inherit;">toda vez que ocorre uma atualiza√ß√£o, essa parte √© sincronizada com o rel√≥gio e a hora √© sempre mais ou menos correta, e o incremento permite distinguir entre os eventos que ocorreram ao mesmo tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que isso √© importante para o MongoBD? </font><font style="vertical-align: inherit;">Como ele permite que voc√™ fa√ßa algum tipo de restaura√ß√£o de backup em um determinado momento, ou seja, o evento √© indexado por tempo. </font><font style="vertical-align: inherit;">Isso √© importante quando alguns eventos s√£o necess√°rios; </font><font style="vertical-align: inherit;">para um banco de dados, eventos s√£o altera√ß√µes no banco de dados que ocorrem em determinados momentos no tempo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou apenas dizer o motivo mais importante (por favor, n√£o conte a ningu√©m)! </font><font style="vertical-align: inherit;">Fizemos isso porque os dados ordenados e indexados no MongoDB OpLog s√£o assim. </font><font style="vertical-align: inherit;">O OpLog √© uma estrutura de dados que cont√©m absolutamente todas as altera√ß√µes no banco de dados: elas primeiro acessam o OpLog e depois s√£o aplicadas ao pr√≥prio armazenamento, no caso de uma data ou fragmento replicado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa foi a principal raz√£o. </font><font style="vertical-align: inherit;">Ainda, existem tamb√©m requisitos pr√°ticos para o desenvolvimento do banco de dados, o que significa que ele deve ser simples - h√° pouco c√≥digo, o m√≠nimo poss√≠vel de coisas quebradas que precisam ser reescritas e testadas. </font><font style="vertical-align: inherit;">O fato de nossos oplogs terem sido indexados por um rel√≥gio h√≠brido ajudou muito e nos permitiu fazer a escolha certa. </font><font style="vertical-align: inherit;">Realmente valeu a pena e de alguma forma funcionou magicamente, no primeiro prot√≥tipo. </font><font style="vertical-align: inherit;">Foi muito legal!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sincroniza√ß√£o do rel√≥gio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem v√°rios m√©todos de sincroniza√ß√£o descritos na literatura cient√≠fica. </font><font style="vertical-align: inherit;">Estou falando de sincroniza√ß√£o quando temos dois shards diferentes. </font><font style="vertical-align: inherit;">Se houver um conjunto de r√©plicas, n√£o h√° necessidade de sincroniza√ß√£o: √© um "mestre √∫nico"; </font><font style="vertical-align: inherit;">temos um OpLog no qual todas as altera√ß√µes entram - nesse caso, tudo j√° est√° ordenado sequencialmente no pr√≥prio "Oplog". </font><font style="vertical-align: inherit;">Mas se tivermos dois shards diferentes, a sincroniza√ß√£o de tempo √© importante aqui. </font><font style="vertical-align: inherit;">Aqui os rel√≥gios vetoriais ajudaram mais! </font><font style="vertical-align: inherit;">Mas n√≥s n√£o os temos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ei/kq/bk/eikqbkbbzrsdquzxjxlzayc81qq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo s√£o os batimentos card√≠acos. </font><font style="vertical-align: inherit;">Voc√™ pode trocar alguns sinais que ocorrem a cada unidade de tempo. </font><font style="vertical-align: inherit;">Mas o Hartbits √© muito lento, n√£o podemos fornecer lat√™ncia para o nosso cliente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O verdadeiro tempo √©, obviamente, uma coisa maravilhosa. </font><font style="vertical-align: inherit;">Mas, novamente, este √© provavelmente o futuro ... Embora o Atlas j√° possa ser feito, j√° existem sincronizadores de tempo "amaz√¥nicos" r√°pidos. </font><font style="vertical-align: inherit;">Mas n√£o estar√° dispon√≠vel para todos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fofocar √© quando todas as mensagens incluem tempo. </font><font style="vertical-align: inherit;">Isto √© aproximadamente o que usamos. </font><font style="vertical-align: inherit;">Cada mensagem entre n√≥s, um driver, um roteador de n√≥s de dados, absolutamente tudo para o MongoDB s√£o alguns elementos, componentes de banco de dados que cont√™m horas que fluem. </font><font style="vertical-align: inherit;">Onde quer que eles tenham o significado de tempo h√≠brido, ele √© transmitido. </font><font style="vertical-align: inherit;">64 bits? </font><font style="vertical-align: inherit;">Permite, √© poss√≠vel.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como tudo isso funciona juntos?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, olho para um conjunto de r√©plicas para torn√°-lo um pouco mais f√°cil. Existem Prim√°rio e Secund√°rio. O secund√°rio faz replica√ß√£o e nem sempre √© totalmente sincronizado com o prim√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° uma inser√ß√£o (inser√ß√£o) nas "Prim√°rias" com um determinado valor de tempo. Esta inser√ß√£o aumenta o contador interno em 11, se for o m√°ximo. Ou ir√° verificar os valores do rel√≥gio e sincronizar com o rel√≥gio, se o rel√≥gio for maior. Isso permite que voc√™ classifique por tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois que ele grava, um momento importante ocorre. As horas est√£o em "MongoDB" e s√£o incrementadas apenas se gravadas no "Oplog". Este √© um evento que altera o estado do sistema. Absolutamente em todos os artigos cl√°ssicos, um evento √© considerado uma mensagem que entra em um n√≥: uma mensagem chegou - isso significa que o sistema mudou de estado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso se deve ao fato de que durante o estudo n√£o √© totalmente poss√≠vel entender como essa mensagem ser√° interpretada. Temos certeza de que, se n√£o estiver refletido no "Oplog", n√£o ser√° interpretado de forma alguma, e somente a entrada no "Oplog" √© uma altera√ß√£o no estado do sistema. Isso simplifica tudo para n√≥s: o modelo simplifica e nos permite organizar na estrutura de um conjunto de r√©plicas e muitas outras coisas √∫teis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ele retorna o valor que j√° foi registrado no "Oplog" - sabemos que no "Oplog" esse valor j√° est√°, e seu tempo √© 12. Agora, digamos, a leitura come√ßa em outro n√≥ (Secund√°rio) e j√° transfere o pr√≥prio afterClusterTime mensagem. Ele diz: ‚ÄúPreciso de tudo o que aconteceu depois de pelo menos 12 ou durante doze‚Äù (veja a figura acima).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© chamado de causal consistente (CAT). Existe tal conceito na teoria que √© uma fatia de tempo consistente em si mesma. Nesse caso, podemos dizer que esse √© o estado do sistema que foi observado no tempo 12. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora n√£o h√° nada aqui, porque parece imitar a situa√ß√£o em que o Secund√°rio precisa replicar dados do Prim√°rio. Ele est√° esperando ... E agora os dados chegaram - retornam esses valores. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a1/q7/3q/a1q73qclyk9sn567b2x8szr_ejm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â assim que tudo funciona. Quase.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que significa "quase"? Vamos supor que haja algu√©m que tenha lido e entendido como tudo isso funciona. Percebi que toda vez que o ClusterTime ocorre, ele atualiza o rel√≥gio l√≥gico interno e, em seguida, o pr√≥ximo registro aumenta em um. Esta fun√ß√£o ocupa 20 linhas. Suponha que essa pessoa transmita o maior n√∫mero poss√≠vel de 64 bits, menos um. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que menos um? Como o rel√≥gio interno √© substitu√≠do por esse valor (obviamente, esse √© o maior poss√≠vel e mais que o hor√°rio atual), haver√° uma entrada no "Olog" e o rel√≥gio aumentar√° em mais um - e j√° haver√° um valor m√°ximo (simplesmente existem todas as unidades, n√£o h√° para onde ir , entradas n√£o assinadas).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â claro que depois disso o sistema se torna completamente inacess√≠vel por nada. </font><font style="vertical-align: inherit;">S√≥ pode ser descarregado, limpo - muito trabalho manual. </font><font style="vertical-align: inherit;">Disponibilidade total: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/lz/fs/iulzfslzcst3tn9c-qpouy9zqsk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
al√©m disso, se isso for replicado em outro lugar, o cluster inteiro simplesmente ficar√° parado. </font><font style="vertical-align: inherit;">Uma situa√ß√£o absolutamente inaceit√°vel que qualquer um pode organizar de forma r√°pida e simples! </font><font style="vertical-align: inherit;">Portanto, consideramos esse momento como um dos mais importantes. </font><font style="vertical-align: inherit;">Como evit√°-lo?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nossa maneira √© assinar clusterTime</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por isso, √© transmitido na mensagem (antes do texto azul). Mas tamb√©m come√ßamos a gerar uma assinatura (texto azul): A </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zg/9r/iu/zg9riuabqzdlnw9dwttrwkwzkmi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
assinatura √© gerada por uma chave que √© armazenada dentro do banco de dados, dentro do per√≠metro protegido; √© gerado, atualizado (os usu√°rios n√£o veem nada). O hash √© gerado e cada mensagem √© assinada durante a cria√ß√£o e validada ap√≥s o recebimento. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Provavelmente, surge a pergunta nas pessoas: "Quanto isso desacelera?" Eu disse que deveria funcionar rapidamente, principalmente na aus√™ncia desse recurso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que significa usar a consist√™ncia causal neste caso? Isso mostrar√° o par√¢metro afterClusterTime. E sem ele, simplesmente passar√° valores de qualquer maneira. A fofoca, desde a vers√£o 3.6, sempre funciona.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se deixarmos a gera√ß√£o constante de assinaturas, isso reduzir√° a velocidade do sistema, mesmo na aus√™ncia de recursos, o que n√£o atende √†s nossas abordagens e requisitos. </font><font style="vertical-align: inherit;">E o que fizemos?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fa√ßa r√°pido!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma coisa bastante simples, mas o truque √© interessante - vou compartilhar, talvez algu√©m esteja interessado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos um hash que armazena dados assinados. </font><font style="vertical-align: inherit;">Todos os dados passam pelo cache. </font><font style="vertical-align: inherit;">O cache n√£o assina especificamente a hora, mas o intervalo. </font><font style="vertical-align: inherit;">Quando um determinado valor chega, geramos um intervalo, mascaramos os √∫ltimos 16 bits e assinamos esse valor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/ml/3a/s8ml3aaec2pj5xl8t0zvkrp7iik.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ao receber essa assinatura, agilizamos o sistema (condicionalmente) em 65 mil vezes. </font><font style="vertical-align: inherit;">Funciona muito bem: quando eles fizeram os experimentos, o tempo em que tivemos uma atualiza√ß√£o consistente foi realmente reduzido l√° em 10 mil vezes. </font><font style="vertical-align: inherit;">√â claro que, quando est√£o em desacordo, isso n√£o funciona. </font><font style="vertical-align: inherit;">Mas, na maioria dos casos pr√°ticos, isso funciona. </font><font style="vertical-align: inherit;">A combina√ß√£o da assinatura Range com a assinatura resolveu o problema de seguran√ßa.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que aprendemos?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Li√ß√µes que aprendemos com isso:</font></font><br>
<br>
<ul>
<li>  , , ,       .     -  ( ,      . .),  , .   ,       ,    ,   .        ‚Äì   .<br>
<br>
,     ,      (¬´¬ª, ) ‚Äì      .     ?    .     ,      .   ‚Äì   ,   .</li>
<li>    .  ,        ¬´¬ª     ,   ,  ,      availability, latency  .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A √∫ltima √© que tivemos que considerar id√©ias diferentes e combinar v√°rios artigos geralmente diferentes em uma √∫nica abordagem. </font><font style="vertical-align: inherit;">A id√©ia de assinar, por exemplo, veio de um artigo que examinou o protocolo Paxos, que para Faylor n√£o bizantino dentro do protocolo de autoriza√ß√£o, para bizantinos fora do protocolo de autoriza√ß√£o ... Em geral, foi exatamente isso que fizemos no final. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o h√° absolutamente nada de novo aqui! </font><font style="vertical-align: inherit;">Mas assim que misturamos tudo ... √â como dizer que a receita da salada Olivier n√£o faz sentido, porque ovos, maionese e pepino j√° surgiram ... √â a mesma hist√≥ria.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/6o/pc/q8/6opcq8ew4bcry9qnt0lsdlasflo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobre isso eu vou terminar. </font><font style="vertical-align: inherit;">Obrigado!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quest√µes</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergunta da audi√™ncia (doravante - B):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Obrigado, Michael, pelo relat√≥rio! O tema do tempo √© interessante. Voc√™ est√° usando fofocas. Eles disseram que todo mundo tem seu pr√≥prio tempo, todo mundo sabe o hor√°rio local. Pelo que entendi, temos um driver - pode haver muitos clientes com drivers, planejadores de consulta tamb√©m, muitos fragmentos ... Mas para que serve o sistema se de repente tivermos uma discrep√¢ncia: algu√©m decide que ele √© por um minuto √† frente, algu√©m - um minuto atr√°s? Onde nos encontraremos? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - √ìtima pergunta mesmo! Eu s√≥ queria dizer sobre estilha√ßos. Se eu entendi a pergunta corretamente, temos a seguinte situa√ß√£o: existe o fragmento 1 e o fragmento 2, a leitura ocorre nesses dois fragmentos - eles t√™m uma discrep√¢ncia, n√£o interagem entre si, porque o tempo que eles conhecem √© diferente, especialmente o tempo em que Eles existem em oplogs.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que o shard 1 tenha feito um milh√£o de registros, o shard 2 n√£o fez nada e a solicita√ß√£o ocorreu em dois shards. E o primeiro tem afterClusterTime mais de um milh√£o. Em tal situa√ß√£o, como expliquei, o fragmento 2 nunca responder√°. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Eu queria saber como eles s√£o sincronizados e escolhem um hor√°rio l√≥gico? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Muito f√°cil de sincronizar. Shard, quando afterClusterTime chega at√© ele, e ele n√£o encontra o tempo no "Catch" - inicia n√£o aprovado. Ou seja, ele levanta as m√£os para esse valor com as m√£os. Isso significa que n√£o h√° eventos correspondentes a essa consulta. Ele cria esse evento artificialmente e, assim, torna-se o Causal Consistente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - E se, depois disso, alguns outros eventos perdidos em algum lugar da rede ainda vierem a ele? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- O fragmento est√° t√£o arranjado que n√£o vir√° mais, pois √© um √∫nico mestre. Se ele j√° gravou, eles n√£o vir√£o, mas ser√£o depois. N√£o pode acontecer que em algum lugar algo esteja preso, ele n√£o escrever√° e ent√£o esses eventos chegaram - e a consist√™ncia causal foi violada. Quando ele n√£o escreve, todos t√™m que vir em seguida (ele esperar√° por eles). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t2/wb/oo/t2wboofhfs7qpepqz8zwsm1o0u4.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Eu tenho algumas perguntas sobre as falas. A consist√™ncia causal pressup√µe que h√° uma determinada fila de a√ß√µes que precisam ser executadas. O que acontece se perdermos um pacote? Ent√£o o dia 10 passou, o dia 11 ... o dia 12 desapareceu, e todo mundo est√° esperando que isso seja cumprido. E de repente nosso carro morreu, n√£o podemos fazer nada. Existe um comprimento m√°ximo da fila que se acumula antes de ser executado? Que falha fatal ocorre quando um estado √© perdido? Al√©m disso, se escrevermos que existe algum tipo de estado anterior, devemos come√ßar de alguma forma? E eles n√£o se afastaram dele! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Tamb√©m √© uma pergunta maravilhosa! O que estamos fazendo? O MongoDB tem o conceito de registros de quorum, l√™ o quorum. Quando uma mensagem pode desaparecer? Quando o registro n√£o √© quorum ou quando a leitura n√£o √© quorum (algum lixo tamb√©m pode grudar). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com rela√ß√£o √† consist√™ncia causal, realizamos um grande teste experimental, que resultou no fato de que, quando a grava√ß√£o e a leitura n√£o s√£o quorum, ocorrem viola√ß√µes da consist√™ncia causal. Exatamente o que voc√™ diz!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossa dica: use pelo menos a leitura de quorum ao usar a consist√™ncia causal. Nesse caso, nada ser√° perdido, mesmo se o registro de quorum for perdido ... Essa √© uma situa√ß√£o ortogonal: se o usu√°rio n√£o quiser que os dados sejam perdidos, voc√™ precisar√° usar o registro de quorum. A consist√™ncia causal n√£o garante durabilidade. A garantia de durabilidade √© fornecida pela replica√ß√£o e maquinaria associada √† replica√ß√£o. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Quando criamos uma inst√¢ncia que o sharding faz por n√≥s (n√£o mestre, mas escravo, respectivamente), ele se baseia no tempo unix de sua pr√≥pria m√°quina ou no tempo do "mestre"; sincronizado pela primeira vez ou periodicamente? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Agora vou deixar claro. Fragmento (ou seja, parti√ß√£o horizontal) - sempre h√° Prim√°rio. E em um fragmento, pode haver um "mestre" e pode haver r√©plicas. Mas o shard sempre suporta grava√ß√£o, porque deve suportar um determinado dom√≠nio (o Primary est√° no shard). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ou seja, tudo depende puramente do "mestre"? Sempre use o tempo "mestre"? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sim. Pode-se dizer figurativamente: o rel√≥gio est√° correndo quando h√° uma grava√ß√£o no "master", no "Oplog". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Temos um cliente que se conecta e ele n√£o precisa saber nada sobre tempo? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Em geral, voc√™ n√£o precisa saber de nada! Se falamos sobre como isso funciona no cliente: no cliente, quando ele deseja usar a consist√™ncia causal, ele precisa abrir uma sess√£o. Agora est√° tudo l√°: ambas as transa√ß√µes na sess√£o e recuperar direitos ... Uma sess√£o √© uma ordena√ß√£o de eventos l√≥gicos que ocorrem com um cliente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se ele abrir esta sess√£o e disser que deseja consist√™ncia causal (se por padr√£o a sess√£o suportar consist√™ncia causal), tudo funcionar√° automaticamente. O motorista lembra desse tempo e aumenta quando recebe uma nova mensagem. Ele lembra qual resposta retornou a anterior do servidor que retornou os dados. A solicita√ß√£o a seguir conter√° afterCluster ("o tempo √© maior que isso").</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O cliente n√£o precisa saber absolutamente nada! Isso √© absolutamente opaco para ele. Se as pessoas usam esses recursos, o que posso fazer? Primeiro, voc√™ pode ler com seguran√ßa os secund√°rios: voc√™ pode escrever no Prim√°rio e ler os secund√°rios geograficamente replicados e garantir que funcione. Ao mesmo tempo, as sess√µes que foram gravadas na Prim√°ria podem ser transferidas at√© para a Secund√°ria, ou seja, voc√™ pode usar n√£o uma sess√£o, mas v√°rias. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - O t√≥pico Consist√™ncia eventual est√° fortemente relacionado √† nova camada de ci√™ncia de computa√ß√£o - tipos de dados CRDT (tipos de dados replicados sem conflitos). Voc√™ considerou a integra√ß√£o desses tipos de dados no banco de dados e o que voc√™ pode dizer sobre isso? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Boa pergunta! O CRDT faz sentido para conflitos de grava√ß√£o: no MongoDB - mestre √∫nico. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Eu tenho uma pergunta dos devops. No mundo real, existem situa√ß√µes jesu√≠tas quando ocorre a falha bizantina, e as pessoas m√°s dentro do per√≠metro protegido come√ßam a aderir ao protocolo, enviam pacotes de artesanato de uma maneira especial? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8d/m3/p5/8dm3p5em6rsqsv2ojzy-vdylffg.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pessoas m√°s dentro do per√≠metro s√£o como um cavalo de Tr√≥ia! Pessoas m√°s dentro do per√≠metro podem fazer muitas coisas ruins. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - √â claro que deixar um buraco no servidor, grosso modo, atrav√©s do qual voc√™ pode enfiar o zool√≥gico de elefantes e recolher todo o cluster para sempre ... Levar√° tempo para a recupera√ß√£o manual ... Isto √©, para dizer o m√≠nimo, errado. Por outro lado, isso √© curioso: na vida real, na pr√°tica, h√° situa√ß√µes em que ataques internos naturalmente semelhantes ocorrem? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Como raramente encontro viola√ß√µes de seguran√ßa na vida real, n√£o posso dizer - talvez elas aconte√ßam. Mas se falamos sobre filosofia de desenvolvimento, pensamos assim: temos um per√≠metro que fornece aos indiv√≠duos que fazem seguran√ßa - √© um castelo, um muro; e dentro do per√≠metro voc√™ pode fazer o que quiser. √â claro que existem usu√°rios com a capacidade de procurar apenas e h√° usu√°rios com a capacidade de apagar o diret√≥rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dependendo dos direitos, o dano que os usu√°rios podem causar pode ser um mouse ou um elefante. √â claro que um usu√°rio com todos os direitos pode fazer qualquer coisa. Um usu√°rio sem direitos amplos de dano pode causar significativamente menos. Em particular, ele n√£o pode quebrar o sistema. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- No per√≠metro seguro, algu√©m escalou para formar protocolos inesperados para o servidor, a fim de configurar o servidor com c√¢ncer e, se voc√™ tiver sorte, todo o cluster ... Isso acontece t√£o "bem"? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Eu nunca ouvi falar dessas coisas. O fato de que dessa maneira voc√™ pode preencher o servidor n√£o √© um segredo. Para preencher por dentro, sendo do protocolo, sendo um usu√°rio autorizado que pode escrever algo assim em uma mensagem ... Na verdade, √© imposs√≠vel, porque de qualquer maneira ser√° verificado. √â poss√≠vel desativar essa autentica√ß√£o para usu√°rios que n√£o desejam - este √© o problema deles; grosso modo, eles mesmos destru√≠ram as paredes e voc√™ pode amontoar um elefante ali, o que vai atropelar ... Em geral, voc√™ pode se vestir como reparador, venha busc√°-lo! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Obrigado pelo relat√≥rio. </font><font style="vertical-align: inherit;">Sergey (Yandex). </font><font style="vertical-align: inherit;">Em "Mong", existe uma constante que limita o n√∫mero de membros votantes no conjunto de r√©plicas, e essa constante √© 7 (sete). </font><font style="vertical-align: inherit;">Por que isso √© uma constante? </font><font style="vertical-align: inherit;">Por que isso n√£o √© algum tipo de par√¢metro? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Conjunto de r√©plicas tamb√©m temos 40 n√≥s. </font><font style="vertical-align: inherit;">Sempre existe uma maioria. </font><font style="vertical-align: inherit;">N√£o sei qual vers√£o ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - No conjunto de r√©plicas, voc√™ pode executar membros sem direito a voto, mas votando - no m√°ximo 7. Como, nesse caso, ocorrer√° o desligamento se o conjunto de r√©plicas for puxado para tr√™s datacenters? </font><font style="vertical-align: inherit;">Um data center pode desligar-se facilmente e outra m√°quina cai. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Isso j√° est√° um pouco fora do escopo do relat√≥rio. </font><font style="vertical-align: inherit;">Essa √© uma pergunta comum. </font><font style="vertical-align: inherit;">Talvez ent√£o eu possa contar a ele.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/cr/ga/9tcrgaodiufisllhrktf_5iok_a.jpeg"><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/UnAprFMX1d4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pouco de publicidade :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado por ficar com a gente. Voc√™ gosta dos nossos artigos? Deseja ver materiais mais interessantes? Ajude-nos fazendo um pedido ou recomendando aos seus amigos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS na nuvem para desenvolvedores a partir de US $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anal√≥gico exclusivo de servidores de n√≠vel b√°sico que foi inventado por n√≥s para voc√™: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toda a verdade sobre o VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10 GB DDR4 480 GB SSD 1 Gbps de US $ 19 ou como dividir o servidor?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 vezes mais barato no data center Equinix Tier IV em Amsterd√£?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Somente n√≥s temos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 TVs Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV a partir de US $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na Holanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - a partir de US $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leia sobre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como criar um pr√©dio de infraestrutura. </font><font style="vertical-align: inherit;">classe c usando servidores Dell R730xd E5-2650 v4 que custam 9.000 euros por um centavo?</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487626/index.html">Como os sensores de estacionamento funcionam e como engan√°-lo</a></li>
<li><a href="../pt487628/index.html">Diagn√≥stico do envelhecimento com base em 9 caracter√≠sticas dos sinais de envelhecimento</a></li>
<li><a href="../pt487630/index.html">O algoritmo mais simples para criar um quebra-cabe√ßa de campo (parte 1)</a></li>
<li><a href="../pt487632/index.html">‚ÄúColegas, respirem mais silenciosamente‚Äù: por que o barulho do escrit√≥rio nos deixa loucos - discutimos pesquisas</a></li>
<li><a href="../pt487636/index.html">APIs para as quais finalmente vale a pena atualizar do Java 8. Parte 2</a></li>
<li><a href="../pt487640/index.html">Teste de automa√ß√£o de jogos</a></li>
<li><a href="../pt487644/index.html">Obtendo cota√ß√µes de a√ß√µes usando Python</a></li>
<li><a href="../pt487646/index.html">Estrela de n√™utrons do tubo de ensaio. Sonoluminesc√™ncia</a></li>
<li><a href="../pt487648/index.html">Poderia ser outro framework javascript.</a></li>
<li><a href="../pt487650/index.html">Espere no SDK e n√£o d√™ errado: o problema dos pergaminhos aninhados no BottomSheetBehavior</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>